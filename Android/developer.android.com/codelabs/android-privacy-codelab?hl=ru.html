








<!doctype html>
<html 
      lang="en"
      dir="ltr">
  <head>
    <meta name="google-signin-client-id" content="721724668570-nbkv1cfusk7kk4eni4pjvepaus73b13t.apps.googleusercontent.com">
    <meta name="google-signin-scope"
          content="profile email https://www.googleapis.com/auth/developerprofiles https://www.googleapis.com/auth/developerprofiles.award">
    <meta property="og:site_name" content="Android Developers">
    <meta property="og:type" content="website"><meta name="theme-color" content="#34a853"><meta charset="utf-8">
    <meta content="IE=Edge" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    

    <link rel="manifest" href="/_pwa/android/manifest.json"
          crossorigin="use-credentials">
    <link rel="preconnect" href="//www.gstatic.com" crossorigin>
    <link rel="preconnect" href="//fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="//fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="//apis.google.com" crossorigin>
    <link rel="preconnect" href="//www.google-analytics.com" crossorigin><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Google+Sans:400,500,600,700|Google+Sans+Text:400,400italic,500,500italic,600,600italic,700,700italic|Roboto+Mono:400,500,700&display=swap">
      <link rel="stylesheet"
            href="//fonts.googleapis.com/css2?family=Material+Icons&family=Material+Symbols+Outlined&display=block"><link rel="stylesheet" href="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/css/app.css">
      
        <link rel="stylesheet" href="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/css/dark-theme.css" disabled>
      <link rel="shortcut icon" href="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/images/favicon.svg">
    <link rel="apple-touch-icon" href="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/images/touchicon-180.png"><link rel="canonical" href="https://developer.android.com/codelabs/android-privacy-codelab"><link rel="search" type="application/opensearchdescription+xml"
            title="Android Developers" href="https://developer.android.com/s/opensearch.xml">
      <link rel="alternate" hreflang="en"
          href="https://developer.android.com/codelabs/android-privacy-codelab" /><link rel="alternate" hreflang="x-default" href="https://developer.android.com/codelabs/android-privacy-codelab" /><link rel="alternate" hreflang="zh-Hans"
          href="https://developer.android.com/codelabs/android-privacy-codelab?hl=zh-cn" /><link rel="alternate" hreflang="zh-Hant"
          href="https://developer.android.com/codelabs/android-privacy-codelab?hl=zh-tw" /><link rel="alternate" hreflang="fr"
          href="https://developer.android.com/codelabs/android-privacy-codelab?hl=fr" /><link rel="alternate" hreflang="id"
          href="https://developer.android.com/codelabs/android-privacy-codelab?hl=id" /><link rel="alternate" hreflang="ja"
          href="https://developer.android.com/codelabs/android-privacy-codelab?hl=ja" /><link rel="alternate" hreflang="ko"
          href="https://developer.android.com/codelabs/android-privacy-codelab?hl=ko" /><link rel="alternate" hreflang="pt-BR"
          href="https://developer.android.com/codelabs/android-privacy-codelab?hl=pt-br" /><link rel="alternate" hreflang="es-419"
          href="https://developer.android.com/codelabs/android-privacy-codelab?hl=es-419" /><link rel="alternate" hreflang="vi"
          href="https://developer.android.com/codelabs/android-privacy-codelab?hl=vi" /><title>Android Privacy Codelab &nbsp;|&nbsp; Android Developers</title>

<meta property="og:title" content="Android Privacy Codelab &nbsp;|&nbsp; Android Developers"><meta name="description" content="Android has released many individual privacy features over the past few releases, and we are excited for you to adopt them in your apps! This codelab will seek to tie individual privacy features together and show the developer how they can learn about their app’s access to private user data and adopt privacy best practices in an existing, running app.">
  <meta property="og:description" content="Android has released many individual privacy features over the past few releases, and we are excited for you to adopt them in your apps! This codelab will seek to tie individual privacy features together and show the developer how they can learn about their app’s access to private user data and adopt privacy best practices in an existing, running app."><meta property="og:url" content="https://developer.android.com/codelabs/android-privacy-codelab"><meta property="og:locale" content="en">
  
    
    
    
    
    
    
    
    
    
  

    
      <link rel="stylesheet" href="/extras.css"></head>
  <body class=""
        template="codelab"
        theme="android-theme"
        type="codelab"
        
        
        appearance
        
        layout="docs"
        
        
        
        
        display-toc
        pending>
  
    <devsite-progress type="indeterminate" id="app-progress"></devsite-progress>
  
  
    <a href="#main-content" class="skip-link button">
      
      Skip to main content
    </a>
    <section class="devsite-wrapper">
      <devsite-cookie-notification-bar></devsite-cookie-notification-bar><devsite-header role="banner">
  
    





















<div class="devsite-header--inner" data-nosnippet>
  <div class="devsite-top-logo-row-wrapper-wrapper">
    <div class="devsite-top-logo-row-wrapper">
      <div class="devsite-top-logo-row">
        <button type="button" id="devsite-hamburger-menu"
          class="devsite-header-icon-button button-flat material-icons gc-analytics-event"
          data-category="Site-Wide Custom Events"
          data-label="Navigation menu button"
          visually-hidden
          aria-label="Open menu">
        </button>
        
<div class="devsite-product-name-wrapper">

  <a href="/" class="devsite-site-logo-link gc-analytics-event"
   data-category="Site-Wide Custom Events" data-label="Site logo" track-type="globalNav"
   track-name="androidDevelopers" track-metadata-position="nav"
   track-metadata-eventDetail="nav">
  
  <picture>
    
    <source srcset="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/images/lockup-dark-theme.png"
            media="(prefers-color-scheme: dark)"
            class="devsite-dark-theme">
    
    <img src="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/images/lockup.png" class="devsite-site-logo" alt="Android Developers">
  </picture>
  
</a>



</div>
        <div class="devsite-top-logo-row-middle">
          <div class="devsite-header-upper-tabs">
            
           </div>
          
<devsite-search
    enable-signin
    enable-search
    enable-suggestions
      enable-query-completion
    
    enable-search-summaries
    
    tenant-name="Android Developers"
    
    
    
    
    
    >
  <form class="devsite-search-form" action="https://developer.android.com/s/results" method="GET">
    <div class="devsite-search-container">
      <button type="button"
              search-open
              class="devsite-search-button devsite-header-icon-button button-flat material-icons"
              
              aria-label="Open search"></button>
      <div class="devsite-searchbox">
        <input
          aria-activedescendant=""
          aria-autocomplete="list"
          
          aria-label="Search"
          aria-expanded="false"
          aria-haspopup="listbox"
          autocomplete="off"
          class="devsite-search-field devsite-search-query"
          name="q"
          
          placeholder="Search"
          role="combobox"
          type="text"
          value=""
          >
          <div class="devsite-search-image material-icons" aria-hidden="true">
            
              <svg class="devsite-search-ai-image" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <g clip-path="url(#clip0_6641_386)">
                    <path d="M19.6 21L13.3 14.7C12.8 15.1 12.225 15.4167 11.575 15.65C10.925 15.8833 10.2333 16 9.5 16C7.68333 16 6.14167 15.375 4.875 14.125C3.625 12.8583 3 11.3167 3 9.5C3 7.68333 3.625 6.15 4.875 4.9C6.14167 3.63333 7.68333 3 9.5 3C10.0167 3 10.5167 3.05833 11 3.175C11.4833 3.275 11.9417 3.43333 12.375 3.65L10.825 5.2C10.6083 5.13333 10.3917 5.08333 10.175 5.05C9.95833 5.01667 9.73333 5 9.5 5C8.25 5 7.18333 5.44167 6.3 6.325C5.43333 7.19167 5 8.25 5 9.5C5 10.75 5.43333 11.8167 6.3 12.7C7.18333 13.5667 8.25 14 9.5 14C10.6667 14 11.6667 13.625 12.5 12.875C13.35 12.1083 13.8417 11.15 13.975 10H15.975C15.925 10.6333 15.7833 11.2333 15.55 11.8C15.3333 12.3667 15.05 12.8667 14.7 13.3L21 19.6L19.6 21ZM17.5 12C17.5 10.4667 16.9667 9.16667 15.9 8.1C14.8333 7.03333 13.5333 6.5 12 6.5C13.5333 6.5 14.8333 5.96667 15.9 4.9C16.9667 3.83333 17.5 2.53333 17.5 0.999999C17.5 2.53333 18.0333 3.83333 19.1 4.9C20.1667 5.96667 21.4667 6.5 23 6.5C21.4667 6.5 20.1667 7.03333 19.1 8.1C18.0333 9.16667 17.5 10.4667 17.5 12Z" fill="#5F6368"/>
                  </g>
                <defs>
                <clipPath id="clip0_6641_386">
                <rect width="24" height="24" fill="white"/>
                </clipPath>
                </defs>
              </svg>
            
          </div>
          <div class="devsite-search-shortcut-icon-container" aria-hidden="true">
            <kbd class="devsite-search-shortcut-icon">/</kbd>
          </div>
      </div>
    </div>
  </form>
  <button type="button"
          search-close
          class="devsite-search-button devsite-header-icon-button button-flat material-icons"
          
          aria-label="Close search"></button>
</devsite-search>

        </div>

        

          

          

          <devsite-appearance-selector></devsite-appearance-selector>

          
<devsite-language-selector>
  <ul role="presentation">
    
    
    <li role="presentation">
      <a role="menuitem" lang="en"
        >English</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="de"
        >Deutsch</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="es_419"
        >Español – América Latina</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="fr"
        >Français</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="id"
        >Indonesia</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="pl"
        >Polski</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="pt_br"
        >Português – Brasil</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="vi"
        >Tiếng Việt</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="zh_cn"
        >中文 – 简体</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="zh_tw"
        >中文 – 繁體</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="ja"
        >日本語</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="ko"
        >한국어</a>
    </li>
    
  </ul>
</devsite-language-selector>


          
            <a class="devsite-header-link devsite-top-button button gc-analytics-event "
    href="https://developer.android.com/studio"
    data-category="Site-Wide Custom Events"
    data-label="Site header link: Android Studio"
    >
  Android Studio
</a>
          

        

        
          <devsite-user 
                        
                        
                          enable-profiles
                        
                        
                        id="devsite-user">
            
              
              <span class="button devsite-top-button" aria-hidden="true" visually-hidden>Sign in</span>
            
          </devsite-user>
        
        
        
      </div>
    </div>
  </div>



</div>



  
</devsite-header>
      <devsite-book-nav scrollbars hidden>
        
          





















<div class="devsite-book-nav-filter"
     hidden>
  <span class="filter-list-icon material-icons" aria-hidden="true"></span>
  <input type="text"
         placeholder="Filter"
         
         aria-label="Type to filter"
         role="searchbox">
  
  <span class="filter-clear-button hidden"
        data-title="Clear filter"
        aria-label="Clear filter"
        role="button"
        tabindex="0"></span>
</div>

<nav class="devsite-book-nav devsite-nav nocontent"
     aria-label="Side menu">
  <div class="devsite-mobile-header">
    <button type="button"
            id="devsite-close-nav"
            class="devsite-header-icon-button button-flat material-icons gc-analytics-event"
            data-category="Site-Wide Custom Events"
            data-label="Close navigation"
            aria-label="Close navigation">
    </button>
    <div class="devsite-product-name-wrapper">

  <a href="/" class="devsite-site-logo-link gc-analytics-event"
   data-category="Site-Wide Custom Events" data-label="Site logo" track-type="globalNav"
   track-name="androidDevelopers" track-metadata-position="nav"
   track-metadata-eventDetail="nav">
  
  <picture>
    
    <source srcset="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/images/lockup-dark-theme.png"
            media="(prefers-color-scheme: dark)"
            class="devsite-dark-theme">
    
    <img src="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/images/lockup.png" class="devsite-site-logo" alt="Android Developers">
  </picture>
  
</a>


</div>
  </div>

  <div class="devsite-book-nav-wrapper">
    <div class="devsite-mobile-nav-top">
      
        <ul class="devsite-nav-list">
          
          
    
    
<li class="devsite-nav-item">

  
  <a href="/studio"
    
       class="devsite-nav-title gc-analytics-event "
    

    
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Android Studio"
     track-type="navMenu"
     track-metadata-eventDetail="globalMenu"
     track-metadata-position="nav">
  
    <span class="devsite-nav-text" tooltip >
      Android Studio
   </span>
    
  
  </a>
  

</li>

  
          
        </ul>
      
    </div>
    
  </div>
</nav>
        
      </devsite-book-nav>
      <section id="gc-wrapper">
        <main role="main" id="main-content" class="devsite-main-content"
            
              
              has-sidebar
            >
          <div class="devsite-sidebar">
            <div class="devsite-sidebar-content">
                
                <devsite-toc class="devsite-nav"
                            role="navigation"
                            aria-label="On this page"
                            depth="1"
                            scrollbars
                  ></devsite-toc>
                <devsite-recommendations-sidebar class="nocontent devsite-nav">
                </devsite-recommendations-sidebar>
            </div>
          </div>
          <devsite-content>
            
              












<article class="devsite-article"><style>
      body {
        transition: opacity ease-in 0.2s;
      }

      body[unresolved] {
        opacity: 0;
        display: block;
        overflow: hidden;
        position: relative;
      }
      </style>
  
  
  
  
  

  <div class="devsite-article-meta nocontent" role="navigation">
    
    
    <ul class="devsite-breadcrumb-list"
  >
  
</ul>
    
  </div>
  
    <h1 class="devsite-page-title" tabindex="-1">
      Android Privacy Codelab<div class="devsite-actions" hidden data-nosnippet><devsite-feature-tooltip
      ack-key="AckCollectionsBookmarkTooltipDismiss"
      analytics-category="Site-Wide Custom Events"
      analytics-action-show="Callout Profile displayed"
      analytics-action-close="Callout Profile dismissed"
      analytics-label="Create Collection Callout"
      class="devsite-page-bookmark-tooltip nocontent"
      dismiss-button="true"
      id="devsite-collections-dropdown"
      
      dismiss-button-text="Dismiss"

      
      close-button-text="Got it">

    
    
      <devsite-bookmark></devsite-bookmark>
    

    <span slot="popout-heading">
      
      Stay organized with collections
    </span>
    <span slot="popout-contents">
      
      Save and categorize content based on your preferences.
    </span>
  </devsite-feature-tooltip></div>
  
      
    </h1>
  

  <devsite-toc class="devsite-nav"
    depth="1"
    devsite-toc-embedded
    >
  </devsite-toc>
  
    
  <div class="devsite-article-body clearfix
  ">

  
    
    
    <google-codelab-analytics gaid="UA-49880327-14" ga4id="G-JTFZSJVVVZ"></google-codelab-analytics>
    <google-codelab codelab-gaid=""
                    codelab-ga4id=""
                    doc-id="1Y7QxuFXb8bDXvCihNXk31N15H3Cnn4PzILn_CHlR4w8"
                    id="android-privacy-codelab"
                    title="Android Privacy Codelab"
                    no-tooltip=""
                    environment="web"
                    category=""
                    feedback-link=""
                    layout="paginated"
                    >
      
        <google-codelab-step label="Intro" duration="0" step="0">
          
            <google-codelab-about codelab-title="Android Privacy Codelab"
                                  authors="terencez,yrezgui"
                                  last-updated="2023-09-21T19:59:23Z"
                                  >
            </google-codelab-about>
          
          <h2 class="step-title" id="0" data-text="Intro" tabindex="-1">
              1. Intro
          </h2>
          <h2 class="checklist" is-upgraded id="what-youll-learn" data-text="What you'll learn" tabindex="-1">What you'll learn</h2>
<ul class="checklist">
<li>Why privacy is becoming increasingly important for users.</li>
<li>Android privacy best-practices over the past few releases.</li>
<li>How to integrate privacy best-practices into existing apps to make them more privacy-preserving.</li>
</ul>
<h2 is-upgraded id="what-youll-build" data-text="What you'll build" tabindex="-1">What you'll build</h2>
<p>In this codelab, you start with a sample app that allows users to save their photo memories.</p>
<p>It will start with the following screens:</p>
<ul>
<li>Permission Screen - screen that asks the user to grant all the permissions before proceeding to the home screen.</li>
<li>Home Screen - screen that displays all the user&#39;s existing photo logs, and also allows them to add new photo logs.</li>
<li>Add Log Screen - screen that allows the user to create a new photo log. Here, users can browse from existing photos in their library, take a new photo using the camera, and add their current city to the photo log.</li>
<li>Camera Screen - screen that allows the user to take a photo and save it to the photo log.</li>
</ul>
<p>The app is working, but it has many privacy deficiencies that we will improve upon together!</p>
<p>As you progress through the codelab, you will be:</p>
<ul>
<li>...shown why privacy is important for your apps</li>
<li>...introduced to Android&#39;s privacy features and key best practices.</li>
<li>...shown how to implement these best practices in an existing app, by doing the following:</li>
<li>Requesting permissions in-context</li>
<li>Reducing your app&#39;s location access</li>
<li>Using the photo picker &amp; other storage improvements</li>
<li>Using the data access audit APIs</li>
</ul>
<p>When you&#39;re done, you will have an app that:</p>
<ul>
<li>...implements the privacy best practices listed above.</li>
<li>...is privacy preserving and protects users by handling their private data with care, which enhances the user experience.</li>
</ul>
<h2 is-upgraded id="what-youll-need" data-text="What you'll need" tabindex="-1">What you'll need</h2>
<ul>
<li><a href="https://developer.android.com/studio/index.html" target="_blank">The latest stable version of Android Studio</a>.</li>
</ul>
<p>Nice to have</p>
<ul>
<li>Familiarity with the following Architecture Components: <a href="https://developer.android.com/reference/androidx/lifecycle/ViewModel" target="_blank">ViewModel</a> and the architecture suggested in the <a href="https://developer.android.com/topic/libraries/architecture/guide.html" target="_blank">Guide to App Architecture</a>.</li>
<li>Familiarity with <a href="https://developer.android.com/jetpack/compose" target="_blank">Jetpack Compose</a>. For an introduction to Compose, check out the <a href="https://developer.android.com/jetpack/compose/tutorial?continue=https%3A%2F%2Fdeveloper.android.com%2Fcourses%2Fpathways%2Fcompose%23article-https%3A%2F%2Fdeveloper.android.com%2Fjetpack%2Fcompose%2Ftutorial" target="_blank">Jetpack Compose Tutorial</a>.</li>
</ul>


        </google-codelab-step>
      
        <google-codelab-step label="Why is Privacy Important?" duration="0" step="1">
          
          <h2 class="step-title" id="1" data-text="Why is Privacy Important?" tabindex="-1">
              2. Why is Privacy Important?
          </h2>
          <p>Research shows that people are wary about their privacy. A  <a href="https://www.pewresearch.org/fact-tank/2020/04/14/half-of-americans-have-decided-not-to-use-a-product-or-service-because-of-privacy-concerns/" target="_blank">survey conducted by the Pew Research Institute</a> found that 84% of Americans feel that they have little to no control over the data collected by them by companies and apps. Their main point of frustration is not knowing what is happening to their data beyond the direct use. For example, they worry that the data is used for other purposes, such as to create profiles for targeted advertisement, or even sold to other parties. And once the data is out there, there seems to be no way of removing it.</p>
<p>This concern for privacy is already significantly impacting peoples&#39; decisions about which services or apps to use. In fact, that same Pew Research Institute study found that over half (52%) of US adults decided not to use a product or service because of privacy concerns, such as being worried about how much data is being collected about them.</p>
<p>Therefore, enhancing and demonstrating your app&#39;s privacy is essential to improving the experience of your apps for your users, and research shows that it likely can help you grow your user base as well.</p>
<p>Many of the features and best practices that we will cover in this codelab are directly related to reducing the amount of data that your app accesses or enhancing your users&#39; sense of control over their private data. Both of these enhancements directly address the concerns that users shared in the research we saw earlier.</p>


        </google-codelab-step>
      
        <google-codelab-step label="Set up Your Environment" duration="0" step="2">
          
          <h2 class="step-title" id="2" data-text="Set up Your Environment" tabindex="-1">
              3. Set up Your Environment
          </h2>
          <p>To get you started as quickly as possible, we have prepared a starter project for you to build on. In this step, you will download the code for the entire codelab, including the starter project, and then run the starter app on your emulator or device.</p>
<p>If you have git installed, you can simply run the command below. To check whether git is installed, type <code translate="no" dir="ltr">git –version</code> the terminal or command line and verify that it executes correctly.</p>
<p><code translate="no" dir="ltr">git clone https://github.com/android/privacy-codelab</code></p>
<p>If you do not have git, you can click the  <a href="https://github.com/android/privacy-codelab/archive/main.zip" target="_blank">link to download</a> all the code for this codelab.</p>
<p>To setup the codelab:</p>
<ol type="1">
<li>Open the project in the <code translate="no" dir="ltr">PhotoLog_Start</code> directory in Android Studio.</li>
<li>Run the <code translate="no" dir="ltr">PhotoLog_Start</code> run configuration on a device or emulator running Android 12 (S) or later.</li>
</ol>
<p class="image-container"><img alt="d98ce953b749b2be.png" style="width: 624.00px" src="/static/codelabs/android-privacy-codelab/img/d98ce953b749b2be.png" srcset="https://developer.android.com/static/codelabs/android-privacy-codelab/img/d98ce953b749b2be_36.png 36w,https://developer.android.com/static/codelabs/android-privacy-codelab/img/d98ce953b749b2be_48.png 48w,https://developer.android.com/static/codelabs/android-privacy-codelab/img/d98ce953b749b2be_72.png 72w,https://developer.android.com/static/codelabs/android-privacy-codelab/img/d98ce953b749b2be_96.png 96w,https://developer.android.com/static/codelabs/android-privacy-codelab/img/d98ce953b749b2be_480.png 480w,https://developer.android.com/static/codelabs/android-privacy-codelab/img/d98ce953b749b2be_720.png 720w,https://developer.android.com/static/codelabs/android-privacy-codelab/img/d98ce953b749b2be_856.png 856w,https://developer.android.com/static/codelabs/android-privacy-codelab/img/d98ce953b749b2be_960.png 960w,https://developer.android.com/static/codelabs/android-privacy-codelab/img/d98ce953b749b2be_1440.png 1440w,https://developer.android.com/static/codelabs/android-privacy-codelab/img/d98ce953b749b2be_1920.png 1920w,https://developer.android.com/static/codelabs/android-privacy-codelab/img/d98ce953b749b2be_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"></p>
<p>You should see a screen asking you to grant permissions to run the app! This means you have successfully set up the environment.</p>


        </google-codelab-step>
      
        <google-codelab-step label="Best Practice: Request Permissions In-Context" duration="0" step="3">
          
          <h2 class="step-title" id="3" data-text="Best Practice: Request Permissions In-Context" tabindex="-1">
              4. Best Practice: Request Permissions In-Context
          </h2>
          <p>Many of you know that runtime permissions are essential to unlocking many key functionalities that are important to having a great user experience, but did you know that when and how your app requests the permissions also has a significant impact on user experience?</p>
<p>Let&#39;s take a look at how the <code translate="no" dir="ltr">PhotoLog_Start</code> app requests permissions, to show you why it doesn&#39;t have an optimal permissions model:</p>
<ol type="1">
<li>Right after launch, the user immediately receives permission prompts asking them to grant multiple permissions. This likely confuses users and may cause them to lose trust in our app or uninstall it in the worst case!</li>
<li>The app doesn&#39;t let users proceed until all permissions are granted. Users may not trust our app enough on launch to grant access to all of this sensitive information.</li>
</ol>
<p>As you probably guessed, the list above represents the set of improvements we will make together to improve the app&#39;s permission request process! Let&#39;s jump into it.</p>
<p>We can see that Android&#39;s  <a href="https://developer.android.com/training/permissions/requesting#principles" target="_blank">best practice recommendations</a> say that we should request permissions in-context the first time the users start interacting with a feature. This is because if an app requests permission to enable a feature that the user is already interacting with, the request doesn&#39;t come as a surprise for users. This results in a better user experience. In the PhotoLog app, we should wait until the first time users click on the camera or location buttons before we request permissions.</p>
<p>First, let&#39;s remove the permissions screen that forces users to approve all permissions before going to the home page. This logic is currently defined in <code translate="no" dir="ltr">MainActivity.kt</code>, so let&#39;s navigate there:</p>
<div></div><devsite-code><pre translate="no" dir="ltr" is-upgraded>val startNavigation =
   if (permissionManager.hasAllPermissions) {
       Screens.Home.route
   } else {
       Screens.Permissions.route
   }
</pre></devsite-code>
<p>It checks if the user has granted all of the permissions before allowing them to move to the home page. As mentioned before, that is not following our best practices for user experience. Let&#39;s change it to the following code, enabling users to interact with our app without having all permissions granted:</p>
<div></div><devsite-code><pre translate="no" dir="ltr" is-upgraded>val startNavigation = Screens.Home.route
</pre></devsite-code>
<p>Now that we no longer need the permissions screen anymore, we can also delete this line from NavHost:</p>
<div></div><devsite-code><pre translate="no" dir="ltr" is-upgraded>composable(Screens.Permissions.route) { PermissionScreen(navController) }
</pre></devsite-code>
<p>Next, remove this line from the Screens class:</p>
<div></div><devsite-code><pre translate="no" dir="ltr" is-upgraded>object Permissions : Screens(&#34;permissions&#34;)
</pre></devsite-code>
<p>Finally, we can delete the PermissionsScreen.kt file as well.</p>
<p>Now, delete and re-install your app, which is one way to reset the previously-granted permissions! You should be able to go to the home screen immediately now, but when you press the camera or location buttons in the &#34;Add Log&#34; screen, nothing happens because the app no longer has the logic to request permissions from the user. Let&#39;s fix that.</p>
<h2 is-upgraded id="add-logic-to-request-camera-permission" data-text="Add Logic to Request Camera Permission" tabindex="-1">Add Logic to Request Camera Permission</h2>
<p>We will begin with the camera permission. Based on the code samples we see in the  <a href="https://developer.android.com/training/permissions/requesting" target="_blank">requesting permissions documentation</a>, we&#39;ll want to register the permissions callback first in order to use the <code translate="no" dir="ltr">RequestPermission()</code> contract.</p>
<p>Let&#39;s evaluate the logic we need:</p>
<ul>
<li>If the user accepts the permission, we&#39;ll want to register the permission with the viewModel, and also navigate to the camera screen if the user hasn&#39;t yet reached the limit for the number of photos already added.</li>
<li>If the user denies the permission, we can inform them that the feature is not working since the permission has been denied.</li>
</ul>
<p>To execute this logic, we can add this code block to: <em><code translate="no" dir="ltr">// TODO: Step 1. Register ActivityResult to request Camera permission</code></em></p>
<div></div><devsite-code><pre translate="no" dir="ltr" is-upgraded>val requestCameraPermission =
   rememberLauncherForActivityResult(ActivityResultContracts.RequestPermission()) { isGranted -&gt;
       if (isGranted) {
           viewModel.onPermissionChange(CAMERA, isGranted)
           canAddPhoto {
               navController.navigate(Screens.Camera.route)
           }
       }
       else {
           coroutineScope.launch {
               snackbarHostState.showSnackbar(&#34;Camera currently disabled due to denied permission.&#34;)
           }
       }
   }
</pre></devsite-code>
<p>Now we want to verify that the app has the camera permission before navigating to the camera screen, and to request the permission if the user hasn&#39;t granted it yet. To implement this logic, we can add the following code block to: <em><code translate="no" dir="ltr">// TODO: Step 2. Check & request for Camera permission before navigating to the camera screen</code></em></p>
<div></div><devsite-code><pre translate="no" dir="ltr" is-upgraded>canAddPhoto {
   when {
       state.hasCameraAccess -&gt; navController.navigate(Screens.Camera.route)
       // TODO: Step 4. Trigger rationale screen for Camera if needed
       else -&gt; requestCameraPermission.launch(CAMERA)
   }
}
</pre></devsite-code>
<p>Now, try running the app again and click on the camera icon in the &#34;Add Log&#34; screen. You should see a dialog that requests the camera permission. Congratulations! This is much better than asking users to approve all the permissions before they&#39;ve even tried out the app, right?</p>
<p>But can we do better? Yes! We can check if the system recommends that we show a rationale to explain why our app needs access to the camera. This helps to potentially increase opt-in rates for the permission and also preserve your apps&#39; ability to request the permission again at a more opportune time.</p>
<p>To do that, let&#39;s build a rationale screen that explains why our app needs access to the user&#39;s camera. Do this by adding the following code block to: <em><code translate="no" dir="ltr">// TODO: Step 3. Add explanation dialog for Camera permission</code></em></p>
<div></div><devsite-code><pre translate="no" dir="ltr" is-upgraded>var showExplanationDialogForCameraPermission by remember { mutableStateOf(false) }
if (showExplanationDialogForCameraPermission) {
   CameraExplanationDialog(
       onConfirm = {
           requestCameraPermission.launch(CAMERA)
           showExplanationDialogForCameraPermission = false
       },
       onDismiss = { showExplanationDialogForCameraPermission = false },
   )
}
</pre></devsite-code>
<p>Now that we have the dialog itself, we just have to check whether we should show the rationale before requesting the camera permission. We do this by calling ActivityCompat&#39;s <code translate="no" dir="ltr">shouldShowRequestPermissionRationale()</code> API. If it returns true, we just have to set  <code translate="no" dir="ltr">showExplanationDialogForCameraPermission</code> to true as well to display the explanation dialog.</p>
<p>Let&#39;s add the following code block between the <code translate="no" dir="ltr">state.hasCameraAccess</code> case and the <code translate="no" dir="ltr">else</code> case, or where the following TODO was previously added in the instructions : <em><code translate="no" dir="ltr">// TODO: Step 4. Add explanation dialog for Camera permission</code></em></p>
<div></div><devsite-code><pre translate="no" dir="ltr" is-upgraded>ActivityCompat.shouldShowRequestPermissionRationale(context.getActivity(),
           CAMERA) -&gt; showExplanationDialogForCameraPermission = true
</pre></devsite-code>
<p>Your complete logic for the camera button should now look like this:</p>
<div></div><devsite-code><pre translate="no" dir="ltr" is-upgraded>canAddPhoto {
   when {
       state.hasCameraAccess -&gt; navController.navigate(Screens.Camera.route)
       ActivityCompat.shouldShowRequestPermissionRationale(context.getActivity(),
           CAMERA) -&gt; showExplanationDialogForCameraPermission = true
       else -&gt; requestCameraPermission.launch(CAMERA)
   }
}
</pre></devsite-code>
<p>Congrats! We&#39;ve finished handling the camera permission while following all of Android&#39;s best practices! Go ahead, delete &amp; re-install the app once again, and try pressing the camera button from the &#34;Add Log&#34; page. If you deny the permission, the app doesn&#39;t block you from using the other functionalities like opening the photo album.</p>
<p>However, the next time you click on the camera icon after denying the permission, you should see the explanation prompt that we just added!* Notice that the system permission prompt only shows up after the user clicks &#34;continue&#34; on the explanation prompt, and if the user clicks &#34;not now,&#34; we let them use the app without any further interruptions. This helps the app avoid additional permission denials from the user and preserves our ability to request the permission again at a different time, when the user may be more ready to grant it.</p>
<ul>
<li>note: the exact behavior of <code translate="no" dir="ltr">shouldShowRequestPermissionRationale()</code> API is an internal implementation detail and is subject to change.</li>
</ul>
<h2 is-upgraded id="add-logic-to-request-location-permission" data-text="Add Logic to Request Location Permission" tabindex="-1">Add Logic to Request Location Permission</h2>
<p>Now, let&#39;s do the same for location. We can first register the ActivityResult for the location permissions by adding the following code block to: <em><code translate="no" dir="ltr">// TODO: Step 5. Register ActivityResult to request Location permissions</code></em></p>
<div></div><devsite-code><pre translate="no" dir="ltr" is-upgraded>val requestLocationPermissions =
   rememberLauncherForActivityResult(ActivityResultContracts.RequestPermission()) { isGranted -&gt;
       if (isGranted) {
           viewModel.onPermissionChange(ACCESS_COARSE_LOCATION, isGranted)
           viewModel.onPermissionChange(ACCESS_FINE_LOCATION, isGranted)
           viewModel.fetchLocation()
       }
       else {
           coroutineScope.launch {
               snackbarHostState.showSnackbar(&#34;Location currently disabled due to denied permission.&#34;)
           }
       }
   }
</pre></devsite-code>
<p>After that, we can go ahead and add the explanation dialog for location permissions by adding the following code block to: <em><code translate="no" dir="ltr">// TODO: Step 6. Add explanation dialog for Location permissions</code></em></p>
<div></div><devsite-code><pre translate="no" dir="ltr" is-upgraded>var showExplanationDialogForLocationPermission by remember { mutableStateOf(false) }
if (showExplanationDialogForLocationPermission) {
   LocationExplanationDialog(
       onConfirm = {
           // TODO: Step 10. Change location request to only request COARSE location.
           requestLocationPermissions.launch(arrayOf(ACCESS_COARSE_LOCATION, ACCESS_FINE_LOCATION))
           showExplanationDialogForLocationPermission = false
       },
       onDismiss = { showExplanationDialogForLocationPermission = false },
   )
}
</pre></devsite-code>
<p>Next, let&#39;s go ahead and check, explain (if necessary), and request the location permissions. If the permission is granted, we can fetch the location and populate the photo log. Let&#39;s go ahead and add the following code block to: <em><code translate="no" dir="ltr">// TODO: Step 7. Check, request, and explain Location permissions</code></em></p>
<div></div><devsite-code><pre translate="no" dir="ltr" is-upgraded>when {
   state.hasLocationAccess -&gt; viewModel.fetchLocation()
   ActivityCompat.shouldShowRequestPermissionRationale(context.getActivity(),
       ACCESS_COARSE_LOCATION) ||    
   ActivityCompat.shouldShowRequestPermissionRationale(
       context.getActivity(), ACCESS_FINE_LOCATION) -&gt;
       showExplanationDialogForLocationPermission = true
   else -&gt; requestLocationPermissions.launch(arrayOf(ACCESS_COARSE_LOCATION, ACCESS_FINE_LOCATION))
}
</pre></devsite-code>
<p>And there you have it, we are done with the permissions section of this codelab! Go ahead and try resetting your app and see the results.</p>
<p>Summary of how we&#39;ve improved the user experience and the benefits for your app:</p>
<ul>
<li>Request permissions in-context (when users are interacting with the feature) instead of immediately after app launch → Reduce confusion and user dropout.</li>
<li>Create explanation screens to explain to users why our app needs access to permissions → Increase transparency for users.</li>
<li>Leverage the shouldShowRequestPermissionRationale() API to determine when the system believes your app should show an explanation screen → Increase permission acceptance rates &amp; decreases odds of permanent permission denial.</li>
</ul>


        </google-codelab-step>
      
        <google-codelab-step label="Best Practice: Reduce Your App&#39;s Location Access" duration="0" step="4">
          
          <h2 class="step-title" id="4" data-text="Best Practice: Reduce Your App's Location Access" tabindex="-1">
              5. Best Practice: Reduce Your App's Location Access
          </h2>
          <p>Location is one of the most sensitive permissions, and that&#39;s why Android features it in the  <a href="https://developer.android.com/training/permissions/explaining-access#privacy-dashboard" target="_blank">Privacy Dashboard</a>.</p>
<p>As a quick recap, in Android 12 we&#39;ve provided users with additional controls for location. Users now have a clear choice to share less accurate location data to apps by selecting <strong>approximate location</strong> instead of <strong>precise location</strong> when apps request location access.</p>
<p>Approximate location provides the app with an estimate of the user&#39;s location within 3 square kilometers, which should be enough precision for many of your app&#39;s features. We encourage all developers whose apps need location access to review your use case, and only request <code translate="no" dir="ltr">ACCESS_FINE_LOCATION</code> if the user is actively engaging with a feature that requires their precise location.</p>
<p class="image-container"><img alt="ea5cc51fce3f219e.png" style="width: 624.00px" src="/static/codelabs/android-privacy-codelab/img/ea5cc51fce3f219e.png" srcset="https://developer.android.com/static/codelabs/android-privacy-codelab/img/ea5cc51fce3f219e_36.png 36w,https://developer.android.com/static/codelabs/android-privacy-codelab/img/ea5cc51fce3f219e_48.png 48w,https://developer.android.com/static/codelabs/android-privacy-codelab/img/ea5cc51fce3f219e_72.png 72w,https://developer.android.com/static/codelabs/android-privacy-codelab/img/ea5cc51fce3f219e_96.png 96w,https://developer.android.com/static/codelabs/android-privacy-codelab/img/ea5cc51fce3f219e_480.png 480w,https://developer.android.com/static/codelabs/android-privacy-codelab/img/ea5cc51fce3f219e_720.png 720w,https://developer.android.com/static/codelabs/android-privacy-codelab/img/ea5cc51fce3f219e_856.png 856w,https://developer.android.com/static/codelabs/android-privacy-codelab/img/ea5cc51fce3f219e_960.png 960w,https://developer.android.com/static/codelabs/android-privacy-codelab/img/ea5cc51fce3f219e_1440.png 1440w,https://developer.android.com/static/codelabs/android-privacy-codelab/img/ea5cc51fce3f219e_1920.png 1920w,https://developer.android.com/static/codelabs/android-privacy-codelab/img/ea5cc51fce3f219e_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"></p>
<p>Graphic to visualize coarse location estimate range centered in downtown Los Angeles, California.</p>
<p>Approximate location access is definitely enough for our PhotoLog app, as we only need the user&#39;s city to remind them where the &#34;memory&#34; is from. However, the app is currently requesting both <code translate="no" dir="ltr">ACCESS_COARSE_LOCATION</code> and <code translate="no" dir="ltr">ACCESS_FINE_LOCATION</code> from the user. Let&#39;s change that.</p>
<p>First, we&#39;ll need to edit the activity result for location and provide the <code translate="no" dir="ltr">ActivityResultContracts.RequestPermission()</code> function as a parameter instead of <code translate="no" dir="ltr">ActivityResultContracts.RequestMultiplePermissions()</code>, to reflect the fact that we are only going to request <code translate="no" dir="ltr">ACCESS_COARSE_LOCATION</code>.</p>
<p>Let&#39;s replace the current requestLocationsPermissions object (denoted by <em><code translate="no" dir="ltr">// TODO: Step 8. Change activity result to only request Coarse Location</code></em>) with the following code block instead:</p>
<div></div><devsite-code><pre translate="no" dir="ltr" is-upgraded>val requestLocationPermissions =
   rememberLauncherForActivityResult(ActivityResultContracts.RequestPermission()) { isGranted -&gt;
       if (isGranted) {
           viewModel.onPermissionChange(ACCESS_COARSE_LOCATION, isGranted)
       }
   }
</pre></devsite-code>
<p>Next, we will change the <code translate="no" dir="ltr">launch()</code> methods to only request <code translate="no" dir="ltr">ACCESS_COARSE_LOCATION</code> instead of both location permissions.</p>
<p>Let&#39;s replace:</p>
<div></div><devsite-code><pre translate="no" dir="ltr" is-upgraded>requestLocationPermissions.launch(arrayOf(ACCESS_COARSE_LOCATION, ACCESS_FINE_LOCATION))
</pre></devsite-code>
<p>...with:</p>
<div></div><devsite-code><pre translate="no" dir="ltr" is-upgraded>requestLocationPermissions.launch(ACCESS_COARSE_LOCATION)
</pre></devsite-code>
<p>There are two instances of the <code translate="no" dir="ltr">launch()</code> methods in PhotoLog we&#39;ll need to change, one is in the <code translate="no" dir="ltr">onConfirm()</code> logic in the <code translate="no" dir="ltr">LocationExplanationDialog</code> denoted by <em><code translate="no" dir="ltr">// TODO: Step 9. Change location request to only request COARSE location</code></em>, and one in the &#34;Location&#34; list item denoted by <em><code translate="no" dir="ltr">// TODO: Step 10. Change location request to only request COARSE location</code></em></p>
<p>Lastly, now that we are no longer requesting the <code translate="no" dir="ltr">ACCESS_FINE_LOCATION</code> permission for PhotoLog, let&#39;s go ahead and remove this section from the onPermissionChange() method in AddLogViewModel.kt:</p>
<div></div><devsite-code><pre translate="no" dir="ltr" is-upgraded>Manifest.permission.ACCESS_FINE_LOCATION -&gt; {
   uiState = uiState.copy(hasLocationAccess = isGranted)
}
</pre></devsite-code>
<p>And don&#39;t forget to also remove the <code translate="no" dir="ltr">ACCESS_FINE_LOCATION</code> from the app&#39;s Manifest:</p>
<div></div><devsite-code><pre translate="no" dir="ltr" is-upgraded>&lt;uses-permission android:name=&#34;android.permission.ACCESS_FINE_LOCATION&#34; /&gt;
</pre></devsite-code>
<p>Now we are done with the location section of the codelab! Go ahead and uninstall/re-install your app and see the results!</p>


        </google-codelab-step>
      
        <google-codelab-step label="Best Practice: Minimize Use of Storage Permissions" duration="0" step="5">
          
          <h2 class="step-title" id="5" data-text="Best Practice: Minimize Use of Storage Permissions" tabindex="-1">
              6. Best Practice: Minimize Use of Storage Permissions
          </h2>
          <p>It&#39;s common for apps to work with photos stored on a device. To let users pick the desired images and videos, these apps often implement their own file pickers, which requires the apps to request permission for broad storage access.  Users don&#39;t like to grant access to all their pictures, and developers don&#39;t like to maintain an independent file picker.</p>
<p>Android 13 introduces the photo picker: a tool to provide a way for the user to select media files without needing to grant an app with access to the user&#39;s entire media library. It&#39;s also backported to Android 11 &amp; 12 with the help of  <a href="https://support.google.com/product-documentation/answer/11412553" target="_blank">Google Play System Updates</a>.</p>
<p>For the feature in our PhotoLog app, we will use the  <a href="https://developer.android.com/reference/kotlin/androidx/activity/result/contract/ActivityResultContracts.PickMultipleVisualMedia" target="_blank"><code translate="no" dir="ltr">PickMultipleVisualMedia</code></a> ActivityResultContract. It will use the Android Photo Picker when present on the device and relies on the  <a href="https://developer.android.com/reference/kotlin/android/content/Intent#action_open_document" target="_blank"><code translate="no" dir="ltr">ACTION_OPEN_DOCUMENT</code></a> intent on older devices.</p>
<p>First, let&#39;s register our ActivityResultContract in the <code translate="no" dir="ltr">AddLogScreen</code> file. To do this, add the following code block after this line: <em><code translate="no" dir="ltr">// TODO: Step 11. Register ActivityResult to launch the Photo Picker</code></em></p>
<div></div><devsite-code><pre translate="no" dir="ltr" is-upgraded>val pickImage = rememberLauncherForActivityResult(
   PickMultipleVisualMedia(MAX_LOG_PHOTOS_LIMIT),
    viewModel::onPhotoPickerSelect
)
</pre></devsite-code>
<p>Note: <code translate="no" dir="ltr">MAX_LOG_PHOTOS_LIMIT</code> here represents the max limit of photos we chose to set when adding them to a log (in this case, it&#39;s 3).</p>
<p>Now we need to replace the internal picker that was in the app by the Android Photo Picker. Add the following code after the block: <em><code translate="no" dir="ltr">// TODO: Step 12. Replace the below line showing our internal UI by launching the Android Photo Picker instead</code></em></p>
<div></div><devsite-code><pre translate="no" dir="ltr" is-upgraded>pickImage.launch(PickVisualMediaRequest(PickVisualMedia.ImageOnly))
</pre></devsite-code>
<p>By adding these two lines of code, we now get a permissionless way to access the device&#39;s photos that provides a much nicer UX and doesn&#39;t require code maintenance!</p>
<p>Since PhotoLog no longer requires the legacy photo grid and storage permissions for accessing photos, we should now remove all the code containing our legacy photo grid, from the storage permission entry in the manifest to the logic behind it, as it&#39;s not needed anymore in our app.</p>


        </google-codelab-step>
      
        <google-codelab-step label="Recommended: Use Data Access Audit APIs in Debug Builds" duration="0" step="6">
          
          <h2 class="step-title" id="6" data-text="Recommended: Use Data Access Audit APIs in Debug Builds" tabindex="-1">
              7. Recommended: Use Data Access Audit APIs in Debug Builds
          </h2>
          <p>Do you have a big app with lots of features and collaborators (or you expect it to be in the future!) that makes it hard to track what kind of user data the app is accessing? Did you know that even if the data accesses come from APIs or SDKs that were used at one point but are now just lingering around in your app, your app will still be accountable for the data access?</p>
<p>We understand it&#39;s difficult to track all the places where your apps are accessing private data, including all the included SDKs and other dependencies. Therefore, to help you provide more transparency into how your app and its dependencies access private data from users, Android 11 introduces data access auditing. This API allows developers to perform specific actions—such as printing to a log file—each time one of the following events occurs:</p>
<ul>
<li>Your app&#39;s code accesses private data.</li>
<li>Code in a dependent library or SDK accesses private data.</li>
</ul>
<p>First, let&#39;s go over the basics of how the data access audit API works on Android. To adopt data access auditing, we&#39;ll register an instance of <code translate="no" dir="ltr">AppOpsManager.OnOpNotedCallback</code> (requires targeting Android 11+).</p>
<p>We also need to override the three methods in the callback, which will be invoked by the system when the app accesses user data in different ways. These are:</p>
<ul>
<li><code translate="no" dir="ltr">onNoted()</code> - called when an app invokes <strong>synchronous</strong> (two-way binding) <strong>APIs</strong> that access user data. These are typically API calls that don&#39;t require a callback.</li>
<li><code translate="no" dir="ltr">onAsyncNoted()</code> - called when an app invokes <strong>asynchronous</strong> (one-way binding) <strong>APIs</strong> that access user data. These are typically API calls that require callbacks, and the data access occurs when the callback is invoked.</li>
<li><code translate="no" dir="ltr">onSelfNoted()</code> - <em>quite unlikely</em>, happens when an app passes its own UID into  <a href="https://developer.android.com/reference/android/app/AppOpsManager#noteOp(java.lang.String,%20int,%20java.lang.String,%20java.lang.String,%20java.lang.String)" target="_blank">noteOp()</a> for example.</li>
</ul>
<p>Now let&#39;s determine which of these methods applies for our PhotoLog app&#39;s data accesses. PhotoLog mainly accesses user data in two places, once when we activate the camera and another time when we access the user&#39;s location. These are both asynchronous API calls since both of them are relatively resource-intensive, and so we will expect the system to invoke <code translate="no" dir="ltr">onAsyncNoted()</code> when we access the respective user data.</p>
<p>Let&#39;s walk through how to adopt the data access audit APIs for PhotoLog!</p>
<p>First, we will need to create an instance of ​​<code translate="no" dir="ltr">AppOpsManager.OnOpNotedCallback()</code>, and override the three methods above.</p>
<p>For all three methods in the object, let&#39;s go ahead and log the particular operation that accessed private user data. This operation will contain more information on what kind of user data was accessed. In addition, since we expect <code translate="no" dir="ltr">onAsyncNoted()</code> to get called when our app accesses camera and location info, let&#39;s do something special and log a map emoji for location access and a camera emoji for camera access. To do this, we can add the following code block to: <em><code translate="no" dir="ltr">// TODO: Step 1. Create Data Access Audit Listener Object</code></em></p>
<div></div><devsite-code><pre translate="no" dir="ltr" is-upgraded>@RequiresApi(Build.VERSION_CODES.R)
object DataAccessAuditListener : AppOpsManager.OnOpNotedCallback() {
   // For the purposes of this codelab, we are just logging to console,
   // but you can also integrate other logging and reporting systems here to track
   // your app&#39;s private data access.
   override fun onNoted(op: SyncNotedAppOp) {
       Log.d(&#34;DataAccessAuditListener&#34;,&#34;Sync Private Data Accessed: ${op.op}&#34;)
   }

   override fun onSelfNoted(op: SyncNotedAppOp) {
       Log.d(&#34;DataAccessAuditListener&#34;,&#34;Self Private Data accessed: ${op.op}&#34;)
   }

   override fun onAsyncNoted(asyncNotedAppOp: AsyncNotedAppOp) {
       var emoji = when (asyncNotedAppOp.op) {
           OPSTR_COARSE_LOCATION -&gt; &#34;\uD83D\uDDFA&#34;
           OPSTR_CAMERA -&gt; &#34;\uD83D\uDCF8&#34;
           else -&gt; &#34;?&#34;
       }

       Log.d(&#34;DataAccessAuditListener&#34;, &#34;Async Private Data ($emoji) Accessed: 
       ${asyncNotedAppOp.op}&#34;)
   }
}
</pre></devsite-code>
<p>We will then need to implement the callback logic we just created. For best results, we&#39;ll want to do that as early as possible since the system will only start tracking data access <em>after</em> we register the callback. To register the callback, we can add the following code block to: <em><code translate="no" dir="ltr">// TODO: Step 2. Register Data Access Audit Callback</code></em><code translate="no" dir="ltr">.</code></p>
<div></div><devsite-code><pre translate="no" dir="ltr" is-upgraded>if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {
   val appOpsManager = getSystemService(AppOpsManager::class.java) as AppOpsManager
   appOpsManager.setOnOpNotedCallback(mainExecutor, DataAccessAuditListener)
}
</pre></devsite-code>


        </google-codelab-step>
      
        <google-codelab-step label="Wrapping Up" duration="0" step="7">
          
          <h2 class="step-title" id="7" data-text="Wrapping Up" tabindex="-1">
              8. Wrapping Up
          </h2>
          <p>Let&#39;s do a recap of what we&#39;ve covered! We...</p>
<ul>
<li>...explored why privacy is important for your apps.</li>
<li>...were introduced to Android&#39;s privacy features.</li>
<li>...implementing many key privacy best practices for apps, by:</li>
<li>Requesting permissions in-context</li>
<li>Reducing your app&#39;s location access</li>
<li>Using the photo picker &amp; other storage improvements</li>
<li>Using the data access audit APIs</li>
<li>...implemented these best practices in an existing app to enhance its privacy.</li>
</ul>
<p>We hope you enjoyed our journey as we improved the privacy and user experience of PhotoLog, and learned many concepts along the way!</p>
<h2 is-upgraded id="to-find-our-reference-code-optional:" data-text="To find our reference code (optional):" tabindex="-1">To find our reference code (optional):</h2>
<p>If you haven&#39;t already, you can take a look at the solution code for the codelab in the <code translate="no" dir="ltr">PhotoLog_End</code> folder. If you&#39;ve followed the instructions of this codelab closely, the code in the <code translate="no" dir="ltr">PhotoLog_Start</code> folder should be identical to that in the <code translate="no" dir="ltr">PhotoLog_End</code> folder.</p>
<h2 is-upgraded id="learn-more" data-text="Learn more" tabindex="-1">Learn more</h2>
<p>That&#39;s it! To learn more about the best practices we covered above, check out the  <a href="https://developer.android.com/design-for-safety" target="_blank">Android Privacy Landing Page</a>.</p>


        </google-codelab-step>
      
    </google-codelab>
  
  

  
</div>

  
    
    
    
  

  <div class="devsite-floating-action-buttons"></div></article>


<devsite-content-footer class="nocontent">
  <p>Except as otherwise noted, the content of this page is licensed under the <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 License</a>, and code samples are licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 License</a>. For details, see the <a href="https://developers.google.com/site-policies">Google Developers Site Policies</a>. Java is a registered trademark of Oracle and/or its affiliates.</p>
  
</devsite-content-footer>


<devsite-notification
>
</devsite-notification>


  
<div class="devsite-content-data">
  
  
    <template class="devsite-content-data-template">
      [[["Easy to understand","easyToUnderstand","thumb-up"],["Solved my problem","solvedMyProblem","thumb-up"],["Other","otherUp","thumb-up"]],[["Missing the information I need","missingTheInformationINeed","thumb-down"],["Too complicated / too many steps","tooComplicatedTooManySteps","thumb-down"],["Out of date","outOfDate","thumb-down"],["Samples / code issue","samplesCodeIssue","thumb-down"],["Other","otherDown","thumb-down"]],[],[],[],null,[]]
    </template>
  
</div>
            
          </devsite-content>
        </main>
        <devsite-footer-promos class="devsite-footer">
          
            

<nav class="devsite-footer-promos nocontent" aria-label="Promotions">
  <ul class="devsite-footer-promos-list">
    
    <li class="devsite-footer-promo">
      <a href="//x.com/AndroidDev"
         class="devsite-footer-promo-title gc-analytics-event"
         data-category="Site-Wide Custom Events"
       
       
         data-label="Footer X Promo"
       >
        
        
        <picture>
          
          <source class="devsite-dark-theme"
                  srcset="https://developer.android.com/_static/android/images/logo-x_dt.svg"
                  media="(prefers-color-scheme: dark)">
          
          <img class="devsite-footer-promo-icon"
                src="/_static/android/images/logo-x.svg"
                loading="lazy"
                alt="X">
        </picture>
        
        <span class="devsite-footer-promo-label">
          X
        </span>
      </a>
      <div class="devsite-footer-promo-description">Follow @AndroidDev on X</div>
    </li>
    
    <li class="devsite-footer-promo">
      <a href="//www.youtube.com/user/androiddevelopers"
         class="devsite-footer-promo-title gc-analytics-event"
         data-category="Site-Wide Custom Events"
       
       
         data-label="Footer YouTube Promo"
       >
        
        
        <picture>
          
          <source class="devsite-dark-theme"
                  srcset="https://developer.android.com/_static/android/images/logo-youtube_dt.svg"
                  media="(prefers-color-scheme: dark)">
          
          <img class="devsite-footer-promo-icon"
                src="//www.gstatic.com/images/icons/material/product/2x/youtube_48dp.png"
                loading="lazy"
                alt="YouTube">
        </picture>
        
        <span class="devsite-footer-promo-label">
          YouTube
        </span>
      </a>
      <div class="devsite-footer-promo-description">Check out Android Developers on YouTube</div>
    </li>
    
    <li class="devsite-footer-promo">
      <a href="//www.linkedin.com/showcase/androiddev"
         class="devsite-footer-promo-title gc-analytics-event"
         data-category="Site-Wide Custom Events"
       
       
         data-label="Footer LinkedIn Promo"
       >
        
        
        <picture>
          
          <source class="devsite-dark-theme"
                  srcset="https://developer.android.com/_static/android/images/logo-linkedin_dt.svg"
                  media="(prefers-color-scheme: dark)">
          
          <img class="devsite-footer-promo-icon"
                src="/_static/android/images/logo-linkedin.svg"
                loading="lazy"
                alt="LinkedIn">
        </picture>
        
        <span class="devsite-footer-promo-label">
          LinkedIn
        </span>
      </a>
      <div class="devsite-footer-promo-description">Connect with the Android Developers community on LinkedIn</div>
    </li>
    
  </ul>
</nav>

          
        </devsite-footer-promos>
        <devsite-footer-linkboxes class="devsite-footer">
          
            
<nav class="devsite-footer-linkboxes nocontent" aria-label="Footer links">
  
  <ul class="devsite-footer-linkboxes-list">
    
    <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading no-link">More Android</h3>
      <ul class="devsite-footer-linkbox-list">
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="//www.android.com"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 1)"
            >
            
          
            Android
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="//www.android.com/enterprise/"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 2)"
            >
            
          
            Android for Enterprise
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="//www.android.com/security-center/"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 3)"
            >
            
          
            Security
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="//source.android.com"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 4)"
            >
            
          
            Source
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/news"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 5)"
            >
            
          
            News
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="//android-developers.googleblog.com/"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 6)"
            >
            
          
            Blog
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/podcasts"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 7)"
            >
            
              
              
            
          
            Podcasts
          
          </a>
          
          
        </li>
        
      </ul>
    </li>
    
    <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading no-link">Discover</h3>
      <ul class="devsite-footer-linkbox-list">
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/games"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 1)"
            >
            
          
            Gaming
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/ml"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 2)"
            >
            
          
            Machine Learning
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/health-and-fitness"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 3)"
            >
            
          
            Health & Fitness
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/media"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 4)"
            >
            
          
            Camera & Media
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/privacy"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 5)"
            >
            
          
            Privacy
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/training/connectivity/5g"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 6)"
            >
            
              
              
            
          
            5G
          
          </a>
          
          
        </li>
        
      </ul>
    </li>
    
    <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading no-link">Android Devices</h3>
      <ul class="devsite-footer-linkbox-list">
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/large-screens"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 1)"
            >
            
          
            Large screens
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/wear"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 2)"
            >
            
          
            Wear OS
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/chrome-os"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 3)"
            >
            
          
            ChromeOS devices
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/cars"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 4)"
            >
            
          
            Android for cars
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/tv"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 5)"
            >
            
              
              
            
          
            Android TV
          
          </a>
          
          
        </li>
        
      </ul>
    </li>
    
    <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading no-link">Releases</h3>
      <ul class="devsite-footer-linkbox-list">
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/about/versions/15"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 1)"
            >
            
          
            Android 15
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/about/versions/14"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 2)"
            >
            
          
            Android 14
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/about/versions/13"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 3)"
            >
            
          
            Android 13
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/about/versions/12"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 4)"
            >
            
          
            Android 12
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/about/versions/11"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 5)"
            >
            
          
            Android 11
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/about/versions/10"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 6)"
            >
            
          
            Android 10
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/about/versions/pie"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 7)"
            >
            
              
              
            
          
            Pie
          
          </a>
          
          
        </li>
        
      </ul>
    </li>
    
    <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading no-link">Documentation and Downloads</h3>
      <ul class="devsite-footer-linkbox-list">
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/studio/intro"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 1)"
            >
            
          
            Android Studio guide
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/guide"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 2)"
            >
            
          
            Developers guides
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/reference"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 3)"
            >
            
          
            API reference
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/studio"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 4)"
            >
            
          
            Download Studio
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/ndk"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 5)"
            >
            
              
              
            
          
            Android NDK
          
          </a>
          
          
        </li>
        
      </ul>
    </li>
    
    <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading no-link">Support</h3>
      <ul class="devsite-footer-linkbox-list">
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="//issuetracker.google.com/issues/new?component=190923&amp;template=841312"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 1)"
            >
            
          
            Report platform bug
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="//issuetracker.google.com/issues/new?component=192697"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 2)"
            >
            
          
            Report documentation bug
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="//support.google.com/googleplay/android-developer"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 3)"
            >
            
          
            Google Play support
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="https://g.co/userresearch/androiddeveloperfooter"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 4)"
            >
            
              
              
            
          
            Join research studies
          
          </a>
          
          
        </li>
        
      </ul>
    </li>
    
  </ul>
  
</nav>
          
        </devsite-footer-linkboxes>
        <devsite-footer-utility class="devsite-footer">
          
            

<div class="devsite-footer-utility nocontent">
  
  
  <nav class="devsite-footer-sites" aria-label="Other Google Developers websites">
    <a href="https://developers.google.com/"
       class="devsite-footer-sites-logo-link gc-analytics-event"
       data-category="Site-Wide Custom Events"
       data-label="Footer Google Developers Link">
      <picture>
        
        <source srcset="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/images/lockup-google-for-developers-dark-theme.svg"
                media="(prefers-color-scheme: none)"
                class="devsite-dark-theme">
        
        <img class="devsite-footer-sites-logo"
             src="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/images/lockup-google-for-developers.svg"
             loading="lazy"
             alt="Google Developers">
      </picture>
    </a>
    <ul class="devsite-footer-sites-list">
      
      <li class="devsite-footer-sites-item">
        <a href="//developer.android.com"
           class="devsite-footer-sites-link
                  gc-analytics-event"
           data-category="Site-Wide Custom Events"
         
           data-label="Footer Android Link"
         
         >
          Android
        </a>
      </li>
      
      <li class="devsite-footer-sites-item">
        <a href="//developer.chrome.com/home"
           class="devsite-footer-sites-link
                  gc-analytics-event"
           data-category="Site-Wide Custom Events"
         
           data-label="Footer Chrome Link"
         
         >
          Chrome
        </a>
      </li>
      
      <li class="devsite-footer-sites-item">
        <a href="//firebase.google.com"
           class="devsite-footer-sites-link
                  gc-analytics-event"
           data-category="Site-Wide Custom Events"
         
           data-label="Footer Firebase Link"
         
         >
          Firebase
        </a>
      </li>
      
      <li class="devsite-footer-sites-item">
        <a href="//cloud.google.com"
           class="devsite-footer-sites-link
                  gc-analytics-event"
           data-category="Site-Wide Custom Events"
         
           data-label="Footer Google Cloud Platform Link"
         
         >
          Google Cloud Platform
        </a>
      </li>
      
      <li class="devsite-footer-sites-item">
        <a href="//developers.google.com/products/"
           class="devsite-footer-sites-link
                  gc-analytics-event"
           data-category="Site-Wide Custom Events"
         
           data-label="Footer All products Link"
         
         >
          All products
        </a>
      </li>
      
    </ul>
  </nav>
  

  
  <nav class="devsite-footer-utility-links" aria-label="Utility links">
    
    <ul class="devsite-footer-utility-list">
      
      <li class="devsite-footer-utility-item
                 ">
        
        
        <a class="devsite-footer-utility-link gc-analytics-event"
           href="//policies.google.com/privacy"
           data-category="Site-Wide Custom Events"
           data-label="Footer Privacy link"
         >
          Privacy
        </a>
        
      </li>
      
      <li class="devsite-footer-utility-item
                 ">
        
        
        <a class="devsite-footer-utility-link gc-analytics-event"
           href="/license"
           data-category="Site-Wide Custom Events"
           data-label="Footer License link"
         >
          License
        </a>
        
      </li>
      
      <li class="devsite-footer-utility-item
                 ">
        
        
        <a class="devsite-footer-utility-link gc-analytics-event"
           href="/distribute/marketing-tools/brand-guidelines"
           data-category="Site-Wide Custom Events"
           data-label="Footer Brand guidelines link"
         >
          Brand guidelines
        </a>
        
      </li>
      
      <li class="devsite-footer-utility-item
                 glue-cookie-notification-bar-control">
        
        
        <a class="devsite-footer-utility-link gc-analytics-event"
           href="#"
           data-category="Site-Wide Custom Events"
           data-label="Footer Manage cookies link"
         
           aria-hidden="true"
         >
          Manage cookies
        </a>
        
      </li>
      
      <li class="devsite-footer-utility-item
                 devsite-footer-utility-button">
        
        <span class="devsite-footer-utility-description">Get news and tips by email</span>
        
        
        <a class="devsite-footer-utility-link gc-analytics-event"
           href="/updates"
           data-category="Site-Wide Custom Events"
           data-label="Footer Subscribe link"
         >
          Subscribe
        </a>
        
      </li>
      
    </ul>
    
    
<devsite-language-selector>
  <ul role="presentation">
    
    
    <li role="presentation">
      <a role="menuitem" lang="en"
        >English</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="de"
        >Deutsch</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="es_419"
        >Español – América Latina</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="fr"
        >Français</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="id"
        >Indonesia</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="pl"
        >Polski</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="pt_br"
        >Português – Brasil</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="vi"
        >Tiếng Việt</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="zh_cn"
        >中文 – 简体</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="zh_tw"
        >中文 – 繁體</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="ja"
        >日本語</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="ko"
        >한국어</a>
    </li>
    
  </ul>
</devsite-language-selector>

  </nav>
</div>
          
        </devsite-footer-utility>
        <devsite-panel>
          
        </devsite-panel>
        
      </section></section>
    <devsite-sitemask></devsite-sitemask>
    <devsite-snackbar></devsite-snackbar>
    <devsite-tooltip ></devsite-tooltip>
    <devsite-heading-link></devsite-heading-link>
    <devsite-analytics>
      
        <script type="application/json" analytics>[]</script>
<script type="application/json" tag-management>{&#34;at&#34;: &#34;True&#34;, &#34;ga4&#34;: [{&#34;id&#34;: &#34;G-QFRN08RN6E&#34;, &#34;purpose&#34;: 0}], &#34;ga4p&#34;: [{&#34;id&#34;: &#34;G-QFRN08RN6E&#34;, &#34;purpose&#34;: 0}], &#34;gtm&#34;: [], &#34;parameters&#34;: {&#34;internalUser&#34;: &#34;False&#34;, &#34;language&#34;: {&#34;machineTranslated&#34;: &#34;False&#34;, &#34;requested&#34;: &#34;en&#34;, &#34;served&#34;: &#34;en&#34;}, &#34;pageType&#34;: &#34;codelab&#34;, &#34;projectName&#34;: null, &#34;signedIn&#34;: &#34;False&#34;, &#34;tenant&#34;: &#34;android&#34;, &#34;recommendations&#34;: {&#34;sourcePage&#34;: &#34;&#34;, &#34;sourceType&#34;: 0, &#34;sourceRank&#34;: 0, &#34;sourceIdenticalDescriptions&#34;: 0, &#34;sourceTitleWords&#34;: 0, &#34;sourceDescriptionWords&#34;: 0, &#34;experiment&#34;: &#34;&#34;}, &#34;experiment&#34;: {&#34;ids&#34;: &#34;&#34;}}}</script>
      
    </devsite-analytics>
    
      <devsite-badger></devsite-badger>
    
    
    
<android-fully-clickable
    target="
        .android-case-study .devsite-landing-row-item,
        .android-editorial-and-updates-cards .devsite-card-content-wrapper,
        .android-editorial-and-updates-cards .devsite-landing-row-item,
        .android-grouped-resources .devsite-landing-row-item,
        .android-grouped-resources-contained--primary .devsite-landing-row-item,
        .android-grouped-resources-contained--secondary .devsite-landing-row-item,
        .android-grouped-resources-contained--tertiary .devsite-landing-row-item,
        .android-grouped-resources-uncontained--primary .devsite-landing-row-item,
        .android-grouped-resources-uncontained--secondary .devsite-landing-row-item,
        .android-grouped-resources-uncontained--tertiary .devsite-landing-row-item,
        .android-guide-cards .devsite-landing-row-item,
        .android-illustrated-resources-index .devsite-landing-row-item,
        .android-illustrated-resources-primary .devsite-landing-row-item,
        .android-illustrated-resources-secondary .devsite-landing-row-item,
        .android-illustrated-resources-secondary-small .devsite-landing-row-item,
        .android-illustrated-resources-tertiary .devsite-landing-row-item,
        .android-illustrated-resources-tertiary-small .devsite-landing-row-item,
        .android-promo .devsite-landing-row-item,
        .android-quick-link,
        .android-samples .devsite-card-wrapper,
        .fully-clickable"
    watch=".android-editorial-and-updates-cards, .android-samples, devsite-content"></android-fully-clickable>
    
<script nonce="lOp1pEmF+gUZBW/52Ex5Sziy+T+QSo">
  
  (function(d,e,v,s,i,t,E){d['GoogleDevelopersObject']=i;
    t=e.createElement(v);t.async=1;t.src=s;E=e.getElementsByTagName(v)[0];
    E.parentNode.insertBefore(t,E);})(window, document, 'script',
    'https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/js/app_loader.js', '[3,"en",null,"/js/devsite_app_module.js","https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9","https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android","https://android-dot-devsite-v2-prod.appspot.com",1,null,["/_pwa/android/manifest.json","https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/images/video-placeholder.svg","https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/images/favicon.svg","https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/images/lockup.png","https://fonts.googleapis.com/css?family=Google+Sans:400,500,600,700|Google+Sans+Text:400,400italic,500,500italic,600,600italic,700,700italic|Roboto+Mono:400,500,700&display=swap"],1,null,[1,6,8,12,14,17,21,25,50,52,63,70,75,76,80,87,91,92,93,97,98,100,101,102,103,104,105,107,108,109,110,112,113,116,117,118,120,122,124,125,126,127,129,130,131,132,133,134,135,136,138,140,141,147,148,149,151,152,156,157,158,159,161,163,164,168,169,170,179,180,182,183,186,191,193,196],"AIzaSyAP-jjEJBzmIyKR4F-3XITp8yM9T1gEEI8","AIzaSyB6xiKGDR5O3Ak2okS4rLkauxGUG7XP0hg","developer.android.com","AIzaSyAQk0fBONSGUqCNznf6Krs82Ap1-NV6J4o","AIzaSyCCxcqdrZ_7QMeLCRY20bh_SXdAYqy70KY",null,null,null,["MiscFeatureFlags__developers_footer_image","Profiles__enable_purchase_prompts","BookNav__enable_tenant_cache_key","CloudShell__cloud_code_overflow_menu","DevPro__enable_nvidia_credits_card","MiscFeatureFlags__gdp_dashboard_reskin_enabled","Profiles__enable_playlist_community_acl","Cloud__enable_llm_concierge_chat","DevPro__enable_code_assist","Profiles__enable_completequiz_endpoint","CloudShell__cloud_shell_button","Search__enable_page_map","DevPro__remove_eu_tax_intake_form","Cloud__enable_cloud_dlp_service","Concierge__enable_pushui","Cloud__cache_serialized_dynamic_content","MiscFeatureFlags__enable_project_variables","Profiles__require_profile_eligibility_for_signin","DevPro__enable_enterprise","Cloud__enable_free_trial_server_call","DevPro__enable_vertex_credit_card","Profiles__enable_awarding_url","Analytics__enable_clearcut_logging","Profiles__enable_recognition_badges","TpcFeatures__proxy_prod_host","Profiles__enable_release_notes_notifications","Concierge__enable_actions_menu","Significatio__enable_by_tenant","DevPro__enable_developer_subscriptions","Profiles__enable_dashboard_curated_recommendations","Experiments__reqs_query_experiments","DevPro__enable_embed_profile_creation","MiscFeatureFlags__enable_appearance_cookies","MiscFeatureFlags__enable_explicit_template_dependencies","EngEduTelemetry__enable_engedu_telemetry","Profiles__enable_public_developer_profiles","MiscFeatureFlags__emergency_css","Profiles__enable_stripe_subscription_management","MiscFeatureFlags__enable_project_body_class","MiscFeatureFlags__enable_variable_operator","DevPro__enable_google_payments_buyflow","DevPro__enable_free_benefits","Search__enable_ai_search_summaries_for_all","Profiles__enable_developer_profile_benefits_ui_redesign","Profiles__enable_join_program_group_endpoint","Search__enable_suggestions_from_borg","Profiles__enable_user_type","Concierge__enable_remove_info_panel_tags","Cloud__fast_free_trial","Profiles__enable_completecodelab_endpoint","Search__enable_dynamic_content_confidential_banner","DevPro__enable_cloud_innovators_plus","MiscFeatureFlags__enable_firebase_utm","DevPro__enable_google_one_card","Profiles__enable_complete_playlist_endpoint","MiscFeatureFlags__enable_variable_operator_index_yaml","DevPro__enable_firebase_workspaces_card","MiscFeatureFlags__enable_dark_theme","MiscFeatureFlags__enable_framebox_badge_methods","Profiles__enable_developer_profiles_callout","Profiles__enable_page_saving","Cloud__enable_cloud_shell_fte_user_flow","TpcFeatures__enable_unmirrored_page_left_nav","MiscFeatureFlags__enable_view_transitions","Search__enable_ai_eligibility_checks","Cloud__enable_legacy_calculator_redirect","MiscFeatureFlags__developers_footer_dark_image","Profiles__enable_callout_notifications","Profiles__enable_profile_collections","DevPro__enable_devpro_offers","Cloud__enable_cloudx_experiment_ids","Cloud__enable_cloud_shell"],null,null,"AIzaSyBLEMok-5suZ67qRPzx0qUtbnLmyT_kCVE","https://developerscontentserving-pa.googleapis.com","AIzaSyCM4QpTRSqP5qI4Dvjt4OAScIN8sOUlO-k","https://developerscontentsearch-pa.googleapis.com",2,4,null,"https://developerprofiles-pa.googleapis.com",[3,"android","Android Developers","developer.android.com",null,"android-dot-devsite-v2-prod.appspot.com",null,null,[null,1,null,null,null,null,null,null,null,null,null,[1],null,null,null,null,null,null,[1],[1,null,null,[1,20],"/recommendations"],null,null,null,[1,null,1],[1,1,null,1,1]],null,[18,null,null,null,null,null,"/images/lockup.png","/images/touchicon-180.png",null,null,null,null,null,null,null,null,null,null,null,null,null,2,null,null,null,"/images/lockup-dark-theme.png",[]],[],null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,[6,1,14,15,20,22,23,28,29,37,43],null,[[null,null,1],[1,1]],[[null,null,null,null,null,null,null,[["G-QFRN08RN6E"],null,null,[["G-QFRN08RN6E",1]]],null,null,null,null,1],null,[[1,1],[2,2]]],null,4,null,null,null,null,null,null,null,null,null,null,null,null,null,"android.devsite.google"],null,"pk_live_5170syrHvgGVmSx9sBrnWtA5luvk9BwnVcvIi7HizpwauFG96WedXsuXh790rtij9AmGllqPtMLfhe2RSwD6Pn38V00uBCydV4m",1,null,"https://developerscontentinsights-pa.googleapis.com","AIzaSyCg-ZUslalsEbXMfIo9ZP8qufZgo3LSBDU","AIzaSyDxT0vkxnY_KeINtA4LSePJO-4MAZPMRsE","https://developers.googleapis.com",null,null,"AIzaSyBQom12tzI-rybN7Sf-KfeL4nwm-Rf7PmI\n",null,"https://developerslogging.googleapis.com"]')
  
</script>

    <devsite-a11y-announce></devsite-a11y-announce>
  </body>
</html>