








<!doctype html>
<html 
      lang="zh-CN-x-mtfrom-en"
      dir="ltr">
  <head>
    <meta name="google-signin-client-id" content="721724668570-nbkv1cfusk7kk4eni4pjvepaus73b13t.apps.googleusercontent.com">
    <meta name="google-signin-scope"
          content="profile email https://www.googleapis.com/auth/developerprofiles https://www.googleapis.com/auth/developerprofiles.award">
    <meta property="og:site_name" content="Android Developers">
    <meta property="og:type" content="website"><meta name="theme-color" content="#34a853"><meta charset="utf-8">
    <meta content="IE=Edge" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    

    <link rel="manifest" href="/_pwa/android/manifest.json"
          crossorigin="use-credentials">
    <link rel="preconnect" href="//www.gstatic.com" crossorigin>
    <link rel="preconnect" href="//fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="//fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="//apis.google.com" crossorigin>
    <link rel="preconnect" href="//www.google-analytics.com" crossorigin><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Google+Sans:400,500,600,700|Google+Sans+Text:400,400italic,500,500italic,600,600italic,700,700italic|Roboto+Mono:400,500,700&display=swap">
      <link rel="stylesheet"
            href="//fonts.googleapis.com/css2?family=Material+Icons&family=Material+Symbols+Outlined&display=block"><link rel="stylesheet" href="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/css/app.css">
      
        <link rel="stylesheet" href="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/css/dark-theme.css" disabled>
      <link rel="shortcut icon" href="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/images/favicon.svg">
    <link rel="apple-touch-icon" href="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/images/touchicon-180.png"><link rel="canonical" href="https://developer.android.com/codelabs/wear-tiles?hl=zh-cn"><link rel="search" type="application/opensearchdescription+xml"
            title="Android Developers" href="https://developer.android.com/s/opensearch.xml?hl=zh-cn">
      <link rel="alternate" hreflang="en"
          href="https://developer.android.com/codelabs/wear-tiles" /><link rel="alternate" hreflang="x-default" href="https://developer.android.com/codelabs/wear-tiles" /><link rel="alternate" hreflang="zh-Hans"
          href="https://developer.android.com/codelabs/wear-tiles?hl=zh-cn" /><link rel="alternate" hreflang="zh-Hant"
          href="https://developer.android.com/codelabs/wear-tiles?hl=zh-tw" /><link rel="alternate" hreflang="fr"
          href="https://developer.android.com/codelabs/wear-tiles?hl=fr" /><link rel="alternate" hreflang="id"
          href="https://developer.android.com/codelabs/wear-tiles?hl=id" /><link rel="alternate" hreflang="ja"
          href="https://developer.android.com/codelabs/wear-tiles?hl=ja" /><link rel="alternate" hreflang="ko"
          href="https://developer.android.com/codelabs/wear-tiles?hl=ko" /><link rel="alternate" hreflang="pt-BR"
          href="https://developer.android.com/codelabs/wear-tiles?hl=pt-br" /><link rel="alternate" hreflang="es-419"
          href="https://developer.android.com/codelabs/wear-tiles?hl=es-419" /><link rel="alternate" hreflang="vi"
          href="https://developer.android.com/codelabs/wear-tiles?hl=vi" /><title>在 Wear OS 中创建您的第一个功能块 &nbsp;|&nbsp; Android Developers</title>

<meta property="og:title" content="在 Wear OS 中创建您的第一个功能块 &nbsp;|&nbsp; Android Developers"><meta name="description" content="在此 Codelab 中，您将学习如何为 Wear OS 创建自己的功能块。您将使用一个库，该库可帮助您更轻松地构建符合 Material 3 Expressive 设计准则的界面。而且，在开发过程中，您还可在 Android Studio 中预览功能块。">
  <meta property="og:description" content="在此 Codelab 中，您将学习如何为 Wear OS 创建自己的功能块。您将使用一个库，该库可帮助您更轻松地构建符合 Material 3 Expressive 设计准则的界面。而且，在开发过程中，您还可在 Android Studio 中预览功能块。"><meta property="og:url" content="https://developer.android.com/codelabs/wear-tiles?hl=zh-cn"><meta property="og:locale" content="zh_cn"><link rel="alternate machine-translated-from" hreflang="en"
        href="https://developer.android.com/codelabs/wear-tiles?hl=en">
  
    
    
    
    
    
    
    
    
    
    
  

    
      <link rel="stylesheet" href="/extras.css"></head>
  <body class=""
        template="codelab"
        theme="android-theme"
        type="codelab"
        
        
        appearance
        
        layout="docs"
        
        
        
        
        display-toc
        pending>
  
    <devsite-progress type="indeterminate" id="app-progress"></devsite-progress>
  
  
    <a href="#main-content" class="skip-link button">
      
      跳至主要内容
    </a>
    <section class="devsite-wrapper">
      <devsite-cookie-notification-bar></devsite-cookie-notification-bar><devsite-header role="banner">
  
    





















<div class="devsite-header--inner" data-nosnippet>
  <div class="devsite-top-logo-row-wrapper-wrapper">
    <div class="devsite-top-logo-row-wrapper">
      <div class="devsite-top-logo-row">
        <button type="button" id="devsite-hamburger-menu"
          class="devsite-header-icon-button button-flat material-icons gc-analytics-event"
          data-category="Site-Wide Custom Events"
          data-label="Navigation menu button"
          visually-hidden
          aria-label="打开菜单">
        </button>
        
<div class="devsite-product-name-wrapper">

  <a href="/" class="devsite-site-logo-link gc-analytics-event"
   data-category="Site-Wide Custom Events" data-label="Site logo" track-type="globalNav"
   track-name="androidDevelopers" track-metadata-position="nav"
   track-metadata-eventDetail="nav">
  
  <picture>
    
    <source srcset="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/images/lockup-dark-theme.png"
            media="(prefers-color-scheme: dark)"
            class="devsite-dark-theme">
    
    <img src="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/images/lockup.png" class="devsite-site-logo" alt="Android Developers">
  </picture>
  
</a>



</div>
        <div class="devsite-top-logo-row-middle">
          <div class="devsite-header-upper-tabs">
            
           </div>
          
<devsite-search
    enable-signin
    enable-search
    enable-suggestions
      enable-query-completion
    
    enable-search-summaries
    
    tenant-name="Android Developers"
    
    
    
    
    
    >
  <form class="devsite-search-form" action="https://developer.android.com/s/results?hl=zh-cn" method="GET">
    <div class="devsite-search-container">
      <button type="button"
              search-open
              class="devsite-search-button devsite-header-icon-button button-flat material-icons"
              
              aria-label="打开搜索框"></button>
      <div class="devsite-searchbox">
        <input
          aria-activedescendant=""
          aria-autocomplete="list"
          
          aria-label="搜索"
          aria-expanded="false"
          aria-haspopup="listbox"
          autocomplete="off"
          class="devsite-search-field devsite-search-query"
          name="q"
          
          placeholder="搜索"
          role="combobox"
          type="text"
          value=""
          >
          <div class="devsite-search-image material-icons" aria-hidden="true">
            
              <svg class="devsite-search-ai-image" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <g clip-path="url(#clip0_6641_386)">
                    <path d="M19.6 21L13.3 14.7C12.8 15.1 12.225 15.4167 11.575 15.65C10.925 15.8833 10.2333 16 9.5 16C7.68333 16 6.14167 15.375 4.875 14.125C3.625 12.8583 3 11.3167 3 9.5C3 7.68333 3.625 6.15 4.875 4.9C6.14167 3.63333 7.68333 3 9.5 3C10.0167 3 10.5167 3.05833 11 3.175C11.4833 3.275 11.9417 3.43333 12.375 3.65L10.825 5.2C10.6083 5.13333 10.3917 5.08333 10.175 5.05C9.95833 5.01667 9.73333 5 9.5 5C8.25 5 7.18333 5.44167 6.3 6.325C5.43333 7.19167 5 8.25 5 9.5C5 10.75 5.43333 11.8167 6.3 12.7C7.18333 13.5667 8.25 14 9.5 14C10.6667 14 11.6667 13.625 12.5 12.875C13.35 12.1083 13.8417 11.15 13.975 10H15.975C15.925 10.6333 15.7833 11.2333 15.55 11.8C15.3333 12.3667 15.05 12.8667 14.7 13.3L21 19.6L19.6 21ZM17.5 12C17.5 10.4667 16.9667 9.16667 15.9 8.1C14.8333 7.03333 13.5333 6.5 12 6.5C13.5333 6.5 14.8333 5.96667 15.9 4.9C16.9667 3.83333 17.5 2.53333 17.5 0.999999C17.5 2.53333 18.0333 3.83333 19.1 4.9C20.1667 5.96667 21.4667 6.5 23 6.5C21.4667 6.5 20.1667 7.03333 19.1 8.1C18.0333 9.16667 17.5 10.4667 17.5 12Z" fill="#5F6368"/>
                  </g>
                <defs>
                <clipPath id="clip0_6641_386">
                <rect width="24" height="24" fill="white"/>
                </clipPath>
                </defs>
              </svg>
            
          </div>
          <div class="devsite-search-shortcut-icon-container" aria-hidden="true">
            <kbd class="devsite-search-shortcut-icon">/</kbd>
          </div>
      </div>
    </div>
  </form>
  <button type="button"
          search-close
          class="devsite-search-button devsite-header-icon-button button-flat material-icons"
          
          aria-label="关闭搜索框"></button>
</devsite-search>

        </div>

        

          

          

          <devsite-appearance-selector></devsite-appearance-selector>

          
<devsite-language-selector>
  <ul role="presentation">
    
    
    <li role="presentation">
      <a role="menuitem" lang="en"
        >English</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="de"
        >Deutsch</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="es_419"
        >Español – América Latina</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="fr"
        >Français</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="id"
        >Indonesia</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="pl"
        >Polski</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="pt_br"
        >Português – Brasil</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="vi"
        >Tiếng Việt</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="zh_cn"
        >中文 – 简体</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="zh_tw"
        >中文 – 繁體</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="ja"
        >日本語</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="ko"
        >한국어</a>
    </li>
    
  </ul>
</devsite-language-selector>


          
            <a class="devsite-header-link devsite-top-button button gc-analytics-event "
    href="https://developer.android.com/studio?hl=zh-cn"
    data-category="Site-Wide Custom Events"
    data-label="Site header link: Android Studio"
    >
  Android Studio
</a>
          

        

        
          <devsite-user 
                        
                        
                          enable-profiles
                        
                        
                        id="devsite-user">
            
              
              <span class="button devsite-top-button" aria-hidden="true" visually-hidden>登录</span>
            
          </devsite-user>
        
        
        
      </div>
    </div>
  </div>



</div>



  
</devsite-header>
      <devsite-book-nav scrollbars hidden>
        
          





















<div class="devsite-book-nav-filter"
     hidden>
  <span class="filter-list-icon material-icons" aria-hidden="true"></span>
  <input type="text"
         placeholder="过滤条件"
         
         aria-label="输入文本以进行过滤"
         role="searchbox">
  
  <span class="filter-clear-button hidden"
        data-title="清除过滤条件"
        aria-label="清除过滤条件"
        role="button"
        tabindex="0"></span>
</div>

<nav class="devsite-book-nav devsite-nav nocontent"
     aria-label="侧边菜单">
  <div class="devsite-mobile-header">
    <button type="button"
            id="devsite-close-nav"
            class="devsite-header-icon-button button-flat material-icons gc-analytics-event"
            data-category="Site-Wide Custom Events"
            data-label="Close navigation"
            aria-label="关闭导航栏">
    </button>
    <div class="devsite-product-name-wrapper">

  <a href="/" class="devsite-site-logo-link gc-analytics-event"
   data-category="Site-Wide Custom Events" data-label="Site logo" track-type="globalNav"
   track-name="androidDevelopers" track-metadata-position="nav"
   track-metadata-eventDetail="nav">
  
  <picture>
    
    <source srcset="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/images/lockup-dark-theme.png"
            media="(prefers-color-scheme: dark)"
            class="devsite-dark-theme">
    
    <img src="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/images/lockup.png" class="devsite-site-logo" alt="Android Developers">
  </picture>
  
</a>


</div>
  </div>

  <div class="devsite-book-nav-wrapper">
    <div class="devsite-mobile-nav-top">
      
        <ul class="devsite-nav-list">
          
          
    
    
<li class="devsite-nav-item">

  
  <a href="/studio"
    
       class="devsite-nav-title gc-analytics-event "
    

    
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Android Studio"
     track-type="navMenu"
     track-metadata-eventDetail="globalMenu"
     track-metadata-position="nav">
  
    <span class="devsite-nav-text" tooltip >
      Android Studio
   </span>
    
  
  </a>
  

</li>

  
          
        </ul>
      
    </div>
    
  </div>
</nav>
        
      </devsite-book-nav>
      <section id="gc-wrapper">
        <main role="main" id="main-content" class="devsite-main-content"
            
              
              has-sidebar
            >
          <div class="devsite-sidebar">
            <div class="devsite-sidebar-content">
                
                <devsite-toc class="devsite-nav"
                            role="navigation"
                            aria-label="本页内容"
                            depth="1"
                            scrollbars
                  ></devsite-toc>
                <devsite-recommendations-sidebar class="nocontent devsite-nav">
                </devsite-recommendations-sidebar>
            </div>
          </div>
          <devsite-content>
            
              












<article class="devsite-article"><style>
      body {
        transition: opacity ease-in 0.2s;
      }

      body[unresolved] {
        opacity: 0;
        display: block;
        overflow: hidden;
        position: relative;
      }
      </style>
  
  
  
  
  

  <div class="devsite-article-meta nocontent" role="navigation">
    
    
    <ul class="devsite-breadcrumb-list"
  >
  
</ul>
    
  </div>
  
    <h1 class="devsite-page-title" tabindex="-1">
      在 Wear OS 中创建您的第一个功能块<div class="devsite-actions" hidden data-nosnippet><devsite-feature-tooltip
      ack-key="AckCollectionsBookmarkTooltipDismiss"
      analytics-category="Site-Wide Custom Events"
      analytics-action-show="Callout Profile displayed"
      analytics-action-close="Callout Profile dismissed"
      analytics-label="Create Collection Callout"
      class="devsite-page-bookmark-tooltip nocontent"
      dismiss-button="true"
      id="devsite-collections-dropdown"
      
      dismiss-button-text="关闭"

      
      close-button-text="知道了">

    
    
      <devsite-bookmark></devsite-bookmark>
    

    <span slot="popout-heading">
      
      使用集合让一切井井有条
    </span>
    <span slot="popout-contents">
      
      根据您的偏好保存内容并对其进行分类。
    </span>
  </devsite-feature-tooltip></div>
  
      
    </h1>
  

  <devsite-toc class="devsite-nav"
    depth="1"
    devsite-toc-embedded
    >
  </devsite-toc>
  
    
  <div class="devsite-article-body clearfix
  ">

  
    
    
    
    <google-codelab-analytics ga4id="G-JTFZSJVVVZ" gaid="UA-49880327-14"></google-codelab-analytics>
    <google-codelab category="android,wearos" codelab-ga4id="" codelab-gaid="" doc-id="1wKBFtKaS1VNBLU-5MFBcDgaiWpC38bUTpLe7RW36mks" environment="web" feedback-link="" id="wear-tiles" layout="paginated" no-tooltip="" title="在 Wear OS 中创建您的第一个功能块">
      
        <google-codelab-step duration="2" step="0" label="简介">
          
            <google-codelab-about authors="Michael Stillwell" duration="47" last-updated="2025-05-19T21:43:41Z" codelab-title="在 Wear OS 中创建您的第一个功能块">
            </google-codelab-about>
          
          <h2 class="step-title" data-text="               1. 简介           " id="0" tabindex="-1">
              1. 简介
          </h2>
          <p class="image-container"><img alt="三个功能块：健身、信息、日历。" sizes="(max-width: 840px) 100vw, 856px" src="https://developer.android.com/static/codelabs/wear-tiles/img/988cdc9e587b0f2c.png?hl=zh-cn" srcset="https://developer.android.com/static/codelabs/wear-tiles/img/988cdc9e587b0f2c_36.png?hl=zh-cn 36w,https://developer.android.com/static/codelabs/wear-tiles/img/988cdc9e587b0f2c_48.png?hl=zh-cn 48w,https://developer.android.com/static/codelabs/wear-tiles/img/988cdc9e587b0f2c_72.png?hl=zh-cn 72w,https://developer.android.com/static/codelabs/wear-tiles/img/988cdc9e587b0f2c_96.png?hl=zh-cn 96w,https://developer.android.com/static/codelabs/wear-tiles/img/988cdc9e587b0f2c_480.png?hl=zh-cn 480w,https://developer.android.com/static/codelabs/wear-tiles/img/988cdc9e587b0f2c_720.png?hl=zh-cn 720w,https://developer.android.com/static/codelabs/wear-tiles/img/988cdc9e587b0f2c_856.png?hl=zh-cn 856w,https://developer.android.com/static/codelabs/wear-tiles/img/988cdc9e587b0f2c_960.png?hl=zh-cn 960w,https://developer.android.com/static/codelabs/wear-tiles/img/988cdc9e587b0f2c_1440.png?hl=zh-cn 1440w,https://developer.android.com/static/codelabs/wear-tiles/img/988cdc9e587b0f2c_1920.png?hl=zh-cn 1920w,https://developer.android.com/static/codelabs/wear-tiles/img/988cdc9e587b0f2c_2880.png?hl=zh-cn 2880w" style="width: 606.45px" /></p>
<p>用户可通过 <a href="https://developer.android.com/training/articles/wear-tiles?hl=zh-cn" target="_blank">Wear OS 功能块</a>轻松访问所需的信息和操作，顺利完成各种任务。只需在表盘上轻轻滑动一下，用户即可查看最新的天气预报或启动定时器。</p>
<p>功能块作为系统界面的一部分运行，而不是在其专属的应用容器中运行。我们使用 <strong>Service</strong> 来描述功能块的布局和内容。系统界面随后会根据需要渲染功能块。</p>
<h2 data-text="实践内容" id="what-youll-do" is-upgraded="" tabindex="-1">实践内容</h2>
<p class="image-container"><img alt="656045bed9c45083.png" sizes="(max-width: 840px) 100vw, 856px" src="https://developer.android.com/static/codelabs/wear-tiles/img/656045bed9c45083.png?hl=zh-cn" srcset="https://developer.android.com/static/codelabs/wear-tiles/img/656045bed9c45083_36.png?hl=zh-cn 36w,https://developer.android.com/static/codelabs/wear-tiles/img/656045bed9c45083_48.png?hl=zh-cn 48w,https://developer.android.com/static/codelabs/wear-tiles/img/656045bed9c45083_72.png?hl=zh-cn 72w,https://developer.android.com/static/codelabs/wear-tiles/img/656045bed9c45083_96.png?hl=zh-cn 96w,https://developer.android.com/static/codelabs/wear-tiles/img/656045bed9c45083_480.png?hl=zh-cn 480w,https://developer.android.com/static/codelabs/wear-tiles/img/656045bed9c45083_720.png?hl=zh-cn 720w,https://developer.android.com/static/codelabs/wear-tiles/img/656045bed9c45083_856.png?hl=zh-cn 856w,https://developer.android.com/static/codelabs/wear-tiles/img/656045bed9c45083_960.png?hl=zh-cn 960w,https://developer.android.com/static/codelabs/wear-tiles/img/656045bed9c45083_1440.png?hl=zh-cn 1440w,https://developer.android.com/static/codelabs/wear-tiles/img/656045bed9c45083_1920.png?hl=zh-cn 1920w,https://developer.android.com/static/codelabs/wear-tiles/img/656045bed9c45083_2880.png?hl=zh-cn 2880w" style="width: 285.50px" /></p>
<p>您将为一款即时通讯应用构建功能块，在其中显示近期对话。通过该功能块界面，用户可以跳转到以下三个常见任务：</p>
<ul>
<li>打开对话</li>
<li>撰写新消息</li>
</ul>
<h2 class="checklist" data-text="学习内容" id="what-youll-learn" is-upgraded="" tabindex="-1">学习内容</h2>
<p>在此 Codelab 中，您将学习如何编写自己的 Wear OS 功能块，包括如何执行以下操作：</p>
<ul>
<li>创建 <code dir="ltr" translate="no">TileService</code></li>
<li>在设备上测试功能块</li>
<li>在 Android Studio 中预览功能块的界面</li>
<li>为功能块开发界面</li>
<li>添加图片</li>
<li>处理互动</li>
</ul>
<h2 data-text="前提条件" id="prerequisites" is-upgraded="" tabindex="-1">前提条件</h2>
<ul>
<li>对 <a href="https://developer.android.com/kotlin?hl=zh-cn" target="_blank">Kotlin</a> 有基本的了解</li>
</ul>


        </google-codelab-step>
      
        <google-codelab-step duration="5" step="1" label="准备工作">
          
          <h2 class="step-title" data-text="               2. 准备工作           " id="1" tabindex="-1">
              2. 准备工作
          </h2>
          <p>在此步骤中，您将设置环境并下载起始项目。</p>
<h2 data-text="所需条件" id="what-you-will-need" is-upgraded="" tabindex="-1">所需条件</h2>
<ul>
<li><a href="https://androidstudio.googleblog.com/2024/05/android-studio-koala-feature-drop.html" target="_blank">Android Studio Koala 功能更新 | 2024.1.2 Canary 1</a> 或更高版本</li>
<li>Wear OS 设备或模拟器</li>
</ul>
<p>如果您不熟悉 Wear OS 的用法，最好先<a href="https://medium.com/androiddevelopers/get-familiar-with-wear-os-3-without-a-physical-device-e7962c97f02b" target="_blank">阅读此快速入门指南</a>，然后再开始操作。文中介绍了如何设置 Wear OS 模拟器，以及如何在系统中导航。</p>
<h2 data-text="下载代码" id="download-code" is-upgraded="" tabindex="-1">下载代码</h2>
<p>如果您已安装 git，只需运行以下命令，即可克隆<a href="https://github.com/android/codelab-wear-tiles" target="_blank">此代码库</a>中的代码。</p>
<div></div><devsite-code><pre translate="no" dir="ltr" is-upgraded>git clone https://github.com/android/codelab-wear-tiles.git
cd codelab-wear-tiles
</pre></devsite-code>
<p>如果您未安装 git，可以点击下方按钮下载此 Codelab 的全部代码：</p>
<p><a href="https://github.com/android/codelab-wear-tiles/archive/main.zip" target="_blank"><button class="button button-primary button-with-icon"><span aria-hidden="true" class="material-icons" translate="no">file_download</span>下载 ZIP 文件</button></a></p>
<aside class="special"><p>示例目录中包含此 Codelab 的 <strong>start</strong> 和 <strong>finished</strong> 代码。在 Android Studio 左侧的“Project”视图中，您将看到两个模块。</p>
<ul>
<li><img alt="d61ffd479bdbcb9f.png" sizes="(max-width: 840px) 100vw, 856px" src="https://developer.android.com/static/codelabs/wear-tiles/img/d61ffd479bdbcb9f.png?hl=zh-cn" srcset="https://developer.android.com/static/codelabs/wear-tiles/img/d61ffd479bdbcb9f_36.png?hl=zh-cn 36w,https://developer.android.com/static/codelabs/wear-tiles/img/d61ffd479bdbcb9f_48.png?hl=zh-cn 48w,https://developer.android.com/static/codelabs/wear-tiles/img/d61ffd479bdbcb9f_72.png?hl=zh-cn 72w,https://developer.android.com/static/codelabs/wear-tiles/img/d61ffd479bdbcb9f_96.png?hl=zh-cn 96w,https://developer.android.com/static/codelabs/wear-tiles/img/d61ffd479bdbcb9f_480.png?hl=zh-cn 480w,https://developer.android.com/static/codelabs/wear-tiles/img/d61ffd479bdbcb9f_720.png?hl=zh-cn 720w,https://developer.android.com/static/codelabs/wear-tiles/img/d61ffd479bdbcb9f_856.png?hl=zh-cn 856w,https://developer.android.com/static/codelabs/wear-tiles/img/d61ffd479bdbcb9f_960.png?hl=zh-cn 960w,https://developer.android.com/static/codelabs/wear-tiles/img/d61ffd479bdbcb9f_1440.png?hl=zh-cn 1440w,https://developer.android.com/static/codelabs/wear-tiles/img/d61ffd479bdbcb9f_1920.png?hl=zh-cn 1920w,https://developer.android.com/static/codelabs/wear-tiles/img/d61ffd479bdbcb9f_2880.png?hl=zh-cn 2880w" style="width: 26.00px" /> <strong>start</strong> - 该项目的起始代码；您将更改这些代码来完成此 Codelab</li>
<li><img alt="d61ffd479bdbcb9f.png" sizes="(max-width: 840px) 100vw, 856px" src="https://developer.android.com/static/codelabs/wear-tiles/img/d61ffd479bdbcb9f.png?hl=zh-cn" srcset="https://developer.android.com/static/codelabs/wear-tiles/img/d61ffd479bdbcb9f_36.png?hl=zh-cn 36w,https://developer.android.com/static/codelabs/wear-tiles/img/d61ffd479bdbcb9f_48.png?hl=zh-cn 48w,https://developer.android.com/static/codelabs/wear-tiles/img/d61ffd479bdbcb9f_72.png?hl=zh-cn 72w,https://developer.android.com/static/codelabs/wear-tiles/img/d61ffd479bdbcb9f_96.png?hl=zh-cn 96w,https://developer.android.com/static/codelabs/wear-tiles/img/d61ffd479bdbcb9f_480.png?hl=zh-cn 480w,https://developer.android.com/static/codelabs/wear-tiles/img/d61ffd479bdbcb9f_720.png?hl=zh-cn 720w,https://developer.android.com/static/codelabs/wear-tiles/img/d61ffd479bdbcb9f_856.png?hl=zh-cn 856w,https://developer.android.com/static/codelabs/wear-tiles/img/d61ffd479bdbcb9f_960.png?hl=zh-cn 960w,https://developer.android.com/static/codelabs/wear-tiles/img/d61ffd479bdbcb9f_1440.png?hl=zh-cn 1440w,https://developer.android.com/static/codelabs/wear-tiles/img/d61ffd479bdbcb9f_1920.png?hl=zh-cn 1920w,https://developer.android.com/static/codelabs/wear-tiles/img/d61ffd479bdbcb9f_2880.png?hl=zh-cn 2880w" style="width: 26.00px" /> <strong>finished</strong> - 该 Codelab 完成后的代码；用于检查您的成果</li>
</ul>
</aside>
<h2 data-text="在 Android Studio 中打开项目" id="open-project-in-android-studio" is-upgraded="" tabindex="-1">在 Android Studio 中打开项目</h2>
<p>在“Welcome to Android Studio”窗口中，选择 <img alt="c01826594f360d94.png" sizes="(max-width: 840px) 100vw, 856px" src="https://developer.android.com/static/codelabs/wear-tiles/img/c01826594f360d94.png?hl=zh-cn" srcset="https://developer.android.com/static/codelabs/wear-tiles/img/c01826594f360d94_36.png?hl=zh-cn 36w,https://developer.android.com/static/codelabs/wear-tiles/img/c01826594f360d94_48.png?hl=zh-cn 48w,https://developer.android.com/static/codelabs/wear-tiles/img/c01826594f360d94_72.png?hl=zh-cn 72w,https://developer.android.com/static/codelabs/wear-tiles/img/c01826594f360d94_96.png?hl=zh-cn 96w,https://developer.android.com/static/codelabs/wear-tiles/img/c01826594f360d94_480.png?hl=zh-cn 480w,https://developer.android.com/static/codelabs/wear-tiles/img/c01826594f360d94_720.png?hl=zh-cn 720w,https://developer.android.com/static/codelabs/wear-tiles/img/c01826594f360d94_856.png?hl=zh-cn 856w,https://developer.android.com/static/codelabs/wear-tiles/img/c01826594f360d94_960.png?hl=zh-cn 960w,https://developer.android.com/static/codelabs/wear-tiles/img/c01826594f360d94_1440.png?hl=zh-cn 1440w,https://developer.android.com/static/codelabs/wear-tiles/img/c01826594f360d94_1920.png?hl=zh-cn 1920w,https://developer.android.com/static/codelabs/wear-tiles/img/c01826594f360d94_2880.png?hl=zh-cn 2880w" style="width: 21.00px" /> <strong>Open an Existing Project</strong> 或依次选择 <strong>File > Open</strong>，然后选择文件夹 <strong>[Download Location]</strong>。</p>


        </google-codelab-step>
      
        <google-codelab-step duration="8" step="2" label="创建基本功能块">
          
          <h2 class="step-title" data-text="               3. 创建基本功能块           " id="2" tabindex="-1">
              3. 创建基本功能块
          </h2>
          <p>功能块的入口点是功能块服务。在此步骤中，您将注册一项功能块服务，并定义该功能块的布局。</p>
<h2 data-text="HelloWorldTileService" id="helloworldtileservice" is-upgraded="" tabindex="-1">HelloWorldTileService</h2>
<p>实现 <a href="https://developer.android.com/reference/androidx/wear/tiles/TileService?hl=zh-cn" target="_blank"><code dir="ltr" translate="no">TileService</code></a> 的类需要指定两个方法：</p>
<ul>
<li><code dir="ltr" translate="no">onTileResourcesRequest(requestParams: ResourcesRequest): ListenableFuture&lt;Resources&gt;</code></li>
<li><code dir="ltr" translate="no">onTileRequest(requestParams: TileRequest): ListenableFuture&lt;Tile&gt;</code></li>
</ul>
<p>第一个方法会返回一个 <code dir="ltr" translate="no">Resources</code> 对象，它的主要功能是将字符串 ID 映射到我们在功能块中使用的图片资源。</p>
<p>第二个方法会返回功能块的说明（包括其布局）。我们将在此函数中定义功能块的布局以及数据与功能块的绑定方式。</p>
<p>从 <code dir="ltr" translate="no">start</code> 模块打开 <code dir="ltr" translate="no">HelloWorldTileService.kt</code>。您将进行的所有更改均位于此模块中。我们还提供了一个 <code dir="ltr" translate="no">finished</code> 模块，供您查看此 Codelab 的成果。</p>
<p><code dir="ltr" translate="no">HelloWorldTileService</code> 会扩展 <code dir="ltr" translate="no">SuspendingTileService</code>，后者是一个来自 <a href="https://google.github.io/horologist/tiles/" target="_blank">Horologist Tiles 库</a>的对 Kotlin 协程友好的封装容器。<strong>Horologist</strong> 是 Google 的一组库，旨在为 Wear OS 开发者提供开发者通常需要但 Jetpack 尚未提供的功能。</p>
<p><code dir="ltr" translate="no">SuspendingTileService</code> 提供了两个挂起函数，这两个挂起函数是 <code dir="ltr" translate="no">TileService</code> 中的函数的协程版本：</p>
<ul>
<li><code dir="ltr" translate="no">suspend resourcesRequest(requestParams: ResourcesRequest): Resources</code></li>
<li><code dir="ltr" translate="no">suspend tileRequest(requestParams: TileRequest): Tile</code></li>
</ul>
<p>如需详细了解协程，请参阅 <a href="https://developer.android.com/kotlin/coroutines?hl=zh-cn" target="_blank">Android 上的 Kotlin 协程</a>文档。</p>
<p><code dir="ltr" translate="no">HelloWorldTileService</code> <strong>尚未完成</strong>。我们需要在清单中注册服务，还需要为 <code dir="ltr" translate="no">tileLayout</code> 提供实现。</p>
<h2 data-text="注册功能块服务" id="register-the-tile-service" is-upgraded="" tabindex="-1">注册功能块服务</h2>
<p>在清单中注册功能块服务后，即可使其显示在可用功能块列表中，供用户自行添加。</p>
<p>在 <code dir="ltr" translate="no">&lt;application&gt;</code> 元素内添加 <code dir="ltr" translate="no">&lt;service&gt;</code>：</p>
<h3 data-text="start/src/main/AndroidManifest.xml" id="startsrcmainandroidmanifest.xml" is-upgraded="" tabindex="-1">start/src/main/AndroidManifest.xml</h3>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="GDScript"><code translate="no" dir="ltr">&lt;<span class="devsite-syntax-n">service</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">android</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">name</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"com.example.wear.tiles.hello.HelloWorldTileService"</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">android</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">icon</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"@drawable/ic_waving_hand_24"</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">android</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">label</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"@string/hello_tile_label"</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">android</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">description</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"@string/hello_tile_description"</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">android</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">exported</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"true"</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">android</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">permission</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"com.google.android.wearable.permission.BIND_TILE_PROVIDER"</span>&gt;
<span class="devsite-syntax-w">    </span>
<span class="devsite-syntax-w">    </span>&lt;<span class="devsite-syntax-n">intent</span><span class="devsite-syntax-o">-</span><span class="devsite-syntax-n">filter</span>&gt;
<span class="devsite-syntax-w">        </span>&lt;<span class="devsite-syntax-n">action</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">android</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">name</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"androidx.wear.tiles.action.BIND_TILE_PROVIDER"</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">/</span>&gt;
<span class="devsite-syntax-w">    </span>&lt;<span class="devsite-syntax-o">/</span><span class="devsite-syntax-n">intent</span><span class="devsite-syntax-o">-</span><span class="devsite-syntax-n">filter</span>&gt;

<span class="devsite-syntax-w">    </span>&lt;<span class="devsite-syntax-o">!--</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">The</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">tile</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">preview</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">shown</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">when</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">configuring</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">tiles</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">on</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">your</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">phone</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">--</span>&gt;
<span class="devsite-syntax-w">    </span>&lt;<span class="devsite-syntax-n">meta</span><span class="devsite-syntax-o">-</span><span class="devsite-syntax-n">data</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">android</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">name</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"androidx.wear.tiles.PREVIEW"</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">android</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">resource</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"@drawable/tile_hello"</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">/</span>&gt;
&lt;<span class="devsite-syntax-o">/</span><span class="devsite-syntax-n">service</span>&gt;
</code></pre></devsite-code>
<p>当首次加载功能块时，或者加载功能块出错时，系统将使用图标和标签（作为占位符）。末尾的元数据定义了当用户添加功能块时在轮播界面中显示的预览图片。</p>
<h2 data-text="定义功能块布局" id="define-a-layout-for-the-tile" is-upgraded="" tabindex="-1">定义功能块布局</h2>
<p><code dir="ltr" translate="no">HelloWorldTileService</code> 有一个名为 <code dir="ltr" translate="no">tileLayout</code> 的函数，其正文为 <code dir="ltr" translate="no">TODO()</code>。现在，我们将其替换为一个实现，并在其中定义功能块的布局：</p>
<h3 data-text="start/src/main/java/com/example/wear/tiles/hello/HelloWorldTileService.kt" id="startsrcmainjavacomexampleweartileshellohelloworldtileservice.kt" is-upgraded="" tabindex="-1">start/src/main/java/com/example/wear/tiles/hello/HelloWorldTileService.kt</h3>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Text only"><code translate="no" dir="ltr">fun tileLayout(
    context: Context,
    deviceConfiguration: DeviceParametersBuilders.DeviceParameters,
    message: String,
) =
    materialScope(
        context = context,
        deviceConfiguration = deviceConfiguration,
        allowDynamicTheme = false,
    ) {
        primaryLayout(mainSlot = { text(message.layoutString) })
    }
</code></pre></devsite-code>
<p>这是您创建的第一个 Wear OS 功能块！让我们安装此功能块，看看其外观如何。</p>


        </google-codelab-step>
      
        <google-codelab-step duration="2" step="3" label="在设备上测试功能块">
          
          <h2 class="step-title" data-text="               4. 在设备上测试功能块           " id="3" tabindex="-1">
              4. 在设备上测试功能块
          </h2>
          <p>在运行配置下拉菜单中选择 start 模块后，即可在设备或模拟器中安装应用（<code dir="ltr" translate="no">start</code> 模块），然后像用户一样手动安装功能块。</p>
<p>不过，Android Studio 提供了一个快捷方式来实现此目的：点按边线中的“运行服务”图标 (▷)，然后选择“Run ‘HelloWorldTileService'”，即可在已连接的设备上安装并启动卡片。</p>
<p class="image-container"><img alt="ded9f9355abd02f3.png" sizes="(max-width: 840px) 100vw, 856px" src="https://developer.android.com/static/codelabs/wear-tiles/img/ded9f9355abd02f3.png?hl=zh-cn" srcset="https://developer.android.com/static/codelabs/wear-tiles/img/ded9f9355abd02f3_36.png?hl=zh-cn 36w,https://developer.android.com/static/codelabs/wear-tiles/img/ded9f9355abd02f3_48.png?hl=zh-cn 48w,https://developer.android.com/static/codelabs/wear-tiles/img/ded9f9355abd02f3_72.png?hl=zh-cn 72w,https://developer.android.com/static/codelabs/wear-tiles/img/ded9f9355abd02f3_96.png?hl=zh-cn 96w,https://developer.android.com/static/codelabs/wear-tiles/img/ded9f9355abd02f3_480.png?hl=zh-cn 480w,https://developer.android.com/static/codelabs/wear-tiles/img/ded9f9355abd02f3_720.png?hl=zh-cn 720w,https://developer.android.com/static/codelabs/wear-tiles/img/ded9f9355abd02f3_856.png?hl=zh-cn 856w,https://developer.android.com/static/codelabs/wear-tiles/img/ded9f9355abd02f3_960.png?hl=zh-cn 960w,https://developer.android.com/static/codelabs/wear-tiles/img/ded9f9355abd02f3_1440.png?hl=zh-cn 1440w,https://developer.android.com/static/codelabs/wear-tiles/img/ded9f9355abd02f3_1920.png?hl=zh-cn 1920w,https://developer.android.com/static/codelabs/wear-tiles/img/ded9f9355abd02f3_2880.png?hl=zh-cn 2880w" style="width: 1740.00px" /></p>
<p>选择“Run ‘HelloWorldTileService'”，在已连接的设备上构建和运行功能块。它应如以下的屏幕截图所示。</p>
<p class="image-container"><img alt="693c130912097be6.png" sizes="(max-width: 840px) 100vw, 856px" src="https://developer.android.com/static/codelabs/wear-tiles/img/693c130912097be6.png?hl=zh-cn" srcset="https://developer.android.com/static/codelabs/wear-tiles/img/693c130912097be6_36.png?hl=zh-cn 36w,https://developer.android.com/static/codelabs/wear-tiles/img/693c130912097be6_48.png?hl=zh-cn 48w,https://developer.android.com/static/codelabs/wear-tiles/img/693c130912097be6_72.png?hl=zh-cn 72w,https://developer.android.com/static/codelabs/wear-tiles/img/693c130912097be6_96.png?hl=zh-cn 96w,https://developer.android.com/static/codelabs/wear-tiles/img/693c130912097be6_480.png?hl=zh-cn 480w,https://developer.android.com/static/codelabs/wear-tiles/img/693c130912097be6_720.png?hl=zh-cn 720w,https://developer.android.com/static/codelabs/wear-tiles/img/693c130912097be6_856.png?hl=zh-cn 856w,https://developer.android.com/static/codelabs/wear-tiles/img/693c130912097be6_960.png?hl=zh-cn 960w,https://developer.android.com/static/codelabs/wear-tiles/img/693c130912097be6_1440.png?hl=zh-cn 1440w,https://developer.android.com/static/codelabs/wear-tiles/img/693c130912097be6_1920.png?hl=zh-cn 1920w,https://developer.android.com/static/codelabs/wear-tiles/img/693c130912097be6_2880.png?hl=zh-cn 2880w" style="width: 200.00px" /></p>
<p>显示屏顶部显示的“挥手”图标由系统提供。如需更改该属性，请在清单中修改功能块的 <code dir="ltr" translate="no">&lt;service&gt;</code> 元素的 <code dir="ltr" translate="no">android:icon</code> 属性。</p>
<p>为方便起见，此过程还将创建“HelloWorldTileService”的“run configuration”，以供日后使用。</p>
<p class="image-container"><img alt="b3335148771abbeb.png" sizes="(max-width: 840px) 100vw, 856px" src="https://developer.android.com/static/codelabs/wear-tiles/img/b3335148771abbeb.png?hl=zh-cn" srcset="https://developer.android.com/static/codelabs/wear-tiles/img/b3335148771abbeb_36.png?hl=zh-cn 36w,https://developer.android.com/static/codelabs/wear-tiles/img/b3335148771abbeb_48.png?hl=zh-cn 48w,https://developer.android.com/static/codelabs/wear-tiles/img/b3335148771abbeb_72.png?hl=zh-cn 72w,https://developer.android.com/static/codelabs/wear-tiles/img/b3335148771abbeb_96.png?hl=zh-cn 96w,https://developer.android.com/static/codelabs/wear-tiles/img/b3335148771abbeb_480.png?hl=zh-cn 480w,https://developer.android.com/static/codelabs/wear-tiles/img/b3335148771abbeb_720.png?hl=zh-cn 720w,https://developer.android.com/static/codelabs/wear-tiles/img/b3335148771abbeb_856.png?hl=zh-cn 856w,https://developer.android.com/static/codelabs/wear-tiles/img/b3335148771abbeb_960.png?hl=zh-cn 960w,https://developer.android.com/static/codelabs/wear-tiles/img/b3335148771abbeb_1440.png?hl=zh-cn 1440w,https://developer.android.com/static/codelabs/wear-tiles/img/b3335148771abbeb_1920.png?hl=zh-cn 1920w,https://developer.android.com/static/codelabs/wear-tiles/img/b3335148771abbeb_2880.png?hl=zh-cn 2880w" style="width: 1456.00px" /></p>


        </google-codelab-step>
      
        <google-codelab-step duration="2" step="4" label="添加预览函数">
          
          <h2 class="step-title" data-text="               5. 添加预览函数           " id="4" tabindex="-1">
              5. 添加预览函数
          </h2>
          <p>我们可以在 Android Studio 中预览功能块界面。这样可以缩短开发界面时的反馈环，从而加快开发速度。</p>
<p>在 <code dir="ltr" translate="no">HelloWorldTileService.kt</code> 文件末尾，为 <code dir="ltr" translate="no">HelloWorldTileService</code> 添加功能块预览。</p>
<h3 data-text="start/src/main/java/com/example/wear/tiles/hello/HelloWorldTileService.kt" id="startsrcmainjavacomexampleweartileshellohelloworldtileservice.kt_1" is-upgraded="" tabindex="-1">start/src/main/java/com/example/wear/tiles/hello/HelloWorldTileService.kt</h3>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Transact-SQL"><code translate="no" dir="ltr"><span class="devsite-syntax-nv">@Preview</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">device</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">WearDevices</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-n">SMALL_ROUND</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">name</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-ss">"Small Round"</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-nv">@Preview</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">device</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">WearDevices</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-n">LARGE_ROUND</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">name</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-ss">"Large Round"</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-n">internal</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">fun</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">helloLayoutPreview</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nl">context</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Context</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-err">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">TilePreviewData</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-k">return</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">TilePreviewData</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">{</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">TilePreviewHelper</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-n">singleTimelineEntryTileBuilder</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-n">helloLayout</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">context</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">it</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-n">deviceConfiguration</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-ss">"Hello, preview tile!"</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-n">build</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-err">}</span>
<span class="devsite-syntax-err">}</span>
</code></pre></devsite-code>
<p>使用“拆分”编辑器模式查看功能块预览：</p>
<p class="image-container"><img alt="Android Studio 的分屏视图，左侧是预览代码，右侧是功能块图片。" sizes="(max-width: 840px) 100vw, 856px" src="https://developer.android.com/static/codelabs/wear-tiles/img/2dfb05cdcc54eccc.png?hl=zh-cn" srcset="https://developer.android.com/static/codelabs/wear-tiles/img/2dfb05cdcc54eccc_36.png?hl=zh-cn 36w,https://developer.android.com/static/codelabs/wear-tiles/img/2dfb05cdcc54eccc_48.png?hl=zh-cn 48w,https://developer.android.com/static/codelabs/wear-tiles/img/2dfb05cdcc54eccc_72.png?hl=zh-cn 72w,https://developer.android.com/static/codelabs/wear-tiles/img/2dfb05cdcc54eccc_96.png?hl=zh-cn 96w,https://developer.android.com/static/codelabs/wear-tiles/img/2dfb05cdcc54eccc_480.png?hl=zh-cn 480w,https://developer.android.com/static/codelabs/wear-tiles/img/2dfb05cdcc54eccc_720.png?hl=zh-cn 720w,https://developer.android.com/static/codelabs/wear-tiles/img/2dfb05cdcc54eccc_856.png?hl=zh-cn 856w,https://developer.android.com/static/codelabs/wear-tiles/img/2dfb05cdcc54eccc_960.png?hl=zh-cn 960w,https://developer.android.com/static/codelabs/wear-tiles/img/2dfb05cdcc54eccc_1440.png?hl=zh-cn 1440w,https://developer.android.com/static/codelabs/wear-tiles/img/2dfb05cdcc54eccc_1920.png?hl=zh-cn 1920w,https://developer.android.com/static/codelabs/wear-tiles/img/2dfb05cdcc54eccc_2880.png?hl=zh-cn 2880w" style="width: 642.00px" /></p>
<p>请注意，代码中<em>未</em>使用 <code dir="ltr" translate="no">@Composable</code> 注释。尽管功能块使用与<a href="https://developer.android.com/develop/ui/compose/tooling/previews?hl=zh-cn" target="_blank">可组合函数</a>相同的预览界面，但功能块不使用 <a href="https://developer.android.com/develop/ui/compose?hl=zh-cn" target="_blank">Compose</a>，也不是可组合项。</p>


        </google-codelab-step>
      
        <google-codelab-step duration="3" step="5" label="构建消息功能块">
          
          <h2 class="step-title" data-text="               6. 构建消息功能块           " id="5" tabindex="-1">
              6. 构建消息功能块
          </h2>
          <p class="image-container"><img alt="cf18db0f604b1999.png" sizes="(max-width: 840px) 100vw, 856px" src="https://developer.android.com/static/codelabs/wear-tiles/img/cf18db0f604b1999.png?hl=zh-cn" srcset="https://developer.android.com/static/codelabs/wear-tiles/img/cf18db0f604b1999_36.png?hl=zh-cn 36w,https://developer.android.com/static/codelabs/wear-tiles/img/cf18db0f604b1999_48.png?hl=zh-cn 48w,https://developer.android.com/static/codelabs/wear-tiles/img/cf18db0f604b1999_72.png?hl=zh-cn 72w,https://developer.android.com/static/codelabs/wear-tiles/img/cf18db0f604b1999_96.png?hl=zh-cn 96w,https://developer.android.com/static/codelabs/wear-tiles/img/cf18db0f604b1999_480.png?hl=zh-cn 480w,https://developer.android.com/static/codelabs/wear-tiles/img/cf18db0f604b1999_720.png?hl=zh-cn 720w,https://developer.android.com/static/codelabs/wear-tiles/img/cf18db0f604b1999_856.png?hl=zh-cn 856w,https://developer.android.com/static/codelabs/wear-tiles/img/cf18db0f604b1999_960.png?hl=zh-cn 960w,https://developer.android.com/static/codelabs/wear-tiles/img/cf18db0f604b1999_1440.png?hl=zh-cn 1440w,https://developer.android.com/static/codelabs/wear-tiles/img/cf18db0f604b1999_1920.png?hl=zh-cn 1920w,https://developer.android.com/static/codelabs/wear-tiles/img/cf18db0f604b1999_2880.png?hl=zh-cn 2880w" style="width: 227.50px" /></p>
<p>我们要构建的消息功能块更像是一个真实的功能块。与 HelloWorld 示例不同，此示例演示了 Material 3 Expressive 组件、显示了图片，并处理了打开应用的互动。</p>
<h2 data-text="MessagingTileService" id="messagingtileservice" is-upgraded="" tabindex="-1">MessagingTileService</h2>
<p><code dir="ltr" translate="no">MessagingTileService</code> 扩展了我们之前看到的 <code dir="ltr" translate="no">SuspendingTileService</code> 类。</p>


        </google-codelab-step>
      
        <google-codelab-step duration="8" step="6" label="添加界面组件">
          
          <h2 class="step-title" data-text="               7. 添加界面组件           " id="6" tabindex="-1">
              7. 添加界面组件
          </h2>
          <p>ProtoLayout 库提供预构建的组件和布局，因此您可以创建支持适用于 Wear OS 的最新 Material 3 Expressive 设计的功能块。</p>
<p>将 Tiles Material 依赖项添加到 <code dir="ltr" translate="no">build.gradle</code> 文件中：</p>
<h3 data-text="start/build.gradle" id="startbuild.gradle" is-upgraded="" tabindex="-1">start/build.gradle</h3>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Carbon"><code translate="no" dir="ltr"><span class="devsite-syntax-nx">implementation</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s">"androidx.wear.protolayout:protolayout-material3:$protoLayoutVersion"</span>
</code></pre></devsite-code>
<p>将布局代码添加到 <code dir="ltr" translate="no">tileLayout()</code> 函数中，作为 <code dir="ltr" translate="no">materialScope()</code> 函数的正文。这会创建一个包含两行（每行有两个按钮）和一个边缘按钮的布局。</p>
<p>找到“<strong>TODO() // Add primaryLayout()</strong>”行，并将其替换为以下代码。</p>
<h3 data-text="start/src/main/java/com/example/wear/tiles/messaging/tile/Layout.kt" id="startsrcmainjavacomexampleweartilesmessagingtilelayout.kt" is-upgraded="" tabindex="-1">start/src/main/java/com/example/wear/tiles/messaging/tile/Layout.kt</h3>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="scdoc"><code translate="no" dir="ltr">primaryLayout(
    mainSlot = {
        // This layout code assumes "contacts" contains at least 4 elements, for sample code
        // that can handle an arbitrary number of contacts, and also shows different numbers
        // of contacts based on the physical screen size, see
        // &lt;https://github.com/android/wear-os-samples/tree/main/WearTilesKotlin&gt;.
        Column.Builder()
            .apply {
                setWidth(expand())
                setHeight(expand())
                addContent(
                    buttonGroup {
                        buttonGroupItem { contactButton(contacts[0]) }
                        buttonGroupItem { contactButton(contacts[1]) }
                    }
                )
                addContent(DEFAULT_SPACER_BETWEEN_BUTTON_GROUPS)
                addContent(
                    buttonGroup {
                        buttonGroupItem { contactButton(contacts[2]) }
                        buttonGroupItem { contactButton(contacts[3]) }
                    }
                )
            }
            .build()
    },
    bottomSlot = {
        textEdgeButton(
            onClick = clickable(), // TODO: Launch new conversation activity
            labelContent = { text("New".layoutString) },
        )
    },
)
</code></pre></devsite-code>
<p>同一文件中的 <code dir="ltr" translate="no">contactButton()</code> 函数用于创建各个联系人按钮。如果相应联系人有关联的图片，则该图片会显示在按钮上。否则，系统会显示联系人的姓名首字母。</p>
<p>此时，您可能会注意到，虽然总体布局正确，但缺少图片：</p>
<p class="image-container"><img alt="809bdb9d1213c376.png" sizes="(max-width: 840px) 100vw, 856px" src="https://developer.android.com/static/codelabs/wear-tiles/img/809bdb9d1213c376.png?hl=zh-cn" srcset="https://developer.android.com/static/codelabs/wear-tiles/img/809bdb9d1213c376_36.png?hl=zh-cn 36w,https://developer.android.com/static/codelabs/wear-tiles/img/809bdb9d1213c376_48.png?hl=zh-cn 48w,https://developer.android.com/static/codelabs/wear-tiles/img/809bdb9d1213c376_72.png?hl=zh-cn 72w,https://developer.android.com/static/codelabs/wear-tiles/img/809bdb9d1213c376_96.png?hl=zh-cn 96w,https://developer.android.com/static/codelabs/wear-tiles/img/809bdb9d1213c376_480.png?hl=zh-cn 480w,https://developer.android.com/static/codelabs/wear-tiles/img/809bdb9d1213c376_720.png?hl=zh-cn 720w,https://developer.android.com/static/codelabs/wear-tiles/img/809bdb9d1213c376_856.png?hl=zh-cn 856w,https://developer.android.com/static/codelabs/wear-tiles/img/809bdb9d1213c376_960.png?hl=zh-cn 960w,https://developer.android.com/static/codelabs/wear-tiles/img/809bdb9d1213c376_1440.png?hl=zh-cn 1440w,https://developer.android.com/static/codelabs/wear-tiles/img/809bdb9d1213c376_1920.png?hl=zh-cn 1920w,https://developer.android.com/static/codelabs/wear-tiles/img/809bdb9d1213c376_2880.png?hl=zh-cn 2880w" style="width: 530.50px" /></p>
<p>如果您将功能块部署到设备，也会看到相同的内容：</p>
<p class="image-container"><img alt="4671bb2eafdcc528.png" sizes="(max-width: 840px) 100vw, 856px" src="https://developer.android.com/static/codelabs/wear-tiles/img/4671bb2eafdcc528.png?hl=zh-cn" srcset="https://developer.android.com/static/codelabs/wear-tiles/img/4671bb2eafdcc528_36.png?hl=zh-cn 36w,https://developer.android.com/static/codelabs/wear-tiles/img/4671bb2eafdcc528_48.png?hl=zh-cn 48w,https://developer.android.com/static/codelabs/wear-tiles/img/4671bb2eafdcc528_72.png?hl=zh-cn 72w,https://developer.android.com/static/codelabs/wear-tiles/img/4671bb2eafdcc528_96.png?hl=zh-cn 96w,https://developer.android.com/static/codelabs/wear-tiles/img/4671bb2eafdcc528_480.png?hl=zh-cn 480w,https://developer.android.com/static/codelabs/wear-tiles/img/4671bb2eafdcc528_720.png?hl=zh-cn 720w,https://developer.android.com/static/codelabs/wear-tiles/img/4671bb2eafdcc528_856.png?hl=zh-cn 856w,https://developer.android.com/static/codelabs/wear-tiles/img/4671bb2eafdcc528_960.png?hl=zh-cn 960w,https://developer.android.com/static/codelabs/wear-tiles/img/4671bb2eafdcc528_1440.png?hl=zh-cn 1440w,https://developer.android.com/static/codelabs/wear-tiles/img/4671bb2eafdcc528_1920.png?hl=zh-cn 1920w,https://developer.android.com/static/codelabs/wear-tiles/img/4671bb2eafdcc528_2880.png?hl=zh-cn 2880w" style="width: 253.50px" /></p>
<p>在下一步中，我们将修复缺失的图片。</p>


        </google-codelab-step>
      
        <google-codelab-step duration="8" step="7" label="添加图片">
          
          <h2 class="step-title" data-text="               8. 添加图片           " id="7" tabindex="-1">
              8. 添加图片
          </h2>
          <p>大体上讲，功能块由两部分组成：布局（通过字符串 ID 引用资源）和资源本身（可以是图片）。</p>
<p>目前，我们的代码提供了布局，但没提供资源本身。为了解决预览问题，我们需要提供图片“资源”。为此，请找到“<strong>TODO: Add onTileResourceRequest</strong>”，并将以下代码添加为 <code dir="ltr" translate="no">TilePreviewData()</code> 的额外已命名参数：</p>
<h3 data-text="start/src/main/java/com/example/wear/tiles/messaging/tile/Layout.kt" id="startsrcmainjavacomexampleweartilesmessagingtilelayout.kt_1" is-upgraded="" tabindex="-1">start/src/main/java/com/example/wear/tiles/messaging/tile/Layout.kt</h3>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Scilab"><code translate="no" dir="ltr"><span class="devsite-syntax-c1">// Additional named argument to TilePreviewData</span>
<span class="devsite-syntax-n">onTileResourceRequest</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">resourcesRequest</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">-</span>&gt;
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">Resources</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-n">Builder</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-n">setVersion</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">resourcesRequest</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-n">version</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-n">apply</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-n">contacts</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-n">forEach</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">                </span><span class="devsite-syntax-k">if</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">it</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-n">avatarSource</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">is</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">AvatarSource</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-n">Resource</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">                    </span><span class="devsite-syntax-n">addIdToImageMapping</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">                        </span><span class="devsite-syntax-n">it</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-n">imageResourceId</span><span class="devsite-syntax-p">(),</span>
<span class="devsite-syntax-w">                        </span><span class="devsite-syntax-n">it</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-n">avatarSource</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-n">resourceId</span>
<span class="devsite-syntax-w">                    </span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">                </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-n">build</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<p>现在，图片应该会显示在预览中：</p>
<p class="image-container"><img alt="e77d746268f293f2.png" sizes="(max-width: 840px) 100vw, 856px" src="https://developer.android.com/static/codelabs/wear-tiles/img/e77d746268f293f2.png?hl=zh-cn" srcset="https://developer.android.com/static/codelabs/wear-tiles/img/e77d746268f293f2_36.png?hl=zh-cn 36w,https://developer.android.com/static/codelabs/wear-tiles/img/e77d746268f293f2_48.png?hl=zh-cn 48w,https://developer.android.com/static/codelabs/wear-tiles/img/e77d746268f293f2_72.png?hl=zh-cn 72w,https://developer.android.com/static/codelabs/wear-tiles/img/e77d746268f293f2_96.png?hl=zh-cn 96w,https://developer.android.com/static/codelabs/wear-tiles/img/e77d746268f293f2_480.png?hl=zh-cn 480w,https://developer.android.com/static/codelabs/wear-tiles/img/e77d746268f293f2_720.png?hl=zh-cn 720w,https://developer.android.com/static/codelabs/wear-tiles/img/e77d746268f293f2_856.png?hl=zh-cn 856w,https://developer.android.com/static/codelabs/wear-tiles/img/e77d746268f293f2_960.png?hl=zh-cn 960w,https://developer.android.com/static/codelabs/wear-tiles/img/e77d746268f293f2_1440.png?hl=zh-cn 1440w,https://developer.android.com/static/codelabs/wear-tiles/img/e77d746268f293f2_1920.png?hl=zh-cn 1920w,https://developer.android.com/static/codelabs/wear-tiles/img/e77d746268f293f2_2880.png?hl=zh-cn 2880w" style="width: 445.50px" /></p>
<p>不过，如果将功能块部署到设备，图片将会缺失。如需解决此问题，请将 <code dir="ltr" translate="no">Service.kt</code> 中的 <code dir="ltr" translate="no">resourcesRequest()</code> 函数替换为以下代码：</p>
<h3 data-text="start/src/main/java/com/example/wear/tiles/messaging/tile/Service.kt" id="startsrcmainjavacomexampleweartilesmessagingtileservice.kt" is-upgraded="" tabindex="-1">start/src/main/java/com/example/wear/tiles/messaging/tile/Service.kt</h3>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Text only"><code translate="no" dir="ltr">override suspend fun resourcesRequest(
    requestParams: ResourcesRequest
): Resources {
    // resourceIds is a list of the ids we need to provide images for. If we're passed an empty
    // list, set resourceIds to all resources.
    val resourceIds =
        requestParams.resourceIds.ifEmpty {
            contacts.map { it.imageResourceId() }
        }

    // resourceMap maps (tile) resource ids to (Android) resource ids.
    val resourceMap =
        contacts
            .mapNotNull {
                when (it.avatarSource) {
                    is AvatarSource.Resource -&gt;
                        it.imageResourceId() to
                            it.avatarSource.resourceId
                    else -&gt; null
                }
            }
            .toMap()
            .filterKeys {
                it in resourceIds
            } // filter to only the resources we need

    // Add images in the resourceMap to the Resources object, and return the result.
    return Resources.Builder()
        .setVersion(requestParams.version)
        .apply {
            resourceMap.forEach { (id, imageResource) -&gt;
                addIdToImageMapping(id, imageResource)
            }
        }
        .build()
}
</code></pre></devsite-code>
<p>现在，在将功能块部署到设备时，系统也会显示图片：</p>
<p class="image-container"><img alt="cf18db0f604b1999.png" sizes="(max-width: 840px) 100vw, 856px" src="https://developer.android.com/static/codelabs/wear-tiles/img/cf18db0f604b1999.png?hl=zh-cn" srcset="https://developer.android.com/static/codelabs/wear-tiles/img/cf18db0f604b1999_36.png?hl=zh-cn 36w,https://developer.android.com/static/codelabs/wear-tiles/img/cf18db0f604b1999_48.png?hl=zh-cn 48w,https://developer.android.com/static/codelabs/wear-tiles/img/cf18db0f604b1999_72.png?hl=zh-cn 72w,https://developer.android.com/static/codelabs/wear-tiles/img/cf18db0f604b1999_96.png?hl=zh-cn 96w,https://developer.android.com/static/codelabs/wear-tiles/img/cf18db0f604b1999_480.png?hl=zh-cn 480w,https://developer.android.com/static/codelabs/wear-tiles/img/cf18db0f604b1999_720.png?hl=zh-cn 720w,https://developer.android.com/static/codelabs/wear-tiles/img/cf18db0f604b1999_856.png?hl=zh-cn 856w,https://developer.android.com/static/codelabs/wear-tiles/img/cf18db0f604b1999_960.png?hl=zh-cn 960w,https://developer.android.com/static/codelabs/wear-tiles/img/cf18db0f604b1999_1440.png?hl=zh-cn 1440w,https://developer.android.com/static/codelabs/wear-tiles/img/cf18db0f604b1999_1920.png?hl=zh-cn 1920w,https://developer.android.com/static/codelabs/wear-tiles/img/cf18db0f604b1999_2880.png?hl=zh-cn 2880w" style="width: 264.50px" /></p>
<p>在下一步中，我们将处理各个元素的点击操作。</p>


        </google-codelab-step>
      
        <google-codelab-step duration="8" step="8" label="处理互动">
          
          <h2 class="step-title" data-text="               9. 处理互动           " id="8" tabindex="-1">
              9. 处理互动
          </h2>
          <p>我们可以在功能块上实现的最为实用的一项操作就是提供到关键用户历程的快捷方式。这与仅打开应用的应用启动器不同 - 在此处，我们有空间提供一些上下文快捷方式，让用户能够快捷访问应用中的特定屏幕。</p>
<p>到目前为止，我们一直在使用无参数 <code dir="ltr" translate="no">clickable()</code> 为条状标签和每个按钮提供的虚拟操作。对于不支持互动的预览，这种方式效果不错。现在，让我们来看看如何为这些元素添加操作。</p>
<h2 data-text="LaunchAction" id="launchaction" is-upgraded="" tabindex="-1">LaunchAction</h2>
<p><code dir="ltr" translate="no">LaunchAction</code> 可用于启动 activity。我们来修改 <code dir="ltr" translate="no">Layout</code>，以便用户只需点按“New”按钮即可发起“new conversation”用户体验历程。</p>
<p>找到“<strong>TODO: Launch new conversation activity</strong>”行，并将 <code dir="ltr" translate="no">clickable()</code> 替换为：</p>
<h3 data-text="start/src/main/java/com/example/wear/tiles/messaging/tile/Layout.kt" id="startsrcmainjavacomexampleweartilesmessagingtilelayout.kt_2" is-upgraded="" tabindex="-1">start/src/main/java/com/example/wear/tiles/messaging/tile/Layout.kt</h3>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="scdoc"><code translate="no" dir="ltr">clickable(
    id = "new_button",
    action =
        launchAction(
            ComponentName(
                "com.example.wear.tiles",
                "com.example.wear.tiles.messaging.MainActivity",
            ),
            mapOf(
                MainActivity.EXTRA_JOURNEY to
                    ActionBuilders.stringExtra(
                        MainActivity.EXTRA_JOURNEY_NEW
                    )
            ),
        ),
)
</code></pre></devsite-code>
<p>重新部署功能块。现在，点按“New”后，系统将启动 <code dir="ltr" translate="no">MainActivity</code> 并开始“new conversation”用户体验历程，而不会没有反应：</p>
<p class="image-container"><img alt="a08c28b4a142fb8f.png" sizes="(max-width: 840px) 100vw, 856px" src="https://developer.android.com/static/codelabs/wear-tiles/img/a08c28b4a142fb8f.png?hl=zh-cn" srcset="https://developer.android.com/static/codelabs/wear-tiles/img/a08c28b4a142fb8f_36.png?hl=zh-cn 36w,https://developer.android.com/static/codelabs/wear-tiles/img/a08c28b4a142fb8f_48.png?hl=zh-cn 48w,https://developer.android.com/static/codelabs/wear-tiles/img/a08c28b4a142fb8f_72.png?hl=zh-cn 72w,https://developer.android.com/static/codelabs/wear-tiles/img/a08c28b4a142fb8f_96.png?hl=zh-cn 96w,https://developer.android.com/static/codelabs/wear-tiles/img/a08c28b4a142fb8f_480.png?hl=zh-cn 480w,https://developer.android.com/static/codelabs/wear-tiles/img/a08c28b4a142fb8f_720.png?hl=zh-cn 720w,https://developer.android.com/static/codelabs/wear-tiles/img/a08c28b4a142fb8f_856.png?hl=zh-cn 856w,https://developer.android.com/static/codelabs/wear-tiles/img/a08c28b4a142fb8f_960.png?hl=zh-cn 960w,https://developer.android.com/static/codelabs/wear-tiles/img/a08c28b4a142fb8f_1440.png?hl=zh-cn 1440w,https://developer.android.com/static/codelabs/wear-tiles/img/a08c28b4a142fb8f_1920.png?hl=zh-cn 1920w,https://developer.android.com/static/codelabs/wear-tiles/img/a08c28b4a142fb8f_2880.png?hl=zh-cn 2880w" style="width: 293.50px" /></p>
<p>同样修改 <code dir="ltr" translate="no">Layout</code>，以便只需点按联系人按钮即可与特定用户发起对话。</p>
<p>找到“<strong>Launch open conversation activity</strong>”行，并将 <code dir="ltr" translate="no">clickable()</code> 替换为：</p>
<h3 data-text="start/src/main/java/com/example/wear/tiles/messaging/tile/Layout.kt" id="startsrcmainjavacomexampleweartilesmessagingtilelayout.kt_3" is-upgraded="" tabindex="-1">start/src/main/java/com/example/wear/tiles/messaging/tile/Layout.kt</h3>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="scdoc"><code translate="no" dir="ltr">clickable(
    id = contact.id.toString(),
    action =
        launchAction(
            ComponentName(
                "com.example.wear.tiles",
                "com.example.wear.tiles.messaging.MainActivity",
            ),
            mapOf(
                MainActivity.EXTRA_JOURNEY to
                    ActionBuilders.stringExtra(
                        MainActivity
                            .EXTRA_JOURNEY_CONVERSATION
                    ),
                MainActivity.EXTRA_CONVERSATION_CONTACT to
                    ActionBuilders.stringExtra(
                        contact.name
                    ),
            ),
        ),
)
</code></pre></devsite-code>
<p>重新部署功能块。现在，点按联系人即可与其发起对话，而不会没有反应：</p>
<p class="image-container"><img alt="b684a1ced0b226f9.png" sizes="(max-width: 840px) 100vw, 856px" src="https://developer.android.com/static/codelabs/wear-tiles/img/b684a1ced0b226f9.png?hl=zh-cn" srcset="https://developer.android.com/static/codelabs/wear-tiles/img/b684a1ced0b226f9_36.png?hl=zh-cn 36w,https://developer.android.com/static/codelabs/wear-tiles/img/b684a1ced0b226f9_48.png?hl=zh-cn 48w,https://developer.android.com/static/codelabs/wear-tiles/img/b684a1ced0b226f9_72.png?hl=zh-cn 72w,https://developer.android.com/static/codelabs/wear-tiles/img/b684a1ced0b226f9_96.png?hl=zh-cn 96w,https://developer.android.com/static/codelabs/wear-tiles/img/b684a1ced0b226f9_480.png?hl=zh-cn 480w,https://developer.android.com/static/codelabs/wear-tiles/img/b684a1ced0b226f9_720.png?hl=zh-cn 720w,https://developer.android.com/static/codelabs/wear-tiles/img/b684a1ced0b226f9_856.png?hl=zh-cn 856w,https://developer.android.com/static/codelabs/wear-tiles/img/b684a1ced0b226f9_960.png?hl=zh-cn 960w,https://developer.android.com/static/codelabs/wear-tiles/img/b684a1ced0b226f9_1440.png?hl=zh-cn 1440w,https://developer.android.com/static/codelabs/wear-tiles/img/b684a1ced0b226f9_1920.png?hl=zh-cn 1920w,https://developer.android.com/static/codelabs/wear-tiles/img/b684a1ced0b226f9_2880.png?hl=zh-cn 2880w" style="width: 284.50px" /></p>


        </google-codelab-step>
      
        <google-codelab-step duration="1" step="9" label="恭喜">
          
          <h2 class="step-title" data-text="               10. 恭喜           " id="9" tabindex="-1">
              10. 恭喜
          </h2>
          <p>恭喜！您已了解如何构建适用于 Wear OS 的功能块！</p>
<h2 data-text="后续操作" id="whats-next" is-upgraded="" tabindex="-1">后续操作</h2>
<p>如需了解详情，请参阅 <a href="https://github.com/android/wear-os-samples/tree/main/WearTilesKotlin" target="_blank">GitHub 上的 Golden Tiles 实现</a>、<a href="https://developer.android.com/training/articles/wear-tiles?hl=zh-cn" target="_blank">Wear OS 功能块指南</a>和<a href="https://developer.android.com/design/ui/wear/guides/surfaces/tiles?hl=zh-cn" target="_blank">设计准则</a>。</p>


        </google-codelab-step>
      
    </google-codelab>
  
  
  

  
</div>

  
    
    
    
  

  <div class="devsite-floating-action-buttons"></div></article>


<devsite-content-footer class="nocontent">
  <p>如未另行说明，那么本页面中的内容已根据<a href="https://creativecommons.org/licenses/by/4.0/">知识共享署名 4.0 许可</a>获得了许可，并且代码示例已根据 <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 许可</a>获得了许可。有关详情，请参阅 <a href="https://developers.google.com/site-policies?hl=zh-cn">Google 开发者网站政策</a>。Java 是 Oracle 和/或其关联公司的注册商标。</p>
  
</devsite-content-footer>


<devsite-notification
>
</devsite-notification>


  
<div class="devsite-content-data">
  
  
    <template class="devsite-content-data-template">
      [[["易于理解","easyToUnderstand","thumb-up"],["解决了我的问题","solvedMyProblem","thumb-up"],["其他","otherUp","thumb-up"]],[["没有我需要的信息","missingTheInformationINeed","thumb-down"],["太复杂/步骤太多","tooComplicatedTooManySteps","thumb-down"],["内容需要更新","outOfDate","thumb-down"],["翻译问题","translationIssue","thumb-down"],["示例/代码问题","samplesCodeIssue","thumb-down"],["其他","otherDown","thumb-down"]],[],[],[],null,[]]
    </template>
  
</div>
            
          </devsite-content>
        </main>
        <devsite-footer-promos class="devsite-footer">
          
            

<nav class="devsite-footer-promos nocontent" aria-label="促销活动">
  <ul class="devsite-footer-promos-list">
    
    <li class="devsite-footer-promo">
      <a href="//x.com/AndroidDev"
         class="devsite-footer-promo-title gc-analytics-event"
         data-category="Site-Wide Custom Events"
       
       
         data-label="Footer X Promo"
       >
        
        
        <picture>
          
          <source class="devsite-dark-theme"
                  srcset="https://developer.android.com/_static/android/images/logo-x_dt.svg?hl=zh-cn"
                  media="(prefers-color-scheme: dark)">
          
          <img class="devsite-footer-promo-icon"
                src="https://developer.android.com/_static/android/images/logo-x.svg?hl=zh-cn"
                loading="lazy"
                alt="X">
        </picture>
        
        <span class="devsite-footer-promo-label">
          X
        </span>
      </a>
      <div class="devsite-footer-promo-description">在 X 上关注 @AndroidDev</div>
    </li>
    
    <li class="devsite-footer-promo">
      <a href="//www.youtube.com/user/androiddevelopers?hl=zh-cn"
         class="devsite-footer-promo-title gc-analytics-event"
         data-category="Site-Wide Custom Events"
       
       
         data-label="Footer YouTube Promo"
       >
        
        
        <picture>
          
          <source class="devsite-dark-theme"
                  srcset="https://developer.android.com/_static/android/images/logo-youtube_dt.svg?hl=zh-cn"
                  media="(prefers-color-scheme: dark)">
          
          <img class="devsite-footer-promo-icon"
                src="//www.gstatic.com/images/icons/material/product/2x/youtube_48dp.png"
                loading="lazy"
                alt="YouTube">
        </picture>
        
        <span class="devsite-footer-promo-label">
          YouTube
        </span>
      </a>
      <div class="devsite-footer-promo-description">在 YouTube 上访问“Android Developers”频道</div>
    </li>
    
    <li class="devsite-footer-promo">
      <a href="//www.linkedin.com/showcase/androiddev"
         class="devsite-footer-promo-title gc-analytics-event"
         data-category="Site-Wide Custom Events"
       
       
         data-label="Footer LinkedIn Promo"
       >
        
        
        <picture>
          
          <source class="devsite-dark-theme"
                  srcset="https://developer.android.com/_static/android/images/logo-linkedin_dt.svg?hl=zh-cn"
                  media="(prefers-color-scheme: dark)">
          
          <img class="devsite-footer-promo-icon"
                src="https://developer.android.com/_static/android/images/logo-linkedin.svg?hl=zh-cn"
                loading="lazy"
                alt="LinkedIn">
        </picture>
        
        <span class="devsite-footer-promo-label">
          LinkedIn
        </span>
      </a>
      <div class="devsite-footer-promo-description">Connect with the Android Developers community on LinkedIn</div>
    </li>
    
  </ul>
</nav>

          
        </devsite-footer-promos>
        <devsite-footer-linkboxes class="devsite-footer">
          
            
<nav class="devsite-footer-linkboxes nocontent" aria-label="页脚链接">
  
  <ul class="devsite-footer-linkboxes-list">
    
    <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading no-link">关于 Android</h3>
      <ul class="devsite-footer-linkbox-list">
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="//www.android.com"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 1)"
            >
            
          
            Android
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="//www.android.com/enterprise/"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 2)"
            >
            
          
            适用于企业的 Android
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="//www.android.com/security-center/"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 3)"
            >
            
          
            安全
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="//source.android.com"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 4)"
            >
            
          
            源代码
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/news"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 5)"
            >
            
          
            新闻
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="//android-developers.googleblog.com/"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 6)"
            >
            
          
            博客
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/podcasts"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 7)"
            >
            
              
              
            
          
            播客
          
          </a>
          
          
        </li>
        
      </ul>
    </li>
    
    <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading no-link">发现</h3>
      <ul class="devsite-footer-linkbox-list">
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/games"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 1)"
            >
            
          
            游戏
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/ml"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 2)"
            >
            
          
            机器学习
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/health-and-fitness"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 3)"
            >
            
          
            健康与健身
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/media"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 4)"
            >
            
          
            相机与媒体
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/privacy"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 5)"
            >
            
          
            隐私权政策
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/training/connectivity/5g"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 6)"
            >
            
              
              
            
          
            5G
          
          </a>
          
          
        </li>
        
      </ul>
    </li>
    
    <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading no-link">Android 设备</h3>
      <ul class="devsite-footer-linkbox-list">
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/large-screens"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 1)"
            >
            
          
            大屏幕
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/wear"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 2)"
            >
            
          
            Wear OS
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/chrome-os"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 3)"
            >
            
          
            ChromeOS 设备
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/cars"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 4)"
            >
            
          
            Android for Cars
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/tv"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 5)"
            >
            
              
              
            
          
            Android TV
          
          </a>
          
          
        </li>
        
      </ul>
    </li>
    
    <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading no-link">版本</h3>
      <ul class="devsite-footer-linkbox-list">
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/about/versions/15"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 1)"
            >
            
          
            Android 15
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/about/versions/14"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 2)"
            >
            
          
            Android 14
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/about/versions/13"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 3)"
            >
            
          
            Android 13
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/about/versions/12"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 4)"
            >
            
          
            Android 12
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/about/versions/11"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 5)"
            >
            
          
            Android 11
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/about/versions/10"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 6)"
            >
            
          
            Android 10
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/about/versions/pie"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 7)"
            >
            
              
              
            
          
            Pie
          
          </a>
          
          
        </li>
        
      </ul>
    </li>
    
    <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading no-link">文档和下载</h3>
      <ul class="devsite-footer-linkbox-list">
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/studio/intro"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 1)"
            >
            
          
            Android Studio 指南
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/guide"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 2)"
            >
            
          
            开发者指南
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/reference"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 3)"
            >
            
          
            API 参考
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/studio"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 4)"
            >
            
          
            下载 Studio
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/ndk"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 5)"
            >
            
              
              
            
          
            Android NDK
          
          </a>
          
          
        </li>
        
      </ul>
    </li>
    
    <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading no-link">支持</h3>
      <ul class="devsite-footer-linkbox-list">
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="//issuetracker.google.com/issues/new?component=190923&amp;template=841312"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 1)"
            >
            
          
            报告平台错误
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="//issuetracker.google.com/issues/new?component=192697"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 2)"
            >
            
          
            报告文档错误
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="//support.google.com/googleplay/android-developer"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 3)"
            >
            
          
            Google Play support
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="https://g.co/userresearch/androiddeveloperfooter"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 4)"
            >
            
              
              
            
          
            参加调查研究
          
          </a>
          
          
        </li>
        
      </ul>
    </li>
    
  </ul>
  
</nav>
          
        </devsite-footer-linkboxes>
        <devsite-footer-utility class="devsite-footer">
          
            

<div class="devsite-footer-utility nocontent">
  
  
  <nav class="devsite-footer-sites" aria-label="其他 Google Developers 网站">
    <a href="https://developers.google.com/?hl=zh-cn"
       class="devsite-footer-sites-logo-link gc-analytics-event"
       data-category="Site-Wide Custom Events"
       data-label="Footer Google Developers Link">
      <picture>
        
        <source srcset="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/images/lockup-google-for-developers-dark-theme.svg"
                media="(prefers-color-scheme: none)"
                class="devsite-dark-theme">
        
        <img class="devsite-footer-sites-logo"
             src="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/images/lockup-google-for-developers.svg"
             loading="lazy"
             alt="Google Developers">
      </picture>
    </a>
    <ul class="devsite-footer-sites-list">
      
      <li class="devsite-footer-sites-item">
        <a href="//developer.android.com?hl=zh-cn"
           class="devsite-footer-sites-link
                  gc-analytics-event"
           data-category="Site-Wide Custom Events"
         
           data-label="Footer Android Link"
         
         >
          Android
        </a>
      </li>
      
      <li class="devsite-footer-sites-item">
        <a href="//developer.chrome.com/home?hl=zh-cn"
           class="devsite-footer-sites-link
                  gc-analytics-event"
           data-category="Site-Wide Custom Events"
         
           data-label="Footer Chrome Link"
         
         >
          Chrome
        </a>
      </li>
      
      <li class="devsite-footer-sites-item">
        <a href="//firebase.google.com?hl=zh-cn"
           class="devsite-footer-sites-link
                  gc-analytics-event"
           data-category="Site-Wide Custom Events"
         
           data-label="Footer Firebase Link"
         
         >
          Firebase
        </a>
      </li>
      
      <li class="devsite-footer-sites-item">
        <a href="//cloud.google.com?hl=zh-cn"
           class="devsite-footer-sites-link
                  gc-analytics-event"
           data-category="Site-Wide Custom Events"
         
           data-label="Footer Google Cloud Platform Link"
         
         >
          Google Cloud Platform
        </a>
      </li>
      
      <li class="devsite-footer-sites-item">
        <a href="//developers.google.com/products/?hl=zh-cn"
           class="devsite-footer-sites-link
                  gc-analytics-event"
           data-category="Site-Wide Custom Events"
         
           data-label="Footer All products Link"
         
         >
          所有产品
        </a>
      </li>
      
    </ul>
  </nav>
  

  
  <nav class="devsite-footer-utility-links" aria-label="实用程序链接">
    
    <ul class="devsite-footer-utility-list">
      
      <li class="devsite-footer-utility-item
                 ">
        
        
        <a class="devsite-footer-utility-link gc-analytics-event"
           href="//policies.google.com/privacy?hl=zh-cn"
           data-category="Site-Wide Custom Events"
           data-label="Footer Privacy link"
         >
          隐私权政策
        </a>
        
      </li>
      
      <li class="devsite-footer-utility-item
                 ">
        
        
        <a class="devsite-footer-utility-link gc-analytics-event"
           href="https://developer.android.com/license?hl=zh-cn"
           data-category="Site-Wide Custom Events"
           data-label="Footer License link"
         >
          许可
        </a>
        
      </li>
      
      <li class="devsite-footer-utility-item
                 ">
        
        
        <a class="devsite-footer-utility-link gc-analytics-event"
           href="https://developer.android.com/distribute/marketing-tools/brand-guidelines?hl=zh-cn"
           data-category="Site-Wide Custom Events"
           data-label="Footer Brand guidelines link"
         >
          品牌指南
        </a>
        
      </li>
      
      <li class="devsite-footer-utility-item
                 glue-cookie-notification-bar-control">
        
        
        <a class="devsite-footer-utility-link gc-analytics-event"
           href="#"
           data-category="Site-Wide Custom Events"
           data-label="Footer Manage cookies link"
         
           aria-hidden="true"
         >
          Manage cookies
        </a>
        
      </li>
      
      <li class="devsite-footer-utility-item
                 devsite-footer-utility-button">
        
        <span class="devsite-footer-utility-description">通过电子邮件接收资讯和提示</span>
        
        
        <a class="devsite-footer-utility-link gc-analytics-event"
           href="https://developer.android.com/updates?hl=zh-cn"
           data-category="Site-Wide Custom Events"
           data-label="Footer Subscribe link"
         >
          订阅
        </a>
        
      </li>
      
    </ul>
    
    
<devsite-language-selector>
  <ul role="presentation">
    
    
    <li role="presentation">
      <a role="menuitem" lang="en"
        >English</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="de"
        >Deutsch</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="es_419"
        >Español – América Latina</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="fr"
        >Français</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="id"
        >Indonesia</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="pl"
        >Polski</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="pt_br"
        >Português – Brasil</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="vi"
        >Tiếng Việt</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="zh_cn"
        >中文 – 简体</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="zh_tw"
        >中文 – 繁體</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="ja"
        >日本語</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="ko"
        >한국어</a>
    </li>
    
  </ul>
</devsite-language-selector>

  </nav>
</div>
          
        </devsite-footer-utility>
        <devsite-panel>
          
        </devsite-panel>
        
      </section></section>
    <devsite-sitemask></devsite-sitemask>
    <devsite-snackbar></devsite-snackbar>
    <devsite-tooltip ></devsite-tooltip>
    <devsite-heading-link></devsite-heading-link>
    <devsite-analytics>
      
        <script type="application/json" analytics>[]</script>
<script type="application/json" tag-management>{&#34;at&#34;: &#34;True&#34;, &#34;ga4&#34;: [{&#34;id&#34;: &#34;G-QFRN08RN6E&#34;, &#34;purpose&#34;: 0}], &#34;ga4p&#34;: [{&#34;id&#34;: &#34;G-QFRN08RN6E&#34;, &#34;purpose&#34;: 0}], &#34;gtm&#34;: [], &#34;parameters&#34;: {&#34;internalUser&#34;: &#34;False&#34;, &#34;language&#34;: {&#34;machineTranslated&#34;: &#34;False&#34;, &#34;requested&#34;: &#34;zh-cn&#34;, &#34;served&#34;: &#34;zh-cn&#34;}, &#34;pageType&#34;: &#34;codelab&#34;, &#34;projectName&#34;: null, &#34;signedIn&#34;: &#34;False&#34;, &#34;tenant&#34;: &#34;android&#34;, &#34;recommendations&#34;: {&#34;sourcePage&#34;: &#34;&#34;, &#34;sourceType&#34;: 0, &#34;sourceRank&#34;: 0, &#34;sourceIdenticalDescriptions&#34;: 0, &#34;sourceTitleWords&#34;: 0, &#34;sourceDescriptionWords&#34;: 0, &#34;experiment&#34;: &#34;&#34;}, &#34;experiment&#34;: {&#34;ids&#34;: &#34;&#34;}}}</script>
      
    </devsite-analytics>
    
      <devsite-badger></devsite-badger>
    
    
    
<android-fully-clickable
    target="
        .android-case-study .devsite-landing-row-item,
        .android-editorial-and-updates-cards .devsite-card-content-wrapper,
        .android-editorial-and-updates-cards .devsite-landing-row-item,
        .android-grouped-resources .devsite-landing-row-item,
        .android-grouped-resources-contained--primary .devsite-landing-row-item,
        .android-grouped-resources-contained--secondary .devsite-landing-row-item,
        .android-grouped-resources-contained--tertiary .devsite-landing-row-item,
        .android-grouped-resources-uncontained--primary .devsite-landing-row-item,
        .android-grouped-resources-uncontained--secondary .devsite-landing-row-item,
        .android-grouped-resources-uncontained--tertiary .devsite-landing-row-item,
        .android-guide-cards .devsite-landing-row-item,
        .android-illustrated-resources-index .devsite-landing-row-item,
        .android-illustrated-resources-primary .devsite-landing-row-item,
        .android-illustrated-resources-secondary .devsite-landing-row-item,
        .android-illustrated-resources-secondary-small .devsite-landing-row-item,
        .android-illustrated-resources-tertiary .devsite-landing-row-item,
        .android-illustrated-resources-tertiary-small .devsite-landing-row-item,
        .android-promo .devsite-landing-row-item,
        .android-quick-link,
        .android-samples .devsite-card-wrapper,
        .fully-clickable"
    watch=".android-editorial-and-updates-cards, .android-samples, devsite-content"></android-fully-clickable>
    
<script nonce="G5c/uUzsaTqlsKhdRwFpSV3Bh6NbLP">
  
  (function(d,e,v,s,i,t,E){d['GoogleDevelopersObject']=i;
    t=e.createElement(v);t.async=1;t.src=s;E=e.getElementsByTagName(v)[0];
    E.parentNode.insertBefore(t,E);})(window, document, 'script',
    'https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/js/app_loader.js', '[3,"zh_cn",null,"/js/devsite_app_module.js","https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9","https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android","https://android-dot-devsite-v2-prod.appspot.com",1,null,["/_pwa/android/manifest.json","https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/images/video-placeholder.svg","https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/images/favicon.svg","https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/images/lockup.png","https://fonts.googleapis.com/css?family=Google+Sans:400,500,600,700|Google+Sans+Text:400,400italic,500,500italic,600,600italic,700,700italic|Roboto+Mono:400,500,700&display=swap"],1,null,[1,6,8,12,14,17,21,25,50,52,63,70,75,76,80,87,91,92,93,97,98,100,101,102,103,104,105,107,108,109,110,112,113,117,118,120,122,124,125,126,127,129,130,131,132,133,134,135,136,138,140,141,147,148,149,151,152,156,157,158,159,161,163,164,168,169,170,179,180,182,183,186,191,193,196],"AIzaSyAP-jjEJBzmIyKR4F-3XITp8yM9T1gEEI8","AIzaSyB6xiKGDR5O3Ak2okS4rLkauxGUG7XP0hg","developer.android.com","AIzaSyAQk0fBONSGUqCNznf6Krs82Ap1-NV6J4o","AIzaSyCCxcqdrZ_7QMeLCRY20bh_SXdAYqy70KY",null,null,null,["Profiles__enable_user_type","DevPro__enable_firebase_workspaces_card","Profiles__enable_developer_profiles_callout","Profiles__enable_join_program_group_endpoint","Concierge__enable_remove_info_panel_tags","DevPro__enable_google_one_card","MiscFeatureFlags__emergency_css","DevPro__enable_nvidia_credits_card","Cloud__enable_cloud_shell","Cloud__fast_free_trial","Profiles__enable_recognition_badges","DevPro__enable_embed_profile_creation","Cloud__enable_cloudx_experiment_ids","Concierge__enable_pushui","Profiles__enable_profile_collections","Profiles__enable_complete_playlist_endpoint","Search__enable_dynamic_content_confidential_banner","MiscFeatureFlags__gdp_dashboard_reskin_enabled","CloudShell__cloud_code_overflow_menu","EngEduTelemetry__enable_engedu_telemetry","Concierge__enable_actions_menu","Cloud__enable_llm_concierge_chat","Significatio__enable_by_tenant","DevPro__enable_developer_subscriptions","MiscFeatureFlags__enable_project_body_class","CloudShell__cloud_shell_button","MiscFeatureFlags__developers_footer_dark_image","Profiles__enable_awarding_url","Profiles__enable_public_developer_profiles","DevPro__enable_vertex_credit_card","DevPro__remove_eu_tax_intake_form","Experiments__reqs_query_experiments","DevPro__enable_cloud_innovators_plus","MiscFeatureFlags__enable_variable_operator_index_yaml","Profiles__enable_stripe_subscription_management","TpcFeatures__enable_unmirrored_page_left_nav","Cloud__enable_free_trial_server_call","DevPro__enable_free_benefits","Cloud__enable_cloud_dlp_service","DevPro__enable_devpro_offers","BookNav__enable_tenant_cache_key","DevPro__enable_code_assist","Search__enable_suggestions_from_borg","MiscFeatureFlags__developers_footer_image","Profiles__enable_playlist_community_acl","Cloud__enable_legacy_calculator_redirect","Profiles__enable_callout_notifications","Profiles__enable_dashboard_curated_recommendations","Profiles__enable_completecodelab_endpoint","MiscFeatureFlags__enable_view_transitions","MiscFeatureFlags__enable_project_variables","Profiles__enable_release_notes_notifications","Cloud__enable_cloud_shell_fte_user_flow","MiscFeatureFlags__enable_appearance_cookies","Search__enable_ai_eligibility_checks","Search__enable_page_map","MiscFeatureFlags__enable_variable_operator","DevPro__enable_google_payments_buyflow","MiscFeatureFlags__enable_dark_theme","MiscFeatureFlags__enable_firebase_utm","Cloud__cache_serialized_dynamic_content","MiscFeatureFlags__enable_framebox_badge_methods","Search__enable_ai_search_summaries_for_all","Profiles__enable_purchase_prompts","Profiles__enable_developer_profile_benefits_ui_redesign","Profiles__require_profile_eligibility_for_signin","Analytics__enable_clearcut_logging","Profiles__enable_page_saving","TpcFeatures__proxy_prod_host","MiscFeatureFlags__enable_explicit_template_dependencies","Profiles__enable_completequiz_endpoint","DevPro__enable_enterprise"],null,null,"AIzaSyBLEMok-5suZ67qRPzx0qUtbnLmyT_kCVE","https://developerscontentserving-pa.googleapis.com","AIzaSyCM4QpTRSqP5qI4Dvjt4OAScIN8sOUlO-k","https://developerscontentsearch-pa.googleapis.com",2,4,null,"https://developerprofiles-pa.googleapis.com",[3,"android","Android Developers","developer.android.com",null,"android-dot-devsite-v2-prod.appspot.com",null,null,[null,1,null,null,null,null,null,null,null,null,null,[1],null,null,null,null,null,null,[1],[1,null,null,[1,20],"/recommendations"],null,null,null,[1,null,1],[1,1,null,1,1]],null,[18,null,null,null,null,null,"/images/lockup.png","/images/touchicon-180.png",null,null,null,null,null,null,null,null,null,null,null,null,null,2,null,null,null,"/images/lockup-dark-theme.png",[]],[],null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,[6,1,14,15,20,22,23,28,29,37,43],null,[[null,null,1],[1,1]],[[null,null,null,null,null,null,null,[["G-QFRN08RN6E"],null,null,[["G-QFRN08RN6E",1]]],null,null,null,null,1],null,[[2,2],[1,1]]],null,4,null,null,null,null,null,null,null,null,null,null,null,null,null,"android.devsite.google"],null,"pk_live_5170syrHvgGVmSx9sBrnWtA5luvk9BwnVcvIi7HizpwauFG96WedXsuXh790rtij9AmGllqPtMLfhe2RSwD6Pn38V00uBCydV4m",1,null,"https://developerscontentinsights-pa.googleapis.com","AIzaSyCg-ZUslalsEbXMfIo9ZP8qufZgo3LSBDU","AIzaSyDxT0vkxnY_KeINtA4LSePJO-4MAZPMRsE","https://developers.googleapis.com",null,null,"AIzaSyBQom12tzI-rybN7Sf-KfeL4nwm-Rf7PmI\n",null,"https://developerslogging.googleapis.com"]')
  
</script>

    <devsite-a11y-announce></devsite-a11y-announce>
  </body>
</html>