








<!doctype html>
<html 
      lang="en"
      dir="ltr">
  <head>
    <meta name="google-signin-client-id" content="721724668570-nbkv1cfusk7kk4eni4pjvepaus73b13t.apps.googleusercontent.com">
    <meta name="google-signin-scope"
          content="profile email https://www.googleapis.com/auth/developerprofiles https://www.googleapis.com/auth/developerprofiles.award">
    <meta property="og:site_name" content="Android Developers">
    <meta property="og:type" content="website"><meta name="theme-color" content="#34a853"><meta charset="utf-8">
    <meta content="IE=Edge" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    

    <link rel="manifest" href="/_pwa/android/manifest.json"
          crossorigin="use-credentials">
    <link rel="preconnect" href="//www.gstatic.com" crossorigin>
    <link rel="preconnect" href="//fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="//fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="//apis.google.com" crossorigin>
    <link rel="preconnect" href="//www.google-analytics.com" crossorigin><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Google+Sans:400,500,600,700|Google+Sans+Text:400,400italic,500,500italic,600,600italic,700,700italic|Roboto+Mono:400,500,700&display=swap">
      <link rel="stylesheet"
            href="//fonts.googleapis.com/css2?family=Material+Icons&family=Material+Symbols+Outlined&display=block"><link rel="stylesheet" href="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/css/app.css">
      
        <link rel="stylesheet" href="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/css/dark-theme.css" disabled>
      <link rel="shortcut icon" href="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/images/favicon.svg">
    <link rel="apple-touch-icon" href="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/images/touchicon-180.png"><link rel="canonical" href="https://developer.android.com/codelabs/camerax-getting-started"><link rel="search" type="application/opensearchdescription+xml"
            title="Android Developers" href="https://developer.android.com/s/opensearch.xml">
      <link rel="alternate" hreflang="en"
          href="https://developer.android.com/codelabs/camerax-getting-started" /><link rel="alternate" hreflang="x-default" href="https://developer.android.com/codelabs/camerax-getting-started" /><link rel="alternate" hreflang="zh-Hans"
          href="https://developer.android.com/codelabs/camerax-getting-started?hl=zh-cn" /><link rel="alternate" hreflang="fr"
          href="https://developer.android.com/codelabs/camerax-getting-started?hl=fr" /><link rel="alternate" hreflang="id"
          href="https://developer.android.com/codelabs/camerax-getting-started?hl=id" /><link rel="alternate" hreflang="ja"
          href="https://developer.android.com/codelabs/camerax-getting-started?hl=ja" /><link rel="alternate" hreflang="ko"
          href="https://developer.android.com/codelabs/camerax-getting-started?hl=ko" /><link rel="alternate" hreflang="es-419"
          href="https://developer.android.com/codelabs/camerax-getting-started?hl=es-419" /><title>Getting Started with CameraX &nbsp;|&nbsp; Android Developers</title>

<meta property="og:title" content="Getting Started with CameraX &nbsp;|&nbsp; Android Developers"><meta name="description" content="This codelab introduces how to create a camera app that uses CameraX to show a viewfinder, take photos and analyze an image stream from the camera.">
  <meta property="og:description" content="This codelab introduces how to create a camera app that uses CameraX to show a viewfinder, take photos and analyze an image stream from the camera."><meta property="og:url" content="https://developer.android.com/codelabs/camerax-getting-started"><meta property="og:locale" content="en">
  
    
    
    
    
    
    
    
    
    
  

    
      <link rel="stylesheet" href="/extras.css"></head>
  <body class=""
        template="codelab"
        theme="android-theme"
        type="codelab"
        
        
        appearance
        
        layout="docs"
        
        
        
        
        display-toc
        pending>
  
    <devsite-progress type="indeterminate" id="app-progress"></devsite-progress>
  
  
    <a href="#main-content" class="skip-link button">
      
      Skip to main content
    </a>
    <section class="devsite-wrapper">
      <devsite-cookie-notification-bar></devsite-cookie-notification-bar><devsite-header role="banner">
  
    





















<div class="devsite-header--inner" data-nosnippet>
  <div class="devsite-top-logo-row-wrapper-wrapper">
    <div class="devsite-top-logo-row-wrapper">
      <div class="devsite-top-logo-row">
        <button type="button" id="devsite-hamburger-menu"
          class="devsite-header-icon-button button-flat material-icons gc-analytics-event"
          data-category="Site-Wide Custom Events"
          data-label="Navigation menu button"
          visually-hidden
          aria-label="Open menu">
        </button>
        
<div class="devsite-product-name-wrapper">

  <a href="/" class="devsite-site-logo-link gc-analytics-event"
   data-category="Site-Wide Custom Events" data-label="Site logo" track-type="globalNav"
   track-name="androidDevelopers" track-metadata-position="nav"
   track-metadata-eventDetail="nav">
  
  <picture>
    
    <source srcset="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/images/lockup-dark-theme.png"
            media="(prefers-color-scheme: dark)"
            class="devsite-dark-theme">
    
    <img src="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/images/lockup.png" class="devsite-site-logo" alt="Android Developers">
  </picture>
  
</a>



</div>
        <div class="devsite-top-logo-row-middle">
          <div class="devsite-header-upper-tabs">
            
           </div>
          
<devsite-search
    enable-signin
    enable-search
    enable-suggestions
      enable-query-completion
    
    enable-search-summaries
    
    tenant-name="Android Developers"
    
    
    
    
    
    >
  <form class="devsite-search-form" action="https://developer.android.com/s/results" method="GET">
    <div class="devsite-search-container">
      <button type="button"
              search-open
              class="devsite-search-button devsite-header-icon-button button-flat material-icons"
              
              aria-label="Open search"></button>
      <div class="devsite-searchbox">
        <input
          aria-activedescendant=""
          aria-autocomplete="list"
          
          aria-label="Search"
          aria-expanded="false"
          aria-haspopup="listbox"
          autocomplete="off"
          class="devsite-search-field devsite-search-query"
          name="q"
          
          placeholder="Search"
          role="combobox"
          type="text"
          value=""
          >
          <div class="devsite-search-image material-icons" aria-hidden="true">
            
              <svg class="devsite-search-ai-image" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <g clip-path="url(#clip0_6641_386)">
                    <path d="M19.6 21L13.3 14.7C12.8 15.1 12.225 15.4167 11.575 15.65C10.925 15.8833 10.2333 16 9.5 16C7.68333 16 6.14167 15.375 4.875 14.125C3.625 12.8583 3 11.3167 3 9.5C3 7.68333 3.625 6.15 4.875 4.9C6.14167 3.63333 7.68333 3 9.5 3C10.0167 3 10.5167 3.05833 11 3.175C11.4833 3.275 11.9417 3.43333 12.375 3.65L10.825 5.2C10.6083 5.13333 10.3917 5.08333 10.175 5.05C9.95833 5.01667 9.73333 5 9.5 5C8.25 5 7.18333 5.44167 6.3 6.325C5.43333 7.19167 5 8.25 5 9.5C5 10.75 5.43333 11.8167 6.3 12.7C7.18333 13.5667 8.25 14 9.5 14C10.6667 14 11.6667 13.625 12.5 12.875C13.35 12.1083 13.8417 11.15 13.975 10H15.975C15.925 10.6333 15.7833 11.2333 15.55 11.8C15.3333 12.3667 15.05 12.8667 14.7 13.3L21 19.6L19.6 21ZM17.5 12C17.5 10.4667 16.9667 9.16667 15.9 8.1C14.8333 7.03333 13.5333 6.5 12 6.5C13.5333 6.5 14.8333 5.96667 15.9 4.9C16.9667 3.83333 17.5 2.53333 17.5 0.999999C17.5 2.53333 18.0333 3.83333 19.1 4.9C20.1667 5.96667 21.4667 6.5 23 6.5C21.4667 6.5 20.1667 7.03333 19.1 8.1C18.0333 9.16667 17.5 10.4667 17.5 12Z" fill="#5F6368"/>
                  </g>
                <defs>
                <clipPath id="clip0_6641_386">
                <rect width="24" height="24" fill="white"/>
                </clipPath>
                </defs>
              </svg>
            
          </div>
          <div class="devsite-search-shortcut-icon-container" aria-hidden="true">
            <kbd class="devsite-search-shortcut-icon">/</kbd>
          </div>
      </div>
    </div>
  </form>
  <button type="button"
          search-close
          class="devsite-search-button devsite-header-icon-button button-flat material-icons"
          
          aria-label="Close search"></button>
</devsite-search>

        </div>

        

          

          

          <devsite-appearance-selector></devsite-appearance-selector>

          
<devsite-language-selector>
  <ul role="presentation">
    
    
    <li role="presentation">
      <a role="menuitem" lang="en"
        >English</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="de"
        >Deutsch</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="es_419"
        >Español – América Latina</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="fr"
        >Français</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="id"
        >Indonesia</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="pl"
        >Polski</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="pt_br"
        >Português – Brasil</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="vi"
        >Tiếng Việt</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="zh_cn"
        >中文 – 简体</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="ja"
        >日本語</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="ko"
        >한국어</a>
    </li>
    
  </ul>
</devsite-language-selector>


          
            <a class="devsite-header-link devsite-top-button button gc-analytics-event "
    href="https://developer.android.com/studio"
    data-category="Site-Wide Custom Events"
    data-label="Site header link: Android Studio"
    >
  Android Studio
</a>
          

        

        
          <devsite-user 
                        
                        
                          enable-profiles
                        
                        
                        id="devsite-user">
            
              
              <span class="button devsite-top-button" aria-hidden="true" visually-hidden>Sign in</span>
            
          </devsite-user>
        
        
        
      </div>
    </div>
  </div>



</div>



  
</devsite-header>
      <devsite-book-nav scrollbars hidden>
        
          





















<div class="devsite-book-nav-filter"
     hidden>
  <span class="filter-list-icon material-icons" aria-hidden="true"></span>
  <input type="text"
         placeholder="Filter"
         
         aria-label="Type to filter"
         role="searchbox">
  
  <span class="filter-clear-button hidden"
        data-title="Clear filter"
        aria-label="Clear filter"
        role="button"
        tabindex="0"></span>
</div>

<nav class="devsite-book-nav devsite-nav nocontent"
     aria-label="Side menu">
  <div class="devsite-mobile-header">
    <button type="button"
            id="devsite-close-nav"
            class="devsite-header-icon-button button-flat material-icons gc-analytics-event"
            data-category="Site-Wide Custom Events"
            data-label="Close navigation"
            aria-label="Close navigation">
    </button>
    <div class="devsite-product-name-wrapper">

  <a href="/" class="devsite-site-logo-link gc-analytics-event"
   data-category="Site-Wide Custom Events" data-label="Site logo" track-type="globalNav"
   track-name="androidDevelopers" track-metadata-position="nav"
   track-metadata-eventDetail="nav">
  
  <picture>
    
    <source srcset="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/images/lockup-dark-theme.png"
            media="(prefers-color-scheme: dark)"
            class="devsite-dark-theme">
    
    <img src="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/images/lockup.png" class="devsite-site-logo" alt="Android Developers">
  </picture>
  
</a>


</div>
  </div>

  <div class="devsite-book-nav-wrapper">
    <div class="devsite-mobile-nav-top">
      
        <ul class="devsite-nav-list">
          
          
    
    
<li class="devsite-nav-item">

  
  <a href="/studio"
    
       class="devsite-nav-title gc-analytics-event "
    

    
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Android Studio"
     track-type="navMenu"
     track-metadata-eventDetail="globalMenu"
     track-metadata-position="nav">
  
    <span class="devsite-nav-text" tooltip >
      Android Studio
   </span>
    
  
  </a>
  

</li>

  
          
        </ul>
      
    </div>
    
  </div>
</nav>
        
      </devsite-book-nav>
      <section id="gc-wrapper">
        <main role="main" id="main-content" class="devsite-main-content"
            
              
              has-sidebar
            >
          <div class="devsite-sidebar">
            <div class="devsite-sidebar-content">
                
                <devsite-toc class="devsite-nav"
                            role="navigation"
                            aria-label="On this page"
                            depth="1"
                            scrollbars
                  ></devsite-toc>
                <devsite-recommendations-sidebar class="nocontent devsite-nav">
                </devsite-recommendations-sidebar>
            </div>
          </div>
          <devsite-content>
            
              












<article class="devsite-article"><style>
      body {
        transition: opacity ease-in 0.2s;
      }

      body[unresolved] {
        opacity: 0;
        display: block;
        overflow: hidden;
        position: relative;
      }
      </style>
  
  
  
  
  

  <div class="devsite-article-meta nocontent" role="navigation">
    
    
    <ul class="devsite-breadcrumb-list"
  >
  
</ul>
    
  </div>
  
    <h1 class="devsite-page-title" tabindex="-1">
      Getting Started with CameraX<div class="devsite-actions" hidden data-nosnippet><devsite-feature-tooltip
      ack-key="AckCollectionsBookmarkTooltipDismiss"
      analytics-category="Site-Wide Custom Events"
      analytics-action-show="Callout Profile displayed"
      analytics-action-close="Callout Profile dismissed"
      analytics-label="Create Collection Callout"
      class="devsite-page-bookmark-tooltip nocontent"
      dismiss-button="true"
      id="devsite-collections-dropdown"
      
      dismiss-button-text="Dismiss"

      
      close-button-text="Got it">

    
    
      <devsite-bookmark></devsite-bookmark>
    

    <span slot="popout-heading">
      
      Stay organized with collections
    </span>
    <span slot="popout-contents">
      
      Save and categorize content based on your preferences.
    </span>
  </devsite-feature-tooltip></div>
  
      
    </h1>
  

  <devsite-toc class="devsite-nav"
    depth="1"
    devsite-toc-embedded
    >
  </devsite-toc>
  
    
  <div class="devsite-article-body clearfix
  ">

  
    
    
    <google-codelab-analytics gaid="UA-49880327-14" ga4id="G-JTFZSJVVVZ"></google-codelab-analytics>
    <google-codelab codelab-gaid=""
                    codelab-ga4id=""
                    doc-id="1yUoXv4eQyLllONoFQRvqLHA7cBhYuzuh4sNasxPBADc"
                    id="camerax-getting-started"
                    title="Getting Started with CameraX"
                    no-tooltip=""
                    environment="web"
                    category=""
                    feedback-link=""
                    layout="paginated"
                    >
      
        <google-codelab-step label="Before you begin" duration="2" step="0">
          
            <google-codelab-about codelab-title="Getting Started with CameraX"
                                  
                                  last-updated="2024-01-03T18:40:28Z"
                                  duration="60">
            </google-codelab-about>
          
          <h2 class="step-title" id="0" data-text="Before you begin" tabindex="-1">
              1. Before you begin
          </h2>
          <p>In this codelab, you&#39;ll learn how to create a camera app that uses CameraX to show a viewfinder, take photos, capture video, and analyze an image stream from the camera.</p>
<p>To achieve this, we will introduce the concept of <em>use cases</em> in CameraX, which you can use for a variety of camera operations, from displaying a viewfinder to capturing videos.</p>
<h2 is-upgraded id="prerequisites" data-text="Prerequisites" tabindex="-1">Prerequisites</h2>
<ul>
<li>Basic Android development experience.</li>
<li>MediaStore knowledge is desirable but not required.</li>
</ul>
<h2 is-upgraded id="what-youll-do" data-text="What you'll do" tabindex="-1">What you'll do</h2>
<ul>
<li>Learn how to add the CameraX dependencies.</li>
<li>Learn how to display the camera preview in an activity. (<em>Preview</em> use case)</li>
<li>Build an app that can take a photo and save it to storage. (<em>ImageCapture</em> use case)</li>
<li>Learn how to analyze frames from the camera in real time. (<em>ImageAnalysis</em> use case)</li>
<li>Learn how to capture video to MediaStore. (<em>VideoCapture</em> use case)</li>
</ul>
<h2 is-upgraded id="what-youll-need" data-text="What you'll need" tabindex="-1">What you'll need</h2>
<ul>
<li>An Android device or Android Studio&#39;s emulator:</li>
<li>Recommend Android 10 and above: MediaStore behavior depends on scoped storage availability.</li>
<li>With Android Emulator**, we recommend using an Android Virtual Device (AVD) that is based on Android 11 or higher**.</li>
<li>Note that CameraX only requires a minimum supported API level to be 21.</li>
<li><a href="https://developer.android.com/studio" target="_blank">Android Studio Arctic Fox 2020.3.1 or above</a>.</li>
<li>Understand of Kotlin  and Android ViewBinding</li>
</ul>


        </google-codelab-step>
      
        <google-codelab-step label="Create the project" duration="6" step="1">
          
          <h2 class="step-title" id="1" data-text="Create the project" tabindex="-1">
              2. Create the project
          </h2>
          <ol type="1">
<li>In Android Studio, create a new project, and select <em>Empty Views Activity</em> when prompted.</li>
</ol>
<p class="image-container"><img alt="ed0f21e863f9e38f.png" style="width: 624.00px" src="/static/codelabs/camerax-getting-started/img/ed0f21e863f9e38f.png" srcset="https://developer.android.com/static/codelabs/camerax-getting-started/img/ed0f21e863f9e38f_36.png 36w,https://developer.android.com/static/codelabs/camerax-getting-started/img/ed0f21e863f9e38f_48.png 48w,https://developer.android.com/static/codelabs/camerax-getting-started/img/ed0f21e863f9e38f_72.png 72w,https://developer.android.com/static/codelabs/camerax-getting-started/img/ed0f21e863f9e38f_96.png 96w,https://developer.android.com/static/codelabs/camerax-getting-started/img/ed0f21e863f9e38f_480.png 480w,https://developer.android.com/static/codelabs/camerax-getting-started/img/ed0f21e863f9e38f_720.png 720w,https://developer.android.com/static/codelabs/camerax-getting-started/img/ed0f21e863f9e38f_856.png 856w,https://developer.android.com/static/codelabs/camerax-getting-started/img/ed0f21e863f9e38f_960.png 960w,https://developer.android.com/static/codelabs/camerax-getting-started/img/ed0f21e863f9e38f_1440.png 1440w,https://developer.android.com/static/codelabs/camerax-getting-started/img/ed0f21e863f9e38f_1920.png 1920w,https://developer.android.com/static/codelabs/camerax-getting-started/img/ed0f21e863f9e38f_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"></p>
<ol type="1" start="2">
<li>Next, name the app &#34;CameraXApp&#34;, and confirm or change the package name to be &#34;<strong><code translate="no" dir="ltr">com.android.example.cameraxapp</code></strong>&#34;.  Choose Kotlin for the language, and set the minimum API level to 21 (<strong>which is the minimum required for CameraX</strong>). For older versions of Android Studio, be sure to include AndroidX artifacts support.</li>
</ol>
<p class="image-container"><img alt="10f0a12f6c8b997c.png" style="width: 624.00px" src="/static/codelabs/camerax-getting-started/img/10f0a12f6c8b997c.png" srcset="https://developer.android.com/static/codelabs/camerax-getting-started/img/10f0a12f6c8b997c_36.png 36w,https://developer.android.com/static/codelabs/camerax-getting-started/img/10f0a12f6c8b997c_48.png 48w,https://developer.android.com/static/codelabs/camerax-getting-started/img/10f0a12f6c8b997c_72.png 72w,https://developer.android.com/static/codelabs/camerax-getting-started/img/10f0a12f6c8b997c_96.png 96w,https://developer.android.com/static/codelabs/camerax-getting-started/img/10f0a12f6c8b997c_480.png 480w,https://developer.android.com/static/codelabs/camerax-getting-started/img/10f0a12f6c8b997c_720.png 720w,https://developer.android.com/static/codelabs/camerax-getting-started/img/10f0a12f6c8b997c_856.png 856w,https://developer.android.com/static/codelabs/camerax-getting-started/img/10f0a12f6c8b997c_960.png 960w,https://developer.android.com/static/codelabs/camerax-getting-started/img/10f0a12f6c8b997c_1440.png 1440w,https://developer.android.com/static/codelabs/camerax-getting-started/img/10f0a12f6c8b997c_1920.png 1920w,https://developer.android.com/static/codelabs/camerax-getting-started/img/10f0a12f6c8b997c_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"></p>
<h2 is-upgraded id="add-the-gradle-dependencies" data-text="Add the Gradle dependencies" tabindex="-1">Add the Gradle dependencies</h2>
<ol type="1">
<li>Open the <code translate="no" dir="ltr">build.gradle</code> file for the <code translate="no" dir="ltr">CameraXApp.app</code> module, and add the CameraX dependencies:</li>
</ol>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Genshi"><code translate="no" dir="ltr">dependencies<span class="devsite-syntax-w"> </span>{
<span class="devsite-syntax-w">  </span>def<span class="devsite-syntax-w"> </span>camerax_version<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>"1.2.2"
<span class="devsite-syntax-w">  </span>implementation<span class="devsite-syntax-w"> </span>"androidx.camera:camera-core:<span class="devsite-syntax-cp">${</span><span class="devsite-syntax-n">camerax_version</span><span class="devsite-syntax-cp">}</span>"
<span class="devsite-syntax-w">  </span>implementation<span class="devsite-syntax-w"> </span>"androidx.camera:camera-camera2:<span class="devsite-syntax-cp">${</span><span class="devsite-syntax-n">camerax_version</span><span class="devsite-syntax-cp">}</span>"
<span class="devsite-syntax-w">  </span>implementation<span class="devsite-syntax-w"> </span>"androidx.camera:camera-lifecycle:<span class="devsite-syntax-cp">${</span><span class="devsite-syntax-n">camerax_version</span><span class="devsite-syntax-cp">}</span>"
<span class="devsite-syntax-w">  </span>implementation<span class="devsite-syntax-w"> </span>"androidx.camera:camera-video:<span class="devsite-syntax-cp">${</span><span class="devsite-syntax-n">camerax_version</span><span class="devsite-syntax-cp">}</span>"

<span class="devsite-syntax-w">  </span>implementation<span class="devsite-syntax-w"> </span>"androidx.camera:camera-view:<span class="devsite-syntax-cp">${</span><span class="devsite-syntax-n">camerax_version</span><span class="devsite-syntax-cp">}</span>"
<span class="devsite-syntax-w">  </span>implementation<span class="devsite-syntax-w"> </span>"androidx.camera:camera-extensions:<span class="devsite-syntax-cp">${</span><span class="devsite-syntax-n">camerax_version</span><span class="devsite-syntax-cp">}</span>"
}
</code></pre></devsite-code>
<ol type="1" start="2">
<li>CameraX needs some methods that are part of Java 8, so we need to set our compile options accordingly. Ensure that the <code translate="no" dir="ltr">android</code> block has the following:</li>
</ol>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="scdoc"><code translate="no" dir="ltr">compileOptions {
    sourceCompatibility JavaVersion.VERSION_1_8
    targetCompatibility JavaVersion.VERSION_1_8
}
</code></pre></devsite-code>
<ol type="1" start="3">
<li>This codelab uses <a href="https://developer.android.com/topic/libraries/view-binding" target="_blank">ViewBinding</a>, so enable it with the following (at the end of the <code translate="no" dir="ltr">android{}</code> block):</li>
</ol>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Text only"><code translate="no" dir="ltr">buildFeatures {
   viewBinding true
}
</code></pre></devsite-code>
<p>When prompted, click <strong>Sync Now</strong>, and we will be ready to use CameraX in our app.</p>
<h2 is-upgraded id="create-the-codelab-layout" data-text="Create the codelab layout" tabindex="-1">Create the codelab layout</h2>
<p>In the UI for this codelab, we use the following:</p>
<ul>
<li>A CameraX PreviewView (to preview camera image/video).</li>
<li>A standard button to control image capture.</li>
<li>A standard button to start/stop video capture.</li>
<li>A vertical guideline to position the 2 buttons.</li>
</ul>
<p>Let&#39;s replace the default layout with this code to:</p>
<ol type="1">
<li>Open the <code translate="no" dir="ltr">activity_main</code> layout file at <code translate="no" dir="ltr">res/layout/activity_main.xml</code>, and replace it with the following code.</li>
</ol>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="GDScript"><code translate="no" dir="ltr">&lt;<span class="devsite-syntax-err">?</span><span class="devsite-syntax-n">xml</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">version</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"1.0"</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">encoding</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"utf-8"</span><span class="devsite-syntax-err">?</span>&gt;
&lt;<span class="devsite-syntax-n">androidx</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">constraintlayout</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">widget</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">ConstraintLayout</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-n">xmlns</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">android</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"http://schemas.android.com/apk/res/android"</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-n">xmlns</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">app</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"http://schemas.android.com/apk/res-auto"</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-n">xmlns</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">tools</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"http://schemas.android.com/tools"</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-n">android</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">layout_width</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"match_parent"</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-n">android</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">layout_height</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"match_parent"</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-n">tools</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">context</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">".MainActivity"</span>&gt;

<span class="devsite-syntax-w">   </span>&lt;<span class="devsite-syntax-n">androidx</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">camera</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">view</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">PreviewView</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-n">android</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">id</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"@+id/viewFinder"</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-n">android</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">layout_width</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"match_parent"</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-n">android</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">layout_height</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"match_parent"</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">/</span>&gt;

<span class="devsite-syntax-w">   </span>&lt;<span class="devsite-syntax-n">Button</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-n">android</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">id</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"@+id/image_capture_button"</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-n">android</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">layout_width</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"110dp"</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-n">android</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">layout_height</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"110dp"</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-n">android</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">layout_marginBottom</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"50dp"</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-n">android</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">layout_marginEnd</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"50dp"</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-n">android</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">elevation</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"2dp"</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-n">android</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">text</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"@string/take_photo"</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-n">app</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">layout_constraintBottom_toBottomOf</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"parent"</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-n">app</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">layout_constraintLeft_toLeftOf</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"parent"</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-n">app</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">layout_constraintEnd_toStartOf</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"@id/vertical_centerline"</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">/</span>&gt;

<span class="devsite-syntax-w">   </span>&lt;<span class="devsite-syntax-n">Button</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-n">android</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">id</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"@+id/video_capture_button"</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-n">android</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">layout_width</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"110dp"</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-n">android</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">layout_height</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"110dp"</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-n">android</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">layout_marginBottom</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"50dp"</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-n">android</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">layout_marginStart</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"50dp"</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-n">android</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">elevation</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"2dp"</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-n">android</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">text</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"@string/start_capture"</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-n">app</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">layout_constraintBottom_toBottomOf</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"parent"</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-n">app</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">layout_constraintStart_toEndOf</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"@id/vertical_centerline"</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">/</span>&gt;

<span class="devsite-syntax-w">   </span>&lt;<span class="devsite-syntax-n">androidx</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">constraintlayout</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">widget</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">Guideline</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-n">android</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">id</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"@+id/vertical_centerline"</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-n">android</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">layout_width</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"wrap_content"</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-n">android</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">layout_height</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"wrap_content"</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-n">android</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">orientation</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"vertical"</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-n">app</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">layout_constraintGuide_percent</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">".50"</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">/</span>&gt;

&lt;<span class="devsite-syntax-o">/</span><span class="devsite-syntax-n">androidx</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">constraintlayout</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">widget</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">ConstraintLayout</span>&gt;
</code></pre></devsite-code>
<ol type="1" start="2">
<li>update <code translate="no" dir="ltr">res/values/strings.xml</code> file with the following</li>
</ol>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="scdoc"><code translate="no" dir="ltr">&lt;resources&gt;
   &lt;string name="app_name"&gt;CameraXApp&lt;/string&gt;
   &lt;string name="take_photo"&gt;Take Photo&lt;/string&gt;
   &lt;string name="start_capture"&gt;Start Capture&lt;/string&gt;
   &lt;string name="stop_capture"&gt;Stop Capture&lt;/string&gt;
&lt;/resources&gt;
</code></pre></devsite-code>
<h2 is-upgraded id="set-up-mainactivity.kt" data-text="Set up MainActivity.kt" tabindex="-1">Set up MainActivity.kt</h2>
<ol type="1">
<li>Replace the code in <code translate="no" dir="ltr">MainActivity.kt</code>, with the following code, <strong>but leave the package name intact</strong>. It includes import statements, variables we will instantiate, functions we will implement, and constants.</li>
</ol>
<p><code translate="no" dir="ltr">onCreate()</code> has already been implemented for us to check for camera permissions, start the camera, set the <code translate="no" dir="ltr">onClickListener()</code> for the photo and capture buttons, and implement <code translate="no" dir="ltr">cameraExecutor</code>.  Even though the <code translate="no" dir="ltr">onCreate()</code> is implemented for you, the camera will not work yet until we implement the methods in the file.</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Python"><code translate="no" dir="ltr"><span class="devsite-syntax-n">package</span> <span class="devsite-syntax-n">com</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">android</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">example</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">cameraxapp</span>

<span class="devsite-syntax-kn">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">android.Manifest</span>
<span class="devsite-syntax-kn">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">android.content.ContentValues</span>
<span class="devsite-syntax-kn">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">android.content.pm.PackageManager</span>
<span class="devsite-syntax-kn">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">android.os.Build</span>
<span class="devsite-syntax-kn">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">android.os.Bundle</span>
<span class="devsite-syntax-kn">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">android.provider.MediaStore</span>
<span class="devsite-syntax-kn">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">androidx.appcompat.app.AppCompatActivity</span>
<span class="devsite-syntax-kn">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">androidx.camera.core.ImageCapture</span>
<span class="devsite-syntax-kn">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">androidx.camera.video.Recorder</span>
<span class="devsite-syntax-kn">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">androidx.camera.video.Recording</span>
<span class="devsite-syntax-kn">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">androidx.camera.video.VideoCapture</span>
<span class="devsite-syntax-kn">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">androidx.core.app.ActivityCompat</span>
<span class="devsite-syntax-kn">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">androidx.core.content.ContextCompat</span>
<span class="devsite-syntax-kn">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">com.android.example.cameraxapp.databinding.ActivityMainBinding</span>
<span class="devsite-syntax-kn">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">java.util.concurrent.ExecutorService</span>
<span class="devsite-syntax-kn">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">java.util.concurrent.Executors</span>
<span class="devsite-syntax-kn">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">android.widget.Toast</span>
<span class="devsite-syntax-kn">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">androidx.activity.result.contract.ActivityResultContracts</span>
<span class="devsite-syntax-kn">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">androidx.camera.lifecycle.ProcessCameraProvider</span>
<span class="devsite-syntax-kn">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">androidx.camera.core.Preview</span>
<span class="devsite-syntax-kn">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">androidx.camera.core.CameraSelector</span>
<span class="devsite-syntax-kn">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">android.util.Log</span>
<span class="devsite-syntax-kn">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">androidx.camera.core.ImageAnalysis</span>
<span class="devsite-syntax-kn">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">androidx.camera.core.ImageCaptureException</span>
<span class="devsite-syntax-kn">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">androidx.camera.core.ImageProxy</span>
<span class="devsite-syntax-kn">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">androidx.camera.video.FallbackStrategy</span>
<span class="devsite-syntax-kn">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">androidx.camera.video.MediaStoreOutputOptions</span>
<span class="devsite-syntax-kn">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">androidx.camera.video.Quality</span>
<span class="devsite-syntax-kn">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">androidx.camera.video.QualitySelector</span>
<span class="devsite-syntax-kn">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">androidx.camera.video.VideoRecordEvent</span>
<span class="devsite-syntax-kn">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">androidx.core.content.PermissionChecker</span>
<span class="devsite-syntax-kn">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">java.nio.ByteBuffer</span>
<span class="devsite-syntax-kn">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">java.text.SimpleDateFormat</span>
<span class="devsite-syntax-kn">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">java.util.Locale</span>

<span class="devsite-syntax-n">typealias</span> <span class="devsite-syntax-n">LumaListener</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">luma</span><span class="devsite-syntax-p">:</span> <span class="devsite-syntax-n">Double</span><span class="devsite-syntax-p">)</span> <span class="devsite-syntax-o">-</span>&gt; <span class="devsite-syntax-n">Unit</span>

<span class="devsite-syntax-k">class</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nc">MainActivity</span> <span class="devsite-syntax-p">:</span> <span class="devsite-syntax-n">AppCompatActivity</span><span class="devsite-syntax-p">()</span> <span class="devsite-syntax-p">{</span>
    <span class="devsite-syntax-n">private</span> <span class="devsite-syntax-n">lateinit</span> <span class="devsite-syntax-n">var</span> <span class="devsite-syntax-n">viewBinding</span><span class="devsite-syntax-p">:</span> <span class="devsite-syntax-n">ActivityMainBinding</span>

    <span class="devsite-syntax-n">private</span> <span class="devsite-syntax-n">var</span> <span class="devsite-syntax-n">imageCapture</span><span class="devsite-syntax-p">:</span> <span class="devsite-syntax-n">ImageCapture</span><span class="devsite-syntax-err">?</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">null</span>

    <span class="devsite-syntax-n">private</span> <span class="devsite-syntax-n">var</span> <span class="devsite-syntax-n">videoCapture</span><span class="devsite-syntax-p">:</span> <span class="devsite-syntax-n">VideoCapture&lt;Recorder&gt;</span><span class="devsite-syntax-err">?</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">null</span>
    <span class="devsite-syntax-n">private</span> <span class="devsite-syntax-n">var</span> <span class="devsite-syntax-n">recording</span><span class="devsite-syntax-p">:</span> <span class="devsite-syntax-n">Recording</span><span class="devsite-syntax-err">?</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">null</span>

    <span class="devsite-syntax-n">private</span> <span class="devsite-syntax-n">lateinit</span> <span class="devsite-syntax-n">var</span> <span class="devsite-syntax-n">cameraExecutor</span><span class="devsite-syntax-p">:</span> <span class="devsite-syntax-n">ExecutorService</span>

    <span class="devsite-syntax-n">override</span> <span class="devsite-syntax-n">fun</span> <span class="devsite-syntax-n">onCreate</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">savedInstanceState</span><span class="devsite-syntax-p">:</span> <span class="devsite-syntax-n">Bundle</span><span class="devsite-syntax-err">?</span><span class="devsite-syntax-p">)</span> <span class="devsite-syntax-p">{</span>
        <span class="devsite-syntax-nb">super</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">onCreate</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">savedInstanceState</span><span class="devsite-syntax-p">)</span>
        <span class="devsite-syntax-n">viewBinding</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">ActivityMainBinding</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">inflate</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">layoutInflater</span><span class="devsite-syntax-p">)</span>
        <span class="devsite-syntax-n">setContentView</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">viewBinding</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">root</span><span class="devsite-syntax-p">)</span>

        <span class="devsite-syntax-o">//</span> <span class="devsite-syntax-n">Request</span> <span class="devsite-syntax-n">camera</span> <span class="devsite-syntax-n">permissions</span>
        <span class="devsite-syntax-k">if</span> <span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">allPermissionsGranted</span><span class="devsite-syntax-p">())</span> <span class="devsite-syntax-p">{</span>
            <span class="devsite-syntax-n">startCamera</span><span class="devsite-syntax-p">()</span>
        <span class="devsite-syntax-p">}</span> <span class="devsite-syntax-k">else</span> <span class="devsite-syntax-p">{</span>
            <span class="devsite-syntax-n">requestPermissions</span><span class="devsite-syntax-p">()</span>
        <span class="devsite-syntax-p">}</span>

        <span class="devsite-syntax-o">//</span> <span class="devsite-syntax-n">Set</span> <span class="devsite-syntax-n">up</span> <span class="devsite-syntax-n">the</span> <span class="devsite-syntax-n">listeners</span> <span class="devsite-syntax-k">for</span> <span class="devsite-syntax-n">take</span> <span class="devsite-syntax-n">photo</span> <span class="devsite-syntax-ow">and</span> <span class="devsite-syntax-n">video</span> <span class="devsite-syntax-n">capture</span> <span class="devsite-syntax-n">buttons</span>
        <span class="devsite-syntax-n">viewBinding</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">imageCaptureButton</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">setOnClickListener</span> <span class="devsite-syntax-p">{</span> <span class="devsite-syntax-n">takePhoto</span><span class="devsite-syntax-p">()</span> <span class="devsite-syntax-p">}</span>
        <span class="devsite-syntax-n">viewBinding</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">videoCaptureButton</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">setOnClickListener</span> <span class="devsite-syntax-p">{</span> <span class="devsite-syntax-n">captureVideo</span><span class="devsite-syntax-p">()</span> <span class="devsite-syntax-p">}</span>

        <span class="devsite-syntax-n">cameraExecutor</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">Executors</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">newSingleThreadExecutor</span><span class="devsite-syntax-p">()</span>
    <span class="devsite-syntax-p">}</span>

    <span class="devsite-syntax-n">private</span> <span class="devsite-syntax-n">fun</span> <span class="devsite-syntax-n">takePhoto</span><span class="devsite-syntax-p">()</span> <span class="devsite-syntax-p">{}</span>

    <span class="devsite-syntax-n">private</span> <span class="devsite-syntax-n">fun</span> <span class="devsite-syntax-n">captureVideo</span><span class="devsite-syntax-p">()</span> <span class="devsite-syntax-p">{}</span>

    <span class="devsite-syntax-n">private</span> <span class="devsite-syntax-n">fun</span> <span class="devsite-syntax-n">startCamera</span><span class="devsite-syntax-p">()</span> <span class="devsite-syntax-p">{}</span>

    <span class="devsite-syntax-n">private</span> <span class="devsite-syntax-n">fun</span> <span class="devsite-syntax-n">requestPermissions</span><span class="devsite-syntax-p">()</span> <span class="devsite-syntax-p">{}</span>

    <span class="devsite-syntax-n">private</span> <span class="devsite-syntax-n">fun</span> <span class="devsite-syntax-n">allPermissionsGranted</span><span class="devsite-syntax-p">()</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">REQUIRED_PERMISSIONS</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">all</span> <span class="devsite-syntax-p">{</span>
        <span class="devsite-syntax-n">ContextCompat</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">checkSelfPermission</span><span class="devsite-syntax-p">(</span>
            <span class="devsite-syntax-n">baseContext</span><span class="devsite-syntax-p">,</span> <span class="devsite-syntax-n">it</span><span class="devsite-syntax-p">)</span> <span class="devsite-syntax-o">==</span> <span class="devsite-syntax-n">PackageManager</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">PERMISSION_GRANTED</span>
    <span class="devsite-syntax-p">}</span>

    <span class="devsite-syntax-n">override</span> <span class="devsite-syntax-n">fun</span> <span class="devsite-syntax-n">onDestroy</span><span class="devsite-syntax-p">()</span> <span class="devsite-syntax-p">{</span>
        <span class="devsite-syntax-nb">super</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">onDestroy</span><span class="devsite-syntax-p">()</span>
        <span class="devsite-syntax-n">cameraExecutor</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">shutdown</span><span class="devsite-syntax-p">()</span>
    <span class="devsite-syntax-p">}</span>

    <span class="devsite-syntax-n">companion</span> <span class="devsite-syntax-nb">object</span> <span class="devsite-syntax-p">{</span>
        <span class="devsite-syntax-n">private</span> <span class="devsite-syntax-n">const</span> <span class="devsite-syntax-n">val</span> <span class="devsite-syntax-n">TAG</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-s2">"CameraXApp"</span>
        <span class="devsite-syntax-n">private</span> <span class="devsite-syntax-n">const</span> <span class="devsite-syntax-n">val</span> <span class="devsite-syntax-n">FILENAME_FORMAT</span> <span class="devsite-syntax-o">=</span> <span class="devsite-syntax-s2">"yyyy-MM-dd-HH-mm-ss-SSS"</span>
        <span class="devsite-syntax-n">private</span> <span class="devsite-syntax-n">val</span> <span class="devsite-syntax-n">REQUIRED_PERMISSIONS</span> <span class="devsite-syntax-o">=</span>
            <span class="devsite-syntax-n">mutableListOf</span> <span class="devsite-syntax-p">(</span>
                <span class="devsite-syntax-n">Manifest</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">permission</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">CAMERA</span><span class="devsite-syntax-p">,</span>
                <span class="devsite-syntax-n">Manifest</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">permission</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">RECORD_AUDIO</span>
            <span class="devsite-syntax-p">)</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">apply</span> <span class="devsite-syntax-p">{</span>
                <span class="devsite-syntax-k">if</span> <span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">Build</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">VERSION</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">SDK_INT</span> &lt;<span class="devsite-syntax-o">=</span> <span class="devsite-syntax-n">Build</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">VERSION_CODES</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">P</span><span class="devsite-syntax-p">)</span> <span class="devsite-syntax-p">{</span>
                    <span class="devsite-syntax-n">add</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">Manifest</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">permission</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">WRITE_EXTERNAL_STORAGE</span><span class="devsite-syntax-p">)</span>
                <span class="devsite-syntax-p">}</span>
            <span class="devsite-syntax-p">}</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">toTypedArray</span><span class="devsite-syntax-p">()</span>
    <span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>


        </google-codelab-step>
      
        <google-codelab-step label="Request the necessary permissions" duration="6" step="2">
          
          <h2 class="step-title" id="2" data-text="Request the necessary permissions" tabindex="-1">
              3. Request the necessary permissions
          </h2>
          <p>Before the app opens the camera, it needs permission from the user to do so; microphone permission is also needed to record audio; on Android 9 (P) and before, MediaStore needs the external storage writing permission.  In this step, we&#39;ll  implement those necessary permissions.</p>
<ol type="1">
<li>Open <code translate="no" dir="ltr">AndroidManifest.xml</code> and add these lines before the <code translate="no" dir="ltr">application</code> tag.</li>
</ol>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="POVRay"><code translate="no" dir="ltr">&lt;<span class="devsite-syntax-n">uses</span><span class="devsite-syntax-o">-</span><span class="devsite-syntax-n">feature</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">android</span><span class="devsite-syntax-err">:</span><span class="devsite-syntax-n">name</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"android.hardware.camera.any"</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">/</span>&gt;
&lt;<span class="devsite-syntax-n">uses</span><span class="devsite-syntax-o">-</span><span class="devsite-syntax-n">permission</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">android</span><span class="devsite-syntax-err">:</span><span class="devsite-syntax-n">name</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"android.permission.CAMERA"</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">/</span>&gt;
&lt;<span class="devsite-syntax-n">uses</span><span class="devsite-syntax-o">-</span><span class="devsite-syntax-n">permission</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">android</span><span class="devsite-syntax-err">:</span><span class="devsite-syntax-n">name</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"android.permission.RECORD_AUDIO"</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">/</span>&gt;
&lt;<span class="devsite-syntax-n">uses</span><span class="devsite-syntax-o">-</span><span class="devsite-syntax-n">permission</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">android</span><span class="devsite-syntax-err">:</span><span class="devsite-syntax-n">name</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"android.permission.WRITE_EXTERNAL_STORAGE"</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-n">android</span><span class="devsite-syntax-err">:</span><span class="devsite-syntax-n">maxSdkVersion</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-s2">"28"</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">/</span>&gt;
</code></pre></devsite-code>
<p>Adding <code translate="no" dir="ltr">android.hardware.camera.any</code> makes sure that the device has a camera. Specifying <code translate="no" dir="ltr">.any</code> means that it can be a front camera or a back camera.</p>
<aside class="warning"><p>If you use <code translate="no" dir="ltr">android.hardware.camera</code> without <code translate="no" dir="ltr">.any</code>, it will not work if you have a device without a back camera, such as most Chromebooks. The second line adds the permission to access that camera.</p>
</aside>
<ol type="1" start="2">
<li>Copy this code into <code translate="no" dir="ltr">MainActivity.kt</code>. The bullet points below will break down the code we just copied.</li>
</ol>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="GDScript"><code translate="no" dir="ltr"><span class="devsite-syntax-n">private</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">activityResultLauncher</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">registerForActivityResult</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">ActivityResultContracts</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">RequestMultiplePermissions</span><span class="devsite-syntax-p">())</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">{</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">permissions</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">-</span>&gt;
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-o">//</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Handle</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Permission</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">granted</span><span class="devsite-syntax-o">/</span><span class="devsite-syntax-n">rejected</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-k">var</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">permissionGranted</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-bp">true</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">permissions</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">entries</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">forEach</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-k">if</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">it</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">key</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-ow">in</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">REQUIRED_PERMISSIONS</span><span class="devsite-syntax-w"> &amp;&amp; </span><span class="devsite-syntax-n">it</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">value</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">==</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-bp">false</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">                </span><span class="devsite-syntax-n">permissionGranted</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-bp">false</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-k">if</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-o">!</span><span class="devsite-syntax-n">permissionGranted</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-n">Toast</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">makeText</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">baseContext</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">                </span><span class="devsite-syntax-s2">"Permission request denied"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">                </span><span class="devsite-syntax-n">Toast</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">LENGTH_SHORT</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">show</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">}</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-k">else</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-n">startCamera</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<ul>
<li>Loop through each <code translate="no" dir="ltr">permissions.entries</code> and if any <code translate="no" dir="ltr">REQUIRED_PERMISSIONS</code> are not granted, set <code translate="no" dir="ltr">permissionGranted</code> to <code translate="no" dir="ltr">false</code>.</li>
<li>If permissions are not granted, present a toast to notify the user that the permissions were not granted.</li>
</ul>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="scdoc"><code translate="no" dir="ltr">if (!permissionGranted) {
    Toast.makeText(baseContext,
        "Permission request denied",
        Toast.LENGTH_SHORT).show()
}
</code></pre></devsite-code>
<ul>
<li>If the permissions are granted, call <code translate="no" dir="ltr">startCamera()</code>.</li>
</ul>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Text only"><code translate="no" dir="ltr">else {
   startCamera()
}
</code></pre></devsite-code>
<ol type="1" start="3">
<li>Copy this code into the <code translate="no" dir="ltr">requestPermissions()</code> method to launch <code translate="no" dir="ltr">ActivityResultLauncher</code> added in the last step. For more details, see the <a href="https://developer.android.com/training/permissions/requesting" target="_blank">Request runtime permissions</a> guide.</li>
</ol>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="scdoc"><code translate="no" dir="ltr">private fun requestPermissions() {
    activityResultLauncher.launch(REQUIRED_PERMISSIONS)
}
</code></pre></devsite-code>
<ol type="1" start="3">
<li>Run the app.</li>
</ol>
<p>It should now ask permission to use the camera and microphone:</p>
<p class="image-container"><img alt="dcdf8aa3d87e74be.png" style="width: 249.49px" src="/static/codelabs/camerax-getting-started/img/dcdf8aa3d87e74be.png" srcset="https://developer.android.com/static/codelabs/camerax-getting-started/img/dcdf8aa3d87e74be_36.png 36w,https://developer.android.com/static/codelabs/camerax-getting-started/img/dcdf8aa3d87e74be_48.png 48w,https://developer.android.com/static/codelabs/camerax-getting-started/img/dcdf8aa3d87e74be_72.png 72w,https://developer.android.com/static/codelabs/camerax-getting-started/img/dcdf8aa3d87e74be_96.png 96w,https://developer.android.com/static/codelabs/camerax-getting-started/img/dcdf8aa3d87e74be_480.png 480w,https://developer.android.com/static/codelabs/camerax-getting-started/img/dcdf8aa3d87e74be_720.png 720w,https://developer.android.com/static/codelabs/camerax-getting-started/img/dcdf8aa3d87e74be_856.png 856w,https://developer.android.com/static/codelabs/camerax-getting-started/img/dcdf8aa3d87e74be_960.png 960w,https://developer.android.com/static/codelabs/camerax-getting-started/img/dcdf8aa3d87e74be_1440.png 1440w,https://developer.android.com/static/codelabs/camerax-getting-started/img/dcdf8aa3d87e74be_1920.png 1920w,https://developer.android.com/static/codelabs/camerax-getting-started/img/dcdf8aa3d87e74be_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"></p>


        </google-codelab-step>
      
        <google-codelab-step label="Implement Preview use case" duration="10" step="3">
          
          <h2 class="step-title" id="3" data-text="Implement Preview use case" tabindex="-1">
              4. Implement Preview use case
          </h2>
          <p>In a camera application, the viewfinder is used to let the user preview the photo they will be taking. We will implement a viewfinder using the CameraX <code translate="no" dir="ltr">Preview</code> class.</p>
<p>To use <code translate="no" dir="ltr">Preview</code>, we will first need to define a configuration, which then gets used to create an instance of the use case. The resulting instance is what we bind to the CameraX lifecycle.</p>
<ol type="1">
<li>Copy this code into the <code translate="no" dir="ltr">startCamera()</code> function.</li>
</ol>
<p>The bullet points below will break down the code we just copied.</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Scalate Server Page"><code translate="no" dir="ltr">private<span class="devsite-syntax-w"> </span>fun<span class="devsite-syntax-w"> </span>startCamera()<span class="devsite-syntax-w"> </span>{
<span class="devsite-syntax-w">   </span>val<span class="devsite-syntax-w"> </span>cameraProviderFuture<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>ProcessCameraProvider.getInstance(this)

<span class="devsite-syntax-w">   </span>cameraProviderFuture.addListener({
<span class="devsite-syntax-w">       </span>//<span class="devsite-syntax-w"> </span>Used<span class="devsite-syntax-w"> </span>to<span class="devsite-syntax-w"> </span>bind<span class="devsite-syntax-w"> </span>the<span class="devsite-syntax-w"> </span>lifecycle<span class="devsite-syntax-w"> </span>of<span class="devsite-syntax-w"> </span>cameras<span class="devsite-syntax-w"> </span>to<span class="devsite-syntax-w"> </span>the<span class="devsite-syntax-w"> </span>lifecycle<span class="devsite-syntax-w"> </span>owner
<span class="devsite-syntax-w">       </span>val<span class="devsite-syntax-w"> </span>cameraProvider:<span class="devsite-syntax-w"> </span>ProcessCameraProvider<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>cameraProviderFuture.get()

<span class="devsite-syntax-w">       </span>//<span class="devsite-syntax-w"> </span>Preview
<span class="devsite-syntax-w">       </span>val<span class="devsite-syntax-w"> </span>preview<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>Preview.Builder()
<span class="devsite-syntax-w">          </span>.build()
<span class="devsite-syntax-w">          </span>.also<span class="devsite-syntax-w"> </span>{
<span class="devsite-syntax-w">              </span>it.setSurfaceProvider(viewBinding.viewFinder.surfaceProvider)
<span class="devsite-syntax-w">          </span>}

<span class="devsite-syntax-w">       </span>//<span class="devsite-syntax-w"> </span>Select<span class="devsite-syntax-w"> </span>back<span class="devsite-syntax-w"> </span>camera<span class="devsite-syntax-w"> </span>as<span class="devsite-syntax-w"> </span>a<span class="devsite-syntax-w"> </span>default
<span class="devsite-syntax-w">       </span>val<span class="devsite-syntax-w"> </span>cameraSelector<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>CameraSelector.DEFAULT_BACK_CAMERA

<span class="devsite-syntax-w">       </span>try<span class="devsite-syntax-w"> </span>{
<span class="devsite-syntax-w">           </span>//<span class="devsite-syntax-w"> </span>Unbind<span class="devsite-syntax-w"> </span>use<span class="devsite-syntax-w"> </span>cases<span class="devsite-syntax-w"> </span>before<span class="devsite-syntax-w"> </span>rebinding
<span class="devsite-syntax-w">           </span>cameraProvider.unbindAll()

<span class="devsite-syntax-w">           </span>//<span class="devsite-syntax-w"> </span>Bind<span class="devsite-syntax-w"> </span>use<span class="devsite-syntax-w"> </span>cases<span class="devsite-syntax-w"> </span>to<span class="devsite-syntax-w"> </span>camera
<span class="devsite-syntax-w">           </span>cameraProvider.bindToLifecycle(
<span class="devsite-syntax-w">               </span>this,<span class="devsite-syntax-w"> </span>cameraSelector,<span class="devsite-syntax-w"> </span>preview)

<span class="devsite-syntax-w">       </span>}<span class="devsite-syntax-w"> </span>catch(exc:<span class="devsite-syntax-w"> </span>Exception)<span class="devsite-syntax-w"> </span>{
<span class="devsite-syntax-w">           </span>Log.e(TAG,<span class="devsite-syntax-w"> </span>"Use<span class="devsite-syntax-w"> </span>case<span class="devsite-syntax-w"> </span>binding<span class="devsite-syntax-w"> </span>failed",<span class="devsite-syntax-w"> </span>exc)
<span class="devsite-syntax-w">       </span>}

<span class="devsite-syntax-w">   </span>},<span class="devsite-syntax-w"> </span>ContextCompat.getMainExecutor(this))
}
</code></pre></devsite-code>
<ul>
<li>Create an instance of the  <a href="https://developer.android.com/reference/androidx/camera/lifecycle/ProcessCameraProvider" target="_blank"><code translate="no" dir="ltr">ProcessCameraProvider</code></a>. This is used to bind the lifecycle of cameras to the lifecycle owner. This eliminates the task of opening and closing the camera since CameraX is lifecycle-aware.</li>
</ul>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="POVRay"><code translate="no" dir="ltr"><span class="devsite-syntax-k">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">cameraProviderFuture</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">ProcessCameraProvider</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">getInstance</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">this</span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code>
<ul>
<li>Add a listener to the <code translate="no" dir="ltr">cameraProviderFuture</code>. Add a <code translate="no" dir="ltr">Runnable</code> as one argument. We will fill it in later. Add  <a href="https://developer.android.com/reference/kotlin/androidx/core/content/ContextCompat" target="_blank"><code translate="no" dir="ltr">ContextCompat</code></a><code translate="no" dir="ltr">.getMainExecutor()</code> as the second argument. This returns an  <a href="https://developer.android.com/reference/java/util/concurrent/Executor" target="_blank"><code translate="no" dir="ltr">Executor</code></a> that runs on the main thread.</li>
</ul>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="POVRay"><code translate="no" dir="ltr"><span class="devsite-syntax-n">cameraProviderFuture</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">addListener</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">Runnable</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{},</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">ContextCompat</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">getMainExecutor</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">this</span><span class="devsite-syntax-p">))</span>
</code></pre></devsite-code>
<ul>
<li>In the <code translate="no" dir="ltr">Runnable</code>, add a  <a href="https://developer.android.com/reference/androidx/camera/lifecycle/ProcessCameraProvider" target="_blank"><code translate="no" dir="ltr">ProcessCameraProvider</code></a>. This is used to bind the lifecycle of our camera to the <code translate="no" dir="ltr">LifecycleOwner</code> within the application&#39;s process.</li>
</ul>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Scalate Server Page"><code translate="no" dir="ltr">val<span class="devsite-syntax-w"> </span>cameraProvider:<span class="devsite-syntax-w"> </span>ProcessCameraProvider<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>cameraProviderFuture.get()
</code></pre></devsite-code>
<ul>
<li>Initialize our  <a href="https://developer.android.com/reference/kotlin/androidx/camera/core/Preview" target="_blank"><code translate="no" dir="ltr">Preview</code></a> object, call build on it, get a surface provider from viewfinder, and then set it on the preview.</li>
</ul>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Text only"><code translate="no" dir="ltr">val preview = Preview.Builder()
   .build()
   .also {
       it.setSurfaceProvider(viewBinding.viewFinder.surfaceProvider)
   }
</code></pre></devsite-code>
<ul>
<li>Create a  <a href="https://developer.android.com/reference/androidx/camera/core/CameraSelector" target="_blank"><code translate="no" dir="ltr">CameraSelector</code></a> object and select <code translate="no" dir="ltr">DEFAULT_BACK_CAMERA</code>.</li>
</ul>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="POVRay"><code translate="no" dir="ltr"><span class="devsite-syntax-k">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">cameraSelector</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">CameraSelector</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">DEFAULT_BACK_CAMERA</span>
</code></pre></devsite-code>
<ul>
<li>Create a <code translate="no" dir="ltr">try</code> block. Inside that block, make sure nothing is bound to the <code translate="no" dir="ltr">cameraProvider</code>, and then bind our <code translate="no" dir="ltr">cameraSelector</code> and preview object to the <code translate="no" dir="ltr">cameraProvider</code>.</li>
</ul>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="POVRay"><code translate="no" dir="ltr"><span class="devsite-syntax-n">try</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-n">cameraProvider</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">unbindAll</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-n">cameraProvider</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">bindToLifecycle</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-n">this</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">cameraSelector</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">preview</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<ul>
<li>There are a few ways this code could fail, like if the app is no longer in focus. Wrap this code in a <code translate="no" dir="ltr">catch</code> block to log if there&#39;s a failure.</li>
</ul>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Text only"><code translate="no" dir="ltr">catch(exc: Exception) {
      Log.e(TAG, "Use case binding failed", exc)
}
</code></pre></devsite-code>
<ol type="1" start="2">
<li>Run the app. We now see a camera preview!</li>
</ol>
<p class="image-container"><img alt="d61a4250f6a3ed35.png" style="width: 212.83px" src="/static/codelabs/camerax-getting-started/img/d61a4250f6a3ed35.png" srcset="https://developer.android.com/static/codelabs/camerax-getting-started/img/d61a4250f6a3ed35_36.png 36w,https://developer.android.com/static/codelabs/camerax-getting-started/img/d61a4250f6a3ed35_48.png 48w,https://developer.android.com/static/codelabs/camerax-getting-started/img/d61a4250f6a3ed35_72.png 72w,https://developer.android.com/static/codelabs/camerax-getting-started/img/d61a4250f6a3ed35_96.png 96w,https://developer.android.com/static/codelabs/camerax-getting-started/img/d61a4250f6a3ed35_480.png 480w,https://developer.android.com/static/codelabs/camerax-getting-started/img/d61a4250f6a3ed35_720.png 720w,https://developer.android.com/static/codelabs/camerax-getting-started/img/d61a4250f6a3ed35_856.png 856w,https://developer.android.com/static/codelabs/camerax-getting-started/img/d61a4250f6a3ed35_960.png 960w,https://developer.android.com/static/codelabs/camerax-getting-started/img/d61a4250f6a3ed35_1440.png 1440w,https://developer.android.com/static/codelabs/camerax-getting-started/img/d61a4250f6a3ed35_1920.png 1920w,https://developer.android.com/static/codelabs/camerax-getting-started/img/d61a4250f6a3ed35_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"></p>


        </google-codelab-step>
      
        <google-codelab-step label="Implement ImageCapture use case" duration="10" step="4">
          
          <h2 class="step-title" id="4" data-text="Implement ImageCapture use case" tabindex="-1">
              5. Implement ImageCapture use case
          </h2>
          <p>Other use cases work in a very similar way as <code translate="no" dir="ltr">Preview</code>. First, we define a configuration object that is used to instantiate the actual use case object. To capture photos, you&#39;ll implement the <code translate="no" dir="ltr">takePhoto()</code> method, which is called when the <strong>Take photo</strong> button is pressed .</p>
<ol type="1">
<li>Copy this code into the <code translate="no" dir="ltr">takePhoto()</code> method.</li>
</ol>
<p>The bullet points below will break down the code we just copied.</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Genshi"><code translate="no" dir="ltr">private<span class="devsite-syntax-w"> </span>fun<span class="devsite-syntax-w"> </span>takePhoto()<span class="devsite-syntax-w"> </span>{
<span class="devsite-syntax-w">   </span>//<span class="devsite-syntax-w"> </span>Get<span class="devsite-syntax-w"> </span>a<span class="devsite-syntax-w"> </span>stable<span class="devsite-syntax-w"> </span>reference<span class="devsite-syntax-w"> </span>of<span class="devsite-syntax-w"> </span>the<span class="devsite-syntax-w"> </span>modifiable<span class="devsite-syntax-w"> </span>image<span class="devsite-syntax-w"> </span>capture<span class="devsite-syntax-w"> </span>use<span class="devsite-syntax-w"> </span>case
<span class="devsite-syntax-w">   </span>val<span class="devsite-syntax-w"> </span>imageCapture<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>imageCapture<span class="devsite-syntax-w"> </span>?:<span class="devsite-syntax-w"> </span>return

<span class="devsite-syntax-w">   </span>//<span class="devsite-syntax-w"> </span>Create<span class="devsite-syntax-w"> </span>time<span class="devsite-syntax-w"> </span>stamped<span class="devsite-syntax-w"> </span>name<span class="devsite-syntax-w"> </span>and<span class="devsite-syntax-w"> </span>MediaStore<span class="devsite-syntax-w"> </span>entry.
<span class="devsite-syntax-w">   </span>val<span class="devsite-syntax-w"> </span>name<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>SimpleDateFormat(FILENAME_FORMAT,<span class="devsite-syntax-w"> </span>Locale.US)
<span class="devsite-syntax-w">              </span>.format(System.currentTimeMillis())
<span class="devsite-syntax-w">   </span>val<span class="devsite-syntax-w"> </span>contentValues<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>ContentValues().apply<span class="devsite-syntax-w"> </span>{
<span class="devsite-syntax-w">       </span>put(MediaStore.MediaColumns.DISPLAY_NAME,<span class="devsite-syntax-w"> </span>name)
<span class="devsite-syntax-w">       </span>put(MediaStore.MediaColumns.MIME_TYPE,<span class="devsite-syntax-w"> </span>"image/jpeg")
<span class="devsite-syntax-w">       </span>if(Build.VERSION.SDK_INT<span class="devsite-syntax-w"> &gt; </span>Build.VERSION_CODES.P)<span class="devsite-syntax-w"> </span>{
<span class="devsite-syntax-w">           </span>put(MediaStore.Images.Media.RELATIVE_PATH,<span class="devsite-syntax-w"> </span>"Pictures/CameraX-Image")
<span class="devsite-syntax-w">       </span>}
<span class="devsite-syntax-w">   </span>}

<span class="devsite-syntax-w">   </span>//<span class="devsite-syntax-w"> </span>Create<span class="devsite-syntax-w"> </span>output<span class="devsite-syntax-w"> </span>options<span class="devsite-syntax-w"> </span>object<span class="devsite-syntax-w"> </span>which<span class="devsite-syntax-w"> </span>contains<span class="devsite-syntax-w"> </span>file<span class="devsite-syntax-w"> </span>+<span class="devsite-syntax-w"> </span>metadata
<span class="devsite-syntax-w">   </span>val<span class="devsite-syntax-w"> </span>outputOptions<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>ImageCapture.OutputFileOptions
<span class="devsite-syntax-w">           </span>.Builder(contentResolver,
<span class="devsite-syntax-w">                    </span>MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
<span class="devsite-syntax-w">                    </span>contentValues)
<span class="devsite-syntax-w">           </span>.build()

<span class="devsite-syntax-w">   </span>//<span class="devsite-syntax-w"> </span>Set<span class="devsite-syntax-w"> </span>up<span class="devsite-syntax-w"> </span>image<span class="devsite-syntax-w"> </span>capture<span class="devsite-syntax-w"> </span>listener,<span class="devsite-syntax-w"> </span>which<span class="devsite-syntax-w"> </span>is<span class="devsite-syntax-w"> </span>triggered<span class="devsite-syntax-w"> </span>after<span class="devsite-syntax-w"> </span>photo<span class="devsite-syntax-w"> </span>has
<span class="devsite-syntax-w">   </span>//<span class="devsite-syntax-w"> </span>been<span class="devsite-syntax-w"> </span>taken
<span class="devsite-syntax-w">   </span>imageCapture.takePicture(
<span class="devsite-syntax-w">       </span>outputOptions,
<span class="devsite-syntax-w">       </span>ContextCompat.getMainExecutor(this),
<span class="devsite-syntax-w">       </span>object<span class="devsite-syntax-w"> </span>:<span class="devsite-syntax-w"> </span>ImageCapture.OnImageSavedCallback<span class="devsite-syntax-w"> </span>{
<span class="devsite-syntax-w">           </span>override<span class="devsite-syntax-w"> </span>fun<span class="devsite-syntax-w"> </span>onError(exc:<span class="devsite-syntax-w"> </span>ImageCaptureException)<span class="devsite-syntax-w"> </span>{
<span class="devsite-syntax-w">               </span>Log.e(TAG,<span class="devsite-syntax-w"> </span>"Photo<span class="devsite-syntax-w"> </span>capture<span class="devsite-syntax-w"> </span>failed:<span class="devsite-syntax-w"> </span><span class="devsite-syntax-cp">${</span><span class="devsite-syntax-n">exc</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">message</span><span class="devsite-syntax-cp">}</span>",<span class="devsite-syntax-w"> </span>exc)
<span class="devsite-syntax-w">           </span>}

<span class="devsite-syntax-w">           </span>override<span class="devsite-syntax-w"> </span>fun
<span class="devsite-syntax-w">               </span>onImageSaved(output:<span class="devsite-syntax-w"> </span>ImageCapture.OutputFileResults){
<span class="devsite-syntax-w">               </span>val<span class="devsite-syntax-w"> </span>msg<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>"Photo<span class="devsite-syntax-w"> </span>capture<span class="devsite-syntax-w"> </span>succeeded:<span class="devsite-syntax-w"> </span><span class="devsite-syntax-cp">${</span><span class="devsite-syntax-n">output</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">savedUri</span><span class="devsite-syntax-cp">}</span>"
<span class="devsite-syntax-w">               </span>Toast.makeText(baseContext,<span class="devsite-syntax-w"> </span>msg,<span class="devsite-syntax-w"> </span>Toast.LENGTH_SHORT).show()
<span class="devsite-syntax-w">               </span>Log.d(TAG,<span class="devsite-syntax-w"> </span>msg)
<span class="devsite-syntax-w">           </span>}
<span class="devsite-syntax-w">       </span>}
<span class="devsite-syntax-w">   </span>)
}
</code></pre></devsite-code>
<ul>
<li>First,  get a reference to the  <a href="https://developer.android.com/reference/kotlin/androidx/camera/core/ImageCapture" target="_blank"><code translate="no" dir="ltr">ImageCapture</code></a> use case. If the use case is null, exit out of the function. This will be null If we tap the photo button before image capture is set up. Without the <code translate="no" dir="ltr">return</code> statement, the app would crash if it was <code translate="no" dir="ltr">null</code>.</li>
</ul>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Text only"><code translate="no" dir="ltr">val imageCapture = imageCapture ?: return
</code></pre></devsite-code>
<ul>
<li>Next, create a MediaStore content value to hold the image. Use a timestamp so the display name in MediaStore will be unique.</li>
</ul>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Carbon"><code translate="no" dir="ltr"><span class="devsite-syntax-w">   </span><span class="devsite-syntax-nx">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">name</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">SimpleDateFormat</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nx">FILENAME_FORMAT</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">Locale</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">US</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">              </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">format</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nx">System</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">currentTimeMillis</span><span class="devsite-syntax-p">())</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-nx">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">contentValues</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">ContentValues</span><span class="devsite-syntax-p">().</span><span class="devsite-syntax-nx">apply</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-nx">put</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nx">MediaStore</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">MediaColumns</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">DISPLAY_NAME</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">name</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-nx">put</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nx">MediaStore</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">MediaColumns</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">MIME_TYPE</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s">"image/jpeg"</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-k">if</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nx">Build</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">VERSION</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">SDK_INT</span><span class="devsite-syntax-w"> &gt; </span><span class="devsite-syntax-nx">Build</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">VERSION_CODES</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">P</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">           </span><span class="devsite-syntax-nx">put</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nx">MediaStore</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">Images</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">Media</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">RELATIVE_PATH</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s">"Pictures/CameraX-Image"</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<ul>
<li>Create an  <a href="https://developer.android.com/reference/kotlin/androidx/camera/core/ImageCapture.OutputFileOptions" target="_blank"><code translate="no" dir="ltr">OutputFileOptions</code></a> object. This object is where we can specify things about how we want our output to be. We want the output saved in the MediaStore so other apps could display it, so add our MediaStore entry.</li>
</ul>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="scdoc"><code translate="no" dir="ltr">val outputOptions = ImageCapture.OutputFileOptions
       .Builder(contentResolver,
                MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
                contentValues)
       .build()
</code></pre></devsite-code>
<ul>
<li>Call <code translate="no" dir="ltr">takePicture()</code> on the <code translate="no" dir="ltr">imageCapture</code> object. Pass in <code translate="no" dir="ltr">outputOptions</code>, the executor, and a callback for when the image is saved. You&#39;ll fill out the callback next.</li>
</ul>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Text only"><code translate="no" dir="ltr">imageCapture.takePicture(
   outputOptions, ContextCompat.getMainExecutor(this),
   object : ImageCapture.OnImageSavedCallback {}
)
</code></pre></devsite-code>
<ul>
<li>In the case that the image capture fails or saving the image capture fails, add in an error case to log that it failed.</li>
</ul>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Genshi"><code translate="no" dir="ltr">override<span class="devsite-syntax-w"> </span>fun<span class="devsite-syntax-w"> </span>onError(exc:<span class="devsite-syntax-w"> </span>ImageCaptureException)<span class="devsite-syntax-w"> </span>{
<span class="devsite-syntax-w">   </span>Log.e(TAG,<span class="devsite-syntax-w"> </span>"Photo<span class="devsite-syntax-w"> </span>capture<span class="devsite-syntax-w"> </span>failed:<span class="devsite-syntax-w"> </span><span class="devsite-syntax-cp">${</span><span class="devsite-syntax-n">exc</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">message</span><span class="devsite-syntax-cp">}</span>",<span class="devsite-syntax-w"> </span>exc)
}
</code></pre></devsite-code>
<ul>
<li>If the capture doesn&#39;t fail, the photo was taken successfully!  Save the photo to the file we created earlier, present a toast to let the user know it was successful, and print a log statement.</li>
</ul>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="scdoc"><code translate="no" dir="ltr">override fun onImageSaved(output: ImageCapture.OutputFileResults) {
   val savedUri = Uri.fromFile(photoFile)
   val msg = "Photo capture succeeded: $savedUri"
   Toast.makeText(baseContext, msg, Toast.LENGTH_SHORT).show()
   Log.d(TAG, msg)
}
</code></pre></devsite-code>
<ol type="1" start="2">
<li>Go to the <code translate="no" dir="ltr">startCamera()</code> method and copy this code under the code for preview.</li>
</ol>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Text only"><code translate="no" dir="ltr">imageCapture = ImageCapture.Builder().build()
</code></pre></devsite-code>
<ol type="1" start="3">
<li>Finally, update the call to <code translate="no" dir="ltr">bindToLifecycle()</code> in the <code translate="no" dir="ltr">try</code> block to include the new use case:</li>
</ol>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="POVRay"><code translate="no" dir="ltr"><span class="devsite-syntax-n">cameraProvider</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">bindToLifecycle</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-n">this</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">cameraSelector</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">preview</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">imageCapture</span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code>
<p>The method will look like this at this point:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Scalate Server Page"><code translate="no" dir="ltr">private<span class="devsite-syntax-w"> </span>fun<span class="devsite-syntax-w"> </span>startCamera()<span class="devsite-syntax-w"> </span>{
<span class="devsite-syntax-w">   </span>val<span class="devsite-syntax-w"> </span>cameraProviderFuture<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>ProcessCameraProvider.getInstance(this)

<span class="devsite-syntax-w">   </span>cameraProviderFuture.addListener({
<span class="devsite-syntax-w">       </span>//<span class="devsite-syntax-w"> </span>Used<span class="devsite-syntax-w"> </span>to<span class="devsite-syntax-w"> </span>bind<span class="devsite-syntax-w"> </span>the<span class="devsite-syntax-w"> </span>lifecycle<span class="devsite-syntax-w"> </span>of<span class="devsite-syntax-w"> </span>cameras<span class="devsite-syntax-w"> </span>to<span class="devsite-syntax-w"> </span>the<span class="devsite-syntax-w"> </span>lifecycle<span class="devsite-syntax-w"> </span>owner
<span class="devsite-syntax-w">       </span>val<span class="devsite-syntax-w"> </span>cameraProvider:<span class="devsite-syntax-w"> </span>ProcessCameraProvider<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>cameraProviderFuture.get()

<span class="devsite-syntax-w">       </span>//<span class="devsite-syntax-w"> </span>Preview
<span class="devsite-syntax-w">       </span>val<span class="devsite-syntax-w"> </span>preview<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>Preview.Builder()
<span class="devsite-syntax-w">           </span>.build()
<span class="devsite-syntax-w">           </span>.also<span class="devsite-syntax-w"> </span>{
<span class="devsite-syntax-w">                 </span>it.setSurfaceProvider(viewFinder.surfaceProvider)
<span class="devsite-syntax-w">           </span>}

<span class="devsite-syntax-w">       </span>imageCapture<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>ImageCapture.Builder()
<span class="devsite-syntax-w">           </span>.build()

<span class="devsite-syntax-w">       </span>//<span class="devsite-syntax-w"> </span>Select<span class="devsite-syntax-w"> </span>back<span class="devsite-syntax-w"> </span>camera<span class="devsite-syntax-w"> </span>as<span class="devsite-syntax-w"> </span>a<span class="devsite-syntax-w"> </span>default
<span class="devsite-syntax-w">       </span>val<span class="devsite-syntax-w"> </span>cameraSelector<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>CameraSelector.DEFAULT_BACK_CAMERA

<span class="devsite-syntax-w">       </span>try<span class="devsite-syntax-w"> </span>{
<span class="devsite-syntax-w">           </span>//<span class="devsite-syntax-w"> </span>Unbind<span class="devsite-syntax-w"> </span>use<span class="devsite-syntax-w"> </span>cases<span class="devsite-syntax-w"> </span>before<span class="devsite-syntax-w"> </span>rebinding
<span class="devsite-syntax-w">           </span>cameraProvider.unbindAll()

<span class="devsite-syntax-w">           </span>//<span class="devsite-syntax-w"> </span>Bind<span class="devsite-syntax-w"> </span>use<span class="devsite-syntax-w"> </span>cases<span class="devsite-syntax-w"> </span>to<span class="devsite-syntax-w"> </span>camera
<span class="devsite-syntax-w">           </span>cameraProvider.bindToLifecycle(
<span class="devsite-syntax-w">               </span>this,<span class="devsite-syntax-w"> </span>cameraSelector,<span class="devsite-syntax-w"> </span>preview,<span class="devsite-syntax-w"> </span>imageCapture)

<span class="devsite-syntax-w">       </span>}<span class="devsite-syntax-w"> </span>catch(exc:<span class="devsite-syntax-w"> </span>Exception)<span class="devsite-syntax-w"> </span>{
<span class="devsite-syntax-w">           </span>Log.e(TAG,<span class="devsite-syntax-w"> </span>"Use<span class="devsite-syntax-w"> </span>case<span class="devsite-syntax-w"> </span>binding<span class="devsite-syntax-w"> </span>failed",<span class="devsite-syntax-w"> </span>exc)
<span class="devsite-syntax-w">       </span>}

<span class="devsite-syntax-w">   </span>},<span class="devsite-syntax-w"> </span>ContextCompat.getMainExecutor(this))
}
</code></pre></devsite-code>
<ol type="1" start="4">
<li>Rerun the app and press <strong>Take Photo</strong>. We should see a toast presented on the screen and a message in the logs.</li>
</ol>
<p class="image-container"><img alt="54292eaa4ce3be0a.png" style="width: 295.67px" src="/static/codelabs/camerax-getting-started/img/54292eaa4ce3be0a.png" srcset="https://developer.android.com/static/codelabs/camerax-getting-started/img/54292eaa4ce3be0a_36.png 36w,https://developer.android.com/static/codelabs/camerax-getting-started/img/54292eaa4ce3be0a_48.png 48w,https://developer.android.com/static/codelabs/camerax-getting-started/img/54292eaa4ce3be0a_72.png 72w,https://developer.android.com/static/codelabs/camerax-getting-started/img/54292eaa4ce3be0a_96.png 96w,https://developer.android.com/static/codelabs/camerax-getting-started/img/54292eaa4ce3be0a_480.png 480w,https://developer.android.com/static/codelabs/camerax-getting-started/img/54292eaa4ce3be0a_720.png 720w,https://developer.android.com/static/codelabs/camerax-getting-started/img/54292eaa4ce3be0a_856.png 856w,https://developer.android.com/static/codelabs/camerax-getting-started/img/54292eaa4ce3be0a_960.png 960w,https://developer.android.com/static/codelabs/camerax-getting-started/img/54292eaa4ce3be0a_1440.png 1440w,https://developer.android.com/static/codelabs/camerax-getting-started/img/54292eaa4ce3be0a_1920.png 1920w,https://developer.android.com/static/codelabs/camerax-getting-started/img/54292eaa4ce3be0a_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"></p>
<h2 is-upgraded id="view-the-photo" data-text="View the photo" tabindex="-1">View the photo</h2>
<p>Now the newly captured photos are saved into MediaStore, we can use any MediaStore application to view them. For example, with  <a href="https://play.google.com/store/apps/details?id=com.google.android.apps.photos" target="_blank">Google Photos app</a>, do:</p>
<ol type="1">
<li>Start Google Photos  <img alt="Photos" title="Photos" style="width: 20.00px" src="/static/codelabs/camerax-getting-started/img/6a62cfc7e1f2cb9f.png" srcset="https://developer.android.com/static/codelabs/camerax-getting-started/img/6a62cfc7e1f2cb9f_36.png 36w,https://developer.android.com/static/codelabs/camerax-getting-started/img/6a62cfc7e1f2cb9f_48.png 48w,https://developer.android.com/static/codelabs/camerax-getting-started/img/6a62cfc7e1f2cb9f_72.png 72w,https://developer.android.com/static/codelabs/camerax-getting-started/img/6a62cfc7e1f2cb9f_96.png 96w,https://developer.android.com/static/codelabs/camerax-getting-started/img/6a62cfc7e1f2cb9f_480.png 480w,https://developer.android.com/static/codelabs/camerax-getting-started/img/6a62cfc7e1f2cb9f_720.png 720w,https://developer.android.com/static/codelabs/camerax-getting-started/img/6a62cfc7e1f2cb9f_856.png 856w,https://developer.android.com/static/codelabs/camerax-getting-started/img/6a62cfc7e1f2cb9f_960.png 960w,https://developer.android.com/static/codelabs/camerax-getting-started/img/6a62cfc7e1f2cb9f_1440.png 1440w,https://developer.android.com/static/codelabs/camerax-getting-started/img/6a62cfc7e1f2cb9f_1920.png 1920w,https://developer.android.com/static/codelabs/camerax-getting-started/img/6a62cfc7e1f2cb9f_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px">.</li>
<li>Tap &#34;Library&#34;(unnecessary if not logged into the Photos app with your account) to see the sorted media files, <code translate="no" dir="ltr">"CameraX-Image"</code> folder is ours.</li>
</ol>
<p class="image-container"><img alt="8e884489ca2599e9.png" style="width: 291.50px" src="/static/codelabs/camerax-getting-started/img/8e884489ca2599e9.png" srcset="https://developer.android.com/static/codelabs/camerax-getting-started/img/8e884489ca2599e9_36.png 36w,https://developer.android.com/static/codelabs/camerax-getting-started/img/8e884489ca2599e9_48.png 48w,https://developer.android.com/static/codelabs/camerax-getting-started/img/8e884489ca2599e9_72.png 72w,https://developer.android.com/static/codelabs/camerax-getting-started/img/8e884489ca2599e9_96.png 96w,https://developer.android.com/static/codelabs/camerax-getting-started/img/8e884489ca2599e9_480.png 480w,https://developer.android.com/static/codelabs/camerax-getting-started/img/8e884489ca2599e9_720.png 720w,https://developer.android.com/static/codelabs/camerax-getting-started/img/8e884489ca2599e9_856.png 856w,https://developer.android.com/static/codelabs/camerax-getting-started/img/8e884489ca2599e9_960.png 960w,https://developer.android.com/static/codelabs/camerax-getting-started/img/8e884489ca2599e9_1440.png 1440w,https://developer.android.com/static/codelabs/camerax-getting-started/img/8e884489ca2599e9_1920.png 1920w,https://developer.android.com/static/codelabs/camerax-getting-started/img/8e884489ca2599e9_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"> <img alt="9ca38ee62f08ef6f.png" style="width: 292.19px" src="/static/codelabs/camerax-getting-started/img/9ca38ee62f08ef6f.png" srcset="https://developer.android.com/static/codelabs/camerax-getting-started/img/9ca38ee62f08ef6f_36.png 36w,https://developer.android.com/static/codelabs/camerax-getting-started/img/9ca38ee62f08ef6f_48.png 48w,https://developer.android.com/static/codelabs/camerax-getting-started/img/9ca38ee62f08ef6f_72.png 72w,https://developer.android.com/static/codelabs/camerax-getting-started/img/9ca38ee62f08ef6f_96.png 96w,https://developer.android.com/static/codelabs/camerax-getting-started/img/9ca38ee62f08ef6f_480.png 480w,https://developer.android.com/static/codelabs/camerax-getting-started/img/9ca38ee62f08ef6f_720.png 720w,https://developer.android.com/static/codelabs/camerax-getting-started/img/9ca38ee62f08ef6f_856.png 856w,https://developer.android.com/static/codelabs/camerax-getting-started/img/9ca38ee62f08ef6f_960.png 960w,https://developer.android.com/static/codelabs/camerax-getting-started/img/9ca38ee62f08ef6f_1440.png 1440w,https://developer.android.com/static/codelabs/camerax-getting-started/img/9ca38ee62f08ef6f_1920.png 1920w,https://developer.android.com/static/codelabs/camerax-getting-started/img/9ca38ee62f08ef6f_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"></p>
<ol type="1" start="3">
<li>Tap on the image icon to review the full photo; and tap the More button <img alt="More" title="More" style="width: 14.00px" src="/static/codelabs/camerax-getting-started/img/4991779141e8a7b1.png" srcset="https://developer.android.com/static/codelabs/camerax-getting-started/img/4991779141e8a7b1_36.png 36w,https://developer.android.com/static/codelabs/camerax-getting-started/img/4991779141e8a7b1_48.png 48w,https://developer.android.com/static/codelabs/camerax-getting-started/img/4991779141e8a7b1_72.png 72w,https://developer.android.com/static/codelabs/camerax-getting-started/img/4991779141e8a7b1_96.png 96w,https://developer.android.com/static/codelabs/camerax-getting-started/img/4991779141e8a7b1_480.png 480w,https://developer.android.com/static/codelabs/camerax-getting-started/img/4991779141e8a7b1_720.png 720w,https://developer.android.com/static/codelabs/camerax-getting-started/img/4991779141e8a7b1_856.png 856w,https://developer.android.com/static/codelabs/camerax-getting-started/img/4991779141e8a7b1_960.png 960w,https://developer.android.com/static/codelabs/camerax-getting-started/img/4991779141e8a7b1_1440.png 1440w,https://developer.android.com/static/codelabs/camerax-getting-started/img/4991779141e8a7b1_1920.png 1920w,https://developer.android.com/static/codelabs/camerax-getting-started/img/4991779141e8a7b1_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px">on the top-right corner to view the detail of the captured photo.</li>
</ol>
<p class="image-container"><img alt="55e1a442ab5f25e7.png" style="width: 281.96px" src="/static/codelabs/camerax-getting-started/img/55e1a442ab5f25e7.png" srcset="https://developer.android.com/static/codelabs/camerax-getting-started/img/55e1a442ab5f25e7_36.png 36w,https://developer.android.com/static/codelabs/camerax-getting-started/img/55e1a442ab5f25e7_48.png 48w,https://developer.android.com/static/codelabs/camerax-getting-started/img/55e1a442ab5f25e7_72.png 72w,https://developer.android.com/static/codelabs/camerax-getting-started/img/55e1a442ab5f25e7_96.png 96w,https://developer.android.com/static/codelabs/camerax-getting-started/img/55e1a442ab5f25e7_480.png 480w,https://developer.android.com/static/codelabs/camerax-getting-started/img/55e1a442ab5f25e7_720.png 720w,https://developer.android.com/static/codelabs/camerax-getting-started/img/55e1a442ab5f25e7_856.png 856w,https://developer.android.com/static/codelabs/camerax-getting-started/img/55e1a442ab5f25e7_960.png 960w,https://developer.android.com/static/codelabs/camerax-getting-started/img/55e1a442ab5f25e7_1440.png 1440w,https://developer.android.com/static/codelabs/camerax-getting-started/img/55e1a442ab5f25e7_1920.png 1920w,https://developer.android.com/static/codelabs/camerax-getting-started/img/55e1a442ab5f25e7_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"> <img alt="70a8b27a76523f56.png" style="width: 282.36px" src="/static/codelabs/camerax-getting-started/img/70a8b27a76523f56.png" srcset="https://developer.android.com/static/codelabs/camerax-getting-started/img/70a8b27a76523f56_36.png 36w,https://developer.android.com/static/codelabs/camerax-getting-started/img/70a8b27a76523f56_48.png 48w,https://developer.android.com/static/codelabs/camerax-getting-started/img/70a8b27a76523f56_72.png 72w,https://developer.android.com/static/codelabs/camerax-getting-started/img/70a8b27a76523f56_96.png 96w,https://developer.android.com/static/codelabs/camerax-getting-started/img/70a8b27a76523f56_480.png 480w,https://developer.android.com/static/codelabs/camerax-getting-started/img/70a8b27a76523f56_720.png 720w,https://developer.android.com/static/codelabs/camerax-getting-started/img/70a8b27a76523f56_856.png 856w,https://developer.android.com/static/codelabs/camerax-getting-started/img/70a8b27a76523f56_960.png 960w,https://developer.android.com/static/codelabs/camerax-getting-started/img/70a8b27a76523f56_1440.png 1440w,https://developer.android.com/static/codelabs/camerax-getting-started/img/70a8b27a76523f56_1920.png 1920w,https://developer.android.com/static/codelabs/camerax-getting-started/img/70a8b27a76523f56_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"></p>
<p>If we are just looking for a simple camera app to take photos, we are done. It&#39;s really that simple! If we are looking to implement an image analyzer, read on!</p>


        </google-codelab-step>
      
        <google-codelab-step label="Implement ImageAnalysis use case" duration="8" step="5">
          
          <h2 class="step-title" id="5" data-text="Implement ImageAnalysis use case" tabindex="-1">
              6. Implement ImageAnalysis use case
          </h2>
          <aside class="warning"><p><strong>Implementing preview, image capture, and image analysis concurrently will not work for Android Studio&#39;s device emulator if you are running Android 10 or lower.</strong> We recommend using a physical device to test this portion of the codelab.</p>
</aside>
<p>A great way to make our camera app more interesting is using the  <a href="https://developer.android.com/reference/kotlin/androidx/camera/core/ImageAnalysis" target="_blank"><code translate="no" dir="ltr">ImageAnalysis</code></a> feature. It allows us to define a custom class that implements the <code translate="no" dir="ltr">ImageAnalysis.Analyzer</code> interface, and which will be called with incoming camera frames. We won&#39;t have to manage the camera session state or even dispose of images; binding to our app&#39;s desired lifecycle is sufficient, like with other  <a href="https://developer.android.com/topic/libraries/architecture/lifecycle" target="_blank">lifecycle-aware components</a>.</p>
<ol type="1">
<li>Add this analyzer in as an inner class in <code translate="no" dir="ltr">MainActivity.kt</code>. The analyzer logs the average luminosity of the image. To create an analyzer, we override the <code translate="no" dir="ltr">analyze</code> function in a class that implements the <code translate="no" dir="ltr">ImageAnalysis.Analyzer</code> interface.</li>
</ol>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Scalate Server Page"><code translate="no" dir="ltr">private<span class="devsite-syntax-w"> </span>class<span class="devsite-syntax-w"> </span>LuminosityAnalyzer(private<span class="devsite-syntax-w"> </span>val<span class="devsite-syntax-w"> </span>listener:<span class="devsite-syntax-w"> </span>LumaListener)<span class="devsite-syntax-w"> </span>:<span class="devsite-syntax-w"> </span>ImageAnalysis.Analyzer<span class="devsite-syntax-w"> </span>{

<span class="devsite-syntax-w">   </span>private<span class="devsite-syntax-w"> </span>fun<span class="devsite-syntax-w"> </span>ByteBuffer.toByteArray():<span class="devsite-syntax-w"> </span>ByteArray<span class="devsite-syntax-w"> </span>{
<span class="devsite-syntax-w">       </span>rewind()<span class="devsite-syntax-w">    </span>//<span class="devsite-syntax-w"> </span>Rewind<span class="devsite-syntax-w"> </span>the<span class="devsite-syntax-w"> </span>buffer<span class="devsite-syntax-w"> </span>to<span class="devsite-syntax-w"> </span>zero
<span class="devsite-syntax-w">       </span>val<span class="devsite-syntax-w"> </span>data<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>ByteArray(remaining())
<span class="devsite-syntax-w">       </span>get(data)<span class="devsite-syntax-w">   </span>//<span class="devsite-syntax-w"> </span>Copy<span class="devsite-syntax-w"> </span>the<span class="devsite-syntax-w"> </span>buffer<span class="devsite-syntax-w"> </span>into<span class="devsite-syntax-w"> </span>a<span class="devsite-syntax-w"> </span>byte<span class="devsite-syntax-w"> </span>array
<span class="devsite-syntax-w">       </span>return<span class="devsite-syntax-w"> </span>data<span class="devsite-syntax-w"> </span>//<span class="devsite-syntax-w"> </span>Return<span class="devsite-syntax-w"> </span>the<span class="devsite-syntax-w"> </span>byte<span class="devsite-syntax-w"> </span>array
<span class="devsite-syntax-w">   </span>}

<span class="devsite-syntax-w">   </span>override<span class="devsite-syntax-w"> </span>fun<span class="devsite-syntax-w"> </span>analyze(image:<span class="devsite-syntax-w"> </span>ImageProxy)<span class="devsite-syntax-w"> </span>{

<span class="devsite-syntax-w">       </span>val<span class="devsite-syntax-w"> </span>buffer<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>image.planes[0].buffer
<span class="devsite-syntax-w">       </span>val<span class="devsite-syntax-w"> </span>data<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>buffer.toByteArray()
<span class="devsite-syntax-w">       </span>val<span class="devsite-syntax-w"> </span>pixels<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>data.map<span class="devsite-syntax-w"> </span>{<span class="devsite-syntax-w"> </span>it.toInt()<span class="devsite-syntax-w"> </span>and<span class="devsite-syntax-w"> </span>0xFF<span class="devsite-syntax-w"> </span>}
<span class="devsite-syntax-w">       </span>val<span class="devsite-syntax-w"> </span>luma<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>pixels.average()

<span class="devsite-syntax-w">       </span>listener(luma)

<span class="devsite-syntax-w">       </span>image.close()
<span class="devsite-syntax-w">   </span>}
}
</code></pre></devsite-code>
<p>With our class implementing the <code translate="no" dir="ltr">ImageAnalysis.Analyzer</code> interface, all we need to do is instantiate an instance of <code translate="no" dir="ltr">LuminosityAnalyzer</code> in the <code translate="no" dir="ltr">ImageAnalysis,</code> similar to other use cases, and update the <code translate="no" dir="ltr">startCamera()</code> function once again, before the call to <code translate="no" dir="ltr">CameraX.bindToLifecycle()</code>:</p>
<ol type="1" start="2">
<li>In the <code translate="no" dir="ltr">startCamera()</code> method, add this code under the <code translate="no" dir="ltr">imageCapture</code> code.</li>
</ol>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="POVRay"><code translate="no" dir="ltr"><span class="devsite-syntax-k">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">imageAnalyzer</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">ImageAnalysis</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">Builder</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">build</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">also</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-n">it</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">setAnalyzer</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">cameraExecutor</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">LuminosityAnalyzer</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">luma</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">-</span>&gt;
<span class="devsite-syntax-w">           </span><span class="devsite-syntax-n">Log</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">d</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">TAG</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"Average luminosity: $luma"</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-p">})</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<ol type="1" start="3">
<li>Update the <code translate="no" dir="ltr">bindToLifecycle()</code> call on the <code translate="no" dir="ltr">cameraProvider</code> to include the <code translate="no" dir="ltr">imageAnalyzer</code>.</li>
</ol>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="POVRay"><code translate="no" dir="ltr"><span class="devsite-syntax-n">cameraProvider</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">bindToLifecycle</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-n">this</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">cameraSelector</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">preview</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">imageCapture</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">imageAnalyzer</span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code>
<p>The full method will now look like this:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Scalate Server Page"><code translate="no" dir="ltr">private<span class="devsite-syntax-w"> </span>fun<span class="devsite-syntax-w"> </span>startCamera()<span class="devsite-syntax-w"> </span>{
<span class="devsite-syntax-w">   </span>val<span class="devsite-syntax-w"> </span>cameraProviderFuture<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>ProcessCameraProvider.getInstance(this)

<span class="devsite-syntax-w">   </span>cameraProviderFuture.addListener({
<span class="devsite-syntax-w">       </span>//<span class="devsite-syntax-w"> </span>Used<span class="devsite-syntax-w"> </span>to<span class="devsite-syntax-w"> </span>bind<span class="devsite-syntax-w"> </span>the<span class="devsite-syntax-w"> </span>lifecycle<span class="devsite-syntax-w"> </span>of<span class="devsite-syntax-w"> </span>cameras<span class="devsite-syntax-w"> </span>to<span class="devsite-syntax-w"> </span>the<span class="devsite-syntax-w"> </span>lifecycle<span class="devsite-syntax-w"> </span>owner
<span class="devsite-syntax-w">       </span>val<span class="devsite-syntax-w"> </span>cameraProvider:<span class="devsite-syntax-w"> </span>ProcessCameraProvider<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>cameraProviderFuture.get()

<span class="devsite-syntax-w">       </span>//<span class="devsite-syntax-w"> </span>Preview
<span class="devsite-syntax-w">       </span>val<span class="devsite-syntax-w"> </span>preview<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>Preview.Builder()
<span class="devsite-syntax-w">           </span>.build()
<span class="devsite-syntax-w">           </span>.also<span class="devsite-syntax-w"> </span>{
<span class="devsite-syntax-w">               </span>it.setSurfaceProvider(viewBinding.viewFinder.surfaceProvider)
<span class="devsite-syntax-w">           </span>}

<span class="devsite-syntax-w">       </span>imageCapture<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>ImageCapture.Builder()
<span class="devsite-syntax-w">           </span>.build()

<span class="devsite-syntax-w">       </span>val<span class="devsite-syntax-w"> </span>imageAnalyzer<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>ImageAnalysis.Builder()
<span class="devsite-syntax-w">           </span>.build()
<span class="devsite-syntax-w">           </span>.also<span class="devsite-syntax-w"> </span>{
<span class="devsite-syntax-w">               </span>it.setAnalyzer(cameraExecutor,<span class="devsite-syntax-w"> </span>LuminosityAnalyzer<span class="devsite-syntax-w"> </span>{<span class="devsite-syntax-w"> </span>luma<span class="devsite-syntax-w"> </span>-&gt;
<span class="devsite-syntax-w">                   </span>Log.d(TAG,<span class="devsite-syntax-w"> </span>"Average<span class="devsite-syntax-w"> </span>luminosity:<span class="devsite-syntax-w"> </span>$luma")
<span class="devsite-syntax-w">               </span>})
<span class="devsite-syntax-w">           </span>}

<span class="devsite-syntax-w">       </span>//<span class="devsite-syntax-w"> </span>Select<span class="devsite-syntax-w"> </span>back<span class="devsite-syntax-w"> </span>camera<span class="devsite-syntax-w"> </span>as<span class="devsite-syntax-w"> </span>a<span class="devsite-syntax-w"> </span>default
<span class="devsite-syntax-w">       </span>val<span class="devsite-syntax-w"> </span>cameraSelector<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>CameraSelector.DEFAULT_BACK_CAMERA

<span class="devsite-syntax-w">       </span>try<span class="devsite-syntax-w"> </span>{
<span class="devsite-syntax-w">           </span>//<span class="devsite-syntax-w"> </span>Unbind<span class="devsite-syntax-w"> </span>use<span class="devsite-syntax-w"> </span>cases<span class="devsite-syntax-w"> </span>before<span class="devsite-syntax-w"> </span>rebinding
<span class="devsite-syntax-w">           </span>cameraProvider.unbindAll()

<span class="devsite-syntax-w">           </span>//<span class="devsite-syntax-w"> </span>Bind<span class="devsite-syntax-w"> </span>use<span class="devsite-syntax-w"> </span>cases<span class="devsite-syntax-w"> </span>to<span class="devsite-syntax-w"> </span>camera
<span class="devsite-syntax-w">           </span>cameraProvider.bindToLifecycle(
<span class="devsite-syntax-w">               </span>this,<span class="devsite-syntax-w"> </span>cameraSelector,<span class="devsite-syntax-w"> </span>preview,<span class="devsite-syntax-w"> </span>imageCapture,<span class="devsite-syntax-w"> </span>imageAnalyzer)

<span class="devsite-syntax-w">       </span>}<span class="devsite-syntax-w"> </span>catch(exc:<span class="devsite-syntax-w"> </span>Exception)<span class="devsite-syntax-w"> </span>{
<span class="devsite-syntax-w">           </span>Log.e(TAG,<span class="devsite-syntax-w"> </span>"Use<span class="devsite-syntax-w"> </span>case<span class="devsite-syntax-w"> </span>binding<span class="devsite-syntax-w"> </span>failed",<span class="devsite-syntax-w"> </span>exc)
<span class="devsite-syntax-w">       </span>}

<span class="devsite-syntax-w">   </span>},<span class="devsite-syntax-w"> </span>ContextCompat.getMainExecutor(this))
}
</code></pre></devsite-code>
<ol type="1" start="4">
<li>Run the app now! It will produce a message similar to this in logcat approximately every second.</li>
</ol>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Text only"><code translate="no" dir="ltr">D/CameraXApp: Average luminosity: ...
</code></pre></devsite-code>


        </google-codelab-step>
      
        <google-codelab-step label="Implement VideoCapture use case" duration="10" step="6">
          
          <h2 class="step-title" id="6" data-text="Implement VideoCapture use case" tabindex="-1">
              7. Implement VideoCapture use case
          </h2>
          <aside class="warning"><p><strong>The VideoCapture use case is new to the CameraX use case family, and emulators may expose different behavior.</strong> We recommend using a physical device to test this portion of the codelab. This codelab has been verified with a Pixel 3a device.</p>
</aside>
<p>CameraX added the VideoCapture use case in version 1.1.0-alpha10 and has been making further improvements since then. Note that the <code translate="no" dir="ltr">VideoCapture</code> API supports many video capturing features, so to keep this codelab manageable, this codelab only demonstrates capturing video and audio to a <code translate="no" dir="ltr">MediaStore</code>.</p>
<ol type="1">
<li>Copy this code into the <code translate="no" dir="ltr">captureVideo()</code>method: it controls both the starting and the stopping of our <code translate="no" dir="ltr">VideoCapture</code> use case. The bullet points below will break down the code we just copied.</li>
</ol>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Carbon"><code translate="no" dir="ltr"><span class="devsite-syntax-c1">// Implements VideoCapture use case, including start and stop capturing.</span>
<span class="devsite-syntax-k">private</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">fun</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">captureVideo</span><span class="devsite-syntax-p">()</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-nx">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">videoCapture</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">this</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">videoCapture</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">?:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-k">return</span>

<span class="devsite-syntax-w">   </span><span class="devsite-syntax-nx">viewBinding</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">videoCaptureButton</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">isEnabled</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kc">false</span>

<span class="devsite-syntax-w">   </span><span class="devsite-syntax-nx">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">curRecording</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">recording</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-k">if</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nx">curRecording</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">!=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">null</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-c1">// Stop the current recording session.</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-nx">curRecording</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">stop</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-nx">recording</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">null</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-k">return</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-p">}</span>

<span class="devsite-syntax-w">   </span><span class="devsite-syntax-c1">// create and start a new recording session</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-nx">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">name</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">SimpleDateFormat</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nx">FILENAME_FORMAT</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">Locale</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">US</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">              </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">format</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nx">System</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">currentTimeMillis</span><span class="devsite-syntax-p">())</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-nx">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">contentValues</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">ContentValues</span><span class="devsite-syntax-p">().</span><span class="devsite-syntax-nx">apply</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-nx">put</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nx">MediaStore</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">MediaColumns</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">DISPLAY_NAME</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">name</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-nx">put</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nx">MediaStore</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">MediaColumns</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">MIME_TYPE</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s">"video/mp4"</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-k">if</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nx">Build</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">VERSION</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">SDK_INT</span><span class="devsite-syntax-w"> &gt; </span><span class="devsite-syntax-nx">Build</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">VERSION_CODES</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">P</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">           </span><span class="devsite-syntax-nx">put</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nx">MediaStore</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">Video</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">Media</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">RELATIVE_PATH</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s">"Movies/CameraX-Video"</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-p">}</span>

<span class="devsite-syntax-w">   </span><span class="devsite-syntax-nx">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">mediaStoreOutputOptions</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">MediaStoreOutputOptions</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">Builder</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nx">contentResolver</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">MediaStore</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">Video</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">Media</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">EXTERNAL_CONTENT_URI</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">setContentValues</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nx">contentValues</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">build</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-nx">recording</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">videoCapture</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">output</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">prepareRecording</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nx">this</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">mediaStoreOutputOptions</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">apply</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">           </span><span class="devsite-syntax-k">if</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nx">PermissionChecker</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">checkSelfPermission</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nx">this</span><span class="devsite-syntax-err">@</span><span class="devsite-syntax-nx">MainActivity</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">                   </span><span class="devsite-syntax-nx">Manifest</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">permission</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">RECORD_AUDIO</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">==</span>
<span class="devsite-syntax-w">               </span><span class="devsite-syntax-nx">PermissionChecker</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">PERMISSION_GRANTED</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">           </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">               </span><span class="devsite-syntax-nx">withAudioEnabled</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">           </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">start</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nx">ContextCompat</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">getMainExecutor</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nx">this</span><span class="devsite-syntax-p">))</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">recordEvent</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">-</span>&gt;
<span class="devsite-syntax-w">           </span><span class="devsite-syntax-nx">when</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nx">recordEvent</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">               </span><span class="devsite-syntax-k">is</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">VideoRecordEvent</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">Start</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">-</span>&gt;<span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">                   </span><span class="devsite-syntax-nx">viewBinding</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">videoCaptureButton</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">apply</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">                       </span><span class="devsite-syntax-nx">text</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">getString</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nx">R</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-kt">string</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">stop_capture</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">                       </span><span class="devsite-syntax-nx">isEnabled</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kc">true</span>
<span class="devsite-syntax-w">                   </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-w">               </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-w">               </span><span class="devsite-syntax-k">is</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">VideoRecordEvent</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">Finalize</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">-</span>&gt;<span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">                   </span><span class="devsite-syntax-k">if</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">(!</span><span class="devsite-syntax-nx">recordEvent</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">hasError</span><span class="devsite-syntax-p">())</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">                       </span><span class="devsite-syntax-nx">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">msg</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s">"Video capture succeeded: "</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">+</span>
<span class="devsite-syntax-w">                           </span><span class="devsite-syntax-s">"${recordEvent.outputResults.outputUri}"</span>
<span class="devsite-syntax-w">                       </span><span class="devsite-syntax-nx">Toast</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">makeText</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nx">baseContext</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">msg</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">Toast</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">LENGTH_SHORT</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">                            </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">show</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">                       </span><span class="devsite-syntax-nx">Log</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">d</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nx">TAG</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">msg</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">                   </span><span class="devsite-syntax-p">}</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-k">else</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">                       </span><span class="devsite-syntax-nx">recording</span><span class="devsite-syntax-p">?.</span><span class="devsite-syntax-nx">close</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">                       </span><span class="devsite-syntax-nx">recording</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">null</span>
<span class="devsite-syntax-w">                       </span><span class="devsite-syntax-nx">Log</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">e</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nx">TAG</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s">"Video capture ends with error: "</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">+</span>
<span class="devsite-syntax-w">                           </span><span class="devsite-syntax-s">"${recordEvent.error}"</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">                   </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-w">                   </span><span class="devsite-syntax-nx">viewBinding</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">videoCaptureButton</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">apply</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">                       </span><span class="devsite-syntax-nx">text</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">getString</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nx">R</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-kt">string</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">start_capture</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">                       </span><span class="devsite-syntax-nx">isEnabled</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kc">true</span>
<span class="devsite-syntax-w">                   </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-w">               </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-w">           </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<ul>
<li>Check if the VideoCapture use case has been created: if not, do nothing.</li>
</ul>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Text only"><code translate="no" dir="ltr">val videoCapture = videoCapture ?: return
</code></pre></devsite-code>
<ul>
<li>Disable the UI until the request action is completed by CameraX; it is re-enabled inside our registered VideoRecordListener in later steps.</li>
</ul>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Text only"><code translate="no" dir="ltr">viewBinding.videoCaptureButton.isEnabled = false
</code></pre></devsite-code>
<ul>
<li>If there is an active recording in progress, stop it and release the current <code translate="no" dir="ltr">recording</code>. We will be notified when the captured video file is ready to be used by our application.</li>
</ul>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Text only"><code translate="no" dir="ltr">val curRecording = recording
if (curRecording != null) {
    curRecording.stop()
    recording = null
    return
}
</code></pre></devsite-code>
<ul>
<li>To start recording, we create a new recording session.  First we create our intended MediaStore video content object, with system timestamp as the display name(so we could capture multiple videos).</li>
</ul>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Carbon"><code translate="no" dir="ltr"><span class="devsite-syntax-nx">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">name</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">SimpleDateFormat</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nx">FILENAME_FORMAT</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">Locale</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">US</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">           </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">format</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nx">System</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">currentTimeMillis</span><span class="devsite-syntax-p">())</span>
<span class="devsite-syntax-nx">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">contentValues</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">ContentValues</span><span class="devsite-syntax-p">().</span><span class="devsite-syntax-nx">apply</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-nx">put</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nx">MediaStore</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">MediaColumns</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">DISPLAY_NAME</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">name</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-nx">put</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nx">MediaStore</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">MediaColumns</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">MIME_TYPE</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s">"video/mp4"</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-k">if</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nx">Build</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">VERSION</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">SDK_INT</span><span class="devsite-syntax-w"> &gt; </span><span class="devsite-syntax-nx">Build</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">VERSION_CODES</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">P</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">           </span><span class="devsite-syntax-nx">put</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nx">MediaStore</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">Video</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">Media</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">RELATIVE_PATH</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">               </span><span class="devsite-syntax-s">"Movies/CameraX-Video"</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<ul>
<li>Create a  <a href="https://developer.android.com/reference/androidx/camera/video/MediaStoreOutputOptions" target="_blank"><code translate="no" dir="ltr">MediaStoreOutputOptions.Builder</code></a> with the external content option.</li>
</ul>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="scdoc"><code translate="no" dir="ltr">val mediaStoreOutputOptions = MediaStoreOutputOptions
      .Builder(contentResolver,
               MediaStore.Video.Media.EXTERNAL_CONTENT_URI)
</code></pre></devsite-code>
<ul>
<li>Set the created video <code translate="no" dir="ltr">contentValues</code> to the <code translate="no" dir="ltr">MediaStoreOutputOptions.Builder</code>, and build our  <a href="https://developer.android.com/reference/androidx/camera/video/MediaStoreOutputOptions" target="_blank"><code translate="no" dir="ltr">MediaStoreOutputOptions</code></a> instance.</li>
</ul>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Text only"><code translate="no" dir="ltr">    .setContentValues(contentValues)
    .build()
</code></pre></devsite-code>
<ul>
<li>Configure the output option to the  <a href="https://developer.android.com/reference/androidx/camera/video/Recorder" target="_blank"><code translate="no" dir="ltr">Recorder</code></a> of <code translate="no" dir="ltr">VideoCapture&lt;Recorder&gt;</code> and enable  <a href="https://developer.android.com/reference/androidx/camera/video/PendingRecording#withAudioEnabled()" target="_blank">audio recording</a>:</li>
</ul>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="GAS"><code translate="no" dir="ltr"><span class="devsite-syntax-w">    </span><span class="devsite-syntax-nf">videoCapture</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-na">.output</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-na">.prepareRecording</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-no">this</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-no">mediaStoreOutputOptions</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-na">.withAudioEnabled</span><span class="devsite-syntax-p">()</span>
</code></pre></devsite-code>
<ul>
<li>Enable  <a href="https://developer.android.com/reference/androidx/camera/video/PendingRecording#withAudioEnabled()" target="_blank">Audio</a> in this recording.</li>
</ul>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Carbon"><code translate="no" dir="ltr"><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">apply</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-k">if</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nx">PermissionChecker</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">checkSelfPermission</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nx">this</span><span class="devsite-syntax-err">@</span><span class="devsite-syntax-nx">MainActivity</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">           </span><span class="devsite-syntax-nx">Manifest</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">permission</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">RECORD_AUDIO</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">==</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-nx">PermissionChecker</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">PERMISSION_GRANTED</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-nx">withAudioEnabled</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<ul>
<li>Start  <a href="https://developer.android.com/reference/androidx/camera/video/PendingRecording#start(java.util.concurrent.Executor,%20androidx.core.util.Consumer%3Candroidx.camera.video.VideoRecordEvent%3E)" target="_blank">this new recording</a>, and register a lambda  <a href="https://developer.android.com/reference/androidx/camera/video/PendingRecording#start(java.util.concurrent.Executor,%20androidx.core.util.Consumer%3Candroidx.camera.video.VideoRecordEvent%3E)" target="_blank"><code translate="no" dir="ltr">VideoRecordEvent</code></a> listener.</li>
</ul>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="GAS"><code translate="no" dir="ltr"><span class="devsite-syntax-na">.start</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-no">ContextCompat.getMainExecutor</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-no">this</span><span class="devsite-syntax-p">))</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-no">recordEvent</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">-</span>&gt;
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-c1">//lambda event listener</span>
<span class="devsite-syntax-err">}</span>
</code></pre></devsite-code>
<ul>
<li>When the request recording is started by the camera device, toggle the &#34;Start Capture&#34; button text to say &#34;Stop Capture&#34;.</li>
</ul>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="scdoc"><code translate="no" dir="ltr">is VideoRecordEvent.Start -&gt; {
    viewBinding.videoCaptureButton.apply {
        text = getString(R.string.stop_capture)
        isEnabled = true
    }
}
</code></pre></devsite-code>
<ul>
<li>When the active recording is complete, notify the user with a toast, and toggle the &#34;Stop Capture&#34; button back to &#34;Start Capture&#34;, and re-enable it:</li>
</ul>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Genshi"><code translate="no" dir="ltr">is<span class="devsite-syntax-w"> </span>VideoRecordEvent.Finalize<span class="devsite-syntax-w"> </span>-&gt;<span class="devsite-syntax-w"> </span>{
<span class="devsite-syntax-w">   </span>if<span class="devsite-syntax-w"> </span>(!recordEvent.hasError())<span class="devsite-syntax-w"> </span>{
<span class="devsite-syntax-w">       </span>val<span class="devsite-syntax-w"> </span>msg<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>"Video<span class="devsite-syntax-w"> </span>capture<span class="devsite-syntax-w"> </span>succeeded:<span class="devsite-syntax-w"> </span>"<span class="devsite-syntax-w"> </span>+
<span class="devsite-syntax-w">                 </span>"<span class="devsite-syntax-cp">${</span><span class="devsite-syntax-n">recordEvent</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">outputResults</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">outputUri</span><span class="devsite-syntax-cp">}</span>"
<span class="devsite-syntax-w">       </span>Toast.makeText(baseContext,<span class="devsite-syntax-w"> </span>msg,<span class="devsite-syntax-w"> </span>Toast.LENGTH_SHORT)
<span class="devsite-syntax-w">            </span>.show()
<span class="devsite-syntax-w">       </span>Log.d(TAG,<span class="devsite-syntax-w"> </span>msg)
<span class="devsite-syntax-w">   </span>}<span class="devsite-syntax-w"> </span>else<span class="devsite-syntax-w"> </span>{
<span class="devsite-syntax-w">       </span>recording?.close()
<span class="devsite-syntax-w">       </span>recording<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>null
<span class="devsite-syntax-w">       </span>Log.e(TAG,<span class="devsite-syntax-w"> </span>"Video<span class="devsite-syntax-w"> </span>capture<span class="devsite-syntax-w"> </span>succeeded:<span class="devsite-syntax-w"> </span>"<span class="devsite-syntax-w"> </span>+
<span class="devsite-syntax-w">                  </span>"<span class="devsite-syntax-cp">${</span><span class="devsite-syntax-n">recordEvent</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">outputResults</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">outputUri</span><span class="devsite-syntax-cp">}</span>")
<span class="devsite-syntax-w">   </span>}
<span class="devsite-syntax-w">   </span>viewBinding.videoCaptureButton.apply<span class="devsite-syntax-w"> </span>{
<span class="devsite-syntax-w">       </span>text<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>getString(R.string.start_capture)
<span class="devsite-syntax-w">       </span>isEnabled<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>true
<span class="devsite-syntax-w">   </span>}
}
</code></pre></devsite-code>
<ol type="1" start="2">
<li>In <code translate="no" dir="ltr">startCamera()</code>, put the following code after the <code translate="no" dir="ltr">preview</code> creation line. This will create the <code translate="no" dir="ltr">VideoCapture</code> use case.</li>
</ol>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Text only"><code translate="no" dir="ltr">val recorder = Recorder.Builder()
   .setQualitySelector(QualitySelector.from(Quality.HIGHEST))
   .build()
videoCapture = VideoCapture.withOutput(recorder)
</code></pre></devsite-code>
<ol type="1" start="3">
<li>(Optional) also inside <code translate="no" dir="ltr">startCamera()</code>, disable <code translate="no" dir="ltr">imageCapture</code> and <code translate="no" dir="ltr">imageAnalyzer</code> use cases by deleting or commenting out the following code:</li>
</ol>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Scilab"><code translate="no" dir="ltr"><span class="devsite-syntax-o">/*</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">comment</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">out</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">ImageCapture</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nb">and</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">ImageAnalyzer</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">use</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">cases</span>
<span class="devsite-syntax-n">imageCapture</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">ImageCapture</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-n">Builder</span><span class="devsite-syntax-p">().</span><span class="devsite-syntax-n">build</span><span class="devsite-syntax-p">()</span>

<span class="devsite-syntax-n">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">imageAnalyzer</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">ImageAnalysis</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-n">Builder</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-n">build</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-n">also</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-n">it</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-n">setAnalyzer</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">cameraExecutor</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">LuminosityAnalyzer</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">luma</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">-</span>&gt;
<span class="devsite-syntax-w">           </span><span class="devsite-syntax-n">Log</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-n">d</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">TAG</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s">"Average luminosity: $luma"</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-p">})</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-o">*/</span>
</code></pre></devsite-code>
<ol type="1" start="4">
<li>Bind  <strong><code translate="no" dir="ltr">Preview</code></strong> + <strong><code translate="no" dir="ltr">VideoCapture</code></strong> use cases to a lifecycle camera. Still inside <code translate="no" dir="ltr">startCamera()</code>, replace the <code translate="no" dir="ltr">cameraProvider.bindToLifecycle()</code> call with the following:</li>
</ol>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Scilab"><code translate="no" dir="ltr"><span class="devsite-syntax-w">   </span><span class="devsite-syntax-c1">// Bind use cases to camera</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-n">cameraProvider</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-n">bindToLifecycle</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">this</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">cameraSelector</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">preview</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">videoCapture</span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code>
<p>At this point, <code translate="no" dir="ltr">startCamera()</code> should look like this:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Scalate Server Page"><code translate="no" dir="ltr"><span class="devsite-syntax-w">   </span>val<span class="devsite-syntax-w"> </span>cameraProviderFuture<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>ProcessCameraProvider.getInstance(this)

<span class="devsite-syntax-w">   </span>cameraProviderFuture.addListener({
<span class="devsite-syntax-w">       </span>//<span class="devsite-syntax-w"> </span>Used<span class="devsite-syntax-w"> </span>to<span class="devsite-syntax-w"> </span>bind<span class="devsite-syntax-w"> </span>the<span class="devsite-syntax-w"> </span>lifecycle<span class="devsite-syntax-w"> </span>of<span class="devsite-syntax-w"> </span>cameras<span class="devsite-syntax-w"> </span>to<span class="devsite-syntax-w"> </span>the<span class="devsite-syntax-w"> </span>lifecycle<span class="devsite-syntax-w"> </span>owner
<span class="devsite-syntax-w">       </span>val<span class="devsite-syntax-w"> </span>cameraProvider:<span class="devsite-syntax-w"> </span>ProcessCameraProvider<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>cameraProviderFuture.get()

<span class="devsite-syntax-w">       </span>//<span class="devsite-syntax-w"> </span>Preview
<span class="devsite-syntax-w">       </span>val<span class="devsite-syntax-w"> </span>preview<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>Preview.Builder()
<span class="devsite-syntax-w">           </span>.build()
<span class="devsite-syntax-w">           </span>.also<span class="devsite-syntax-w"> </span>{
<span class="devsite-syntax-w">               </span>it.setSurfaceProvider(viewBinding.viewFinder.surfaceProvider)
<span class="devsite-syntax-w">           </span>}

<span class="devsite-syntax-w">       </span>val<span class="devsite-syntax-w"> </span>recorder<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>Recorder.Builder()
<span class="devsite-syntax-w">           </span>.setQualitySelector(QualitySelector.from(Quality.HIGHEST))
<span class="devsite-syntax-w">           </span>.build()
<span class="devsite-syntax-w">       </span>videoCapture<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>VideoCapture.withOutput(recorder)

<span class="devsite-syntax-w">       </span>/*
<span class="devsite-syntax-w">       </span>imageCapture<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>ImageCapture.Builder().build()

<span class="devsite-syntax-w">       </span>val<span class="devsite-syntax-w"> </span>imageAnalyzer<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>ImageAnalysis.Builder()
<span class="devsite-syntax-w">           </span>.build()
<span class="devsite-syntax-w">           </span>.also<span class="devsite-syntax-w"> </span>{
<span class="devsite-syntax-w">               </span>it.setAnalyzer(cameraExecutor,<span class="devsite-syntax-w"> </span>LuminosityAnalyzer<span class="devsite-syntax-w"> </span>{<span class="devsite-syntax-w"> </span>luma<span class="devsite-syntax-w"> </span>-&gt;
<span class="devsite-syntax-w">                   </span>Log.d(TAG,<span class="devsite-syntax-w"> </span>"Average<span class="devsite-syntax-w"> </span>luminosity:<span class="devsite-syntax-w"> </span>$luma")
<span class="devsite-syntax-w">               </span>})
<span class="devsite-syntax-w">           </span>}
<span class="devsite-syntax-w">       </span>*/

<span class="devsite-syntax-w">       </span>//<span class="devsite-syntax-w"> </span>Select<span class="devsite-syntax-w"> </span>back<span class="devsite-syntax-w"> </span>camera<span class="devsite-syntax-w"> </span>as<span class="devsite-syntax-w"> </span>a<span class="devsite-syntax-w"> </span>default
<span class="devsite-syntax-w">       </span>val<span class="devsite-syntax-w"> </span>cameraSelector<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>CameraSelector.DEFAULT_BACK_CAMERA

<span class="devsite-syntax-w">       </span>try<span class="devsite-syntax-w"> </span>{
<span class="devsite-syntax-w">           </span>//<span class="devsite-syntax-w"> </span>Unbind<span class="devsite-syntax-w"> </span>use<span class="devsite-syntax-w"> </span>cases<span class="devsite-syntax-w"> </span>before<span class="devsite-syntax-w"> </span>rebinding
<span class="devsite-syntax-w">           </span>cameraProvider.unbindAll()

<span class="devsite-syntax-w">           </span>//<span class="devsite-syntax-w"> </span>Bind<span class="devsite-syntax-w"> </span>use<span class="devsite-syntax-w"> </span>cases<span class="devsite-syntax-w"> </span>to<span class="devsite-syntax-w"> </span>camera
<span class="devsite-syntax-w">           </span>cameraProvider
<span class="devsite-syntax-w">               </span>.bindToLifecycle(this,<span class="devsite-syntax-w"> </span>cameraSelector,<span class="devsite-syntax-w"> </span>preview,<span class="devsite-syntax-w"> </span>videoCapture)
<span class="devsite-syntax-w">       </span>}<span class="devsite-syntax-w"> </span>catch(exc:<span class="devsite-syntax-w"> </span>Exception)<span class="devsite-syntax-w"> </span>{
<span class="devsite-syntax-w">           </span>Log.e(TAG,<span class="devsite-syntax-w"> </span>"Use<span class="devsite-syntax-w"> </span>case<span class="devsite-syntax-w"> </span>binding<span class="devsite-syntax-w"> </span>failed",<span class="devsite-syntax-w"> </span>exc)
<span class="devsite-syntax-w">       </span>}

<span class="devsite-syntax-w">   </span>},<span class="devsite-syntax-w"> </span>ContextCompat.getMainExecutor(this))
}
</code></pre></devsite-code>
<ol type="1" start="5">
<li>Build and run. We should see the familiar UI from previous steps.</li>
<li>Record a few clips:</li>
</ol>
<ul>
<li>Press the &#34;START CAPTURE&#34; button.  Notice that its caption will change to &#34;STOP CAPTURE&#34;.</li>
<li>Record video for a few seconds/minutes.</li>
<li>Press  the &#34;STOP CAPTURE&#34; button (the same button for starting capture).</li>
</ul>
<p class="image-container"><img alt="ef2a6005defc4977.png" style="width: 289.32px" src="/static/codelabs/camerax-getting-started/img/ef2a6005defc4977.png" srcset="https://developer.android.com/static/codelabs/camerax-getting-started/img/ef2a6005defc4977_36.png 36w,https://developer.android.com/static/codelabs/camerax-getting-started/img/ef2a6005defc4977_48.png 48w,https://developer.android.com/static/codelabs/camerax-getting-started/img/ef2a6005defc4977_72.png 72w,https://developer.android.com/static/codelabs/camerax-getting-started/img/ef2a6005defc4977_96.png 96w,https://developer.android.com/static/codelabs/camerax-getting-started/img/ef2a6005defc4977_480.png 480w,https://developer.android.com/static/codelabs/camerax-getting-started/img/ef2a6005defc4977_720.png 720w,https://developer.android.com/static/codelabs/camerax-getting-started/img/ef2a6005defc4977_856.png 856w,https://developer.android.com/static/codelabs/camerax-getting-started/img/ef2a6005defc4977_960.png 960w,https://developer.android.com/static/codelabs/camerax-getting-started/img/ef2a6005defc4977_1440.png 1440w,https://developer.android.com/static/codelabs/camerax-getting-started/img/ef2a6005defc4977_1920.png 1920w,https://developer.android.com/static/codelabs/camerax-getting-started/img/ef2a6005defc4977_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"> <img alt="8acee41fd0f4af0f.png" style="width: 289.06px" src="/static/codelabs/camerax-getting-started/img/8acee41fd0f4af0f.png" srcset="https://developer.android.com/static/codelabs/camerax-getting-started/img/8acee41fd0f4af0f_36.png 36w,https://developer.android.com/static/codelabs/camerax-getting-started/img/8acee41fd0f4af0f_48.png 48w,https://developer.android.com/static/codelabs/camerax-getting-started/img/8acee41fd0f4af0f_72.png 72w,https://developer.android.com/static/codelabs/camerax-getting-started/img/8acee41fd0f4af0f_96.png 96w,https://developer.android.com/static/codelabs/camerax-getting-started/img/8acee41fd0f4af0f_480.png 480w,https://developer.android.com/static/codelabs/camerax-getting-started/img/8acee41fd0f4af0f_720.png 720w,https://developer.android.com/static/codelabs/camerax-getting-started/img/8acee41fd0f4af0f_856.png 856w,https://developer.android.com/static/codelabs/camerax-getting-started/img/8acee41fd0f4af0f_960.png 960w,https://developer.android.com/static/codelabs/camerax-getting-started/img/8acee41fd0f4af0f_1440.png 1440w,https://developer.android.com/static/codelabs/camerax-getting-started/img/8acee41fd0f4af0f_1920.png 1920w,https://developer.android.com/static/codelabs/camerax-getting-started/img/8acee41fd0f4af0f_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"></p>
<h3 is-upgraded id="view-the-video-same-as-the-viewing-the-capture-image-file" data-text="View the video (same as the viewing the capture image file)" tabindex="-1">View the video (<em>same as the viewing the capture image file</em>)</h3>
<p>We will use the  <a href="https://play.google.com/store/apps/details?id=com.google.android.apps.photos" target="_blank">Google Photos app</a> to review the captured video:</p>
<ol type="1">
<li>Start Google Photos  <img alt="Photos" title="Photos" style="width: 20.00px" src="/static/codelabs/camerax-getting-started/img/6a62cfc7e1f2cb9f.png" srcset="https://developer.android.com/static/codelabs/camerax-getting-started/img/6a62cfc7e1f2cb9f_36.png 36w,https://developer.android.com/static/codelabs/camerax-getting-started/img/6a62cfc7e1f2cb9f_48.png 48w,https://developer.android.com/static/codelabs/camerax-getting-started/img/6a62cfc7e1f2cb9f_72.png 72w,https://developer.android.com/static/codelabs/camerax-getting-started/img/6a62cfc7e1f2cb9f_96.png 96w,https://developer.android.com/static/codelabs/camerax-getting-started/img/6a62cfc7e1f2cb9f_480.png 480w,https://developer.android.com/static/codelabs/camerax-getting-started/img/6a62cfc7e1f2cb9f_720.png 720w,https://developer.android.com/static/codelabs/camerax-getting-started/img/6a62cfc7e1f2cb9f_856.png 856w,https://developer.android.com/static/codelabs/camerax-getting-started/img/6a62cfc7e1f2cb9f_960.png 960w,https://developer.android.com/static/codelabs/camerax-getting-started/img/6a62cfc7e1f2cb9f_1440.png 1440w,https://developer.android.com/static/codelabs/camerax-getting-started/img/6a62cfc7e1f2cb9f_1920.png 1920w,https://developer.android.com/static/codelabs/camerax-getting-started/img/6a62cfc7e1f2cb9f_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px">.</li>
<li>Tap &#34;Library&#34; to see the sorted media files. Tap on the <code translate="no" dir="ltr">"CameraX-Video"</code> folder icon to see a list of available video clips.</li>
</ol>
<p class="image-container"><img alt="71f07e32d5f4f268.png" style="width: 279.54px" src="/static/codelabs/camerax-getting-started/img/71f07e32d5f4f268.png" srcset="https://developer.android.com/static/codelabs/camerax-getting-started/img/71f07e32d5f4f268_36.png 36w,https://developer.android.com/static/codelabs/camerax-getting-started/img/71f07e32d5f4f268_48.png 48w,https://developer.android.com/static/codelabs/camerax-getting-started/img/71f07e32d5f4f268_72.png 72w,https://developer.android.com/static/codelabs/camerax-getting-started/img/71f07e32d5f4f268_96.png 96w,https://developer.android.com/static/codelabs/camerax-getting-started/img/71f07e32d5f4f268_480.png 480w,https://developer.android.com/static/codelabs/camerax-getting-started/img/71f07e32d5f4f268_720.png 720w,https://developer.android.com/static/codelabs/camerax-getting-started/img/71f07e32d5f4f268_856.png 856w,https://developer.android.com/static/codelabs/camerax-getting-started/img/71f07e32d5f4f268_960.png 960w,https://developer.android.com/static/codelabs/camerax-getting-started/img/71f07e32d5f4f268_1440.png 1440w,https://developer.android.com/static/codelabs/camerax-getting-started/img/71f07e32d5f4f268_1920.png 1920w,https://developer.android.com/static/codelabs/camerax-getting-started/img/71f07e32d5f4f268_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"> <img alt="596819ad391fac37.png" style="width: 277.50px" src="/static/codelabs/camerax-getting-started/img/596819ad391fac37.png" srcset="https://developer.android.com/static/codelabs/camerax-getting-started/img/596819ad391fac37_36.png 36w,https://developer.android.com/static/codelabs/camerax-getting-started/img/596819ad391fac37_48.png 48w,https://developer.android.com/static/codelabs/camerax-getting-started/img/596819ad391fac37_72.png 72w,https://developer.android.com/static/codelabs/camerax-getting-started/img/596819ad391fac37_96.png 96w,https://developer.android.com/static/codelabs/camerax-getting-started/img/596819ad391fac37_480.png 480w,https://developer.android.com/static/codelabs/camerax-getting-started/img/596819ad391fac37_720.png 720w,https://developer.android.com/static/codelabs/camerax-getting-started/img/596819ad391fac37_856.png 856w,https://developer.android.com/static/codelabs/camerax-getting-started/img/596819ad391fac37_960.png 960w,https://developer.android.com/static/codelabs/camerax-getting-started/img/596819ad391fac37_1440.png 1440w,https://developer.android.com/static/codelabs/camerax-getting-started/img/596819ad391fac37_1920.png 1920w,https://developer.android.com/static/codelabs/camerax-getting-started/img/596819ad391fac37_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"></p>
<ol type="1" start="3">
<li>Tap the icon to play the just-captured video clip. After playback is complete, tap the More button <img alt="More" title="More" style="width: 14.00px" src="/static/codelabs/camerax-getting-started/img/4991779141e8a7b1.png" srcset="https://developer.android.com/static/codelabs/camerax-getting-started/img/4991779141e8a7b1_36.png 36w,https://developer.android.com/static/codelabs/camerax-getting-started/img/4991779141e8a7b1_48.png 48w,https://developer.android.com/static/codelabs/camerax-getting-started/img/4991779141e8a7b1_72.png 72w,https://developer.android.com/static/codelabs/camerax-getting-started/img/4991779141e8a7b1_96.png 96w,https://developer.android.com/static/codelabs/camerax-getting-started/img/4991779141e8a7b1_480.png 480w,https://developer.android.com/static/codelabs/camerax-getting-started/img/4991779141e8a7b1_720.png 720w,https://developer.android.com/static/codelabs/camerax-getting-started/img/4991779141e8a7b1_856.png 856w,https://developer.android.com/static/codelabs/camerax-getting-started/img/4991779141e8a7b1_960.png 960w,https://developer.android.com/static/codelabs/camerax-getting-started/img/4991779141e8a7b1_1440.png 1440w,https://developer.android.com/static/codelabs/camerax-getting-started/img/4991779141e8a7b1_1920.png 1920w,https://developer.android.com/static/codelabs/camerax-getting-started/img/4991779141e8a7b1_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px">in the top-right corner to inspect the clip details.</li>
</ol>
<p class="image-container"><img alt="7c7125726af9e429.png" style="width: 288.74px" src="/static/codelabs/camerax-getting-started/img/7c7125726af9e429.png" srcset="https://developer.android.com/static/codelabs/camerax-getting-started/img/7c7125726af9e429_36.png 36w,https://developer.android.com/static/codelabs/camerax-getting-started/img/7c7125726af9e429_48.png 48w,https://developer.android.com/static/codelabs/camerax-getting-started/img/7c7125726af9e429_72.png 72w,https://developer.android.com/static/codelabs/camerax-getting-started/img/7c7125726af9e429_96.png 96w,https://developer.android.com/static/codelabs/camerax-getting-started/img/7c7125726af9e429_480.png 480w,https://developer.android.com/static/codelabs/camerax-getting-started/img/7c7125726af9e429_720.png 720w,https://developer.android.com/static/codelabs/camerax-getting-started/img/7c7125726af9e429_856.png 856w,https://developer.android.com/static/codelabs/camerax-getting-started/img/7c7125726af9e429_960.png 960w,https://developer.android.com/static/codelabs/camerax-getting-started/img/7c7125726af9e429_1440.png 1440w,https://developer.android.com/static/codelabs/camerax-getting-started/img/7c7125726af9e429_1920.png 1920w,https://developer.android.com/static/codelabs/camerax-getting-started/img/7c7125726af9e429_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"> <img alt="44da18b15ad2f607.png" style="width: 289.40px" src="/static/codelabs/camerax-getting-started/img/44da18b15ad2f607.png" srcset="https://developer.android.com/static/codelabs/camerax-getting-started/img/44da18b15ad2f607_36.png 36w,https://developer.android.com/static/codelabs/camerax-getting-started/img/44da18b15ad2f607_48.png 48w,https://developer.android.com/static/codelabs/camerax-getting-started/img/44da18b15ad2f607_72.png 72w,https://developer.android.com/static/codelabs/camerax-getting-started/img/44da18b15ad2f607_96.png 96w,https://developer.android.com/static/codelabs/camerax-getting-started/img/44da18b15ad2f607_480.png 480w,https://developer.android.com/static/codelabs/camerax-getting-started/img/44da18b15ad2f607_720.png 720w,https://developer.android.com/static/codelabs/camerax-getting-started/img/44da18b15ad2f607_856.png 856w,https://developer.android.com/static/codelabs/camerax-getting-started/img/44da18b15ad2f607_960.png 960w,https://developer.android.com/static/codelabs/camerax-getting-started/img/44da18b15ad2f607_1440.png 1440w,https://developer.android.com/static/codelabs/camerax-getting-started/img/44da18b15ad2f607_1920.png 1920w,https://developer.android.com/static/codelabs/camerax-getting-started/img/44da18b15ad2f607_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"></p>
<aside class="warning"><p>Note: The video, audio and container format in the captured video file depends on the recording resolution, the default encoder and container type in the media encoder on the  device.</p>
</aside>
<p>That is all we need to record a video! But CameraX <code translate="no" dir="ltr">VideoCapture</code> has many more features to offer, including:</p>
<ul>
<li>pause/resume recording.</li>
<li>capture to <code translate="no" dir="ltr">File</code> or  <code translate="no" dir="ltr">FileDescriptor</code>.</li>
<li>and others.</li>
</ul>
<p>For instructions on how to use them, please refer to  <a href="https://developer.android.com/training/camerax/video-capture" target="_blank">the official documentation</a>.</p>


        </google-codelab-step>
      
        <google-codelab-step label="(Optional) Combine VideoCapture with other use cases" duration="7" step="7">
          
          <h2 class="step-title" id="7" data-text="(Optional) Combine VideoCapture with other use cases" tabindex="-1">
              8. (Optional) Combine VideoCapture with other use cases
          </h2>
          <p>The previous <code translate="no" dir="ltr">VideoCapture</code> step demonstrated the <code translate="no" dir="ltr">Preview</code> and <code translate="no" dir="ltr">VideoCapture</code> combination, which is supported on all devices as documented in  <a href="https://developer.android.com/reference/android/hardware/camera2/CameraDevice#regular-capture" target="_blank">the device capabilities table</a>. In this step, we will add the <code translate="no" dir="ltr">ImageCapture</code> use cases to the existing <code translate="no" dir="ltr">VideoCapture</code> + <code translate="no" dir="ltr">Preview</code> combination to demonstrate <code translate="no" dir="ltr">Preview + ImageCapture + VideoCapture</code>.</p>
<aside class="warning"><p><strong>This step has device level requirements as specified in  </strong><a href="https://developer.android.com/reference/android/hardware/camera2/CameraDevice#regular-capture" target="_blank"><strong>the Camera2 device documentation</strong></a>:</p>
<ul>
<li>Preview + VideoCapture + ImageCapture:  <a href="https://developer.android.com/reference/android/hardware/camera2/CameraMetadata#INFO_SUPPORTED_HARDWARE_LEVEL_LIMITED" target="_blank"><code translate="no" dir="ltr">LIMITED</code></a> device and above.</li>
<li>Preview + VideoCapture + ImageAnalysis:  <a href="https://developer.android.com/reference/android/hardware/camera2/CameraMetadata#INFO_SUPPORTED_HARDWARE_LEVEL_3" target="_blank"><code translate="no" dir="ltr">LEVEL_3</code></a> (the highest) device added to Android 7(N).</li>
<li>Preview + VideoCapture + ImageAnalysis + ImageCapture: not supported.</li>
</ul>
</aside>
<ol type="1">
<li>With existing code from the previous step, uncomment and enable <em><code translate="no" dir="ltr">imageCapture</code></em> creation in <code translate="no" dir="ltr">startCamera()</code> :</li>
</ol>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Text only"><code translate="no" dir="ltr">imageCapture = ImageCapture.Builder().build()
</code></pre></devsite-code>
<ol type="1" start="2">
<li>Add a  <a href="https://developer.android.com/reference/androidx/camera/video/FallbackStrategy" target="_blank"><code translate="no" dir="ltr">FallbackStrategy</code></a> to the existing  <a href="https://developer.android.com/reference/androidx/camera/video/QualitySelector" target="_blank"><code translate="no" dir="ltr">QualitySelector</code></a> creation. This allows CameraX to pick up a supported resolution if the required <code translate="no" dir="ltr">Quality.HIGHEST</code> is not supportable with the <code translate="no" dir="ltr">imageCapture</code> use case.</li>
</ol>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="GAS"><code translate="no" dir="ltr"><span class="devsite-syntax-na">.setQualitySelector</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-no">QualitySelector.from</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-no">Quality.HIGHEST</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nf">FallbackStrategy.higherQualityOrLowerThan</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-no">Quality.SD</span><span class="devsite-syntax-p">)))</span>
</code></pre></devsite-code>
<ol type="1" start="3">
<li>Also in <code translate="no" dir="ltr">startCamera()</code>, bind the <code translate="no" dir="ltr">imageCapture</code> use case with the existing preview and videoCapture use cases (note: do not bind <code translate="no" dir="ltr">imageAnalyzer</code>, as a <code translate="no" dir="ltr">preview + imageCapture + videoCapture + imageAnalysis</code> combination is not supported):</li>
</ol>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="POVRay"><code translate="no" dir="ltr"><span class="devsite-syntax-n">cameraProvider</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-n">bindToLifecycle</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-n">this</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">cameraSelector</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">preview</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">imageCapture</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">videoCapture</span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code>
<p>The final <code translate="no" dir="ltr">startCamera()</code> function will look like this now:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Scalate Server Page"><code translate="no" dir="ltr">private<span class="devsite-syntax-w"> </span>fun<span class="devsite-syntax-w"> </span>startCamera()<span class="devsite-syntax-w"> </span>{
<span class="devsite-syntax-w">       </span>val<span class="devsite-syntax-w"> </span>cameraProviderFuture<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>ProcessCameraProvider.getInstance(this)

<span class="devsite-syntax-w">       </span>cameraProviderFuture.addListener({
<span class="devsite-syntax-w">           </span>//<span class="devsite-syntax-w"> </span>Used<span class="devsite-syntax-w"> </span>to<span class="devsite-syntax-w"> </span>bind<span class="devsite-syntax-w"> </span>the<span class="devsite-syntax-w"> </span>lifecycle<span class="devsite-syntax-w"> </span>of<span class="devsite-syntax-w"> </span>cameras<span class="devsite-syntax-w"> </span>to<span class="devsite-syntax-w"> </span>the<span class="devsite-syntax-w"> </span>lifecycle<span class="devsite-syntax-w"> </span>owner
<span class="devsite-syntax-w">           </span>val<span class="devsite-syntax-w"> </span>cameraProvider:<span class="devsite-syntax-w"> </span>ProcessCameraProvider<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>cameraProviderFuture.get()

<span class="devsite-syntax-w">           </span>//<span class="devsite-syntax-w"> </span>Preview
<span class="devsite-syntax-w">           </span>val<span class="devsite-syntax-w"> </span>preview<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>Preview.Builder()
<span class="devsite-syntax-w">               </span>.build()
<span class="devsite-syntax-w">               </span>.also<span class="devsite-syntax-w"> </span>{
<span class="devsite-syntax-w">                   </span>it.setSurfaceProvider(viewBinding.viewFinder.surfaceProvider)
<span class="devsite-syntax-w">               </span>}
<span class="devsite-syntax-w">           </span>val<span class="devsite-syntax-w"> </span>recorder<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>Recorder.Builder()
<span class="devsite-syntax-w">               </span>.setQualitySelector(QualitySelector.from(Quality.HIGHEST,
<span class="devsite-syntax-w">                    </span>FallbackStrategy.higherQualityOrLowerThan(Quality.SD)))
<span class="devsite-syntax-w">               </span>.build()
<span class="devsite-syntax-w">           </span>videoCapture<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>VideoCapture.withOutput(recorder)

<span class="devsite-syntax-w">           </span>imageCapture<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>ImageCapture.Builder().build()

<span class="devsite-syntax-w">           </span>/*
<span class="devsite-syntax-w">           </span>val<span class="devsite-syntax-w"> </span>imageAnalyzer<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>ImageAnalysis.Builder().build()
<span class="devsite-syntax-w">               </span>.also<span class="devsite-syntax-w"> </span>{
<span class="devsite-syntax-w">                   </span>setAnalyzer(
<span class="devsite-syntax-w">                       </span>cameraExecutor,
<span class="devsite-syntax-w">                       </span>LuminosityAnalyzer<span class="devsite-syntax-w"> </span>{<span class="devsite-syntax-w"> </span>luma<span class="devsite-syntax-w"> </span>-&gt;
<span class="devsite-syntax-w">                           </span>Log.d(TAG,<span class="devsite-syntax-w"> </span>"Average<span class="devsite-syntax-w"> </span>luminosity:<span class="devsite-syntax-w"> </span>$luma")
<span class="devsite-syntax-w">                       </span>}
<span class="devsite-syntax-w">                   </span>)
<span class="devsite-syntax-w">               </span>}
<span class="devsite-syntax-w">           </span>*/

<span class="devsite-syntax-w">           </span>//<span class="devsite-syntax-w"> </span>Select<span class="devsite-syntax-w"> </span>back<span class="devsite-syntax-w"> </span>camera<span class="devsite-syntax-w"> </span>as<span class="devsite-syntax-w"> </span>a<span class="devsite-syntax-w"> </span>default
<span class="devsite-syntax-w">           </span>val<span class="devsite-syntax-w"> </span>cameraSelector<span class="devsite-syntax-w"> </span>=<span class="devsite-syntax-w"> </span>CameraSelector.DEFAULT_BACK_CAMERA

<span class="devsite-syntax-w">           </span>try<span class="devsite-syntax-w"> </span>{
<span class="devsite-syntax-w">               </span>//<span class="devsite-syntax-w"> </span>Unbind<span class="devsite-syntax-w"> </span>use<span class="devsite-syntax-w"> </span>cases<span class="devsite-syntax-w"> </span>before<span class="devsite-syntax-w"> </span>rebinding
<span class="devsite-syntax-w">               </span>cameraProvider.unbindAll()

<span class="devsite-syntax-w">               </span>//<span class="devsite-syntax-w"> </span>Bind<span class="devsite-syntax-w"> </span>use<span class="devsite-syntax-w"> </span>cases<span class="devsite-syntax-w"> </span>to<span class="devsite-syntax-w"> </span>camera
<span class="devsite-syntax-w">               </span>cameraProvider.bindToLifecycle(
<span class="devsite-syntax-w">                   </span>this,<span class="devsite-syntax-w"> </span>cameraSelector,<span class="devsite-syntax-w"> </span>preview,<span class="devsite-syntax-w"> </span>imageCapture,<span class="devsite-syntax-w"> </span>videoCapture)

<span class="devsite-syntax-w">           </span>}<span class="devsite-syntax-w"> </span>catch(exc:<span class="devsite-syntax-w"> </span>Exception)<span class="devsite-syntax-w"> </span>{
<span class="devsite-syntax-w">               </span>Log.e(TAG,<span class="devsite-syntax-w"> </span>"Use<span class="devsite-syntax-w"> </span>case<span class="devsite-syntax-w"> </span>binding<span class="devsite-syntax-w"> </span>failed",<span class="devsite-syntax-w"> </span>exc)
<span class="devsite-syntax-w">           </span>}

<span class="devsite-syntax-w">       </span>},<span class="devsite-syntax-w"> </span>ContextCompat.getMainExecutor(this))
<span class="devsite-syntax-w">   </span>}
</code></pre></devsite-code>
<ol type="1" start="4">
<li>Build and run. We should see the familiar UI from previous steps, only this time, both the &#34;<strong>Take Photo</strong>&#34; and &#34;<strong>Start Capture</strong>&#34; buttons are functioning.</li>
<li>Do some capturing:</li>
</ol>
<ul>
<li>Tap the &#34;<strong>START CAPTURE</strong>&#34; button to start capturing.</li>
<li>Tap the &#34;<strong>TAKE PHOTO</strong>&#34; to capture an image.</li>
<li>Wait for image capture to complete (we should see a toast as we saw before).</li>
<li>Tap the &#34;<strong>STOP CAPTURE</strong>&#34; button to stop recording.</li>
</ul>
<p>We are performing image capture while the preview and the video capture are in progress!</p>
<p class="image-container"><img alt="ef2a6005defc4977.png" style="width: 289.32px" src="/static/codelabs/camerax-getting-started/img/ef2a6005defc4977.png" srcset="https://developer.android.com/static/codelabs/camerax-getting-started/img/ef2a6005defc4977_36.png 36w,https://developer.android.com/static/codelabs/camerax-getting-started/img/ef2a6005defc4977_48.png 48w,https://developer.android.com/static/codelabs/camerax-getting-started/img/ef2a6005defc4977_72.png 72w,https://developer.android.com/static/codelabs/camerax-getting-started/img/ef2a6005defc4977_96.png 96w,https://developer.android.com/static/codelabs/camerax-getting-started/img/ef2a6005defc4977_480.png 480w,https://developer.android.com/static/codelabs/camerax-getting-started/img/ef2a6005defc4977_720.png 720w,https://developer.android.com/static/codelabs/camerax-getting-started/img/ef2a6005defc4977_856.png 856w,https://developer.android.com/static/codelabs/camerax-getting-started/img/ef2a6005defc4977_960.png 960w,https://developer.android.com/static/codelabs/camerax-getting-started/img/ef2a6005defc4977_1440.png 1440w,https://developer.android.com/static/codelabs/camerax-getting-started/img/ef2a6005defc4977_1920.png 1920w,https://developer.android.com/static/codelabs/camerax-getting-started/img/ef2a6005defc4977_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"> <img alt="16bc70ec3346fa66.png" style="width: 285.22px" src="/static/codelabs/camerax-getting-started/img/16bc70ec3346fa66.png" srcset="https://developer.android.com/static/codelabs/camerax-getting-started/img/16bc70ec3346fa66_36.png 36w,https://developer.android.com/static/codelabs/camerax-getting-started/img/16bc70ec3346fa66_48.png 48w,https://developer.android.com/static/codelabs/camerax-getting-started/img/16bc70ec3346fa66_72.png 72w,https://developer.android.com/static/codelabs/camerax-getting-started/img/16bc70ec3346fa66_96.png 96w,https://developer.android.com/static/codelabs/camerax-getting-started/img/16bc70ec3346fa66_480.png 480w,https://developer.android.com/static/codelabs/camerax-getting-started/img/16bc70ec3346fa66_720.png 720w,https://developer.android.com/static/codelabs/camerax-getting-started/img/16bc70ec3346fa66_856.png 856w,https://developer.android.com/static/codelabs/camerax-getting-started/img/16bc70ec3346fa66_960.png 960w,https://developer.android.com/static/codelabs/camerax-getting-started/img/16bc70ec3346fa66_1440.png 1440w,https://developer.android.com/static/codelabs/camerax-getting-started/img/16bc70ec3346fa66_1920.png 1920w,https://developer.android.com/static/codelabs/camerax-getting-started/img/16bc70ec3346fa66_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"></p>
<ol type="1" start="6">
<li>View the captured image and video files as we did in the Google Photos app from previous steps. This time, we should see two photos and two video clips.</li>
</ol>
<p class="image-container"><img alt="3f3feb19c8c73532.png" style="width: 467.50px" src="/static/codelabs/camerax-getting-started/img/3f3feb19c8c73532.png" srcset="https://developer.android.com/static/codelabs/camerax-getting-started/img/3f3feb19c8c73532_36.png 36w,https://developer.android.com/static/codelabs/camerax-getting-started/img/3f3feb19c8c73532_48.png 48w,https://developer.android.com/static/codelabs/camerax-getting-started/img/3f3feb19c8c73532_72.png 72w,https://developer.android.com/static/codelabs/camerax-getting-started/img/3f3feb19c8c73532_96.png 96w,https://developer.android.com/static/codelabs/camerax-getting-started/img/3f3feb19c8c73532_480.png 480w,https://developer.android.com/static/codelabs/camerax-getting-started/img/3f3feb19c8c73532_720.png 720w,https://developer.android.com/static/codelabs/camerax-getting-started/img/3f3feb19c8c73532_856.png 856w,https://developer.android.com/static/codelabs/camerax-getting-started/img/3f3feb19c8c73532_960.png 960w,https://developer.android.com/static/codelabs/camerax-getting-started/img/3f3feb19c8c73532_1440.png 1440w,https://developer.android.com/static/codelabs/camerax-getting-started/img/3f3feb19c8c73532_1920.png 1920w,https://developer.android.com/static/codelabs/camerax-getting-started/img/3f3feb19c8c73532_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"></p>
<ol type="1" start="7">
<li>(Optional) <strong>Replace </strong><code translate="no" dir="ltr">imageCapture</code> with <strong><code translate="no" dir="ltr">ImageAnalyzer</code></strong> use case in the above steps (step 1 to step 4): we will use <code translate="no" dir="ltr">Preview</code> + <code translate="no" dir="ltr">ImageAnalysis</code> + <code translate="no" dir="ltr">VideoCapture</code> combination (Note again that the  <code translate="no" dir="ltr">Preview</code> + <code translate="no" dir="ltr">Analysis</code> + <code translate="no" dir="ltr">ImageCapture</code> + <code translate="no" dir="ltr">VideoCapture</code> combination may not be supported even with <code translate="no" dir="ltr">LEVEL_3</code> camera devices.)!</li>
</ol>


        </google-codelab-step>
      
        <google-codelab-step label="Congratulations!" duration="1" step="8">
          
          <h2 class="step-title" id="8" data-text="Congratulations!" tabindex="-1">
              9. Congratulations!
          </h2>
          <p>You&#39;ve successfully implemented the following into a new Android app from scratch:</p>
<ul>
<li>Included  <a href="https://developer.android.com/jetpack/androidx/releases/camera#dependencies" target="_blank">CameraX dependencies</a> into a new project.</li>
<li>Displayed a camera viewfinder by using the  <a href="https://developer.android.com/reference/androidx/camera/core/Preview" target="_blank"><code translate="no" dir="ltr">Preview</code></a> use case.</li>
<li>Implemented photo capture and saving images to storage by using the <a href="https://developer.android.com/reference/androidx/camera/core/ImageCapture" target="_blank"><code translate="no" dir="ltr">ImageCapture</code></a> use case.</li>
<li>Implemented analysis of frames from the camera in real time using the  <a href="https://developer.android.com/reference/androidx/camera/core/ImageAnalysis" target="_blank"><code translate="no" dir="ltr">ImageAnalysis</code></a> use case.</li>
<li>Implemented video capture with the  <a href="https://developer.android.com/reference/androidx/camera/video/package-summary" target="_blank"><code translate="no" dir="ltr">VideoCapture</code></a> use case.</li>
</ul>
<p>If you are interested in reading more about CameraX and the things that you can do with it, checkout  <a href="https://developer.android.com/jetpack/androidx/releases/camera" target="_blank">the documentation</a> or clone the  <a href="https://github.com/android/camera/tree/master/CameraXBasic" target="_blank">official sample</a>.</p>
<aside class="special"><p><strong>Note</strong>: If you want to stay up to date with the CameraX developer community, join our developer forum at  <a href="http://g.co/camerax/developers" target="_blank">g.co/camerax/developers</a>.</p>
</aside>


        </google-codelab-step>
      
    </google-codelab>
  
  

  
</div>

  
    
    
    
  

  <div class="devsite-floating-action-buttons"></div></article>


<devsite-content-footer class="nocontent">
  <p>Except as otherwise noted, the content of this page is licensed under the <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 License</a>, and code samples are licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 License</a>. For details, see the <a href="https://developers.google.com/site-policies">Google Developers Site Policies</a>. Java is a registered trademark of Oracle and/or its affiliates.</p>
  
</devsite-content-footer>


<devsite-notification
>
</devsite-notification>


  
<div class="devsite-content-data">
  
  
    <template class="devsite-content-data-template">
      [[["Easy to understand","easyToUnderstand","thumb-up"],["Solved my problem","solvedMyProblem","thumb-up"],["Other","otherUp","thumb-up"]],[["Missing the information I need","missingTheInformationINeed","thumb-down"],["Too complicated / too many steps","tooComplicatedTooManySteps","thumb-down"],["Out of date","outOfDate","thumb-down"],["Samples / code issue","samplesCodeIssue","thumb-down"],["Other","otherDown","thumb-down"]],[],[],[],null,[]]
    </template>
  
</div>
            
          </devsite-content>
        </main>
        <devsite-footer-promos class="devsite-footer">
          
            

<nav class="devsite-footer-promos nocontent" aria-label="Promotions">
  <ul class="devsite-footer-promos-list">
    
    <li class="devsite-footer-promo">
      <a href="//x.com/AndroidDev"
         class="devsite-footer-promo-title gc-analytics-event"
         data-category="Site-Wide Custom Events"
       
       
         data-label="Footer X Promo"
       >
        
        
        <picture>
          
          <source class="devsite-dark-theme"
                  srcset="https://developer.android.com/_static/android/images/logo-x_dt.svg"
                  media="(prefers-color-scheme: dark)">
          
          <img class="devsite-footer-promo-icon"
                src="/_static/android/images/logo-x.svg"
                loading="lazy"
                alt="X">
        </picture>
        
        <span class="devsite-footer-promo-label">
          X
        </span>
      </a>
      <div class="devsite-footer-promo-description">Follow @AndroidDev on X</div>
    </li>
    
    <li class="devsite-footer-promo">
      <a href="//www.youtube.com/user/androiddevelopers"
         class="devsite-footer-promo-title gc-analytics-event"
         data-category="Site-Wide Custom Events"
       
       
         data-label="Footer YouTube Promo"
       >
        
        
        <picture>
          
          <source class="devsite-dark-theme"
                  srcset="https://developer.android.com/_static/android/images/logo-youtube_dt.svg"
                  media="(prefers-color-scheme: dark)">
          
          <img class="devsite-footer-promo-icon"
                src="//www.gstatic.com/images/icons/material/product/2x/youtube_48dp.png"
                loading="lazy"
                alt="YouTube">
        </picture>
        
        <span class="devsite-footer-promo-label">
          YouTube
        </span>
      </a>
      <div class="devsite-footer-promo-description">Check out Android Developers on YouTube</div>
    </li>
    
    <li class="devsite-footer-promo">
      <a href="//www.linkedin.com/showcase/androiddev"
         class="devsite-footer-promo-title gc-analytics-event"
         data-category="Site-Wide Custom Events"
       
       
         data-label="Footer LinkedIn Promo"
       >
        
        
        <picture>
          
          <source class="devsite-dark-theme"
                  srcset="https://developer.android.com/_static/android/images/logo-linkedin_dt.svg"
                  media="(prefers-color-scheme: dark)">
          
          <img class="devsite-footer-promo-icon"
                src="/_static/android/images/logo-linkedin.svg"
                loading="lazy"
                alt="LinkedIn">
        </picture>
        
        <span class="devsite-footer-promo-label">
          LinkedIn
        </span>
      </a>
      <div class="devsite-footer-promo-description">Connect with the Android Developers community on LinkedIn</div>
    </li>
    
  </ul>
</nav>

          
        </devsite-footer-promos>
        <devsite-footer-linkboxes class="devsite-footer">
          
            
<nav class="devsite-footer-linkboxes nocontent" aria-label="Footer links">
  
  <ul class="devsite-footer-linkboxes-list">
    
    <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading no-link">More Android</h3>
      <ul class="devsite-footer-linkbox-list">
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="//www.android.com"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 1)"
            >
            
          
            Android
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="//www.android.com/enterprise/"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 2)"
            >
            
          
            Android for Enterprise
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="//www.android.com/security-center/"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 3)"
            >
            
          
            Security
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="//source.android.com"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 4)"
            >
            
          
            Source
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/news"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 5)"
            >
            
          
            News
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="//android-developers.googleblog.com/"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 6)"
            >
            
          
            Blog
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/podcasts"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 7)"
            >
            
              
              
            
          
            Podcasts
          
          </a>
          
          
        </li>
        
      </ul>
    </li>
    
    <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading no-link">Discover</h3>
      <ul class="devsite-footer-linkbox-list">
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/games"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 1)"
            >
            
          
            Gaming
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/ml"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 2)"
            >
            
          
            Machine Learning
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/health-and-fitness"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 3)"
            >
            
          
            Health & Fitness
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/media"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 4)"
            >
            
          
            Camera & Media
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/privacy"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 5)"
            >
            
          
            Privacy
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/training/connectivity/5g"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 6)"
            >
            
              
              
            
          
            5G
          
          </a>
          
          
        </li>
        
      </ul>
    </li>
    
    <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading no-link">Android Devices</h3>
      <ul class="devsite-footer-linkbox-list">
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/large-screens"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 1)"
            >
            
          
            Large screens
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/wear"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 2)"
            >
            
          
            Wear OS
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/chrome-os"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 3)"
            >
            
          
            ChromeOS devices
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/cars"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 4)"
            >
            
          
            Android for cars
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/tv"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 5)"
            >
            
              
              
            
          
            Android TV
          
          </a>
          
          
        </li>
        
      </ul>
    </li>
    
    <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading no-link">Releases</h3>
      <ul class="devsite-footer-linkbox-list">
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/about/versions/15"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 1)"
            >
            
          
            Android 15
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/about/versions/14"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 2)"
            >
            
          
            Android 14
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/about/versions/13"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 3)"
            >
            
          
            Android 13
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/about/versions/12"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 4)"
            >
            
          
            Android 12
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/about/versions/11"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 5)"
            >
            
          
            Android 11
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/about/versions/10"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 6)"
            >
            
          
            Android 10
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/about/versions/pie"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 7)"
            >
            
              
              
            
          
            Pie
          
          </a>
          
          
        </li>
        
      </ul>
    </li>
    
    <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading no-link">Documentation and Downloads</h3>
      <ul class="devsite-footer-linkbox-list">
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/studio/intro"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 1)"
            >
            
          
            Android Studio guide
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/guide"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 2)"
            >
            
          
            Developers guides
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/reference"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 3)"
            >
            
          
            API reference
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/studio"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 4)"
            >
            
          
            Download Studio
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/ndk"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 5)"
            >
            
              
              
            
          
            Android NDK
          
          </a>
          
          
        </li>
        
      </ul>
    </li>
    
    <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading no-link">Support</h3>
      <ul class="devsite-footer-linkbox-list">
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="//issuetracker.google.com/issues/new?component=190923&amp;template=841312"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 1)"
            >
            
          
            Report platform bug
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="//issuetracker.google.com/issues/new?component=192697"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 2)"
            >
            
          
            Report documentation bug
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="//support.google.com/googleplay/android-developer"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 3)"
            >
            
          
            Google Play support
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="https://g.co/userresearch/androiddeveloperfooter"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 4)"
            >
            
              
              
            
          
            Join research studies
          
          </a>
          
          
        </li>
        
      </ul>
    </li>
    
  </ul>
  
</nav>
          
        </devsite-footer-linkboxes>
        <devsite-footer-utility class="devsite-footer">
          
            

<div class="devsite-footer-utility nocontent">
  
  
  <nav class="devsite-footer-sites" aria-label="Other Google Developers websites">
    <a href="https://developers.google.com/"
       class="devsite-footer-sites-logo-link gc-analytics-event"
       data-category="Site-Wide Custom Events"
       data-label="Footer Google Developers Link">
      <picture>
        
        <source srcset="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/images/lockup-google-for-developers-dark-theme.svg"
                media="(prefers-color-scheme: none)"
                class="devsite-dark-theme">
        
        <img class="devsite-footer-sites-logo"
             src="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/images/lockup-google-for-developers.svg"
             loading="lazy"
             alt="Google Developers">
      </picture>
    </a>
    <ul class="devsite-footer-sites-list">
      
      <li class="devsite-footer-sites-item">
        <a href="//developer.android.com"
           class="devsite-footer-sites-link
                  gc-analytics-event"
           data-category="Site-Wide Custom Events"
         
           data-label="Footer Android Link"
         
         >
          Android
        </a>
      </li>
      
      <li class="devsite-footer-sites-item">
        <a href="//developer.chrome.com/home"
           class="devsite-footer-sites-link
                  gc-analytics-event"
           data-category="Site-Wide Custom Events"
         
           data-label="Footer Chrome Link"
         
         >
          Chrome
        </a>
      </li>
      
      <li class="devsite-footer-sites-item">
        <a href="//firebase.google.com"
           class="devsite-footer-sites-link
                  gc-analytics-event"
           data-category="Site-Wide Custom Events"
         
           data-label="Footer Firebase Link"
         
         >
          Firebase
        </a>
      </li>
      
      <li class="devsite-footer-sites-item">
        <a href="//cloud.google.com"
           class="devsite-footer-sites-link
                  gc-analytics-event"
           data-category="Site-Wide Custom Events"
         
           data-label="Footer Google Cloud Platform Link"
         
         >
          Google Cloud Platform
        </a>
      </li>
      
      <li class="devsite-footer-sites-item">
        <a href="//developers.google.com/products/"
           class="devsite-footer-sites-link
                  gc-analytics-event"
           data-category="Site-Wide Custom Events"
         
           data-label="Footer All products Link"
         
         >
          All products
        </a>
      </li>
      
    </ul>
  </nav>
  

  
  <nav class="devsite-footer-utility-links" aria-label="Utility links">
    
    <ul class="devsite-footer-utility-list">
      
      <li class="devsite-footer-utility-item
                 ">
        
        
        <a class="devsite-footer-utility-link gc-analytics-event"
           href="//policies.google.com/privacy"
           data-category="Site-Wide Custom Events"
           data-label="Footer Privacy link"
         >
          Privacy
        </a>
        
      </li>
      
      <li class="devsite-footer-utility-item
                 ">
        
        
        <a class="devsite-footer-utility-link gc-analytics-event"
           href="/license"
           data-category="Site-Wide Custom Events"
           data-label="Footer License link"
         >
          License
        </a>
        
      </li>
      
      <li class="devsite-footer-utility-item
                 ">
        
        
        <a class="devsite-footer-utility-link gc-analytics-event"
           href="/distribute/marketing-tools/brand-guidelines"
           data-category="Site-Wide Custom Events"
           data-label="Footer Brand guidelines link"
         >
          Brand guidelines
        </a>
        
      </li>
      
      <li class="devsite-footer-utility-item
                 glue-cookie-notification-bar-control">
        
        
        <a class="devsite-footer-utility-link gc-analytics-event"
           href="#"
           data-category="Site-Wide Custom Events"
           data-label="Footer Manage cookies link"
         
           aria-hidden="true"
         >
          Manage cookies
        </a>
        
      </li>
      
      <li class="devsite-footer-utility-item
                 devsite-footer-utility-button">
        
        <span class="devsite-footer-utility-description">Get news and tips by email</span>
        
        
        <a class="devsite-footer-utility-link gc-analytics-event"
           href="/updates"
           data-category="Site-Wide Custom Events"
           data-label="Footer Subscribe link"
         >
          Subscribe
        </a>
        
      </li>
      
    </ul>
    
    
<devsite-language-selector>
  <ul role="presentation">
    
    
    <li role="presentation">
      <a role="menuitem" lang="en"
        >English</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="de"
        >Deutsch</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="es_419"
        >Español – América Latina</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="fr"
        >Français</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="id"
        >Indonesia</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="pl"
        >Polski</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="pt_br"
        >Português – Brasil</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="vi"
        >Tiếng Việt</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="zh_cn"
        >中文 – 简体</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="ja"
        >日本語</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="ko"
        >한국어</a>
    </li>
    
  </ul>
</devsite-language-selector>

  </nav>
</div>
          
        </devsite-footer-utility>
        <devsite-panel>
          
        </devsite-panel>
        
      </section></section>
    <devsite-sitemask></devsite-sitemask>
    <devsite-snackbar></devsite-snackbar>
    <devsite-tooltip ></devsite-tooltip>
    <devsite-heading-link></devsite-heading-link>
    <devsite-analytics>
      
        <script type="application/json" analytics>[]</script>
<script type="application/json" tag-management>{&#34;at&#34;: &#34;True&#34;, &#34;ga4&#34;: [{&#34;id&#34;: &#34;G-QFRN08RN6E&#34;, &#34;purpose&#34;: 0}], &#34;ga4p&#34;: [{&#34;id&#34;: &#34;G-QFRN08RN6E&#34;, &#34;purpose&#34;: 0}], &#34;gtm&#34;: [], &#34;parameters&#34;: {&#34;internalUser&#34;: &#34;False&#34;, &#34;language&#34;: {&#34;machineTranslated&#34;: &#34;False&#34;, &#34;requested&#34;: &#34;en&#34;, &#34;served&#34;: &#34;en&#34;}, &#34;pageType&#34;: &#34;codelab&#34;, &#34;projectName&#34;: null, &#34;signedIn&#34;: &#34;False&#34;, &#34;tenant&#34;: &#34;android&#34;, &#34;recommendations&#34;: {&#34;sourcePage&#34;: &#34;&#34;, &#34;sourceType&#34;: 0, &#34;sourceRank&#34;: 0, &#34;sourceIdenticalDescriptions&#34;: 0, &#34;sourceTitleWords&#34;: 0, &#34;sourceDescriptionWords&#34;: 0, &#34;experiment&#34;: &#34;&#34;}, &#34;experiment&#34;: {&#34;ids&#34;: &#34;&#34;}}}</script>
      
    </devsite-analytics>
    
      <devsite-badger></devsite-badger>
    
    
    
<android-fully-clickable
    target="
        .android-case-study .devsite-landing-row-item,
        .android-editorial-and-updates-cards .devsite-card-content-wrapper,
        .android-editorial-and-updates-cards .devsite-landing-row-item,
        .android-grouped-resources .devsite-landing-row-item,
        .android-grouped-resources-contained--primary .devsite-landing-row-item,
        .android-grouped-resources-contained--secondary .devsite-landing-row-item,
        .android-grouped-resources-contained--tertiary .devsite-landing-row-item,
        .android-grouped-resources-uncontained--primary .devsite-landing-row-item,
        .android-grouped-resources-uncontained--secondary .devsite-landing-row-item,
        .android-grouped-resources-uncontained--tertiary .devsite-landing-row-item,
        .android-guide-cards .devsite-landing-row-item,
        .android-illustrated-resources-index .devsite-landing-row-item,
        .android-illustrated-resources-primary .devsite-landing-row-item,
        .android-illustrated-resources-secondary .devsite-landing-row-item,
        .android-illustrated-resources-secondary-small .devsite-landing-row-item,
        .android-illustrated-resources-tertiary .devsite-landing-row-item,
        .android-illustrated-resources-tertiary-small .devsite-landing-row-item,
        .android-promo .devsite-landing-row-item,
        .android-quick-link,
        .android-samples .devsite-card-wrapper,
        .fully-clickable"
    watch=".android-editorial-and-updates-cards, .android-samples, devsite-content"></android-fully-clickable>
    
<script nonce="4yq5LQQsgNuWAfOxEqr3z6Mjdbnrov">
  
  (function(d,e,v,s,i,t,E){d['GoogleDevelopersObject']=i;
    t=e.createElement(v);t.async=1;t.src=s;E=e.getElementsByTagName(v)[0];
    E.parentNode.insertBefore(t,E);})(window, document, 'script',
    'https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/js/app_loader.js', '[3,"en",null,"/js/devsite_app_module.js","https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9","https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android","https://android-dot-devsite-v2-prod.appspot.com",1,null,["/_pwa/android/manifest.json","https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/images/video-placeholder.svg","https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/images/favicon.svg","https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/images/lockup.png","https://fonts.googleapis.com/css?family=Google+Sans:400,500,600,700|Google+Sans+Text:400,400italic,500,500italic,600,600italic,700,700italic|Roboto+Mono:400,500,700&display=swap"],1,null,[1,6,8,12,14,17,21,25,50,52,63,70,75,76,80,87,91,92,93,97,98,100,101,102,103,104,105,107,108,109,110,112,113,117,118,120,122,124,125,126,127,129,130,131,132,133,134,135,136,138,140,141,147,148,149,151,152,156,157,158,159,161,163,164,168,169,170,179,180,182,183,186,191,193,196],"AIzaSyAP-jjEJBzmIyKR4F-3XITp8yM9T1gEEI8","AIzaSyB6xiKGDR5O3Ak2okS4rLkauxGUG7XP0hg","developer.android.com","AIzaSyAQk0fBONSGUqCNznf6Krs82Ap1-NV6J4o","AIzaSyCCxcqdrZ_7QMeLCRY20bh_SXdAYqy70KY",null,null,null,["Cloud__enable_cloudx_experiment_ids","Profiles__enable_profile_collections","Profiles__enable_recognition_badges","Profiles__enable_awarding_url","Concierge__enable_remove_info_panel_tags","Profiles__enable_page_saving","Cloud__enable_legacy_calculator_redirect","DevPro__enable_google_one_card","DevPro__enable_google_payments_buyflow","MiscFeatureFlags__enable_appearance_cookies","Experiments__reqs_query_experiments","Search__enable_dynamic_content_confidential_banner","Profiles__enable_complete_playlist_endpoint","Profiles__enable_developer_profiles_callout","Cloud__cache_serialized_dynamic_content","Profiles__enable_developer_profile_benefits_ui_redesign","MiscFeatureFlags__enable_explicit_template_dependencies","Cloud__enable_cloud_shell","TpcFeatures__proxy_prod_host","Cloud__enable_cloud_dlp_service","Profiles__enable_playlist_community_acl","DevPro__enable_enterprise","DevPro__enable_devpro_offers","MiscFeatureFlags__enable_project_body_class","Significatio__enable_by_tenant","Search__enable_suggestions_from_borg","MiscFeatureFlags__emergency_css","Cloud__enable_free_trial_server_call","Profiles__enable_purchase_prompts","MiscFeatureFlags__developers_footer_dark_image","Profiles__enable_completecodelab_endpoint","Profiles__enable_user_type","BookNav__enable_tenant_cache_key","Profiles__enable_completequiz_endpoint","DevPro__enable_nvidia_credits_card","MiscFeatureFlags__enable_framebox_badge_methods","Profiles__enable_public_developer_profiles","Profiles__require_profile_eligibility_for_signin","DevPro__enable_embed_profile_creation","Concierge__enable_pushui","MiscFeatureFlags__enable_firebase_utm","DevPro__enable_vertex_credit_card","DevPro__enable_free_benefits","MiscFeatureFlags__developers_footer_image","Cloud__enable_llm_concierge_chat","MiscFeatureFlags__enable_variable_operator_index_yaml","CloudShell__cloud_code_overflow_menu","Search__enable_ai_search_summaries_for_all","Search__enable_page_map","MiscFeatureFlags__enable_variable_operator","MiscFeatureFlags__gdp_dashboard_reskin_enabled","DevPro__remove_eu_tax_intake_form","MiscFeatureFlags__enable_project_variables","DevPro__enable_developer_subscriptions","Search__enable_ai_eligibility_checks","Profiles__enable_dashboard_curated_recommendations","Concierge__enable_actions_menu","MiscFeatureFlags__enable_view_transitions","DevPro__enable_code_assist","Cloud__enable_cloud_shell_fte_user_flow","Profiles__enable_join_program_group_endpoint","Profiles__enable_release_notes_notifications","TpcFeatures__enable_unmirrored_page_left_nav","MiscFeatureFlags__enable_dark_theme","Profiles__enable_stripe_subscription_management","CloudShell__cloud_shell_button","Cloud__fast_free_trial","DevPro__enable_cloud_innovators_plus","Analytics__enable_clearcut_logging","Profiles__enable_callout_notifications","EngEduTelemetry__enable_engedu_telemetry","DevPro__enable_firebase_workspaces_card"],null,null,"AIzaSyBLEMok-5suZ67qRPzx0qUtbnLmyT_kCVE","https://developerscontentserving-pa.googleapis.com","AIzaSyCM4QpTRSqP5qI4Dvjt4OAScIN8sOUlO-k","https://developerscontentsearch-pa.googleapis.com",2,4,null,"https://developerprofiles-pa.googleapis.com",[3,"android","Android Developers","developer.android.com",null,"android-dot-devsite-v2-prod.appspot.com",null,null,[null,1,null,null,null,null,null,null,null,null,null,[1],null,null,null,null,null,null,[1],[1,null,null,[1,20],"/recommendations"],null,null,null,[1,null,1],[1,1,null,1,1]],null,[18,null,null,null,null,null,"/images/lockup.png","/images/touchicon-180.png",null,null,null,null,null,null,null,null,null,null,null,null,null,2,null,null,null,"/images/lockup-dark-theme.png",[]],[],null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,[6,1,14,15,20,22,23,28,29,37,43],null,[[null,null,1],[1,1]],[[null,null,null,null,null,null,null,[["G-QFRN08RN6E"],null,null,[["G-QFRN08RN6E",1]]],null,null,null,null,1],null,[[2,2],[1,1]]],null,4,null,null,null,null,null,null,null,null,null,null,null,null,null,"android.devsite.google"],null,"pk_live_5170syrHvgGVmSx9sBrnWtA5luvk9BwnVcvIi7HizpwauFG96WedXsuXh790rtij9AmGllqPtMLfhe2RSwD6Pn38V00uBCydV4m",1,null,"https://developerscontentinsights-pa.googleapis.com","AIzaSyCg-ZUslalsEbXMfIo9ZP8qufZgo3LSBDU","AIzaSyDxT0vkxnY_KeINtA4LSePJO-4MAZPMRsE","https://developers.googleapis.com",null,null,"AIzaSyBQom12tzI-rybN7Sf-KfeL4nwm-Rf7PmI\n",null,"https://developerslogging.googleapis.com"]')
  
</script>

    <devsite-a11y-announce></devsite-a11y-announce>
  </body>
</html>