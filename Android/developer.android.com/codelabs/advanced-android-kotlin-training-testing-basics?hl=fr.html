








<!doctype html>
<html 
      lang="en"
      dir="ltr">
  <head>
    <meta name="google-signin-client-id" content="721724668570-nbkv1cfusk7kk4eni4pjvepaus73b13t.apps.googleusercontent.com">
    <meta name="google-signin-scope"
          content="profile email https://www.googleapis.com/auth/developerprofiles https://www.googleapis.com/auth/developerprofiles.award">
    <meta property="og:site_name" content="Android Developers">
    <meta property="og:type" content="website"><meta name="theme-color" content="#34a853"><meta charset="utf-8">
    <meta content="IE=Edge" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    

    <link rel="manifest" href="/_pwa/android/manifest.json"
          crossorigin="use-credentials">
    <link rel="preconnect" href="//www.gstatic.com" crossorigin>
    <link rel="preconnect" href="//fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="//fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="//apis.google.com" crossorigin>
    <link rel="preconnect" href="//www.google-analytics.com" crossorigin><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Google+Sans:400,500,600,700|Google+Sans+Text:400,400italic,500,500italic,600,600italic,700,700italic|Roboto+Mono:400,500,700&display=swap">
      <link rel="stylesheet"
            href="//fonts.googleapis.com/css2?family=Material+Icons&family=Material+Symbols+Outlined&display=block"><link rel="stylesheet" href="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/css/app.css">
      
        <link rel="stylesheet" href="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/css/dark-theme.css" disabled>
      <link rel="shortcut icon" href="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/images/favicon.svg">
    <link rel="apple-touch-icon" href="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/images/touchicon-180.png"><link rel="canonical" href="https://developer.android.com/codelabs/advanced-android-kotlin-training-testing-basics"><link rel="search" type="application/opensearchdescription+xml"
            title="Android Developers" href="https://developer.android.com/s/opensearch.xml">
      <title>(Deprecated) Advanced Android in Kotlin 05.1: Testing Basics &nbsp;|&nbsp; Android Developers</title>

<meta property="og:title" content="(Deprecated) Advanced Android in Kotlin 05.1: Testing Basics &nbsp;|&nbsp; Android Developers"><meta name="description" content="Learn the basics of testing your Android Kotlin apps. In this codelab you’ll learn to run tests, write basic tests, work with AndroidX Test, as well as test ViewModel and LiveData.">
  <meta property="og:description" content="Learn the basics of testing your Android Kotlin apps. In this codelab you’ll learn to run tests, write basic tests, work with AndroidX Test, as well as test ViewModel and LiveData."><meta property="og:url" content="https://developer.android.com/codelabs/advanced-android-kotlin-training-testing-basics"><meta property="og:locale" content="en">
  
    
    
    
    
    
    
    
    
    
    
  

    
      <link rel="stylesheet" href="/extras.css"></head>
  <body class=""
        template="codelab"
        theme="android-theme"
        type="codelab"
        
        
        appearance
        
        layout="docs"
        
        
        
        
        display-toc
        pending>
  
    <devsite-progress type="indeterminate" id="app-progress"></devsite-progress>
  
  
    <a href="#main-content" class="skip-link button">
      
      Skip to main content
    </a>
    <section class="devsite-wrapper">
      <devsite-cookie-notification-bar></devsite-cookie-notification-bar><devsite-header role="banner">
  
    





















<div class="devsite-header--inner" data-nosnippet>
  <div class="devsite-top-logo-row-wrapper-wrapper">
    <div class="devsite-top-logo-row-wrapper">
      <div class="devsite-top-logo-row">
        <button type="button" id="devsite-hamburger-menu"
          class="devsite-header-icon-button button-flat material-icons gc-analytics-event"
          data-category="Site-Wide Custom Events"
          data-label="Navigation menu button"
          visually-hidden
          aria-label="Open menu">
        </button>
        
<div class="devsite-product-name-wrapper">

  <a href="/" class="devsite-site-logo-link gc-analytics-event"
   data-category="Site-Wide Custom Events" data-label="Site logo" track-type="globalNav"
   track-name="androidDevelopers" track-metadata-position="nav"
   track-metadata-eventDetail="nav">
  
  <picture>
    
    <source srcset="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/images/lockup-dark-theme.png"
            media="(prefers-color-scheme: dark)"
            class="devsite-dark-theme">
    
    <img src="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/images/lockup.png" class="devsite-site-logo" alt="Android Developers">
  </picture>
  
</a>



</div>
        <div class="devsite-top-logo-row-middle">
          <div class="devsite-header-upper-tabs">
            
           </div>
          
<devsite-search
    enable-signin
    enable-search
    enable-suggestions
      enable-query-completion
    
    enable-search-summaries
    
    tenant-name="Android Developers"
    
    
    
    
    
    >
  <form class="devsite-search-form" action="https://developer.android.com/s/results" method="GET">
    <div class="devsite-search-container">
      <button type="button"
              search-open
              class="devsite-search-button devsite-header-icon-button button-flat material-icons"
              
              aria-label="Open search"></button>
      <div class="devsite-searchbox">
        <input
          aria-activedescendant=""
          aria-autocomplete="list"
          
          aria-label="Search"
          aria-expanded="false"
          aria-haspopup="listbox"
          autocomplete="off"
          class="devsite-search-field devsite-search-query"
          name="q"
          
          placeholder="Search"
          role="combobox"
          type="text"
          value=""
          >
          <div class="devsite-search-image material-icons" aria-hidden="true">
            
              <svg class="devsite-search-ai-image" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <g clip-path="url(#clip0_6641_386)">
                    <path d="M19.6 21L13.3 14.7C12.8 15.1 12.225 15.4167 11.575 15.65C10.925 15.8833 10.2333 16 9.5 16C7.68333 16 6.14167 15.375 4.875 14.125C3.625 12.8583 3 11.3167 3 9.5C3 7.68333 3.625 6.15 4.875 4.9C6.14167 3.63333 7.68333 3 9.5 3C10.0167 3 10.5167 3.05833 11 3.175C11.4833 3.275 11.9417 3.43333 12.375 3.65L10.825 5.2C10.6083 5.13333 10.3917 5.08333 10.175 5.05C9.95833 5.01667 9.73333 5 9.5 5C8.25 5 7.18333 5.44167 6.3 6.325C5.43333 7.19167 5 8.25 5 9.5C5 10.75 5.43333 11.8167 6.3 12.7C7.18333 13.5667 8.25 14 9.5 14C10.6667 14 11.6667 13.625 12.5 12.875C13.35 12.1083 13.8417 11.15 13.975 10H15.975C15.925 10.6333 15.7833 11.2333 15.55 11.8C15.3333 12.3667 15.05 12.8667 14.7 13.3L21 19.6L19.6 21ZM17.5 12C17.5 10.4667 16.9667 9.16667 15.9 8.1C14.8333 7.03333 13.5333 6.5 12 6.5C13.5333 6.5 14.8333 5.96667 15.9 4.9C16.9667 3.83333 17.5 2.53333 17.5 0.999999C17.5 2.53333 18.0333 3.83333 19.1 4.9C20.1667 5.96667 21.4667 6.5 23 6.5C21.4667 6.5 20.1667 7.03333 19.1 8.1C18.0333 9.16667 17.5 10.4667 17.5 12Z" fill="#5F6368"/>
                  </g>
                <defs>
                <clipPath id="clip0_6641_386">
                <rect width="24" height="24" fill="white"/>
                </clipPath>
                </defs>
              </svg>
            
          </div>
          <div class="devsite-search-shortcut-icon-container" aria-hidden="true">
            <kbd class="devsite-search-shortcut-icon">/</kbd>
          </div>
      </div>
    </div>
  </form>
  <button type="button"
          search-close
          class="devsite-search-button devsite-header-icon-button button-flat material-icons"
          
          aria-label="Close search"></button>
</devsite-search>

        </div>

        

          

          

          <devsite-appearance-selector></devsite-appearance-selector>

          
<devsite-language-selector>
  <ul role="presentation">
    
    
    <li role="presentation">
      <a role="menuitem" lang="en"
        >English</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="de"
        >Deutsch</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="es_419"
        >Español – América Latina</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="fr"
        >Français</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="id"
        >Indonesia</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="pl"
        >Polski</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="pt_br"
        >Português – Brasil</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="vi"
        >Tiếng Việt</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="zh_cn"
        >中文 – 简体</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="ja"
        >日本語</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="ko"
        >한국어</a>
    </li>
    
  </ul>
</devsite-language-selector>


          
            <a class="devsite-header-link devsite-top-button button gc-analytics-event "
    href="https://developer.android.com/studio"
    data-category="Site-Wide Custom Events"
    data-label="Site header link: Android Studio"
    >
  Android Studio
</a>
          

        

        
          <devsite-user 
                        
                        
                          enable-profiles
                        
                        
                        id="devsite-user">
            
              
              <span class="button devsite-top-button" aria-hidden="true" visually-hidden>Sign in</span>
            
          </devsite-user>
        
        
        
      </div>
    </div>
  </div>



</div>



  
</devsite-header>
      <devsite-book-nav scrollbars hidden>
        
          





















<div class="devsite-book-nav-filter"
     hidden>
  <span class="filter-list-icon material-icons" aria-hidden="true"></span>
  <input type="text"
         placeholder="Filter"
         
         aria-label="Type to filter"
         role="searchbox">
  
  <span class="filter-clear-button hidden"
        data-title="Clear filter"
        aria-label="Clear filter"
        role="button"
        tabindex="0"></span>
</div>

<nav class="devsite-book-nav devsite-nav nocontent"
     aria-label="Side menu">
  <div class="devsite-mobile-header">
    <button type="button"
            id="devsite-close-nav"
            class="devsite-header-icon-button button-flat material-icons gc-analytics-event"
            data-category="Site-Wide Custom Events"
            data-label="Close navigation"
            aria-label="Close navigation">
    </button>
    <div class="devsite-product-name-wrapper">

  <a href="/" class="devsite-site-logo-link gc-analytics-event"
   data-category="Site-Wide Custom Events" data-label="Site logo" track-type="globalNav"
   track-name="androidDevelopers" track-metadata-position="nav"
   track-metadata-eventDetail="nav">
  
  <picture>
    
    <source srcset="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/images/lockup-dark-theme.png"
            media="(prefers-color-scheme: dark)"
            class="devsite-dark-theme">
    
    <img src="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/images/lockup.png" class="devsite-site-logo" alt="Android Developers">
  </picture>
  
</a>


</div>
  </div>

  <div class="devsite-book-nav-wrapper">
    <div class="devsite-mobile-nav-top">
      
        <ul class="devsite-nav-list">
          
          
    
    
<li class="devsite-nav-item">

  
  <a href="/studio"
    
       class="devsite-nav-title gc-analytics-event "
    

    
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Android Studio"
     track-type="navMenu"
     track-metadata-eventDetail="globalMenu"
     track-metadata-position="nav">
  
    <span class="devsite-nav-text" tooltip >
      Android Studio
   </span>
    
  
  </a>
  

</li>

  
          
        </ul>
      
    </div>
    
  </div>
</nav>
        
      </devsite-book-nav>
      <section id="gc-wrapper">
        <main role="main" id="main-content" class="devsite-main-content"
            
              
              has-sidebar
            >
          <div class="devsite-sidebar">
            <div class="devsite-sidebar-content">
                
                <devsite-toc class="devsite-nav"
                            role="navigation"
                            aria-label="On this page"
                            depth="1"
                            scrollbars
                  ></devsite-toc>
                <devsite-recommendations-sidebar class="nocontent devsite-nav">
                </devsite-recommendations-sidebar>
            </div>
          </div>
          <devsite-content>
            
              












<article class="devsite-article"><style>
      body {
        transition: opacity ease-in 0.2s;
      }

      body[unresolved] {
        opacity: 0;
        display: block;
        overflow: hidden;
        position: relative;
      }
      </style>
  
  
  
  
  

  <div class="devsite-article-meta nocontent" role="navigation">
    
    
    <ul class="devsite-breadcrumb-list"
  >
  
</ul>
    
  </div>
  
    <h1 class="devsite-page-title" tabindex="-1">
      (Deprecated) Advanced Android in Kotlin 05.1: Testing Basics<div class="devsite-actions" hidden data-nosnippet><devsite-feature-tooltip
      ack-key="AckCollectionsBookmarkTooltipDismiss"
      analytics-category="Site-Wide Custom Events"
      analytics-action-show="Callout Profile displayed"
      analytics-action-close="Callout Profile dismissed"
      analytics-label="Create Collection Callout"
      class="devsite-page-bookmark-tooltip nocontent"
      dismiss-button="true"
      id="devsite-collections-dropdown"
      
      dismiss-button-text="Dismiss"

      
      close-button-text="Got it">

    
    
      <devsite-bookmark></devsite-bookmark>
    

    <span slot="popout-heading">
      
      Stay organized with collections
    </span>
    <span slot="popout-contents">
      
      Save and categorize content based on your preferences.
    </span>
  </devsite-feature-tooltip></div>
  
      
    </h1>
  

  <devsite-toc class="devsite-nav"
    depth="1"
    devsite-toc-embedded
    >
  </devsite-toc>
  
    
  <div class="devsite-article-body clearfix
  ">

  
    
    
    <google-codelab-analytics gaid="UA-49880327-14" ga4id="G-JTFZSJVVVZ"></google-codelab-analytics>
    <google-codelab codelab-gaid="UA-81734179-1"
                    codelab-ga4id=""
                    doc-id="10qX9TKvfB_64UjXqTe4Agz5edwfbsibrhPSQhHTTwWE"
                    id="advanced-android-kotlin-training-testing-basics"
                    title="(Deprecated) Advanced Android in Kotlin 05.1: Testing Basics"
                    no-tooltip=""
                    environment="web"
                    category=""
                    feedback-link=""
                    layout="paginated"
                    >
      
        <google-codelab-step label="Welcome" duration="0" step="0">
          
            <google-codelab-about codelab-title="(Deprecated) Advanced Android in Kotlin 05.1: Testing Basics"
                                  authors="Google Developers Training team"
                                  last-updated="2024-12-11T16:41:40Z"
                                  >
            </google-codelab-about>
          
          <h2 class="step-title" id="0" data-text="Welcome" tabindex="-1">
              1. Welcome
          </h2>
          <aside class="warning"><p> This codelab is deprecated because it uses outdated tools and APIs.</p>
</aside>
<aside class="special"><p>This codelab is part of a series that guides you through how to test your Android project. We recommend that you do all the codelabs in order, because they progress through tasks step-by-step. The codelabs in this series are:</p>
<ul>
<li><a href="https://developer.android.com/codelabs/advanced-android-kotlin-training-testing-basics/#0" target="_blank">5.1 Testing Basics</a></li>
<li><a href="https://developer.android.com/codelabs/advanced-android-kotlin-training-testing-test-doubles" target="_blank">5.2 Dependency Injection and Test Doubles</a></li>
<li><a href="https://developer.android.com/codelabs/advanced-android-kotlin-training-testing-survey" target="_blank">5.3 Testing Coroutines and Jetpack integrations</a></li>
</ul>
</aside>
<h2 is-upgraded id="introduction" data-text="Introduction" tabindex="-1">Introduction</h2>
<p>When you implemented the first feature of your first app, you likely ran the code to verify that it worked as expected. You performed a <strong>test</strong>, albeit a <strong>manual test</strong>. As you continued to add and update features, you probably also continued to run your code and verify it works. But doing this manually every time is tiring, prone to mistakes, and does not scale.</p>
<p>Computers are great at scaling and automation! So developers at companies large and small write <strong>automated tests</strong>, which are tests that are run by software and do not require you to manually operate the app to verify the code works.</p>
<p>What you&#39;ll learn in this series of codelabs is how to create a collection of tests (known as a <strong>testing suite)</strong> for a real-world app.</p>
<p>This first codelab covers the basics of testing on Android, you&#39;ll write your first tests and learn how to test <code translate="no" dir="ltr">LiveData</code> and <code translate="no" dir="ltr">ViewModel</code>s.</p>
<h2 is-upgraded id="what-you-should-already-know" data-text="What you should already know" tabindex="-1">What you should already know</h2>
<p>You should be familiar with:</p>
<ul>
<li>The following core Android Jetpack libraries:  <a href="https://developer.android.com/topic/libraries/architecture/viewmodel" target="_blank"><code translate="no" dir="ltr">ViewModel</code></a> and  <a href="https://developer.android.com/topic/libraries/architecture/livedata" target="_blank"><code translate="no" dir="ltr">LiveData</code></a></li>
<li>Application architecture, following the pattern from the  <a href="https://developer.android.com/jetpack/docs/guide" target="_blank">Guide to app architecture</a> and  <a href="https://developer.android.com/courses/kotlin-android-fundamentals/toc" target="_blank">Android Fundamentals codelabs</a></li>
</ul>
<h2 class="checklist" is-upgraded id="what-youll-learn" data-text="What you'll learn" tabindex="-1">What you'll learn</h2>
<p>You&#39;ll learn about the following topics:</p>
<ul>
<li>How to write and run unit tests on Android</li>
<li>How to use Test Driven Development</li>
<li>How to choose instrumented tests and local tests</li>
</ul>
<p>You&#39;ll learn about the following libraries and code concepts:</p>
<ul>
<li><a href="https://junit.org/junit4/" target="_blank">JUnit4</a></li>
<li><a href="http://hamcrest.org/" target="_blank">Hamcrest</a></li>
<li><a href="https://developer.android.com/training/testing/set-up-project" target="_blank">AndroidX Test Library</a></li>
<li><a href="https://developer.android.com/reference/android/arch/core/executor/testing/package-summary" target="_blank">AndroidX Architecture Components Core Test Library</a></li>
</ul>
<h2 is-upgraded id="what-youll-do" data-text="What you'll do" tabindex="-1">What you'll do</h2>
<ul>
<li>Set up, run, and interpret both local and instrumented tests in Android.</li>
<li>Write unit tests in Android using JUnit4 and Hamcrest.</li>
<li>Write simple <code translate="no" dir="ltr">LiveData</code> and <code translate="no" dir="ltr">ViewModel</code> tests.</li>
</ul>


        </google-codelab-step>
      
        <google-codelab-step label="App overview" duration="0" step="1">
          
          <h2 class="step-title" id="1" data-text="App overview" tabindex="-1">
              2. App overview
          </h2>
          <p>In this series of codelabs, you&#39;ll be working with the TO-DO Notes app. The app allows you to write down tasks to complete and displays them in a list. You can then mark them as completed or not, filter them, or delete them.</p>
<p class="image-container"><img alt="e490df637e1bf10c.gif" style="width: 297.60px" src="/static/codelabs/advanced-android-kotlin-training-testing-basics/img/e490df637e1bf10c.gif"></p>
<p>This app is written in Kotlin, has several screens, uses Jetpack components, and follows the architecture from a  <a href="https://developer.android.com/jetpack/docs/guide" target="_blank">Guide to app architecture</a>. By learning how to test this app, you&#39;ll be able to test apps that use the same libraries and architecture.</p>


        </google-codelab-step>
      
        <google-codelab-step label="Getting Started" duration="0" step="2">
          
          <h2 class="step-title" id="2" data-text="Getting Started" tabindex="-1">
              3. Getting Started
          </h2>
          <p>To get started, download the code:</p>
<p><a href="https://github.com/google-developer-training/advanced-android-testing/archive/starter_code.zip" target="_blank"><button class="button button-primary button-with-icon"><span class="material-icons" aria-hidden="true" translate="no">file_download</span>Download Zip</button></a></p>
<p>Alternatively, you can clone the Github repository for the code:</p>
<div></div><devsite-code><pre translate="no" dir="ltr" is-upgraded>$ git clone https://github.com/google-developer-training/advanced-android-testing.git
$ cd android-testing
$ git checkout starter_code
</pre></devsite-code>
<aside class="special"><p><strong>Important:</strong> The starter code is on the <code translate="no" dir="ltr">starter_code</code> branch of the downloaded repo!</p>
</aside>
<p>You can browse the code in the  <a href="https://github.com/google-developer-training/advanced-android-testing" target="_blank"><strong>android-testing Github repository</strong></a>.</p>


        </google-codelab-step>
      
        <google-codelab-step label="Task: Familiarizing yourself with the code" duration="0" step="3">
          
          <h2 class="step-title" id="3" data-text="Task: Familiarizing yourself with the code" tabindex="-1">
              4. Task: Familiarizing yourself with the code
          </h2>
          <p>In this task you&#39;ll run the app and explore the code base.</p>
<aside class="special"><p>This TO-DO app starter code has the same testing setup (folders, library dependencies, and sample tests) as a brand new project created with Android Studio. All of the additional tests and test configuration setup will be covered in these codelabs so that you can apply the same testing practices to your own Android applications.</p>
<p class="image-container"><img alt="8266c6a9e6059f1.png" style="width: 610.00px" src="/static/codelabs/advanced-android-kotlin-training-testing-basics/img/8266c6a9e6059f1.png" srcset="https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/8266c6a9e6059f1_36.png 36w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/8266c6a9e6059f1_48.png 48w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/8266c6a9e6059f1_72.png 72w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/8266c6a9e6059f1_96.png 96w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/8266c6a9e6059f1_480.png 480w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/8266c6a9e6059f1_720.png 720w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/8266c6a9e6059f1_856.png 856w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/8266c6a9e6059f1_960.png 960w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/8266c6a9e6059f1_1440.png 1440w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/8266c6a9e6059f1_1920.png 1920w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/8266c6a9e6059f1_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"></p>
</aside>
<h2 is-upgraded id="step-1:-run-the-sample-app" data-text="Step 1: Run the sample app" tabindex="-1">Step 1: Run the sample app</h2>
<p>Once you&#39;ve downloaded the TO-DO app, open it in Android Studio and run it. It should compile. Explore the app by doing the following:</p>
<ul>
<li>Create a new task with the plus floating action button. Enter a title first, then enter additional information about the task. Save it with the green check FAB.</li>
<li>In the list of tasks, click on the title of the task you just completed and look at the detail screen for that task to see the rest of the description.</li>
<li>In the list or on the detail screen, check the checkbox of that task to set its status to <strong>Completed</strong>.</li>
<li>Go back to the tasks screen, open the filter menu, and filter the tasks by <strong>Active</strong> and <strong>Completed</strong> status.</li>
<li>Open the navigation drawer and click <strong>Statistics</strong>.</li>
<li>Got back to the overview screen, and from the navigation drawer menu, select <strong>Clear completed</strong> to delete all tasks with the <strong>Completed</strong> status</li>
</ul>
<p class="image-container"><img alt="483916536f10c42a.png" style="width: 284.50px" src="/static/codelabs/advanced-android-kotlin-training-testing-basics/img/483916536f10c42a.png" srcset="https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/483916536f10c42a_36.png 36w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/483916536f10c42a_48.png 48w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/483916536f10c42a_72.png 72w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/483916536f10c42a_96.png 96w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/483916536f10c42a_480.png 480w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/483916536f10c42a_720.png 720w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/483916536f10c42a_856.png 856w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/483916536f10c42a_960.png 960w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/483916536f10c42a_1440.png 1440w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/483916536f10c42a_1920.png 1920w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/483916536f10c42a_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"></p>
<h2 is-upgraded id="step-2:-explore-the-sample-app-code" data-text="Step 2: Explore the sample app code" tabindex="-1">Step 2: Explore the sample app code</h2>
<p>The TO-DO app is based off of the  <a href="https://github.com/android/architecture-samples" target="_blank">Architecture Blueprints</a> testing and architecture sample. The app follows the architecture from a  <a href="https://developer.android.com/jetpack/docs/guide" target="_blank">Guide to app architecture</a>. It uses ViewModels with Fragments, a repository, and Room. If you&#39;re familiar with any of the below examples, this app has a similar architecture:</p>
<ul>
<li><a href="https://developer.android.com/courses/kotlin-android-fundamentals/toc" target="_blank">Android Kotlin Fundamentals training codelabs</a></li>
<li><a href="https://codelabs.developers.google.com/advanced-android-kotlin-training/" target="_blank">Advanced Android training codelabs</a></li>
<li><a href="https://codelabs.developers.google.com/codelabs/android-room-with-a-view-kotlin/#0" target="_blank">Room with a View Codelab</a></li>
<li><a href="https://github.com/android/sunflower" target="_blank">Android Sunflower Sample</a></li>
<li><a href="https://www.udacity.com/course/developing-android-apps-with-kotlin--ud9012" target="_blank">Developing Android Apps with Kotlin Udacity training course</a></li>
</ul>
<p>It is more important that you understand the general architecture of the app than have a deep understanding of the logic at any one layer.</p>
<p class="image-container"><img alt="f2e425a052f7caf7.png" style="width: 624.00px" src="/static/codelabs/advanced-android-kotlin-training-testing-basics/img/f2e425a052f7caf7.png" srcset="https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/f2e425a052f7caf7_36.png 36w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/f2e425a052f7caf7_48.png 48w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/f2e425a052f7caf7_72.png 72w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/f2e425a052f7caf7_96.png 96w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/f2e425a052f7caf7_480.png 480w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/f2e425a052f7caf7_720.png 720w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/f2e425a052f7caf7_856.png 856w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/f2e425a052f7caf7_960.png 960w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/f2e425a052f7caf7_1440.png 1440w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/f2e425a052f7caf7_1920.png 1920w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/f2e425a052f7caf7_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"></p>
<p>Here&#39;s the summary of packages you&#39;ll find:</p>
<table class="vertical-rules">
<tr><td colspan="2" rowspan="1"><p><strong>Package: </strong><code translate="no" dir="ltr">com.example.android.architecture.blueprints.todoapp</code></p>
</td><td colspan="1" rowspan="1"></td></tr>
<tr><td colspan="1" rowspan="1"><p><code translate="no" dir="ltr">.addedittask</code></p>
</td><td colspan="1" rowspan="1"><p><strong>The add or edit a task screen:</strong> UI layer code for adding or editing a task.</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p><code translate="no" dir="ltr">.data</code></p>
</td><td colspan="1" rowspan="1"><p><strong>The data layer:</strong> This deals with the data layer of the tasks. It contains the database, network, and repository code.</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p><code translate="no" dir="ltr">.statistics</code></p>
</td><td colspan="1" rowspan="1"><p><strong>The statistics screen:</strong> UI layer code for the statistics screen.</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p><code translate="no" dir="ltr">.taskdetail</code></p>
</td><td colspan="1" rowspan="1"><p><strong>The task detail screen:</strong> UI layer code for a single task.</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p><code translate="no" dir="ltr">.tasks</code></p>
</td><td colspan="1" rowspan="1"><p><strong>The tasks screen:</strong> UI layer code for the list of all tasks.</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p><code translate="no" dir="ltr">.util</code></p>
</td><td colspan="1" rowspan="1"><p><strong>Utility classes:</strong> Shared classes used in various parts of the app, e.g. for the swipe refresh layout used on multiple screens.</p>
</td></tr>
</table>
<p><strong>Data layer (.data)</strong></p>
<p>This app includes a simulated networking layer, in the <strong>remote</strong> package, and a database layer, in the <strong>local</strong> package. For simplicity, in this project the networking layer is simulated with just a <code translate="no" dir="ltr">HashMap</code> with a delay, rather than making real network requests.</p>
<p>The <strong><code translate="no" dir="ltr">DefaultTasksRepository</code></strong> coordinates or mediates between the networking layer and the database layer and is what returns data to the UI layer.</p>
<p><strong>UI layer ( .addedittask, .statistics, .taskdetail, .tasks)</strong></p>
<p>Each of the UI layer packages contains a fragment and a view model, along with any other classes that are required for the UI (such as an adapter for the task list). The <strong><code translate="no" dir="ltr">TaskActivity</code></strong> is the activity that contains all of the fragments.</p>
<p><strong>Navigation</strong></p>
<p>Navigation for the app is controlled by the  <a href="https://developer.android.com/guide/navigation" target="_blank">Navigation component</a>. It is defined in the <code translate="no" dir="ltr">nav_graph.xml</code> file. Navigation is triggered in the view models using the <strong><code translate="no" dir="ltr">Event</code></strong> class; the view models also determine what arguments to pass. The fragments observe the <code translate="no" dir="ltr">Event</code>s and do the actual navigation between screens.</p>


        </google-codelab-step>
      
        <google-codelab-step label="Task: Running tests" duration="0" step="4">
          
          <h2 class="step-title" id="4" data-text="Task: Running tests" tabindex="-1">
              5. Task: Running tests
          </h2>
          <p>In this task, you&#39;ll run your first tests.</p>
<ol type="1">
<li>In Android Studio, open up the <strong>Project</strong> pane and find these three folders:</li>
</ol>
<ul>
<li><code translate="no" dir="ltr">com.example.android.architecture.blueprints.todoapp</code></li>
<li><code translate="no" dir="ltr">com.example.android.architecture.blueprints.todoapp (androidTest)</code></li>
<li><code translate="no" dir="ltr">com.example.android.architecture.blueprints.todoapp (test)</code></li>
</ul>
<p>These folders are known as  <a href="https://developer.android.com/studio/build#sourcesets" target="_blank">source sets</a>. Source sets are folders containing source code for your app. The source sets, which are colored green (<strong>androidTest</strong> and <strong>test</strong>) contain your tests. When you create a new Android project, you get the following three source sets by default. They are:</p>
<ul>
<li><strong><code translate="no" dir="ltr">main</code></strong>: Contains your app code. This code is shared amongst all different versions of the app you can build (known as  <a href="https://developer.android.com/studio/build/build-variants.html" target="_blank">build variants</a>)</li>
<li><strong><code translate="no" dir="ltr">androidTest</code></strong>: Contains tests known as instrumented tests.</li>
<li><strong><code translate="no" dir="ltr">test</code></strong>: Contains tests known as local tests.</li>
</ul>
<p>The difference between <strong>local tests</strong> and <strong>instrumented tests</strong> is in the way they are run.</p>
<h3 is-upgraded id="local-tests-test-source-set" data-text="Local tests (test source set)" tabindex="-1">Local tests (test source set)</h3>
<p>These tests are run locally on your development machine&#39;s JVM and do not require an emulator or physical device. Because of this, they run fast, but their fidelity is lower, meaning they act less like they would in the real world.</p>
<p>In Android Studio local tests are represented by a green and red triangle icon.</p>
<p class="image-container"><img alt="9060ac11ceb5e66e.png" style="width: 151.50px" src="/static/codelabs/advanced-android-kotlin-training-testing-basics/img/9060ac11ceb5e66e.png" srcset="https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/9060ac11ceb5e66e_36.png 36w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/9060ac11ceb5e66e_48.png 48w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/9060ac11ceb5e66e_72.png 72w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/9060ac11ceb5e66e_96.png 96w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/9060ac11ceb5e66e_480.png 480w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/9060ac11ceb5e66e_720.png 720w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/9060ac11ceb5e66e_856.png 856w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/9060ac11ceb5e66e_960.png 960w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/9060ac11ceb5e66e_1440.png 1440w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/9060ac11ceb5e66e_1920.png 1920w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/9060ac11ceb5e66e_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"></p>
<h3 is-upgraded id="instrumented-tests-androidtest-source-set" data-text="Instrumented tests (androidTest source set)" tabindex="-1">Instrumented tests (androidTest source set)</h3>
<p>These tests run on real or emulated Android devices, so they reflect what will happen in the real world, but are also much slower.</p>
<p>In Android Studio instrumented tests are represented by an Android with a green and red triangle icon.</p>
<p class="image-container"><img alt="6df04e9088327cf8.png" style="width: 256.20px" src="/static/codelabs/advanced-android-kotlin-training-testing-basics/img/6df04e9088327cf8.png" srcset="https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/6df04e9088327cf8_36.png 36w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/6df04e9088327cf8_48.png 48w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/6df04e9088327cf8_72.png 72w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/6df04e9088327cf8_96.png 96w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/6df04e9088327cf8_480.png 480w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/6df04e9088327cf8_720.png 720w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/6df04e9088327cf8_856.png 856w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/6df04e9088327cf8_960.png 960w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/6df04e9088327cf8_1440.png 1440w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/6df04e9088327cf8_1920.png 1920w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/6df04e9088327cf8_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"></p>
<h2 is-upgraded id="step-1:-run-a-local-test" data-text="Step 1: Run a local test" tabindex="-1">Step 1: Run a local test</h2>
<ol type="1">
<li>Open the <code translate="no" dir="ltr">test</code> folder until you find the <strong>ExampleUnitTest.kt</strong> file.</li>
<li>Right-click on it and select <strong>Run ExampleUnitTest</strong>.</li>
</ol>
<p>You should see the following output in the <strong>Run</strong> window at the bottom of the screen:</p>
<p class="image-container"><img alt="cb237d020d5ed709.png" style="width: 624.00px" src="/static/codelabs/advanced-android-kotlin-training-testing-basics/img/cb237d020d5ed709.png" srcset="https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/cb237d020d5ed709_36.png 36w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/cb237d020d5ed709_48.png 48w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/cb237d020d5ed709_72.png 72w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/cb237d020d5ed709_96.png 96w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/cb237d020d5ed709_480.png 480w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/cb237d020d5ed709_720.png 720w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/cb237d020d5ed709_856.png 856w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/cb237d020d5ed709_960.png 960w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/cb237d020d5ed709_1440.png 1440w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/cb237d020d5ed709_1920.png 1920w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/cb237d020d5ed709_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"></p>
<ol type="1" start="3">
<li>Notice the green checkmarks and expand the test results to confirm that one test called <code translate="no" dir="ltr">addition_isCorrect</code> passed. It&#39;s good to know that addition works as expected!</li>
</ol>
<aside class="special"><p><strong>Configuring the Run window</strong></p>
<p>Make sure that <strong>Show Passed</strong> (check mark icon) to show all passed tests, and <strong>Show Ignored</strong> (cancel sign icon) to show all ignored tests at the top of the <strong>Run</strong> window  are both turned on, otherwise you might not see the same information in your <strong>Run</strong> window.</p>
<p class="image-container"><img alt="411f4c01a14bb1e2.png" style="width: 238.50px" src="/static/codelabs/advanced-android-kotlin-training-testing-basics/img/411f4c01a14bb1e2.png" srcset="https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/411f4c01a14bb1e2_36.png 36w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/411f4c01a14bb1e2_48.png 48w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/411f4c01a14bb1e2_72.png 72w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/411f4c01a14bb1e2_96.png 96w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/411f4c01a14bb1e2_480.png 480w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/411f4c01a14bb1e2_720.png 720w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/411f4c01a14bb1e2_856.png 856w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/411f4c01a14bb1e2_960.png 960w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/411f4c01a14bb1e2_1440.png 1440w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/411f4c01a14bb1e2_1920.png 1920w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/411f4c01a14bb1e2_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"></p>
<p>For more information on configuring the <strong>Run</strong> window  <a href="https://developer.android.com/studio/test#view_the_test_results" target="_blank">see the documentation.</a></p>
</aside>
<aside class="special"><p><strong>Other ways to run tests</strong></p>
<p>The diagram below shows a few other ways you can run tests in Android Studio. Each is explained below.</p>
<p class="image-container"><img alt="b984b2bfc5a34299.png" style="width: 610.00px" src="/static/codelabs/advanced-android-kotlin-training-testing-basics/img/b984b2bfc5a34299.png" srcset="https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/b984b2bfc5a34299_36.png 36w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/b984b2bfc5a34299_48.png 48w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/b984b2bfc5a34299_72.png 72w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/b984b2bfc5a34299_96.png 96w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/b984b2bfc5a34299_480.png 480w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/b984b2bfc5a34299_720.png 720w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/b984b2bfc5a34299_856.png 856w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/b984b2bfc5a34299_960.png 960w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/b984b2bfc5a34299_1440.png 1440w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/b984b2bfc5a34299_1920.png 1920w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/b984b2bfc5a34299_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"></p>
<ol type="1">
<li>The <strong>Play</strong> button allows you to rerun the tests you&#39;ve just run. The button below (<strong>Play with a !</strong>) allows you to re-run failed tests.</li>
</ol>
<p class="image-container"><img alt="f43a4b77e349dacd.png" style="width: 52.00px" src="/static/codelabs/advanced-android-kotlin-training-testing-basics/img/f43a4b77e349dacd.png" srcset="https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/f43a4b77e349dacd_36.png 36w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/f43a4b77e349dacd_48.png 48w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/f43a4b77e349dacd_72.png 72w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/f43a4b77e349dacd_96.png 96w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/f43a4b77e349dacd_480.png 480w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/f43a4b77e349dacd_720.png 720w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/f43a4b77e349dacd_856.png 856w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/f43a4b77e349dacd_960.png 960w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/f43a4b77e349dacd_1440.png 1440w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/f43a4b77e349dacd_1920.png 1920w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/f43a4b77e349dacd_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"></p>
<ol type="1" start="2">
<li>You can right-click on any test or class and run them.</li>
<li>In your code, the side panel marks passed/failed tests with icons. You can click any of these to rerun tests.</li>
<li>You can right-click an entire source set (such as right-clicking the <code translate="no" dir="ltr">test</code> source set) and run <em>all</em> tests in that source set.</li>
<li>The <strong>Run configurations</strong> drop down in the toolbar allows you to select tests. Currently, <strong>ExampleUnitTest</strong> is selected.</li>
<li>You can right-click any specific test and run it.</li>
</ol>
<p>Note that you can also run tests from the command line, which includes generating HTML test result reports. You can learn more in the  <a href="https://developer.android.com/studio/test/command-line" target="_blank">Test from the command line</a> documentation.</p>
</aside>
<h2 is-upgraded id="step-2:-make-the-test-fail" data-text="Step 2: Make the test fail" tabindex="-1">Step 2: Make the test fail</h2>
<p>Below is the test that you just ran.</p>
<p><strong>ExampleUnitTest.kt</strong></p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-c1">// A test class is just a normal class</span>
<span class="devsite-syntax-kd">class</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nc">ExampleUnitTest</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>

<span class="devsite-syntax-w">   </span><span class="devsite-syntax-c1">// Each test is annotated with @Test (this is a Junit annotation)</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-nd">@Test</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-kd">fun</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">addition_isCorrect</span><span class="devsite-syntax-p">()</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-c1">// Here you are checking that 4 is the same as 2+2</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-n">assertEquals</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-m">4</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-m">2</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">+</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-m">2</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<p>Notice that tests</p>
<ul>
<li>are a class in one of the test source sets.</li>
<li>contain functions that start with the <code translate="no" dir="ltr">@Test</code> annotation (each function is a single test).</li>
<li>usually contain assertion statements.</li>
</ul>
<p>Android uses the testing library  <a href="https://junit.org/junit4/" target="_blank">JUnit</a> for testing (in this codelab JUnit4). Both assertions and the <code translate="no" dir="ltr">@Test</code> annotation come from JUnit.</p>
<p>An <strong>assertion</strong> is the core of your test. It&#39;s a code statement that checks that your code or app behaved as expected. In this case, the assertion is <code translate="no" dir="ltr">assertEquals(4, 2 + 2)</code> which checks that 4 is equal to 2 + 2.</p>
<p>To see what a failed test looks like add an assertion that you can easily see should fail. It&#39;ll check that 3 equals 1+1.</p>
<ol type="1">
<li>Add <code translate="no" dir="ltr">assertEquals(3, 1 + 1)</code> to the <code translate="no" dir="ltr">addition_isCorrect</code> test.</li>
</ol>
<p><strong>ExampleUnitTest.kt</strong></p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">class</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nc">ExampleUnitTest</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>

<span class="devsite-syntax-w">   </span><span class="devsite-syntax-c1">// Each test is annotated with @Test (this is a Junit annotation)</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-nd">@Test</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-kd">fun</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">addition_isCorrect</span><span class="devsite-syntax-p">()</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-n">assertEquals</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-m">4</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-m">2</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">+</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-m">2</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-n">assertEquals</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-m">3</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-m">1</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">+</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-m">1</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-c1">// This should fail</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<ol type="1" start="2">
<li>Run the test.</li>
<li>In the test results, notice an X next to the test.</li>
</ol>
<p class="image-container"><img alt="e80a71def694097f.png" style="width: 624.00px" src="/static/codelabs/advanced-android-kotlin-training-testing-basics/img/e80a71def694097f.png" srcset="https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/e80a71def694097f_36.png 36w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/e80a71def694097f_48.png 48w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/e80a71def694097f_72.png 72w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/e80a71def694097f_96.png 96w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/e80a71def694097f_480.png 480w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/e80a71def694097f_720.png 720w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/e80a71def694097f_856.png 856w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/e80a71def694097f_960.png 960w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/e80a71def694097f_1440.png 1440w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/e80a71def694097f_1920.png 1920w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/e80a71def694097f_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"></p>
<ol type="1" start="4">
<li>Also notice:</li>
</ol>
<ul>
<li>A single failed assertion fails the entire test.</li>
<li>You are told the expected value (3) versus the value that was actually calculated (2).</li>
<li>You are directed to the line of the failed assertion <code translate="no" dir="ltr">(ExampleUnitTest.kt:16)</code>.</li>
</ul>
<h2 is-upgraded id="step-3:-run-an-instrumented-test" data-text="Step 3: Run an instrumented test" tabindex="-1">Step 3: Run an instrumented test</h2>
<p>Instrumented tests are in the <code translate="no" dir="ltr">androidTest</code> source set.</p>
<ol type="1">
<li>Open the <code translate="no" dir="ltr">androidTest</code> source set.</li>
<li>Run the test called <code translate="no" dir="ltr">ExampleInstrumentedTest</code>.</li>
</ol>
<p><strong>ExampleInstrumentedTest</strong></p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-nd">@RunWith</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">AndroidJUnit4</span><span class="devsite-syntax-o">::</span><span class="devsite-syntax-n">class</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-kd">class</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nc">ExampleInstrumentedTest</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nd">@Test</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">fun</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">useAppContext</span><span class="devsite-syntax-p">()</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// Context of the app under test.</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">appContext</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">InstrumentationRegistry</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getInstrumentation</span><span class="devsite-syntax-p">().</span><span class="devsite-syntax-na">targetContext</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">assertEquals</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"com.example.android.architecture.blueprints.reactive"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-n">appContext</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">packageName</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<p>Unlike the local test, this test runs on a device (in the example below an emulated Pixel 2 phone):</p>
<p class="image-container"><img alt="cbc15c3229c7deec.png" style="width: 624.00px" src="/static/codelabs/advanced-android-kotlin-training-testing-basics/img/cbc15c3229c7deec.png" srcset="https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/cbc15c3229c7deec_36.png 36w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/cbc15c3229c7deec_48.png 48w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/cbc15c3229c7deec_72.png 72w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/cbc15c3229c7deec_96.png 96w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/cbc15c3229c7deec_480.png 480w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/cbc15c3229c7deec_720.png 720w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/cbc15c3229c7deec_856.png 856w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/cbc15c3229c7deec_960.png 960w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/cbc15c3229c7deec_1440.png 1440w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/cbc15c3229c7deec_1920.png 1920w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/cbc15c3229c7deec_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"></p>
<p>If you have a device attached or an emulator running, you should see the test run on the emulator.</p>
<aside class="special"><p><strong>What makes this an instrumented test?</strong></p>
<p>A test is an instrumented test if it needs or benefits from being run on an emulated or real device. Instrumented tests almost always use the Android OS or Android framework. In this test, you&#39;re getting a <code translate="no" dir="ltr">Context</code>, using  <a href="https://developer.android.com/reference/androidx/test/platform/app/InstrumentationRegistry.html" target="_blank"><code translate="no" dir="ltr">InstrumentationRegistry</code></a>. This allows you to get the package name and do a comparison.</p>
<p>The difference between this test and the last test is that you&#39;re using Android Framework code.</p>
</aside>


        </google-codelab-step>
      
        <google-codelab-step label="Task: Writing your first test" duration="0" step="5">
          
          <h2 class="step-title" id="5" data-text="Task: Writing your first test" tabindex="-1">
              6. Task: Writing your first test
          </h2>
          <p>In this task, you&#39;ll write tests for  <code translate="no" dir="ltr">getActiveAndCompleteStats</code>, which calculates the percentage of active and complete task stats for your app. You can see these numbers on the statistics screen of the app.</p>
<p class="image-container"><img alt="7abfbf08efb1b623.png" style="width: 223.27px" src="/static/codelabs/advanced-android-kotlin-training-testing-basics/img/7abfbf08efb1b623.png" srcset="https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/7abfbf08efb1b623_36.png 36w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/7abfbf08efb1b623_48.png 48w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/7abfbf08efb1b623_72.png 72w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/7abfbf08efb1b623_96.png 96w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/7abfbf08efb1b623_480.png 480w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/7abfbf08efb1b623_720.png 720w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/7abfbf08efb1b623_856.png 856w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/7abfbf08efb1b623_960.png 960w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/7abfbf08efb1b623_1440.png 1440w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/7abfbf08efb1b623_1920.png 1920w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/7abfbf08efb1b623_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"></p>
<h2 is-upgraded id="step-1:-create-a-test-class" data-text="Step 1: Create a test class" tabindex="-1">Step 1: Create a test class</h2>
<ol type="1">
<li>In the <code translate="no" dir="ltr">main</code> source set, in <code translate="no" dir="ltr">todoapp.statistics</code>, open <code translate="no" dir="ltr">StatisticsUtils.kt</code>.</li>
<li>Find the <code translate="no" dir="ltr">getActiveAndCompletedStats</code> function.</li>
</ol>
<p><strong>StatisticsUtils.kt</strong></p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">internal</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kd">fun</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">getActiveAndCompletedStats</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">tasks</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">List&lt;Task&gt;?)</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">StatsResult</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>

<span class="devsite-syntax-w">   </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">totalTasks</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">tasks</span><span class="devsite-syntax-o">!!</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">size</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">numberOfActiveTasks</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">tasks</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">count</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nb">it</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">isActive</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">activePercent</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-m">100</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">*</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">numberOfActiveTasks</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">/</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">totalTasks</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">completePercent</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-m">100</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">*</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">totalTasks</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">-</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">numberOfActiveTasks</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">/</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">totalTasks</span>

<span class="devsite-syntax-w">   </span><span class="devsite-syntax-k">return</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">StatsResult</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-n">activeTasksPercent</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">activePercent</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">toFloat</span><span class="devsite-syntax-p">(),</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-n">completedTasksPercent</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">completePercent</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">toFloat</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">  </span>
<span class="devsite-syntax-p">}</span>

<span class="devsite-syntax-kd">data</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kd">class</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nc">StatsResult</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">activeTasksPercent</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kt">Float</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">completedTasksPercent</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kt">Float</span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code>
<p>The <code translate="no" dir="ltr">getActiveAndCompletedStats</code> function accepts a list of tasks and returns a <code translate="no" dir="ltr">StatsResult</code>. <code translate="no" dir="ltr">StatsResult</code> is a data class that contains two numbers, the percentage of tasks that are <em>completed</em>, and the percentage that are <em>active</em>.</p>
<p>Android Studio gives you tools to generate test stubs to help you implement the tests for this function.</p>
<ol type="1" start="3">
<li>Right click <code translate="no" dir="ltr">getActiveAndCompletedStats</code> and select <strong>Generate</strong> &gt; <strong>Test</strong>.</li>
</ol>
<table class="vertical-rules">
<tr><td colspan="1" rowspan="1"><p class="image-container"><img src="/static/codelabs/advanced-android-kotlin-training-testing-basics/img/3b70c7efcc268ae9.png" srcset="https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/3b70c7efcc268ae9_36.png 36w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/3b70c7efcc268ae9_48.png 48w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/3b70c7efcc268ae9_72.png 72w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/3b70c7efcc268ae9_96.png 96w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/3b70c7efcc268ae9_480.png 480w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/3b70c7efcc268ae9_720.png 720w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/3b70c7efcc268ae9_856.png 856w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/3b70c7efcc268ae9_960.png 960w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/3b70c7efcc268ae9_1440.png 1440w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/3b70c7efcc268ae9_1920.png 1920w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/3b70c7efcc268ae9_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"></p>
</td><td colspan="1" rowspan="1"><p class="image-container"><img src="/static/codelabs/advanced-android-kotlin-training-testing-basics/img/7d73d6de328d5aa0.png" srcset="https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/7d73d6de328d5aa0_36.png 36w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/7d73d6de328d5aa0_48.png 48w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/7d73d6de328d5aa0_72.png 72w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/7d73d6de328d5aa0_96.png 96w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/7d73d6de328d5aa0_480.png 480w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/7d73d6de328d5aa0_720.png 720w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/7d73d6de328d5aa0_856.png 856w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/7d73d6de328d5aa0_960.png 960w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/7d73d6de328d5aa0_1440.png 1440w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/7d73d6de328d5aa0_1920.png 1920w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/7d73d6de328d5aa0_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"></p>
</td></tr>
</table>
<p>The <strong>Create Test</strong> dialog opens:</p>
<p class="image-container"><img alt="1eb4d2bcea2a5323.png" style="width: 624.00px" src="/static/codelabs/advanced-android-kotlin-training-testing-basics/img/1eb4d2bcea2a5323.png" srcset="https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/1eb4d2bcea2a5323_36.png 36w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/1eb4d2bcea2a5323_48.png 48w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/1eb4d2bcea2a5323_72.png 72w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/1eb4d2bcea2a5323_96.png 96w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/1eb4d2bcea2a5323_480.png 480w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/1eb4d2bcea2a5323_720.png 720w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/1eb4d2bcea2a5323_856.png 856w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/1eb4d2bcea2a5323_960.png 960w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/1eb4d2bcea2a5323_1440.png 1440w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/1eb4d2bcea2a5323_1920.png 1920w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/1eb4d2bcea2a5323_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"></p>
<ol type="1" start="4">
<li>Change the <strong>Class name:</strong> to <code translate="no" dir="ltr">StatisticsUtilsTest</code> (instead of <code translate="no" dir="ltr">StatisticsUtilsKtTest</code>; it&#39;s slightly nicer not to have KT in the test class name).</li>
<li><strong>Keep the rest of the defaults.</strong> JUnit 4 is the appropriate testing library. The destination package is correct (it mirrors the location of the <code translate="no" dir="ltr">StatisticsUtils</code> class) and you don&#39;t need to check any of the check boxes (this just generates extra code, but you&#39;ll write your test from scratch).</li>
<li>Press <strong>OK</strong>.</li>
</ol>
<p>The <strong>Choose Destination Directory</strong> dialog opens: <img alt="3342fe4d590f2129.png" style="width: 624.00px" src="/static/codelabs/advanced-android-kotlin-training-testing-basics/img/3342fe4d590f2129.png" srcset="https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/3342fe4d590f2129_36.png 36w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/3342fe4d590f2129_48.png 48w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/3342fe4d590f2129_72.png 72w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/3342fe4d590f2129_96.png 96w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/3342fe4d590f2129_480.png 480w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/3342fe4d590f2129_720.png 720w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/3342fe4d590f2129_856.png 856w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/3342fe4d590f2129_960.png 960w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/3342fe4d590f2129_1440.png 1440w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/3342fe4d590f2129_1920.png 1920w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/3342fe4d590f2129_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"></p>
<p>You&#39;ll be making a local test because your function is doing math calculations and won&#39;t include any Android specific code. So, there&#39;s no need to run it on a real or emulated device.</p>
<ol type="1" start="7">
<li>Select the <strong><code translate="no" dir="ltr">test</code></strong> directory (not <code translate="no" dir="ltr">androidTest</code>) because you&#39;ll be writing local tests.</li>
<li>Click <strong>OK</strong>.</li>
<li>Notice the generated the <code translate="no" dir="ltr">StatisticsUtilsTest</code> class in <code translate="no" dir="ltr">test/statistics/</code>.</li>
</ol>
<p class="image-container"><img alt="2fcd839638adcdfc.png" style="width: 624.00px" src="/static/codelabs/advanced-android-kotlin-training-testing-basics/img/2fcd839638adcdfc.png" srcset="https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/2fcd839638adcdfc_36.png 36w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/2fcd839638adcdfc_48.png 48w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/2fcd839638adcdfc_72.png 72w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/2fcd839638adcdfc_96.png 96w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/2fcd839638adcdfc_480.png 480w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/2fcd839638adcdfc_720.png 720w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/2fcd839638adcdfc_856.png 856w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/2fcd839638adcdfc_960.png 960w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/2fcd839638adcdfc_1440.png 1440w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/2fcd839638adcdfc_1920.png 1920w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/2fcd839638adcdfc_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"></p>
<h2 is-upgraded id="step-2:-write-your-first-test-function" data-text="Step 2: Write your first test function" tabindex="-1">Step 2: Write your first test function</h2>
<p>You&#39;re going to write a test that checks:</p>
<ul>
<li>if there are no completed tasks and one active task,</li>
<li>that the percentage of active tests is 100%,</li>
<li>and the percentage of completed tasks is 0%.</li>
</ul>
<ol type="1">
<li>Open <code translate="no" dir="ltr">StatisticsUtilsTest</code>.</li>
<li>Create a function named <code translate="no" dir="ltr">getActiveAndCompletedStats_noCompleted_returnsHundredZero</code>.</li>
</ol>
<p><strong>StatisticsUtilsTest.kt</strong></p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">class</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nc">StatisticsUtilsTest</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">fun</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">getActiveAndCompletedStats_noCompleted_returnsHundredZero</span><span class="devsite-syntax-p">()</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// Create an active task</span>

<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// Call your function</span>

<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// Check the result</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<ol type="1" start="3">
<li>Add the <code translate="no" dir="ltr">@Test</code> annotation above the function name to indicate it&#39;s a test.</li>
<li>Create a list of tasks.</li>
</ol>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-c1">// Create an active task </span>
<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">tasks</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">listOf&lt;Task&gt;</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-n">Task</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"title"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s">"desc"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">isCompleted</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kc">false</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code>
<ol type="1" start="5">
<li>Call <code translate="no" dir="ltr">getActiveAndCompletedStats</code> with these tasks.</li>
</ol>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-c1">// Call your function</span>
<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">result</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">getActiveAndCompletedStats</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">tasks</span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code>
<ol type="1" start="6">
<li>Check that <code translate="no" dir="ltr">result</code> is what you expected, using assertions.</li>
</ol>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-c1">// Check the result</span>
<span class="devsite-syntax-n">assertEquals</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">result</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">completedTasksPercent</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-m">0f</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-n">assertEquals</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">result</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">activeTasksPercent</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-m">100f</span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code>
<p>Here is the complete code.</p>
<p><strong>StatisticsUtilsTest.kt</strong></p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">class</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nc">StatisticsUtilsTest</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nd">@Test</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">fun</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">getActiveAndCompletedStats_noCompleted_returnsHundredZero</span><span class="devsite-syntax-p">()</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>

<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// Create an active task (the false makes this active)</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">tasks</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">listOf&lt;Task&gt;</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-n">Task</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"title"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s">"desc"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">isCompleted</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kc">false</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// Call your function</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">result</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">getActiveAndCompletedStats</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">tasks</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// Check the result</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">assertEquals</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">result</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">completedTasksPercent</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-m">0f</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">assertEquals</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">result</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">activeTasksPercent</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-m">100f</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<ol type="1" start="7">
<li>Run the test (Right click <code translate="no" dir="ltr">StatisticsUtilsTest</code> and select <strong>Run</strong>).</li>
</ol>
<p>It should pass:</p>
<p class="image-container"><img alt="2d4423767733aac8.png" style="width: 624.00px" src="/static/codelabs/advanced-android-kotlin-training-testing-basics/img/2d4423767733aac8.png" srcset="https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/2d4423767733aac8_36.png 36w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/2d4423767733aac8_48.png 48w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/2d4423767733aac8_72.png 72w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/2d4423767733aac8_96.png 96w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/2d4423767733aac8_480.png 480w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/2d4423767733aac8_720.png 720w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/2d4423767733aac8_856.png 856w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/2d4423767733aac8_960.png 960w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/2d4423767733aac8_1440.png 1440w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/2d4423767733aac8_1920.png 1920w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/2d4423767733aac8_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"></p>
<h2 is-upgraded id="step-3:-add-the-hamcrest-dependency" data-text="Step 3: Add the Hamcrest dependency" tabindex="-1">Step 3: Add the Hamcrest dependency</h2>
<p>Because your tests act as documentation of what your code does, it&#39;s nice when they are human readable. Compare the following two assertions:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-n">assertEquals</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">result</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">completedTasksPercent</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-m">0f</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-c1">// versus</span>

<span class="devsite-syntax-n">assertThat</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">result</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">completedTasksPercent</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">`is`</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-m">0f</span><span class="devsite-syntax-p">))</span>
</code></pre></devsite-code>
<p>The second assertion reads much more like a human sentence. It is written using an assertion framework called  <a href="http://hamcrest.org/" target="_blank">Hamcrest</a>. Another good tool for writing readable assertions is the  <a href="https://truth.dev/" target="_blank">Truth library</a>. You&#39;ll be using Hamcrest in this codelab to write assertions.</p>
<ol type="1">
<li>Open <code translate="no" dir="ltr">build.grade (Module: app)</code> and add the following dependency.</li>
</ol>
<p><strong>app/build.gradle</strong></p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-n">dependencies</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// Other dependencies</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">testImplementation</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s">"org.hamcrest:hamcrest-all:</span><span class="devsite-syntax-si">$</span><span class="devsite-syntax-n">hamcrestVersion</span><span class="devsite-syntax-s">"</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<aside class="special"><p><strong>Note:</strong> All of the dependency versions are defined in the project&#39;s <code translate="no" dir="ltr">build.gradle</code> file in the <code translate="no" dir="ltr">ext {}</code> block. These library versions have been tested together for this codelab.</p>
</aside>
<p>Usually, you use <strong><code translate="no" dir="ltr">implementation</code></strong> when adding a dependency, yet here you&#39;re using <strong><code translate="no" dir="ltr">testImplementation</code></strong>. When you&#39;re ready to share your app with the world, it is best not to bloat the size of your APK with any of the test code or dependencies in your app. You can designate whether a library should be included in the main or test code by using  <a href="https://docs.gradle.org/current/userguide/declaring_dependencies.html" target="_blank">gradle configurations</a>. The most common configurations are:</p>
<ul>
<li><code translate="no" dir="ltr">implementation</code>—The dependency is available in <strong>all</strong> source sets, including the test source sets.</li>
<li><code translate="no" dir="ltr">testImplementation</code>—The dependency is only available in the test source set.</li>
<li><code translate="no" dir="ltr">androidTestImplementation</code>—The dependency is only available in the <code translate="no" dir="ltr">androidTest</code> source set.</li>
</ul>
<p>Which configuration you use, defines where the dependency can be used. If you write:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-n">testImplementation</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s">"org.hamcrest:hamcrest-all:</span><span class="devsite-syntax-si">$</span><span class="devsite-syntax-n">hamcrestVersion</span><span class="devsite-syntax-s">"</span>
</code></pre></devsite-code>
<p>This means that Hamcrest will only be available in the test source set. It also ensures that Hamcrest will not be included in your final app.</p>
<h2 is-upgraded id="step-4:-use-hamcrest-to-write-assertions" data-text="Step 4: Use Hamcrest to write assertions" tabindex="-1">Step 4: Use Hamcrest to write assertions</h2>
<ol type="1">
<li>Update the <code translate="no" dir="ltr">getActiveAndCompletedStats_noCompleted_returnsHundredZero()</code> test to use Hamcrest&#39;s  <a href="http://hamcrest.org/JavaHamcrest/javadoc/1.3/org/hamcrest/MatcherAssert.html#assertThat(java.lang.String,%20T,%20org.hamcrest.Matcher)" target="_blank"><code translate="no" dir="ltr">assertThat</code></a> instead of <code translate="no" dir="ltr">assertEquals</code>.</li>
</ol>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-c1">// REPLACE</span>
<span class="devsite-syntax-n">assertEquals</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">result</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">completedTasksPercent</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-m">0f</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-n">assertEquals</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">result</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">activeTasksPercent</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-m">100f</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-c1">// WITH</span>
<span class="devsite-syntax-n">assertThat</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">result</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">activeTasksPercent</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">`is`</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-m">100f</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-n">assertThat</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">result</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">completedTasksPercent</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">`is`</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-m">0f</span><span class="devsite-syntax-p">))</span>
</code></pre></devsite-code>
<p>Note you can use the import <code translate="no" dir="ltr">import org.hamcrest.Matchers.</code>is`` if prompted.</p>
<p>The final test will look like the code below.</p>
<p><strong>StatisticsUtilsTest.kt</strong></p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-k">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">com.example.android.architecture.blueprints.todoapp.data.Task</span>
<span class="devsite-syntax-k">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">org.hamcrest.MatcherAssert.assertThat</span>
<span class="devsite-syntax-k">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">org.hamcrest.Matchers.`is`</span>
<span class="devsite-syntax-k">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">org.junit.Test</span>

<span class="devsite-syntax-kd">class</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nc">StatisticsUtilsTest</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nd">@Test</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">fun</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">getActiveAndCompletedStats_noCompleted_returnsHundredZero</span><span class="devsite-syntax-p">()</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>

<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// Create an active tasks (the false makes this active)</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">tasks</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">listOf&lt;Task&gt;</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-n">Task</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"title"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s">"desc"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">isCompleted</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kc">false</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// Call your function</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">result</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">getActiveAndCompletedStats</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">tasks</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// Check the result</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">assertThat</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">result</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">activeTasksPercent</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">`is`</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-m">100f</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">assertThat</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">result</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">completedTasksPercent</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">`is`</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-m">0f</span><span class="devsite-syntax-p">))</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<aside class="special"><p><strong>Why are there back quotes in the </strong><strong><code translate="no" dir="ltr">is</code></strong><strong>?</strong></p>
<p>In Kotlin,  <a href="https://kotlinlang.org/docs/reference/typecasts.html#type-checks-and-casts-is-and-as" target="_blank"><code translate="no" dir="ltr">is</code></a> is a reserved keyword, so to differentiate this as the Hamcrest  <a href="http://hamcrest.org/JavaHamcrest/javadoc/1.3/org/hamcrest/core/Is.html" target="_blank"><code translate="no" dir="ltr">is</code></a>, you use back ticks.</p>
</aside>
<ol type="1" start="2">
<li>Run your updated test to confirm it still works!</li>
</ol>
<p>This codelab will <em>not</em> teach you all the ins and outs of Hamcrest, so if you&#39;d like to learn more check out the  <a href="http://hamcrest.org/JavaHamcrest/tutorial" target="_blank">official tutorial</a>.</p>
<aside class="special"><p>There are a few other strategies you can use for writing readable tests. Both of which are demonstrated in the test you just wrote.</p>
<p><strong>Given, When, Then</strong></p>
<p>One way to think about the structure of a test is to follow the <strong>Given, When, Then</strong> testing mnemonic. This divides your test into three parts:</p>
<ul>
<li><strong>Given:</strong> Setup the objects and the state of the app that you need for your test. For this test, what is &#34;given&#34; is that you have a list of tasks where the task is active.</li>
<li><strong>When:</strong> Do the actual action on the object you&#39;re testing. For this test, it means calling <code translate="no" dir="ltr">getActiveAndCompletedStats</code>.</li>
<li><strong>Then:</strong> This is where you actually check what happens when you do the action where you check if the test passed or failed. This is usually a number of assert function calls. For this test, it is the two asserts that check you have the correct active and completed percentages.</li>
</ul>
<p>Note that the&#34; Arrange, Act, Assert&#34; (AAA) testing mnemonic is a similar concept.</p>
<p><strong>Test Names</strong></p>
<p>Test names are meant to be descriptive. The naming convention in this codelab is:</p>
</aside>
<p><code translate="no" dir="ltr">subjectUnderTest_actionOrInput_resultState</code></p>
<ul>
<li>Subject under test is the method or class that is being tested (<code translate="no" dir="ltr">getActiveAndCompletedStats</code>).</li>
<li>Next is the action or input (<code translate="no" dir="ltr">noCompleted</code>).</li>
<li>Finally you have the expected result (<code translate="no" dir="ltr">returnsHundredZero</code>).</li>
</ul>


        </google-codelab-step>
      
        <google-codelab-step label="Task: Writing more tests" duration="0" step="6">
          
          <h2 class="step-title" id="6" data-text="Task: Writing more tests" tabindex="-1">
              7. Task: Writing more tests
          </h2>
          <p>This is an optional task for practice.</p>
<p>In this task, you&#39;ll write more tests using JUnit and Hamcrest. You&#39;ll also write tests using a strategy derived from the program practice of <strong>Test Driven Development</strong>. Test Driven Development or TDD is a school of programming thought that says instead of writing your feature code first, you write your tests first. Then you write your feature code with the goal of passing your tests.</p>
<h2 is-upgraded id="step-1.-write-the-tests" data-text="Step 1. Write the tests" tabindex="-1">Step 1. Write the tests</h2>
<p>Write tests for when you have a normal task list:</p>
<ol type="1">
<li>If there is one completed task and no active tasks, the <code translate="no" dir="ltr">activeTasks</code> percentage should be <code translate="no" dir="ltr">0f</code>, and the completed tasks percentage should be <code translate="no" dir="ltr">100f</code> .</li>
<li>If there are two completed tasks and three active tasks, the completed percentage should be <code translate="no" dir="ltr">40f</code> and the active percentage should be <code translate="no" dir="ltr">60f</code>.</li>
</ol>
<h2 is-upgraded id="step-2.-write-a-test-for-a-bug" data-text="Step 2. Write a test for a bug" tabindex="-1">Step 2. Write a test for a bug</h2>
<p>The code for the <code translate="no" dir="ltr">getActiveAndCompletedStats</code> as written has a bug. Notice how it does not properly handle what happens if the list is empty or null. In both of these cases, both percentages should be zero.</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">internal</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kd">fun</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">getActiveAndCompletedStats</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">tasks</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">List&lt;Task&gt;?)</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">StatsResult</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>

<span class="devsite-syntax-w">   </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">totalTasks</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">tasks</span><span class="devsite-syntax-o">!!</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">size</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">numberOfActiveTasks</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">tasks</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">count</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nb">it</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">isActive</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">activePercent</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-m">100</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">*</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">numberOfActiveTasks</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">/</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">totalTasks</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">completePercent</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-m">100</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">*</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">totalTasks</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">-</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">numberOfActiveTasks</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">/</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">totalTasks</span>

<span class="devsite-syntax-w">   </span><span class="devsite-syntax-k">return</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">StatsResult</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-n">activeTasksPercent</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">activePercent</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">toFloat</span><span class="devsite-syntax-p">(),</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-n">completedTasksPercent</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">completePercent</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">toFloat</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">  </span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<p>To fix the code and write tests, you&#39;ll use test driven development. Test Driven Development follows these steps.</p>
<ol type="1">
<li>Write the test, using the Given, When, Then structure, and with a name that follows the convention.</li>
<li>Confirm the test fails.</li>
<li>Write the minimal code to get the test to pass.</li>
<li>Repeat for all tests!</li>
</ol>
<p class="image-container"><img alt="5408e4b11ef2d3eb.png" style="width: 624.00px" src="/static/codelabs/advanced-android-kotlin-training-testing-basics/img/5408e4b11ef2d3eb.png" srcset="https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/5408e4b11ef2d3eb_36.png 36w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/5408e4b11ef2d3eb_48.png 48w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/5408e4b11ef2d3eb_72.png 72w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/5408e4b11ef2d3eb_96.png 96w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/5408e4b11ef2d3eb_480.png 480w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/5408e4b11ef2d3eb_720.png 720w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/5408e4b11ef2d3eb_856.png 856w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/5408e4b11ef2d3eb_960.png 960w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/5408e4b11ef2d3eb_1440.png 1440w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/5408e4b11ef2d3eb_1920.png 1920w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/5408e4b11ef2d3eb_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"></p>
<p>Instead of starting by fixing the bug, you&#39;ll start by writing the tests first. Then you can confirm that you have tests protecting you from ever accidentally reintroducing these bugs in the future.</p>
<ol type="1">
<li>If there is an empty list (<code translate="no" dir="ltr">emptyList()</code>), then both percentages should be 0f.</li>
<li>If there was an error loading the tasks, the list will be <code translate="no" dir="ltr">null</code>, and both percentages should be 0f.</li>
<li><strong>Run</strong> your tests and confirm that they <strong>fail</strong>:</li>
</ol>
<p class="image-container"><img alt="c7952b977e893441.png" style="width: 624.00px" src="/static/codelabs/advanced-android-kotlin-training-testing-basics/img/c7952b977e893441.png" srcset="https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/c7952b977e893441_36.png 36w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/c7952b977e893441_48.png 48w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/c7952b977e893441_72.png 72w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/c7952b977e893441_96.png 96w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/c7952b977e893441_480.png 480w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/c7952b977e893441_720.png 720w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/c7952b977e893441_856.png 856w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/c7952b977e893441_960.png 960w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/c7952b977e893441_1440.png 1440w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/c7952b977e893441_1920.png 1920w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/c7952b977e893441_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"></p>
<aside class="special"><p><strong>Why fail?</strong></p>
<p>Confirming that your test fails is helpful. If your test passes when you haven&#39;t written the code to make it pass, then you know something strange is going on. Perhaps the test always passes (which is a useless test) or the test is not using the right code.</p>
</aside>
<h2 is-upgraded id="step-3.-fix-the-bug" data-text="Step 3. Fix the bug" tabindex="-1">Step 3. Fix the bug</h2>
<p>Now that you have your tests, fix the bug.</p>
<ol type="1">
<li>Fix the bug in <code translate="no" dir="ltr">getActiveAndCompletedStats</code> by returning <code translate="no" dir="ltr">0f</code> if <code translate="no" dir="ltr">tasks</code> is <code translate="no" dir="ltr">null</code> or empty:</li>
</ol>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">internal</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kd">fun</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">getActiveAndCompletedStats</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">tasks</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">List&lt;Task&gt;?)</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">StatsResult</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-k">return</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-k">if</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">tasks</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">==</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kc">null</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">||</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">tasks</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">isEmpty</span><span class="devsite-syntax-p">())</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">StatsResult</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-m">0f</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-m">0f</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-k">else</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">totalTasks</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">tasks</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">size</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">numberOfActiveTasks</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">tasks</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">count</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nb">it</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">isActive</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">StatsResult</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-n">activeTasksPercent</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-m">100f</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">*</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">numberOfActiveTasks</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">/</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">tasks</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">size</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-n">completedTasksPercent</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-m">100f</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">*</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">totalTasks</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">-</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">numberOfActiveTasks</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">/</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">tasks</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">size</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<ol type="1" start="2">
<li><strong>Run</strong> your tests again and confirm that all tests now pass!</li>
</ol>
<p class="image-container"><img alt="cf077166a26ac325.png" style="width: 624.00px" src="/static/codelabs/advanced-android-kotlin-training-testing-basics/img/cf077166a26ac325.png" srcset="https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/cf077166a26ac325_36.png 36w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/cf077166a26ac325_48.png 48w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/cf077166a26ac325_72.png 72w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/cf077166a26ac325_96.png 96w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/cf077166a26ac325_480.png 480w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/cf077166a26ac325_720.png 720w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/cf077166a26ac325_856.png 856w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/cf077166a26ac325_960.png 960w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/cf077166a26ac325_1440.png 1440w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/cf077166a26ac325_1920.png 1920w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/cf077166a26ac325_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"></p>
<p>By following TDD and writing the tests first, you&#39;ve helped ensure that:</p>
<ul>
<li>New functionality always has associated tests; thus your tests act as documentation of what your code does.</li>
<li>Your tests check for the correct results and protect against bugs you&#39;ve already seen.</li>
</ul>
<aside class="special"><p>To learn more about Test Driven Development in Android, you can watch  <a href="https://youtu.be/pK7W5npkhho?t=222" target="_blank">Test-Driven Development on Android with the Android Testing Support Library (Google I/O ‘17)</a> (note the Android Testing Support Library has been replaced by  <a href="https://developer.android.com/training/testing/set-up-project" target="_blank">AndroidX Test</a> which you&#39;ll learn about later).</p>
</aside>
<h2 is-upgraded id="solution:-writing-more-tests" data-text="Solution: Writing more tests" tabindex="-1">Solution: Writing more tests</h2>
<p>Here are all the tests and the corresponding feature code.</p>
<p><strong>StatisticsUtilsTest.kt</strong></p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">class</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nc">StatisticsUtilsTest</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nd">@Test</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">fun</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">getActiveAndCompletedStats_noCompleted_returnsHundredZero</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">tasks</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">listOf</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-n">Task</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"title"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s">"desc"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">isCompleted</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kc">false</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// When the list of tasks is computed with an active task</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">result</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">getActiveAndCompletedStats</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">tasks</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// Then the percentages are 100 and 0</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">assertThat</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">result</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">activeTasksPercent</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">`is`</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-m">100f</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">assertThat</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">result</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">completedTasksPercent</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">`is`</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-m">0f</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nd">@Test</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">fun</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">getActiveAndCompletedStats_noActive_returnsZeroHundred</span><span class="devsite-syntax-p">()</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">tasks</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">listOf</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-n">Task</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"title"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s">"desc"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">isCompleted</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kc">true</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// When the list of tasks is computed with a completed task</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">result</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">getActiveAndCompletedStats</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">tasks</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// Then the percentages are 0 and 100</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">assertThat</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">result</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">activeTasksPercent</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">`is`</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-m">0f</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">assertThat</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">result</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">completedTasksPercent</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">`is`</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-m">100f</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nd">@Test</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">fun</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">getActiveAndCompletedStats_both_returnsFortySixty</span><span class="devsite-syntax-p">()</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// Given 3 completed tasks and 2 active tasks</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">tasks</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">listOf</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-n">Task</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"title"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s">"desc"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">isCompleted</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kc">true</span><span class="devsite-syntax-p">),</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-n">Task</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"title"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s">"desc"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">isCompleted</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kc">true</span><span class="devsite-syntax-p">),</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-n">Task</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"title"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s">"desc"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">isCompleted</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kc">true</span><span class="devsite-syntax-p">),</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-n">Task</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"title"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s">"desc"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">isCompleted</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kc">false</span><span class="devsite-syntax-p">),</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-n">Task</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"title"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s">"desc"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">isCompleted</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kc">false</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// When the list of tasks is computed</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">result</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">getActiveAndCompletedStats</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">tasks</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// Then the result is 40-60</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">assertThat</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">result</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">activeTasksPercent</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">`is`</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-m">40f</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">assertThat</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">result</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">completedTasksPercent</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">`is`</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-m">60f</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nd">@Test</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">fun</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">getActiveAndCompletedStats_error_returnsZeros</span><span class="devsite-syntax-p">()</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// When there's an error loading stats</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">result</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">getActiveAndCompletedStats</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-kc">null</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// Both active and completed tasks are 0</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">assertThat</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">result</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">activeTasksPercent</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">`is`</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-m">0f</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">assertThat</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">result</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">completedTasksPercent</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">`is`</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-m">0f</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nd">@Test</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">fun</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">getActiveAndCompletedStats_empty_returnsZeros</span><span class="devsite-syntax-p">()</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// When there are no tasks</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">result</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">getActiveAndCompletedStats</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">emptyList</span><span class="devsite-syntax-p">())</span>

<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// Both active and completed tasks are 0</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">assertThat</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">result</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">activeTasksPercent</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">`is`</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-m">0f</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">assertThat</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">result</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">completedTasksPercent</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">`is`</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-m">0f</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<p><strong>StatisticsUtils.kt</strong></p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">internal</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kd">fun</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">getActiveAndCompletedStats</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">tasks</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">List&lt;Task&gt;?)</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">StatsResult</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-k">return</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-k">if</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">tasks</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">==</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kc">null</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">||</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">tasks</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">isEmpty</span><span class="devsite-syntax-p">())</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">StatsResult</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-m">0f</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-m">0f</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-k">else</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">totalTasks</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">tasks</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">size</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">numberOfActiveTasks</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">tasks</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">count</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nb">it</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">isActive</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">StatsResult</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-n">activeTasksPercent</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-m">100f</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">*</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">numberOfActiveTasks</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">/</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">tasks</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">size</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-n">completedTasksPercent</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-m">100f</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">*</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">totalTasks</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">-</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">numberOfActiveTasks</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">/</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">tasks</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">size</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<p>Great job with the basics of writing and running tests! Next you&#39;ll learn how to write basic <code translate="no" dir="ltr">ViewModel</code> and <code translate="no" dir="ltr">LiveData</code> tests.</p>


        </google-codelab-step>
      
        <google-codelab-step label="Task: Setting up a ViewModel Test with AndroidX Test" duration="0" step="7">
          
          <h2 class="step-title" id="7" data-text="Task: Setting up a ViewModel Test with AndroidX Test" tabindex="-1">
              8. Task: Setting up a ViewModel Test with AndroidX Test
          </h2>
          <p>In the rest of the codelab, you&#39;ll learn how to write tests for two Android classes that are common across most apps -  <a href="https://developer.android.com/topic/libraries/architecture/viewmodel" target="_blank"><code translate="no" dir="ltr">ViewModel</code></a> and  <a href="https://developer.android.com/topic/libraries/architecture/livedata" target="_blank"><code translate="no" dir="ltr">LiveData</code></a>.</p>
<p>You start by writing tests for the <code translate="no" dir="ltr">TasksViewModel</code>.</p>
<p>You are going to focus on tests that have all their logic in the view model and do not rely on repository code. Repository code involves asynchronous code, databases, and network calls, which all add test complexity. You&#39;re going to avoid that for now and focus on writing tests for ViewModel functionality that doesn&#39;t directly test any thing in the repository.</p>
<p class="image-container"><img alt="16d3cf02ddd17181.png" style="width: 624.00px" src="/static/codelabs/advanced-android-kotlin-training-testing-basics/img/16d3cf02ddd17181.png" srcset="https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/16d3cf02ddd17181_36.png 36w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/16d3cf02ddd17181_48.png 48w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/16d3cf02ddd17181_72.png 72w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/16d3cf02ddd17181_96.png 96w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/16d3cf02ddd17181_480.png 480w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/16d3cf02ddd17181_720.png 720w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/16d3cf02ddd17181_856.png 856w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/16d3cf02ddd17181_960.png 960w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/16d3cf02ddd17181_1440.png 1440w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/16d3cf02ddd17181_1920.png 1920w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/16d3cf02ddd17181_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"></p>
<p>The test you&#39;ll write will check that when you call the <code translate="no" dir="ltr">addNewTask</code> method, the <code translate="no" dir="ltr">Event</code> for opening the new task window is fired. Here&#39;s the app code you&#39;ll be testing.</p>
<p><strong>TasksViewModel.kt</strong></p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">fun</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">addNewTask</span><span class="devsite-syntax-p">()</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-n">_newTaskEvent</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">value</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Event</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-kt">Unit</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<aside class="special"><p><strong>What is Event?</strong></p>
<p>In the TO-DO app you are using a custom <code translate="no" dir="ltr">Event</code> class to make <code translate="no" dir="ltr">LiveData</code> represent one-time events (like navigation or a snack bar popping up). The <code translate="no" dir="ltr">Event</code> <code translate="no" dir="ltr">LiveData</code> is observed in the <code translate="no" dir="ltr">TasksFragment</code>.</p>
</aside>
<p>In this case, the <code translate="no" dir="ltr">newTaskEvent</code> represents that the plus FAB has been pressed, and you should go to the <code translate="no" dir="ltr">AddEditTaskFragment</code>. You can learn more about events  <a href="https://medium.com/androiddevelopers/livedata-with-snackbar-navigation-and-other-events-the-singleliveevent-case-ac2622673150" target="_blank">here</a> and  <a href="https://codelabs.developers.google.com/codelabs/kotlin-android-training-live-data/index.html?index=..%2F..android-kotlin-fundamentals" target="_blank">here</a>.</p>
<h2 is-upgraded id="step-1.-make-a-tasksviewmodeltest-class" data-text="Step 1. Make a TasksViewModelTest class" tabindex="-1">Step 1. Make a TasksViewModelTest class</h2>
<p>Following the same steps you did for <code translate="no" dir="ltr">StatisticsUtilTest</code>, in this step, you create a test file for <code translate="no" dir="ltr">TasksViewModelTest</code>.</p>
<ol type="1">
<li>Open the class you wish to test, in the <code translate="no" dir="ltr">tasks</code> package,  <code translate="no" dir="ltr">TasksViewModel.</code></li>
<li>In the code, right-click on the class name <strong><code translate="no" dir="ltr">TasksViewModel</code></strong> -&gt; <strong>Generate</strong> -&gt; <strong>Test</strong>.</li>
</ol>
<p class="image-container"><img alt="61f8170f7ba50cf6.png" style="width: 340.50px" src="/static/codelabs/advanced-android-kotlin-training-testing-basics/img/61f8170f7ba50cf6.png" srcset="https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/61f8170f7ba50cf6_36.png 36w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/61f8170f7ba50cf6_48.png 48w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/61f8170f7ba50cf6_72.png 72w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/61f8170f7ba50cf6_96.png 96w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/61f8170f7ba50cf6_480.png 480w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/61f8170f7ba50cf6_720.png 720w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/61f8170f7ba50cf6_856.png 856w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/61f8170f7ba50cf6_960.png 960w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/61f8170f7ba50cf6_1440.png 1440w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/61f8170f7ba50cf6_1920.png 1920w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/61f8170f7ba50cf6_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"></p>
<aside class="special"><p>You can also use the  <a href="https://developer.android.com/studio/intro/keyboard-shortcuts" target="_blank">keyboard shortcut</a> to open up the <strong>Generate</strong> menu:</p>
<ul>
<li>Windows/Linux: <strong>Alt + Insert</strong></li>
<li>Mac**: Command + N**</li>
</ul>
</aside>
<ol type="1" start="3">
<li>On the <strong>Create Test</strong> screen, click <strong>OK</strong> to accept (no need to change any of the default settings).</li>
<li>On the <strong>Choose Destination Directory</strong> dialog, choose the <strong>test</strong> directory.</li>
</ol>
<aside class="special"><p><strong>Why make the view model test a local test?</strong></p>
<p>Pure view model tests usually go in the <code translate="no" dir="ltr">test</code> source set because the view model code shouldn&#39;t rely on the Android framework or OS. As a local test, it will also run faster because you run the tests on your local machine and not on an emulator or device.</p>
</aside>
<h2 is-upgraded id="step-2.-start-writing-your-viewmodel-test" data-text="Step 2. Start Writing your ViewModel Test" tabindex="-1">Step 2. Start Writing your ViewModel Test</h2>
<p>In this step you add a view model test to test that when you call the <code translate="no" dir="ltr">addNewTask</code> method, the <code translate="no" dir="ltr">Event</code> for opening the new task window is fired.</p>
<ol type="1">
<li>Create a new test called <code translate="no" dir="ltr">addNewTask_setsNewTaskEvent</code>.</li>
</ol>
<p><strong>TasksViewModelTest.kt</strong></p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">class</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nc">TasksViewModelTest</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nd">@Test</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">fun</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">addNewTask_setsNewTaskEvent</span><span class="devsite-syntax-p">()</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>

<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// Given a fresh TasksViewModel</span>


<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// When adding a new task</span>


<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// Then the new task event is triggered</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-w">    </span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<p><strong>What about application context?</strong></p>
<p>When you create an instance of <code translate="no" dir="ltr">TasksViewModel</code> to test, its constructor requires an  <a href="https://developer.android.com/reference/android/app/Application.html" target="_blank">Application Context</a>. But in this test, you aren&#39;t creating a full application with activities and UI and fragments, so how do you get an application context?</p>
<p><strong>TasksViewModelTest.kt</strong></p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-c1">// Given a fresh ViewModel</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">tasksViewModel</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">TasksViewModel</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-o">???</span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code>
<p>The  <a href="https://developer.android.com/training/testing/set-up-project" target="_blank"><strong>AndroidX Test libraries</strong></a> include classes and methods that provide you with versions of components like Applications and Activities that are meant for tests. When you have a <strong>local test</strong> where you need <strong>simulated Android framework classes</strong> (such as an Application Context), follow these steps to properly set up AndroidX Test:</p>
<ol type="1">
<li>Add the  <a href="https://developer.android.com/training/testing/set-up-project" target="_blank">AndroidX Test</a> core and ext dependencies</li>
<li>Add the  <a href="http://robolectric.org/" target="_blank">Robolectric Testing library</a> dependency</li>
<li>Annotate the class with the AndroidJunit4 test runner</li>
<li>Write AndroidX Test code</li>
</ol>
<p>You are going to complete these steps and <strong><em>then</em></strong> understand what they do together.</p>
<aside class="special"><p><strong>Note:</strong> If your view model does <strong>not</strong> need an Application context, you can construct the view model without needing any additional libraries.</p>
</aside>
<h2 is-upgraded id="step-3.-add-the-gradle-dependencies" data-text="Step 3. Add the gradle dependencies" tabindex="-1">Step 3. Add the gradle dependencies</h2>
<ol type="1">
<li>Copy these dependencies into your app module&#39;s <code translate="no" dir="ltr">build.gradle</code> file to add the core AndroidX Test core and ext dependencies, as well as the Robolectric testing dependency.</li>
</ol>
<p><strong>app/build.gradle</strong></p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// AndroidX Test - JVM testing</span>
<span class="devsite-syntax-n">testImplementation</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s">"androidx.test.ext:junit-ktx:</span><span class="devsite-syntax-si">$</span><span class="devsite-syntax-n">androidXTestExtKotlinRunnerVersion</span><span class="devsite-syntax-s">"</span>

<span class="devsite-syntax-n">testImplementation</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s">"androidx.test:core-ktx:</span><span class="devsite-syntax-si">$</span><span class="devsite-syntax-n">androidXTestCoreVersion</span><span class="devsite-syntax-s">"</span>

<span class="devsite-syntax-n">testImplementation</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s">"org.robolectric:robolectric:</span><span class="devsite-syntax-si">$</span><span class="devsite-syntax-n">robolectricVersion</span><span class="devsite-syntax-s">"</span>
</code></pre></devsite-code>
<h2 is-upgraded id="step-4.-add-junit-test-runner" data-text="Step 4. Add JUnit Test Runner" tabindex="-1">Step 4. Add JUnit Test Runner</h2>
<ol type="1">
<li>Add <code translate="no" dir="ltr">@RunWith(AndroidJUnit4::class)</code>above your test class.</li>
</ol>
<p><strong>TasksViewModelTest.kt</strong></p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-nd">@Config</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">sdk</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">[</span><span class="devsite-syntax-m">30</span><span class="devsite-syntax-o">]</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-c1">// Remove when Robolectric supports SDK 31</span>
<span class="devsite-syntax-nd">@RunWith</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">AndroidJUnit4</span><span class="devsite-syntax-o">::</span><span class="devsite-syntax-n">class</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-kd">class</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nc">TasksViewModelTest</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// Test code</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<h2 is-upgraded id="step-5.-use-androidx-test" data-text="Step 5. Use AndroidX Test" tabindex="-1">Step 5. Use AndroidX Test</h2>
<p>At this point, you can use the AndroidX Test library. This includes the method  <a href="https://developer.android.com/reference/androidx/test/core/app/ApplicationProvider.html#getApplicationContext()" target="_blank"><code translate="no" dir="ltr">ApplicationProvider.getApplicationContext</code></a>, which gets an Application Context.</p>
<ol type="1">
<li>Create a <code translate="no" dir="ltr">TasksViewModel</code> using <code translate="no" dir="ltr">ApplicationProvider.getApplicationContext()</code>from the AndroidX test library.</li>
</ol>
<p><strong>TasksViewModelTest.kt</strong></p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-c1">// Given a fresh ViewModel</span>
<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">tasksViewModel</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">TasksViewModel</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">ApplicationProvider</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getApplicationContext</span><span class="devsite-syntax-p">())</span>
</code></pre></devsite-code>
<ol type="1" start="2">
<li>Call <code translate="no" dir="ltr">addNewTask</code> on <code translate="no" dir="ltr">tasksViewModel</code>.</li>
</ol>
<p><strong>TasksViewModelTest.kt</strong></p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-n">tasksViewModel</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">addNewTask</span><span class="devsite-syntax-p">()</span>
</code></pre></devsite-code>
<p>At this point your test should look like the code below.</p>
<p><strong>TasksViewModelTest.kt</strong></p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-w">    </span><span class="devsite-syntax-nd">@Test</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">fun</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">addNewTask_setsNewTaskEvent</span><span class="devsite-syntax-p">()</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>

<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// Given a fresh ViewModel</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">tasksViewModel</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">TasksViewModel</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">ApplicationProvider</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getApplicationContext</span><span class="devsite-syntax-p">())</span>

<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// When adding a new task</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">tasksViewModel</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">addNewTask</span><span class="devsite-syntax-p">()</span>

<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// Then the new task event is triggered</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// TODO test LiveData</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<ol type="1" start="3">
<li><strong>Run</strong> your test to confirm it works.</li>
</ol>
<h2 is-upgraded id="concept:-how-does-androidx-test-work" data-text="Concept: How does AndroidX Test work?" tabindex="-1">Concept: How does AndroidX Test work?</h2>
<h3 is-upgraded id="what-is-androidx-test" data-text="What is AndroidX Test?" tabindex="-1">What is AndroidX Test?</h3>
<p>AndroidX Test is a collection of libraries for testing. It includes classes and methods that give you versions of components like Applications and Activities, that are meant for tests. As an example, this code you wrote is an example of an AndroidX Test function for getting an application context.</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-n">ApplicationProvider</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getApplicationContext</span><span class="devsite-syntax-p">()</span>
</code></pre></devsite-code>
<p>One of the benefits of the AndroidX Test APIs is that they are built to work both for local tests <strong>and</strong> instrumented tests.  This is nice because:</p>
<ul>
<li>You can run the same test as a local test or an instrumented test.</li>
<li>You don&#39;t need to learn different testing APIs for local vs. instrumented tests.</li>
</ul>
<p>For example, because you wrote your code using AndroidX Test libraries, you can move your <code translate="no" dir="ltr">TasksViewModelTest</code> class from the <code translate="no" dir="ltr">test</code> folder to the <code translate="no" dir="ltr">androidTest</code> folder and the tests will still run. The <code translate="no" dir="ltr">getApplicationContext()</code> works slightly differently depending on whether it&#39;s being run as a local or instrumented test:</p>
<ul>
<li>If it&#39;s an instrumented test, it will get the actual Application context provided when it boots up an emulator or connects to a real device.</li>
<li>If it&#39;s a local test, it uses a simulated Android environment.</li>
</ul>
<h3 is-upgraded id="what-is-robolectric" data-text="What is Robolectric?" tabindex="-1">What is Robolectric?</h3>
<p>The simulated Android environment that AndroidX Test uses for local tests is provided by  <a href="http://robolectric.org/" target="_blank"><strong>Robolectric</strong></a>.  <a href="http://robolectric.org/" target="_blank"><strong>Robolectric</strong></a> is a library that creates a simulated Android environment for tests and runs faster than booting up an emulator or running on a device. Without the Robolectric dependency, you&#39;ll get this error:</p>
<p class="image-container"><img alt="d1001b21699f5c2f.png" style="width: 624.00px" src="/static/codelabs/advanced-android-kotlin-training-testing-basics/img/d1001b21699f5c2f.png" srcset="https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/d1001b21699f5c2f_36.png 36w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/d1001b21699f5c2f_48.png 48w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/d1001b21699f5c2f_72.png 72w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/d1001b21699f5c2f_96.png 96w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/d1001b21699f5c2f_480.png 480w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/d1001b21699f5c2f_720.png 720w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/d1001b21699f5c2f_856.png 856w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/d1001b21699f5c2f_960.png 960w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/d1001b21699f5c2f_1440.png 1440w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/d1001b21699f5c2f_1920.png 1920w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/d1001b21699f5c2f_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"></p>
<h3 is-upgraded id="what-does-runwithandroidjunit4::class-do" data-text="What does @RunWith(AndroidJUnit4::class) do?" tabindex="-1">What does <code translate="no" dir="ltr">@RunWith(AndroidJUnit4::class)</code> do?</h3>
<p>A  <a href="https://github.com/junit-team/junit4/wiki/Test-runners" target="_blank"><strong>test runner</strong></a> is a JUnit component that runs tests. Without a test runner, your tests would not run. There&#39;s a default test runner provided by JUnit that you get automatically.  <a href="https://github.com/junit-team/junit4/wiki/Test-runners#runwith-annotation" target="_blank"><code translate="no" dir="ltr">@RunWith</code></a> swaps out that default test runner.</p>
<p>The  <a href="https://developer.android.com/training/testing/junit-runner#kotlin" target="_blank"><strong><code translate="no" dir="ltr">AndroidJUnit4</code></strong></a> test runner allows for AndroidX Test to run your test differently depending on whether they are instrumented or local tests.</p>
<p class="image-container"><img alt="4820a5757fd79a44.png" style="width: 624.00px" src="/static/codelabs/advanced-android-kotlin-training-testing-basics/img/4820a5757fd79a44.png" srcset="https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/4820a5757fd79a44_36.png 36w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/4820a5757fd79a44_48.png 48w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/4820a5757fd79a44_72.png 72w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/4820a5757fd79a44_96.png 96w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/4820a5757fd79a44_480.png 480w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/4820a5757fd79a44_720.png 720w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/4820a5757fd79a44_856.png 856w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/4820a5757fd79a44_960.png 960w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/4820a5757fd79a44_1440.png 1440w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/4820a5757fd79a44_1920.png 1920w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/4820a5757fd79a44_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"></p>
<h2 is-upgraded id="step-6.-fix-robolectric-warnings" data-text="Step 6. Fix Robolectric Warnings" tabindex="-1">Step 6. Fix Robolectric Warnings</h2>
<p>When you run the code, notice that Robolectric is used.</p>
<p class="image-container"><img alt="b10f151c068efc90.png" style="width: 624.00px" src="/static/codelabs/advanced-android-kotlin-training-testing-basics/img/b10f151c068efc90.png" srcset="https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/b10f151c068efc90_36.png 36w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/b10f151c068efc90_48.png 48w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/b10f151c068efc90_72.png 72w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/b10f151c068efc90_96.png 96w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/b10f151c068efc90_480.png 480w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/b10f151c068efc90_720.png 720w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/b10f151c068efc90_856.png 856w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/b10f151c068efc90_960.png 960w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/b10f151c068efc90_1440.png 1440w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/b10f151c068efc90_1920.png 1920w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/b10f151c068efc90_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"></p>
<p>Because of AndroidX Test and the AndroidJunit4 test runner, this is done without you directly writing a single line of Robolectric code!</p>
<p><strong>You might notice two warnings.</strong></p>
<ul>
<li><code translate="no" dir="ltr">No such manifest file: ./AndroidManifest.xml</code></li>
<li><code translate="no" dir="ltr">"WARN: Android SDK 29 requires Java 9..."</code></li>
</ul>
<p>You can fix the <code translate="no" dir="ltr">No such manifest file: ./AndroidManifest.xml</code> warning, by updating your gradle file.</p>
<ol type="1">
<li>Add the following line to your gradle file so that the correct Android manifest is used. The  <a href="https://developer.android.com/training/testing/unit-testing/local-unit-tests#include-framework-dependencies" target="_blank">includeAndroidResources</a> option allows you to access android resources in your unit tests, including your AndroidManifest file.</li>
</ol>
<p><strong>app/build.gradle</strong></p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// Always show the result of every unit test when running via command line, even if it passes.</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">testOptions</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">unitTests</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">includeAndroidResources</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kc">true</span>

<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// ... </span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<p>The warning <code translate="no" dir="ltr">"WARN: Android SDK 29 requires Java 9..."</code> is more complicated.  <a href="https://github.com/robolectric/robolectric/releases/tag/robolectric-4.3" target="_blank">Running tests on Android Q requires Java 9</a>. Instead of trying to configure Android Studio to use Java 9, for this codelab, keep your target and compile SDK at 28.</p>
<p><strong>In summary:</strong></p>
<ul>
<li>Pure view model tests can usually go in the <code translate="no" dir="ltr">test</code> source set because their code doesn&#39;t usually require Android.</li>
<li>You can use the  <a href="https://developer.android.com/training/testing/set-up-project" target="_blank"><strong>AndroidX test library</strong></a> to get test versions of components like Applications and Activities.</li>
<li>If you need to run simulated Android code in your <code translate="no" dir="ltr">test</code> source set, you can add the Robolectric dependency and the <code translate="no" dir="ltr">@RunWith(AndroidJUnit4::class)</code> annotation.</li>
</ul>
<p>Congratulations, you&#39;re using both the AndroidX testing library and Robolectric to run a test. Your test is not finished (you haven&#39;t written an assert statement yet, it just says <code translate="no" dir="ltr">// TODO test LiveData</code>). You&#39;ll learn to write assert statements with <code translate="no" dir="ltr">LiveData</code> next.</p>


        </google-codelab-step>
      
        <google-codelab-step label="Task: Writing Assertions for LiveData" duration="0" step="8">
          
          <h2 class="step-title" id="8" data-text="Task: Writing Assertions for LiveData" tabindex="-1">
              9. Task: Writing Assertions for LiveData
          </h2>
          <p>In this task, you&#39;ll learn how to correctly assert <code translate="no" dir="ltr">LiveData</code> value.</p>
<p>Here&#39;s where you left off without <code translate="no" dir="ltr">addNewTask_setsNewTaskEvent</code> view model test.</p>
<p><strong>TasksViewModelTest.kt</strong></p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-w">    </span><span class="devsite-syntax-nd">@Test</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">fun</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">addNewTask_setsNewTaskEvent</span><span class="devsite-syntax-p">()</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>

<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// Given a fresh ViewModel</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">tasksViewModel</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">TasksViewModel</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">ApplicationProvider</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getApplicationContext</span><span class="devsite-syntax-p">())</span>

<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// When adding a new task</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">tasksViewModel</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">addNewTask</span><span class="devsite-syntax-p">()</span>

<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// Then the new task event is triggered</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// TODO test LiveData</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-w">    </span>
</code></pre></devsite-code>
<p>To test <code translate="no" dir="ltr">LiveData</code> it&#39;s recommended you do two things:</p>
<ol type="1">
<li>Use <code translate="no" dir="ltr">InstantTaskExecutorRule</code></li>
<li>Ensure <code translate="no" dir="ltr">LiveData</code> observation</li>
</ol>
<h2 is-upgraded id="step-1.-use-instanttaskexecutorrule" data-text="Step 1. Use InstantTaskExecutorRule" tabindex="-1">Step 1. Use InstantTaskExecutorRule</h2>
<p><a href="https://developer.android.com/reference/android/arch/core/executor/testing/InstantTaskExecutorRule" target="_blank"><strong><code translate="no" dir="ltr">InstantTaskExecutorRule</code></strong></a> is a  <a href="https://junit.org/junit4/javadoc/4.12/org/junit/Rule.html" target="_blank"><strong>JUnit Rule</strong></a>. When you use it with the <code translate="no" dir="ltr">@get:Rule</code> annotation, it causes some code in the  <a href="https://developer.android.com/reference/android/arch/core/executor/testing/InstantTaskExecutorRule" target="_blank"><code translate="no" dir="ltr">InstantTaskExecutorRule</code></a> class to be run before and after the tests (to see the exact code, you can use the keyboard shortcut <strong>Command+B</strong> to view the file).</p>
<p>This rule runs all Architecture Components-related background jobs in the same thread so that the test results happen synchronously, and in a repeatable order. <strong>When you write tests that include testing LiveData, use this rule!</strong></p>
<ol type="1">
<li>Add the gradle dependency for the  <a href="https://developer.android.com/reference/android/arch/core/executor/testing/package-summary" target="_blank">Architecture Components core testing library</a> (which contains this rule).</li>
</ol>
<p><strong>app/build.gradle</strong></p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-n">testImplementation</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s">"androidx.arch.core:core-testing:</span><span class="devsite-syntax-si">$</span><span class="devsite-syntax-n">archTestingVersion</span><span class="devsite-syntax-s">"</span>
</code></pre></devsite-code>
<ol type="1" start="2">
<li>Open <code translate="no" dir="ltr">TasksViewModelTest.kt</code></li>
<li>Add the <code translate="no" dir="ltr">InstantTaskExecutorRule</code> inside the <code translate="no" dir="ltr">TasksViewModelTest</code> class.</li>
</ol>
<p><strong>TasksViewModelTest.kt</strong></p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">class</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nc">TasksViewModelTest</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nd">@get</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">Rule</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">var</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">instantExecutorRule</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">InstantTaskExecutorRule</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">    </span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// Other code...</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<h2 is-upgraded id="step-2.-add-the-livedatatestutil.kt-class" data-text="Step 2. Add the LiveDataTestUtil.kt Class" tabindex="-1">Step 2. Add the LiveDataTestUtil.kt Class</h2>
<p>Your next step is to make sure the <code translate="no" dir="ltr">LiveData</code> you&#39;re testing is observed.</p>
<p>When you use <code translate="no" dir="ltr">LiveData</code>, you commonly have an activity or fragment ( <a href="https://developer.android.com/reference/android/arch/lifecycle/LifecycleOwner" target="_blank"><code translate="no" dir="ltr">LifecycleOwner</code></a>) observe the <code translate="no" dir="ltr">LiveData</code>.</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-n">viewModel</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">resultLiveData</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">observe</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">fragment</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Observer</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// Observer code here</span>
<span class="devsite-syntax-p">})</span>
</code></pre></devsite-code>
<p>This observation is important. You need active observers on <code translate="no" dir="ltr">LiveData</code> to</p>
<ul>
<li>trigger any <code translate="no" dir="ltr">onChanged</code> events.</li>
<li>trigger any  <a href="https://developer.android.com/reference/kotlin/androidx/lifecycle/Transformations.html" target="_blank">Transformations</a>.</li>
</ul>
<p>To get the expected <code translate="no" dir="ltr">LiveData</code> behavior for your view model&#39;s <code translate="no" dir="ltr">LiveData</code>, you need to observe the <code translate="no" dir="ltr">LiveData</code> with a <code translate="no" dir="ltr">LifecycleOwner</code>.</p>
<p>This poses a problem: in your <code translate="no" dir="ltr">TasksViewModel</code> test, you don&#39;t have an activity or fragment to observe your <code translate="no" dir="ltr">LiveData</code>. To get around this, you can use the  <a href="https://developer.android.com/reference/kotlin/androidx/lifecycle/LiveData#observeforever" target="_blank"><code translate="no" dir="ltr">observeForever</code></a> method, which ensures the <code translate="no" dir="ltr">LiveData</code> is constantly observed, without needing a <code translate="no" dir="ltr">LifecycleOwner</code>. When you <code translate="no" dir="ltr">observeForever</code>, you need to remember to  <a href="https://developer.android.com/reference/kotlin/androidx/lifecycle/LiveData#removeobserver" target="_blank">remove your observer</a> or risk an observer leak.</p>
<p>This looks something like the code below. Examine it:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-nd">@Test</span>
<span class="devsite-syntax-kd">fun</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">addNewTask_setsNewTaskEvent</span><span class="devsite-syntax-p">()</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// Given a fresh ViewModel</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">tasksViewModel</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">TasksViewModel</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">ApplicationProvider</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getApplicationContext</span><span class="devsite-syntax-p">())</span>


<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// Create observer - no need for it to do anything!</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">observer</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Observer&lt;Event&lt;Unit&gt;</span>&gt;<span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{}</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-k">try</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>

<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// Observe the LiveData forever</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">tasksViewModel</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">newTaskEvent</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">observeForever</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">observer</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// When adding a new task</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">tasksViewModel</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">addNewTask</span><span class="devsite-syntax-p">()</span>

<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// Then the new task event is triggered</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">value</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">tasksViewModel</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">newTaskEvent</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">value</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">assertThat</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">value</span><span class="devsite-syntax-o">?.</span><span class="devsite-syntax-na">getContentIfNotHandled</span><span class="devsite-syntax-p">(),</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">not</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">nullValue</span><span class="devsite-syntax-p">())))</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-k">finally</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// Whatever happens, don't forget to remove the observer!</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">tasksViewModel</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">newTaskEvent</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">removeObserver</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">observer</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<p>That&#39;s a lot of boilerplate code to observe a single <code translate="no" dir="ltr">LiveData</code> in a test! There are a few ways to get rid of this boilerplate. You&#39;re going to create an extension function called <code translate="no" dir="ltr">LiveDataTestUtil</code> to make adding observers simpler.</p>
<ol type="1">
<li>Make a new Kotlin file called <code translate="no" dir="ltr">LiveDataTestUtil.kt</code> in your <code translate="no" dir="ltr">test</code> source set.</li>
</ol>
<p class="image-container"><img alt="55518dc429736238.png" style="width: 624.00px" src="/static/codelabs/advanced-android-kotlin-training-testing-basics/img/55518dc429736238.png" srcset="https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/55518dc429736238_36.png 36w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/55518dc429736238_48.png 48w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/55518dc429736238_72.png 72w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/55518dc429736238_96.png 96w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/55518dc429736238_480.png 480w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/55518dc429736238_720.png 720w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/55518dc429736238_856.png 856w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/55518dc429736238_960.png 960w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/55518dc429736238_1440.png 1440w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/55518dc429736238_1920.png 1920w,https://developer.android.com/static/codelabs/advanced-android-kotlin-training-testing-basics/img/55518dc429736238_2880.png 2880w" sizes="(max-width: 840px) 100vw, 856px"></p>
<ol type="1" start="2">
<li>Copy and paste the code below.</li>
</ol>
<p><strong>LiveDataTestUtil.kt</strong></p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-k">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">androidx.annotation.VisibleForTesting</span>
<span class="devsite-syntax-k">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">androidx.lifecycle.LiveData</span>
<span class="devsite-syntax-k">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">androidx.lifecycle.Observer</span>
<span class="devsite-syntax-k">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">java.util.concurrent.CountDownLatch</span>
<span class="devsite-syntax-k">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">java.util.concurrent.TimeUnit</span>
<span class="devsite-syntax-k">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">java.util.concurrent.TimeoutException</span>


<span class="devsite-syntax-nd">@VisibleForTesting</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">otherwise</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">VisibleForTesting</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">NONE</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-kd">fun</span><span class="devsite-syntax-w"> </span>&lt;<span class="devsite-syntax-nf">T</span>&gt;<span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">LiveData&lt;T&gt;</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getOrAwaitValue</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">time</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kt">Long</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-m">2</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">timeUnit</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">TimeUnit</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">TimeUnit</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">SECONDS</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">afterObserve</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">()</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">-</span>&gt;<span class="devsite-syntax-w"> </span><span class="devsite-syntax-kt">Unit</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{}</span>
<span class="devsite-syntax-p">):</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">T</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">var</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">data</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">T? </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kc">null</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">latch</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">CountDownLatch</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-m">1</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">observer</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-k">object</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nc">Observer&lt;T&gt;</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-kd">override</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kd">fun</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">onChanged</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">o</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">T?)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-n">data</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">o</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-n">latch</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">countDown</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-k">this</span><span class="devsite-syntax-nd">@getOrAwaitValue.removeObserver</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-k">this</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-k">this</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">observeForever</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">observer</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-k">try</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">afterObserve</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">invoke</span><span class="devsite-syntax-p">()</span>

<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// Don't wait indefinitely if the LiveData is not set.</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-k">if</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-o">!</span><span class="devsite-syntax-n">latch</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">await</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">time</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">timeUnit</span><span class="devsite-syntax-p">))</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-k">throw</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">TimeoutException</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"LiveData value was never set."</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">}</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-k">finally</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-k">this</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">removeObserver</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">observer</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nd">@Suppress</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"UNCHECKED_CAST"</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-k">return</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">data</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-k">as</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">T</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<p>This is a fairly complicated method. It creates a  <a href="https://kotlinlang.org/docs/reference/extensions.html" target="_blank">Kotlin extension function</a> called <code translate="no" dir="ltr">getOrAwaitValue</code> which adds an observer, gets the <code translate="no" dir="ltr">LiveData</code> value, and then cleans up the observer—basically a short, reusable version of the <code translate="no" dir="ltr">observeForever</code> code shown above. For a full explanation of this class, check out this  <a href="https://medium.com/androiddevelopers/unit-testing-livedata-and-other-common-observability-problems-bb477262eb04" target="_blank">blog post</a>.</p>
<aside class="special"><p><strong>Tip:</strong> As you write your own tests that test <code translate="no" dir="ltr">LiveData</code>, you can similarly copy and use this class in your code.</p>
</aside>
<h2 is-upgraded id="step-3.-use-getorawaitvalue-to-write-the-assertion" data-text="Step 3. Use getOrAwaitValue to write the assertion" tabindex="-1">Step 3. Use getOrAwaitValue to write the assertion</h2>
<p>In this step, you use the <code translate="no" dir="ltr">getOrAwaitValue</code> method and write an assert statement that checks that the <code translate="no" dir="ltr">newTaskEvent</code> was triggered.</p>
<ol type="1">
<li>Get the <code translate="no" dir="ltr">LiveData</code> value for <code translate="no" dir="ltr">newTaskEvent</code> using <code translate="no" dir="ltr">getOrAwaitValue</code>.</li>
</ol>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">value</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">tasksViewModel</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">newTaskEvent</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getOrAwaitValue</span><span class="devsite-syntax-p">()</span>
</code></pre></devsite-code>
<ol type="1" start="2">
<li>Assert that the value is not null.</li>
</ol>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-n">assertThat</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">value</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getContentIfNotHandled</span><span class="devsite-syntax-p">(),</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">not</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">nullValue</span><span class="devsite-syntax-p">())))</span>
</code></pre></devsite-code>
<aside class="special"><p><strong>What is getContentIfNotHandled?</strong></p>
<p>In the TO-DO app you are using a custom <code translate="no" dir="ltr">Event</code> class to make <code translate="no" dir="ltr">LiveData</code> represent one-time events (like navigation or a snack bar popping up). <code translate="no" dir="ltr">getContentIfNotHandled</code> provides the &#34;one-time&#34; capability. Called the first time, it gets the content of the <code translate="no" dir="ltr">Event</code>. Any additional calls to <code translate="no" dir="ltr">getContentIfNotHandled</code> for the same content will return <code translate="no" dir="ltr">null</code>. This is how <code translate="no" dir="ltr">Event</code> data is accessed in the app code, and thus we&#39;re using it for the tests. You can learn more about events  <a href="https://medium.com/androiddevelopers/livedata-with-snackbar-navigation-and-other-events-the-singleliveevent-case-ac2622673150" target="_blank">here</a>.</p>
</aside>
<p>The complete test should look like the code below.</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-k">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">androidx.arch.core.executor.testing.InstantTaskExecutorRule</span>
<span class="devsite-syntax-k">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">androidx.test.core.app.ApplicationProvider</span>
<span class="devsite-syntax-k">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">androidx.test.ext.junit.runners.AndroidJUnit4</span>
<span class="devsite-syntax-k">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">com.example.android.architecture.blueprints.todoapp.getOrAwaitValue</span>
<span class="devsite-syntax-k">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">org.hamcrest.MatcherAssert.assertThat</span>
<span class="devsite-syntax-k">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">org.hamcrest.Matchers.not</span>
<span class="devsite-syntax-k">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">org.hamcrest.Matchers.nullValue</span>
<span class="devsite-syntax-k">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">org.junit.Rule</span>
<span class="devsite-syntax-k">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">org.junit.Test</span>
<span class="devsite-syntax-k">import</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nn">org.junit.runner.RunWith</span>

<span class="devsite-syntax-nd">@RunWith</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">AndroidJUnit4</span><span class="devsite-syntax-o">::</span><span class="devsite-syntax-n">class</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-kd">class</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nc">TasksViewModelTest</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nd">@get</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">Rule</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">var</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">instantExecutorRule</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">InstantTaskExecutorRule</span><span class="devsite-syntax-p">()</span>


<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nd">@Test</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">fun</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">addNewTask_setsNewTaskEvent</span><span class="devsite-syntax-p">()</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// Given a fresh ViewModel</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">tasksViewModel</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">TasksViewModel</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">ApplicationProvider</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getApplicationContext</span><span class="devsite-syntax-p">())</span>

<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// When adding a new task</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">tasksViewModel</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">addNewTask</span><span class="devsite-syntax-p">()</span>

<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// Then the new task event is triggered</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">value</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">tasksViewModel</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">newTaskEvent</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getOrAwaitValue</span><span class="devsite-syntax-p">()</span>

<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">assertThat</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">value</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getContentIfNotHandled</span><span class="devsite-syntax-p">(),</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">not</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">nullValue</span><span class="devsite-syntax-p">()))</span>


<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>

<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<ol type="1" start="3">
<li>Run your code and watch the test pass!</li>
</ol>


        </google-codelab-step>
      
        <google-codelab-step label="Task: Writing multiple ViewModel tests" duration="0" step="9">
          
          <h2 class="step-title" id="9" data-text="Task: Writing multiple ViewModel tests" tabindex="-1">
              10. Task: Writing multiple ViewModel tests
          </h2>
          <p>Now that you&#39;ve seen how to write a test, write one on your own. In this step, using the skills you&#39;ve learned, practice writing another <code translate="no" dir="ltr">TasksViewModel</code> test.</p>
<h2 is-upgraded id="step-1.-write-your-own-viewmodel-test" data-text="Step 1. Write your own ViewModel test" tabindex="-1">Step 1. Write your own ViewModel test</h2>
<p>You&#39;ll write <code translate="no" dir="ltr">setFilterAllTasks_tasksAddViewVisible()</code>. This test should check that if you&#39;ve set your filter type to show all tasks, that the <strong>Add task</strong> button is visible.</p>
<ol type="1">
<li>Using <code translate="no" dir="ltr">addNewTask_setsNewTaskEvent()</code> for reference, write a test in <code translate="no" dir="ltr">TasksViewModelTest</code> called <code translate="no" dir="ltr">setFilterAllTasks_tasksAddViewVisible()</code> that sets the filtering mode to <code translate="no" dir="ltr">ALL_TASKS</code> and asserts that the <code translate="no" dir="ltr">tasksAddViewVisible</code> LiveData is <code translate="no" dir="ltr">true</code>.</li>
</ol>
<p>Use the code below to get started.</p>
<p><strong>TasksViewModelTest</strong></p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-w">    </span><span class="devsite-syntax-nd">@Test</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">fun</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">setFilterAllTasks_tasksAddViewVisible</span><span class="devsite-syntax-p">()</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>

<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// Given a fresh ViewModel</span>

<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// When the filter type is ALL_TASKS</span>

<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// Then the "Add task" action is visible</span>
<span class="devsite-syntax-w">        </span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<p>Note:</p>
<ul>
<li>The <code translate="no" dir="ltr">TasksFilterType</code> enum for all tasks is  <code translate="no" dir="ltr">ALL_TASKS.</code></li>
<li>The visibility of the button to add a task is controlled by the <code translate="no" dir="ltr">LiveData</code> <code translate="no" dir="ltr">tasksAddViewVisible.</code></li>
</ul>
<ol type="1" start="2">
<li>Run your test.</li>
</ol>
<h2 is-upgraded id="step-2.-compare-your-test-to-the-solution" data-text="Step 2. Compare your test to the solution" tabindex="-1">Step 2. Compare your test to the solution</h2>
<p>Compare your solution to the solution below.</p>
<p><strong>TasksViewModelTest</strong></p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-w">    </span><span class="devsite-syntax-nd">@Test</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">fun</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">setFilterAllTasks_tasksAddViewVisible</span><span class="devsite-syntax-p">()</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>

<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// Given a fresh ViewModel</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">tasksViewModel</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">TasksViewModel</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">ApplicationProvider</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getApplicationContext</span><span class="devsite-syntax-p">())</span>

<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// When the filter type is ALL_TASKS</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">tasksViewModel</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setFiltering</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">TasksFilterType</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">ALL_TASKS</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// Then the "Add task" action is visible</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">assertThat</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">tasksViewModel</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">tasksAddViewVisible</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getOrAwaitValue</span><span class="devsite-syntax-p">(),</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">`is`</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-kc">true</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<p>Check whether you do the following:</p>
<ul>
<li>You create your <code translate="no" dir="ltr">tasksViewModel</code> using the same AndroidX  <code translate="no" dir="ltr">ApplicationProvider.getApplicationContext()</code> statement.</li>
<li>You call the <code translate="no" dir="ltr">setFiltering</code> method, passing in the <code translate="no" dir="ltr">ALL_TASKS</code> filter type enum.</li>
<li>You check that the <code translate="no" dir="ltr">tasksAddViewVisible</code> is true, using the <code translate="no" dir="ltr">getOrAwaitValue</code> method.</li>
</ul>
<h2 is-upgraded id="step-3.-add-a-before-rule" data-text="Step 3. Add a @Before rule" tabindex="-1">Step 3. Add a @Before rule</h2>
<p>Notice how at the start of both of your tests, you define a <code translate="no" dir="ltr">TasksViewModel</code>.</p>
<p><strong>TasksViewModelTest</strong></p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// Given a fresh ViewModel</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">tasksViewModel</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">TasksViewModel</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">ApplicationProvider</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getApplicationContext</span><span class="devsite-syntax-p">())</span>
</code></pre></devsite-code>
<p>When you have repeated setup code for multiple tests, you can use the  <a href="https://junit.org/junit4/javadoc/4.12/org/junit/Before.html" target="_blank">@Before</a> annotation to create a setup method and remove repeated code. Since all of these tests are going to test the <code translate="no" dir="ltr">TasksViewModel</code>, and need a view model, move this code to a <code translate="no" dir="ltr">@Before</code> block.</p>
<ol type="1">
<li>Create a <code translate="no" dir="ltr">lateinit</code> instance variable called <code translate="no" dir="ltr">tasksViewModel|</code>.</li>
<li>Create a method called <code translate="no" dir="ltr">setupViewModel</code>.</li>
<li>Annotate it with <code translate="no" dir="ltr">@Before</code>.</li>
<li>Move the view model instantiation code to <code translate="no" dir="ltr">setupViewModel</code>.</li>
</ol>
<p><strong>TasksViewModelTest</strong></p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// Subject under test</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">private</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kd">lateinit</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kd">var</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">tasksViewModel</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">TasksViewModel</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nd">@Before</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">fun</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">setupViewModel</span><span class="devsite-syntax-p">()</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">tasksViewModel</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">TasksViewModel</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">ApplicationProvider</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getApplicationContext</span><span class="devsite-syntax-p">())</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<ol type="1" start="5">
<li>Run your code!</li>
</ol>
<p>Your final code for <code translate="no" dir="ltr">TasksViewModelTest</code> should look like the code below.</p>
<p><strong>TasksViewModelTest</strong></p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-nd">@RunWith</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">AndroidJUnit4</span><span class="devsite-syntax-o">::</span><span class="devsite-syntax-n">class</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-kd">class</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nc">TasksViewModelTest</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// Subject under test</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">private</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kd">lateinit</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kd">var</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">tasksViewModel</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">TasksViewModel</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// Executes each task synchronously using Architecture Components.</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nd">@get</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-n">Rule</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">var</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">instantExecutorRule</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">InstantTaskExecutorRule</span><span class="devsite-syntax-p">()</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nd">@Before</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">fun</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">setupViewModel</span><span class="devsite-syntax-p">()</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">tasksViewModel</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">TasksViewModel</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">ApplicationProvider</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getApplicationContext</span><span class="devsite-syntax-p">())</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>


<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nd">@Test</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">fun</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">addNewTask_setsNewTaskEvent</span><span class="devsite-syntax-p">()</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>

<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// When adding a new task</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">tasksViewModel</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">addNewTask</span><span class="devsite-syntax-p">()</span>

<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// Then the new task event is triggered</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">value</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">tasksViewModel</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">newTaskEvent</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getOrAwaitValue</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">assertThat</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-n">value</span><span class="devsite-syntax-o">?.</span><span class="devsite-syntax-na">getContentIfNotHandled</span><span class="devsite-syntax-p">(),</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">not</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">nullValue</span><span class="devsite-syntax-p">()))</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nd">@Test</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">fun</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">getTasksAddViewVisible</span><span class="devsite-syntax-p">()</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>

<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// When the filter type is ALL_TASKS</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">tasksViewModel</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setFiltering</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">TasksFilterType</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">ALL_TASKS</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// Then the "Add task" action is visible</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">assertThat</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">tasksViewModel</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">tasksAddViewVisible</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getOrAwaitValue</span><span class="devsite-syntax-p">(),</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">`is`</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-kc">true</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-w">    </span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<aside class="warning"><p><strong>Tip:</strong> In the next lessons, you&#39;ll learn a lot more about testing ViewModels. Right now, you can&#39;t test any methods in the view model that use  <a href="https://developer.android.com/topic/libraries/architecture/coroutines#viewmodelscope" target="_blank"><code translate="no" dir="ltr">viewModelScope</code></a>, you&#39;ll see an error that says:</p>
<p><code translate="no" dir="ltr">Exception in thread "main" java.lang.IllegalStateException: Module with the Main dispatcher had failed to initialize.</code></p>
<p>Similarly testing methods that use <code translate="no" dir="ltr">DefaultTaskRepository</code> is tricky, because this calls code in the networking code and database code. You will learn all of this in the following codelabs.</p>
</aside>


        </google-codelab-step>
      
        <google-codelab-step label="Solution code" duration="0" step="10">
          
          <h2 class="step-title" id="10" data-text="Solution code" tabindex="-1">
              11. Solution code
          </h2>
          <p>Click  <a href="https://github.com/google-developer-training/advanced-android-testing/compare/starter_code...end_codelab_1" target="_blank"><strong>here</strong></a> to see a diff between the code you started and the final code.</p>
<p>To download the code for the finished codelab, you can use the git command below:</p>
<div></div><devsite-code><pre translate="no" dir="ltr" is-upgraded>$ git clone https://github.com/google-developer-training/advanced-android-testing.git
$ cd android-testing
$ git checkout end_codelab_1
</pre></devsite-code>
<p>Alternatively you can download the repository as a Zip file, unzip it, and open it in Android Studio.</p>
<p><a href="https://github.com/google-developer-training/advanced-android-testing/archive/end_codelab_1.zip" target="_blank"><button class="button button-primary button-with-icon"><span class="material-icons" aria-hidden="true" translate="no">file_download</span>Download Zip</button></a></p>
<aside class="special"><p><strong>Important:</strong> The solution code is on the <code translate="no" dir="ltr">end_codelab1</code> branch of the downloaded repo!</p>
</aside>


        </google-codelab-step>
      
        <google-codelab-step label="Summary" duration="0" step="11">
          
          <h2 class="step-title" id="11" data-text="Summary" tabindex="-1">
              12. Summary
          </h2>
          <p>This codelab covered:</p>
<ul>
<li>How to run tests from Android Studio.</li>
<li>The difference between local (<code translate="no" dir="ltr">test</code>) and instrumentation tests (<code translate="no" dir="ltr">androidTest</code>).</li>
<li>How to write local unit tests using  <a href="https://junit.org/junit4/" target="_blank">JUnit</a> and  <a href="http://hamcrest.org/" target="_blank">Hamcrest</a>.</li>
<li>Setting up ViewModel tests with the  <a href="https://developer.android.com/training/testing/set-up-project" target="_blank">AndroidX Test Library</a>.</li>
</ul>


        </google-codelab-step>
      
        <google-codelab-step label="Learn more" duration="0" step="12">
          
          <h2 class="step-title" id="12" data-text="Learn more" tabindex="-1">
              13. Learn more
          </h2>
          <p>Samples:</p>
<ul>
<li><a href="https://github.com/android/architecture-samples/commits/master" target="_blank">Official Architecture Sample</a> - This is the official architecture sample, which is based off of the same TO-DO Notes app used here. Concepts in this sample go beyond what is covered in the three testing codelabs.</li>
<li><a href="https://github.com/android/sunflower" target="_blank">Sunflower demo</a> - This is the main Android Jetpack sample which also makes use of the Android testing libraries</li>
</ul>
<p>Udacity course:</p>
<ul>
<li><a href="https://www.udacity.com/course/developing-android-apps-with-kotlin--ud9012" target="_blank">Developing Android Apps with Kotlin</a></li>
</ul>
<p>Android developer documentation:</p>
<ul>
<li><a href="https://developer.android.com/jetpack/docs/guide" target="_blank">Guide to app architecture</a></li>
<li><a href="https://junit.org/junit4/" target="_blank">JUnit4</a></li>
<li><a href="http://hamcrest.org/" target="_blank">Hamcrest</a></li>
<li><a href="http://robolectric.org/" target="_blank">Robolectric Testing library</a></li>
<li><a href="https://developer.android.com/training/testing/set-up-project" target="_blank">AndroidX Test Library</a></li>
<li><a href="https://developer.android.com/reference/android/arch/core/executor/testing/package-summary" target="_blank">AndroidX Architecture Components Core Test Library</a></li>
<li><a href="https://developer.android.com/studio/build#sourcesets" target="_blank">source sets</a></li>
<li><a href="https://developer.android.com/studio/test/command-line" target="_blank">Test from the command line</a></li>
</ul>
<p>Videos:</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=pK7W5npkhho" target="_blank">Test-Driven Development on Android with the Android Testing Support Library (Google I/O&#39;17)</a>.</li>
<li><a href="https://www.youtube.com/watch?v=VJi2vmaQe6w" target="_blank">Build Testable Apps for Android (Google I/O&#39;19)</a></li>
</ul>
<p>Other:</p>
<ul>
<li><a href="https://medium.com/androiddevelopers/unit-testing-livedata-and-other-common-observability-problems-bb477262eb04" target="_blank">Unit-testing LiveData and other common observability problems</a></li>
</ul>
<p>Start the next lesson:  <a href="https://developer.android.com/codelabs/advanced-android-kotlin-training-testing-test-doubles/#0" target="_blank"><button class="button button-primary">5.2 Introduction to Test Doubles and Dependency Injection</button></a></p>


        </google-codelab-step>
      
        <google-codelab-step label="Next codelab" duration="0" step="13">
          
          <h2 class="step-title" id="13" data-text="Next codelab" tabindex="-1">
              14. Next codelab
          </h2>
          <p>Start the next lesson:  <a href="https://developer.android.com/codelabs/advanced-android-kotlin-training-testing-test-doubles/#0" target="_blank"><button class="button button-primary">5.2 Introduction to Test Doubles and Dependency Injection</button></a></p>


        </google-codelab-step>
      
    </google-codelab>
  
  

  
</div>

  
    
    
    
  

  <div class="devsite-floating-action-buttons"></div></article>


<devsite-content-footer class="nocontent">
  <p>Except as otherwise noted, the content of this page is licensed under the <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 License</a>, and code samples are licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 License</a>. For details, see the <a href="https://developers.google.com/site-policies">Google Developers Site Policies</a>. Java is a registered trademark of Oracle and/or its affiliates.</p>
  
</devsite-content-footer>


<devsite-notification
>
</devsite-notification>


  
<div class="devsite-content-data">
  
  
    <template class="devsite-content-data-template">
      [[["Easy to understand","easyToUnderstand","thumb-up"],["Solved my problem","solvedMyProblem","thumb-up"],["Other","otherUp","thumb-up"]],[["Missing the information I need","missingTheInformationINeed","thumb-down"],["Too complicated / too many steps","tooComplicatedTooManySteps","thumb-down"],["Out of date","outOfDate","thumb-down"],["Samples / code issue","samplesCodeIssue","thumb-down"],["Other","otherDown","thumb-down"]],[],[],[],null,[]]
    </template>
  
</div>
            
          </devsite-content>
        </main>
        <devsite-footer-promos class="devsite-footer">
          
            

<nav class="devsite-footer-promos nocontent" aria-label="Promotions">
  <ul class="devsite-footer-promos-list">
    
    <li class="devsite-footer-promo">
      <a href="//x.com/AndroidDev"
         class="devsite-footer-promo-title gc-analytics-event"
         data-category="Site-Wide Custom Events"
       
       
         data-label="Footer X Promo"
       >
        
        
        <picture>
          
          <source class="devsite-dark-theme"
                  srcset="https://developer.android.com/_static/android/images/logo-x_dt.svg"
                  media="(prefers-color-scheme: dark)">
          
          <img class="devsite-footer-promo-icon"
                src="/_static/android/images/logo-x.svg"
                loading="lazy"
                alt="X">
        </picture>
        
        <span class="devsite-footer-promo-label">
          X
        </span>
      </a>
      <div class="devsite-footer-promo-description">Follow @AndroidDev on X</div>
    </li>
    
    <li class="devsite-footer-promo">
      <a href="//www.youtube.com/user/androiddevelopers"
         class="devsite-footer-promo-title gc-analytics-event"
         data-category="Site-Wide Custom Events"
       
       
         data-label="Footer YouTube Promo"
       >
        
        
        <picture>
          
          <source class="devsite-dark-theme"
                  srcset="https://developer.android.com/_static/android/images/logo-youtube_dt.svg"
                  media="(prefers-color-scheme: dark)">
          
          <img class="devsite-footer-promo-icon"
                src="//www.gstatic.com/images/icons/material/product/2x/youtube_48dp.png"
                loading="lazy"
                alt="YouTube">
        </picture>
        
        <span class="devsite-footer-promo-label">
          YouTube
        </span>
      </a>
      <div class="devsite-footer-promo-description">Check out Android Developers on YouTube</div>
    </li>
    
    <li class="devsite-footer-promo">
      <a href="//www.linkedin.com/showcase/androiddev"
         class="devsite-footer-promo-title gc-analytics-event"
         data-category="Site-Wide Custom Events"
       
       
         data-label="Footer LinkedIn Promo"
       >
        
        
        <picture>
          
          <source class="devsite-dark-theme"
                  srcset="https://developer.android.com/_static/android/images/logo-linkedin_dt.svg"
                  media="(prefers-color-scheme: dark)">
          
          <img class="devsite-footer-promo-icon"
                src="/_static/android/images/logo-linkedin.svg"
                loading="lazy"
                alt="LinkedIn">
        </picture>
        
        <span class="devsite-footer-promo-label">
          LinkedIn
        </span>
      </a>
      <div class="devsite-footer-promo-description">Connect with the Android Developers community on LinkedIn</div>
    </li>
    
  </ul>
</nav>

          
        </devsite-footer-promos>
        <devsite-footer-linkboxes class="devsite-footer">
          
            
<nav class="devsite-footer-linkboxes nocontent" aria-label="Footer links">
  
  <ul class="devsite-footer-linkboxes-list">
    
    <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading no-link">More Android</h3>
      <ul class="devsite-footer-linkbox-list">
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="//www.android.com"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 1)"
            >
            
          
            Android
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="//www.android.com/enterprise/"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 2)"
            >
            
          
            Android for Enterprise
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="//www.android.com/security-center/"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 3)"
            >
            
          
            Security
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="//source.android.com"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 4)"
            >
            
          
            Source
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/news"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 5)"
            >
            
          
            News
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="//android-developers.googleblog.com/"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 6)"
            >
            
          
            Blog
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/podcasts"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 7)"
            >
            
              
              
            
          
            Podcasts
          
          </a>
          
          
        </li>
        
      </ul>
    </li>
    
    <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading no-link">Discover</h3>
      <ul class="devsite-footer-linkbox-list">
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/games"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 1)"
            >
            
          
            Gaming
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/ml"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 2)"
            >
            
          
            Machine Learning
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/health-and-fitness"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 3)"
            >
            
          
            Health & Fitness
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/media"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 4)"
            >
            
          
            Camera & Media
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/privacy"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 5)"
            >
            
          
            Privacy
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/training/connectivity/5g"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 6)"
            >
            
              
              
            
          
            5G
          
          </a>
          
          
        </li>
        
      </ul>
    </li>
    
    <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading no-link">Android Devices</h3>
      <ul class="devsite-footer-linkbox-list">
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/large-screens"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 1)"
            >
            
          
            Large screens
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/wear"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 2)"
            >
            
          
            Wear OS
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/chrome-os"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 3)"
            >
            
          
            ChromeOS devices
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/cars"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 4)"
            >
            
          
            Android for cars
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/tv"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 5)"
            >
            
              
              
            
          
            Android TV
          
          </a>
          
          
        </li>
        
      </ul>
    </li>
    
    <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading no-link">Releases</h3>
      <ul class="devsite-footer-linkbox-list">
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/about/versions/15"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 1)"
            >
            
          
            Android 15
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/about/versions/14"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 2)"
            >
            
          
            Android 14
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/about/versions/13"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 3)"
            >
            
          
            Android 13
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/about/versions/12"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 4)"
            >
            
          
            Android 12
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/about/versions/11"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 5)"
            >
            
          
            Android 11
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/about/versions/10"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 6)"
            >
            
          
            Android 10
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/about/versions/pie"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 7)"
            >
            
              
              
            
          
            Pie
          
          </a>
          
          
        </li>
        
      </ul>
    </li>
    
    <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading no-link">Documentation and Downloads</h3>
      <ul class="devsite-footer-linkbox-list">
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/studio/intro"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 1)"
            >
            
          
            Android Studio guide
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/guide"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 2)"
            >
            
          
            Developers guides
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/reference"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 3)"
            >
            
          
            API reference
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/studio"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 4)"
            >
            
          
            Download Studio
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/ndk"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 5)"
            >
            
              
              
            
          
            Android NDK
          
          </a>
          
          
        </li>
        
      </ul>
    </li>
    
    <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading no-link">Support</h3>
      <ul class="devsite-footer-linkbox-list">
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="//issuetracker.google.com/issues/new?component=190923&amp;template=841312"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 1)"
            >
            
          
            Report platform bug
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="//issuetracker.google.com/issues/new?component=192697"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 2)"
            >
            
          
            Report documentation bug
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="//support.google.com/googleplay/android-developer"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 3)"
            >
            
          
            Google Play support
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="https://g.co/userresearch/androiddeveloperfooter"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 4)"
            >
            
              
              
            
          
            Join research studies
          
          </a>
          
          
        </li>
        
      </ul>
    </li>
    
  </ul>
  
</nav>
          
        </devsite-footer-linkboxes>
        <devsite-footer-utility class="devsite-footer">
          
            

<div class="devsite-footer-utility nocontent">
  
  
  <nav class="devsite-footer-sites" aria-label="Other Google Developers websites">
    <a href="https://developers.google.com/"
       class="devsite-footer-sites-logo-link gc-analytics-event"
       data-category="Site-Wide Custom Events"
       data-label="Footer Google Developers Link">
      <picture>
        
        <source srcset="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/images/lockup-google-for-developers-dark-theme.svg"
                media="(prefers-color-scheme: none)"
                class="devsite-dark-theme">
        
        <img class="devsite-footer-sites-logo"
             src="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/images/lockup-google-for-developers.svg"
             loading="lazy"
             alt="Google Developers">
      </picture>
    </a>
    <ul class="devsite-footer-sites-list">
      
      <li class="devsite-footer-sites-item">
        <a href="//developer.android.com"
           class="devsite-footer-sites-link
                  gc-analytics-event"
           data-category="Site-Wide Custom Events"
         
           data-label="Footer Android Link"
         
         >
          Android
        </a>
      </li>
      
      <li class="devsite-footer-sites-item">
        <a href="//developer.chrome.com/home"
           class="devsite-footer-sites-link
                  gc-analytics-event"
           data-category="Site-Wide Custom Events"
         
           data-label="Footer Chrome Link"
         
         >
          Chrome
        </a>
      </li>
      
      <li class="devsite-footer-sites-item">
        <a href="//firebase.google.com"
           class="devsite-footer-sites-link
                  gc-analytics-event"
           data-category="Site-Wide Custom Events"
         
           data-label="Footer Firebase Link"
         
         >
          Firebase
        </a>
      </li>
      
      <li class="devsite-footer-sites-item">
        <a href="//cloud.google.com"
           class="devsite-footer-sites-link
                  gc-analytics-event"
           data-category="Site-Wide Custom Events"
         
           data-label="Footer Google Cloud Platform Link"
         
         >
          Google Cloud Platform
        </a>
      </li>
      
      <li class="devsite-footer-sites-item">
        <a href="//developers.google.com/products/"
           class="devsite-footer-sites-link
                  gc-analytics-event"
           data-category="Site-Wide Custom Events"
         
           data-label="Footer All products Link"
         
         >
          All products
        </a>
      </li>
      
    </ul>
  </nav>
  

  
  <nav class="devsite-footer-utility-links" aria-label="Utility links">
    
    <ul class="devsite-footer-utility-list">
      
      <li class="devsite-footer-utility-item
                 ">
        
        
        <a class="devsite-footer-utility-link gc-analytics-event"
           href="//policies.google.com/privacy"
           data-category="Site-Wide Custom Events"
           data-label="Footer Privacy link"
         >
          Privacy
        </a>
        
      </li>
      
      <li class="devsite-footer-utility-item
                 ">
        
        
        <a class="devsite-footer-utility-link gc-analytics-event"
           href="/license"
           data-category="Site-Wide Custom Events"
           data-label="Footer License link"
         >
          License
        </a>
        
      </li>
      
      <li class="devsite-footer-utility-item
                 ">
        
        
        <a class="devsite-footer-utility-link gc-analytics-event"
           href="/distribute/marketing-tools/brand-guidelines"
           data-category="Site-Wide Custom Events"
           data-label="Footer Brand guidelines link"
         >
          Brand guidelines
        </a>
        
      </li>
      
      <li class="devsite-footer-utility-item
                 glue-cookie-notification-bar-control">
        
        
        <a class="devsite-footer-utility-link gc-analytics-event"
           href="#"
           data-category="Site-Wide Custom Events"
           data-label="Footer Manage cookies link"
         
           aria-hidden="true"
         >
          Manage cookies
        </a>
        
      </li>
      
      <li class="devsite-footer-utility-item
                 devsite-footer-utility-button">
        
        <span class="devsite-footer-utility-description">Get news and tips by email</span>
        
        
        <a class="devsite-footer-utility-link gc-analytics-event"
           href="/updates"
           data-category="Site-Wide Custom Events"
           data-label="Footer Subscribe link"
         >
          Subscribe
        </a>
        
      </li>
      
    </ul>
    
    
<devsite-language-selector>
  <ul role="presentation">
    
    
    <li role="presentation">
      <a role="menuitem" lang="en"
        >English</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="de"
        >Deutsch</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="es_419"
        >Español – América Latina</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="fr"
        >Français</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="id"
        >Indonesia</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="pl"
        >Polski</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="pt_br"
        >Português – Brasil</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="vi"
        >Tiếng Việt</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="zh_cn"
        >中文 – 简体</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="ja"
        >日本語</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="ko"
        >한국어</a>
    </li>
    
  </ul>
</devsite-language-selector>

  </nav>
</div>
          
        </devsite-footer-utility>
        <devsite-panel>
          
        </devsite-panel>
        
      </section></section>
    <devsite-sitemask></devsite-sitemask>
    <devsite-snackbar></devsite-snackbar>
    <devsite-tooltip ></devsite-tooltip>
    <devsite-heading-link></devsite-heading-link>
    <devsite-analytics>
      
        <script type="application/json" analytics>[]</script>
<script type="application/json" tag-management>{&#34;at&#34;: &#34;True&#34;, &#34;ga4&#34;: [{&#34;id&#34;: &#34;G-QFRN08RN6E&#34;, &#34;purpose&#34;: 0}], &#34;ga4p&#34;: [{&#34;id&#34;: &#34;G-QFRN08RN6E&#34;, &#34;purpose&#34;: 0}], &#34;gtm&#34;: [], &#34;parameters&#34;: {&#34;internalUser&#34;: &#34;False&#34;, &#34;language&#34;: {&#34;machineTranslated&#34;: &#34;False&#34;, &#34;requested&#34;: &#34;en&#34;, &#34;served&#34;: &#34;en&#34;}, &#34;pageType&#34;: &#34;codelab&#34;, &#34;projectName&#34;: null, &#34;signedIn&#34;: &#34;False&#34;, &#34;tenant&#34;: &#34;android&#34;, &#34;recommendations&#34;: {&#34;sourcePage&#34;: &#34;&#34;, &#34;sourceType&#34;: 0, &#34;sourceRank&#34;: 0, &#34;sourceIdenticalDescriptions&#34;: 0, &#34;sourceTitleWords&#34;: 0, &#34;sourceDescriptionWords&#34;: 0, &#34;experiment&#34;: &#34;&#34;}, &#34;experiment&#34;: {&#34;ids&#34;: &#34;&#34;}}}</script>
      
    </devsite-analytics>
    
      <devsite-badger></devsite-badger>
    
    
    
<android-fully-clickable
    target="
        .android-case-study .devsite-landing-row-item,
        .android-editorial-and-updates-cards .devsite-card-content-wrapper,
        .android-editorial-and-updates-cards .devsite-landing-row-item,
        .android-grouped-resources .devsite-landing-row-item,
        .android-grouped-resources-contained--primary .devsite-landing-row-item,
        .android-grouped-resources-contained--secondary .devsite-landing-row-item,
        .android-grouped-resources-contained--tertiary .devsite-landing-row-item,
        .android-grouped-resources-uncontained--primary .devsite-landing-row-item,
        .android-grouped-resources-uncontained--secondary .devsite-landing-row-item,
        .android-grouped-resources-uncontained--tertiary .devsite-landing-row-item,
        .android-guide-cards .devsite-landing-row-item,
        .android-illustrated-resources-index .devsite-landing-row-item,
        .android-illustrated-resources-primary .devsite-landing-row-item,
        .android-illustrated-resources-secondary .devsite-landing-row-item,
        .android-illustrated-resources-secondary-small .devsite-landing-row-item,
        .android-illustrated-resources-tertiary .devsite-landing-row-item,
        .android-illustrated-resources-tertiary-small .devsite-landing-row-item,
        .android-promo .devsite-landing-row-item,
        .android-quick-link,
        .android-samples .devsite-card-wrapper,
        .fully-clickable"
    watch=".android-editorial-and-updates-cards, .android-samples, devsite-content"></android-fully-clickable>
    
<script nonce="utq+SR8acxauzon68JxmBJ5kudw2jz">
  
  (function(d,e,v,s,i,t,E){d['GoogleDevelopersObject']=i;
    t=e.createElement(v);t.async=1;t.src=s;E=e.getElementsByTagName(v)[0];
    E.parentNode.insertBefore(t,E);})(window, document, 'script',
    'https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/js/app_loader.js', '[3,"en",null,"/js/devsite_app_module.js","https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9","https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android","https://android-dot-devsite-v2-prod.appspot.com",1,null,["/_pwa/android/manifest.json","https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/images/video-placeholder.svg","https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/images/favicon.svg","https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/android/images/lockup.png","https://fonts.googleapis.com/css?family=Google+Sans:400,500,600,700|Google+Sans+Text:400,400italic,500,500italic,600,600italic,700,700italic|Roboto+Mono:400,500,700&display=swap"],1,null,[1,6,8,12,14,17,21,25,50,52,63,70,75,76,80,87,91,92,93,97,98,100,101,102,103,104,105,107,108,109,110,112,113,117,118,120,122,124,125,126,127,129,130,131,132,133,134,135,136,138,140,141,147,148,149,151,152,156,157,158,159,161,163,164,168,169,170,179,180,182,183,186,191,193,196],"AIzaSyAP-jjEJBzmIyKR4F-3XITp8yM9T1gEEI8","AIzaSyB6xiKGDR5O3Ak2okS4rLkauxGUG7XP0hg","developer.android.com","AIzaSyAQk0fBONSGUqCNznf6Krs82Ap1-NV6J4o","AIzaSyCCxcqdrZ_7QMeLCRY20bh_SXdAYqy70KY",null,null,null,["Search__enable_page_map","Search__enable_ai_search_summaries_for_all","MiscFeatureFlags__enable_variable_operator","MiscFeatureFlags__enable_project_variables","MiscFeatureFlags__enable_appearance_cookies","Profiles__enable_profile_collections","Profiles__enable_join_program_group_endpoint","Cloud__fast_free_trial","Profiles__enable_purchase_prompts","Significatio__enable_by_tenant","MiscFeatureFlags__enable_dark_theme","CloudShell__cloud_shell_button","MiscFeatureFlags__enable_explicit_template_dependencies","Profiles__enable_callout_notifications","DevPro__enable_embed_profile_creation","EngEduTelemetry__enable_engedu_telemetry","Experiments__reqs_query_experiments","Cloud__enable_legacy_calculator_redirect","DevPro__enable_developer_subscriptions","MiscFeatureFlags__emergency_css","Profiles__enable_page_saving","Profiles__require_profile_eligibility_for_signin","Profiles__enable_recognition_badges","DevPro__enable_devpro_offers","MiscFeatureFlags__gdp_dashboard_reskin_enabled","Profiles__enable_release_notes_notifications","TpcFeatures__enable_unmirrored_page_left_nav","MiscFeatureFlags__developers_footer_dark_image","Profiles__enable_completequiz_endpoint","DevPro__enable_vertex_credit_card","DevPro__enable_nvidia_credits_card","Profiles__enable_complete_playlist_endpoint","Profiles__enable_public_developer_profiles","Profiles__enable_stripe_subscription_management","Profiles__enable_playlist_community_acl","BookNav__enable_tenant_cache_key","MiscFeatureFlags__enable_firebase_utm","Profiles__enable_dashboard_curated_recommendations","Cloud__enable_free_trial_server_call","Cloud__enable_cloud_shell_fte_user_flow","TpcFeatures__proxy_prod_host","MiscFeatureFlags__enable_view_transitions","Cloud__cache_serialized_dynamic_content","DevPro__enable_google_payments_buyflow","DevPro__enable_code_assist","Cloud__enable_llm_concierge_chat","Cloud__enable_cloud_dlp_service","Search__enable_ai_eligibility_checks","Profiles__enable_completecodelab_endpoint","MiscFeatureFlags__developers_footer_image","MiscFeatureFlags__enable_framebox_badge_methods","DevPro__enable_free_benefits","DevPro__enable_enterprise","DevPro__enable_google_one_card","Profiles__enable_user_type","Cloud__enable_cloudx_experiment_ids","Search__enable_suggestions_from_borg","MiscFeatureFlags__enable_variable_operator_index_yaml","Cloud__enable_cloud_shell","Analytics__enable_clearcut_logging","MiscFeatureFlags__enable_project_body_class","Concierge__enable_actions_menu","Concierge__enable_remove_info_panel_tags","Profiles__enable_awarding_url","Concierge__enable_pushui","Search__enable_dynamic_content_confidential_banner","DevPro__enable_cloud_innovators_plus","DevPro__enable_firebase_workspaces_card","Profiles__enable_developer_profile_benefits_ui_redesign","Profiles__enable_developer_profiles_callout","CloudShell__cloud_code_overflow_menu","DevPro__remove_eu_tax_intake_form"],null,null,"AIzaSyBLEMok-5suZ67qRPzx0qUtbnLmyT_kCVE","https://developerscontentserving-pa.googleapis.com","AIzaSyCM4QpTRSqP5qI4Dvjt4OAScIN8sOUlO-k","https://developerscontentsearch-pa.googleapis.com",2,4,null,"https://developerprofiles-pa.googleapis.com",[3,"android","Android Developers","developer.android.com",null,"android-dot-devsite-v2-prod.appspot.com",null,null,[null,1,null,null,null,null,null,null,null,null,null,[1],null,null,null,null,null,null,[1],[1,null,null,[1,20],"/recommendations"],null,null,null,[1,null,1],[1,1,null,1,1]],null,[18,null,null,null,null,null,"/images/lockup.png","/images/touchicon-180.png",null,null,null,null,null,null,null,null,null,null,null,null,null,2,null,null,null,"/images/lockup-dark-theme.png",[]],[],null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,[6,1,14,15,20,22,23,28,29,37,43],null,[[null,null,1],[1,1]],[[null,null,null,null,null,null,null,[["G-QFRN08RN6E"],null,null,[["G-QFRN08RN6E",1]]],null,null,null,null,1],null,[[2,2],[1,1]]],null,4,null,null,null,null,null,null,null,null,null,null,null,null,null,"android.devsite.google"],null,"pk_live_5170syrHvgGVmSx9sBrnWtA5luvk9BwnVcvIi7HizpwauFG96WedXsuXh790rtij9AmGllqPtMLfhe2RSwD6Pn38V00uBCydV4m",1,null,"https://developerscontentinsights-pa.googleapis.com","AIzaSyCg-ZUslalsEbXMfIo9ZP8qufZgo3LSBDU","AIzaSyDxT0vkxnY_KeINtA4LSePJO-4MAZPMRsE","https://developers.googleapis.com",null,null,"AIzaSyBQom12tzI-rybN7Sf-KfeL4nwm-Rf7PmI\n",null,"https://developerslogging.googleapis.com"]')
  
</script>

    <devsite-a11y-announce></devsite-a11y-announce>
  </body>
</html>