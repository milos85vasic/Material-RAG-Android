








<!doctype html>
<html 
      lang="en"
      dir="ltr">
  <head>
    <meta name="google-signin-client-id" content="721724668570-nbkv1cfusk7kk4eni4pjvepaus73b13t.apps.googleusercontent.com">
    <meta name="google-signin-scope"
          content="profile email https://www.googleapis.com/auth/developerprofiles https://www.googleapis.com/auth/developerprofiles.award">
    <meta property="og:site_name" content="Privacy Sandbox">
    <meta property="og:type" content="website"><meta name="theme-color" content="#fff"><meta charset="utf-8">
    <meta content="IE=Edge" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    

    <link rel="manifest" href="/_pwa/privacysandbox/manifest.json"
          crossorigin="use-credentials">
    <link rel="preconnect" href="//www.gstatic.com" crossorigin>
    <link rel="preconnect" href="//fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="//fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="//apis.google.com" crossorigin>
    <link rel="preconnect" href="//www.google-analytics.com" crossorigin><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:300,400,400italic,500,500italic,700,700italic|Roboto+Mono:400,500,700&display=swap">
      <link rel="stylesheet"
            href="//fonts.googleapis.com/css2?family=Material+Icons&family=Material+Symbols+Outlined&display=block"><link rel="stylesheet" href="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/privacysandbox/css/app.css">
      
        <link rel="stylesheet" href="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/privacysandbox/css/dark-theme.css" disabled>
      <link rel="shortcut icon" href="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/privacysandbox/images/favicon.png">
    <link rel="apple-touch-icon" href="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/privacysandbox/images/touch-icon.png"><link rel="canonical" href="https://privacysandbox.google.com/private-advertising/attribution-reporting/android/developer-guide"><link rel="search" type="application/opensearchdescription+xml"
            title="Privacy Sandbox" href="https://privacysandbox.google.com/s/opensearch.xml">
      <link rel="alternate" hreflang="en"
          href="https://privacysandbox.google.com/private-advertising/attribution-reporting/android/developer-guide" /><link rel="alternate" hreflang="x-default" href="https://privacysandbox.google.com/private-advertising/attribution-reporting/android/developer-guide" /><link rel="alternate" hreflang="ar"
          href="https://privacysandbox.google.com/private-advertising/attribution-reporting/android/developer-guide?hl=ar" /><link rel="alternate" hreflang="bn"
          href="https://privacysandbox.google.com/private-advertising/attribution-reporting/android/developer-guide?hl=bn" /><link rel="alternate" hreflang="zh-Hans"
          href="https://privacysandbox.google.com/private-advertising/attribution-reporting/android/developer-guide?hl=zh-cn" /><link rel="alternate" hreflang="zh-Hant"
          href="https://privacysandbox.google.com/private-advertising/attribution-reporting/android/developer-guide?hl=zh-tw" /><link rel="alternate" hreflang="fa"
          href="https://privacysandbox.google.com/private-advertising/attribution-reporting/android/developer-guide?hl=fa" /><link rel="alternate" hreflang="fr"
          href="https://privacysandbox.google.com/private-advertising/attribution-reporting/android/developer-guide?hl=fr" /><link rel="alternate" hreflang="de"
          href="https://privacysandbox.google.com/private-advertising/attribution-reporting/android/developer-guide?hl=de" /><link rel="alternate" hreflang="he"
          href="https://privacysandbox.google.com/private-advertising/attribution-reporting/android/developer-guide?hl=he" /><link rel="alternate" hreflang="hi"
          href="https://privacysandbox.google.com/private-advertising/attribution-reporting/android/developer-guide?hl=hi" /><link rel="alternate" hreflang="id"
          href="https://privacysandbox.google.com/private-advertising/attribution-reporting/android/developer-guide?hl=id" /><link rel="alternate" hreflang="it"
          href="https://privacysandbox.google.com/private-advertising/attribution-reporting/android/developer-guide?hl=it" /><link rel="alternate" hreflang="ja"
          href="https://privacysandbox.google.com/private-advertising/attribution-reporting/android/developer-guide?hl=ja" /><link rel="alternate" hreflang="ko"
          href="https://privacysandbox.google.com/private-advertising/attribution-reporting/android/developer-guide?hl=ko" /><link rel="alternate" hreflang="pl"
          href="https://privacysandbox.google.com/private-advertising/attribution-reporting/android/developer-guide?hl=pl" /><link rel="alternate" hreflang="pt-BR"
          href="https://privacysandbox.google.com/private-advertising/attribution-reporting/android/developer-guide?hl=pt-br" /><link rel="alternate" hreflang="ru"
          href="https://privacysandbox.google.com/private-advertising/attribution-reporting/android/developer-guide?hl=ru" /><link rel="alternate" hreflang="es-419"
          href="https://privacysandbox.google.com/private-advertising/attribution-reporting/android/developer-guide?hl=es-419" /><link rel="alternate" hreflang="th"
          href="https://privacysandbox.google.com/private-advertising/attribution-reporting/android/developer-guide?hl=th" /><link rel="alternate" hreflang="tr"
          href="https://privacysandbox.google.com/private-advertising/attribution-reporting/android/developer-guide?hl=tr" /><link rel="alternate" hreflang="vi"
          href="https://privacysandbox.google.com/private-advertising/attribution-reporting/android/developer-guide?hl=vi" /><title>Attribution Reporting API Developer&#39;s Guide &nbsp;|&nbsp; Privacy Sandbox</title>

<meta property="og:title" content="Attribution Reporting API Developer&#39;s Guide &nbsp;|&nbsp; Privacy Sandbox"><meta property="og:url" content="https://privacysandbox.google.com/private-advertising/attribution-reporting/android/developer-guide"><meta property="og:image" content="https://privacysandbox.google.com/static/privacy-sandbox-for-developers.png">
  <meta property="og:image:width" content="1600">
  <meta property="og:image:height" content="900"><meta property="og:locale" content="en"><meta name="twitter:card" content="summary_large_image"><script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Article",
    
    "headline": "Attribution Reporting API Developer&#39;s Guide"
  }
</script>
  

  

  

  


    
      <link rel="stylesheet" href="/extras.css"></head>
  <body class=""
        template="page"
        theme="white"
        type="article"
        
        
        appearance
        
        layout="docs"
        
        
        
        
        display-toc
        pending>
  
    <devsite-progress type="indeterminate" id="app-progress"></devsite-progress>
  
  
    <a href="#main-content" class="skip-link button">
      
      Skip to main content
    </a>
    <section class="devsite-wrapper">
      <devsite-cookie-notification-bar></devsite-cookie-notification-bar><devsite-header role="banner">
  
    





















<div class="devsite-header--inner" data-nosnippet>
  <div class="devsite-top-logo-row-wrapper-wrapper">
    <div class="devsite-top-logo-row-wrapper">
      <div class="devsite-top-logo-row">
        <button type="button" id="devsite-hamburger-menu"
          class="devsite-header-icon-button button-flat material-icons gc-analytics-event"
          data-category="Site-Wide Custom Events"
          data-label="Navigation menu button"
          visually-hidden
          aria-label="Open menu">
        </button>
        
<div class="devsite-product-name-wrapper">

  <a href="/" class="devsite-site-logo-link gc-analytics-event"
   data-category="Site-Wide Custom Events" data-label="Site logo" track-type="globalNav"
   track-name="privacySandbox" track-metadata-position="nav"
   track-metadata-eventDetail="nav">
  
  <picture>
    
    <img src="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/privacysandbox/images/lockup.svg" class="devsite-site-logo" alt="Privacy Sandbox">
  </picture>
  
</a>



  
  
  <span class="devsite-product-name">
    <ul class="devsite-breadcrumb-list"
  >
  
  <li class="devsite-breadcrumb-item
             ">
    
    
    
      
      
    
  </li>
  
</ul>
  </span>

</div>
        <div class="devsite-top-logo-row-middle">
          <div class="devsite-header-upper-tabs">
            
              
              
  <devsite-tabs class="upper-tabs">

    <nav class="devsite-tabs-wrapper" aria-label="Upper tabs">
      
        
          <tab  >
            
    <a href="https://privacysandbox.google.com/"
    class="devsite-tabs-content gc-analytics-event "
      track-metadata-eventdetail="https://privacysandbox.google.com/"
    
       track-type="nav"
       track-metadata-position="nav - overview"
       track-metadata-module="primary nav"
       
       
         
           data-category="Site-Wide Custom Events"
         
           data-label="Tab: Overview"
         
           track-name="overview"
         
       >
    Overview
  
    </a>
    
  
          </tab>
        
      
        
          <tab  >
            
    <a href="https://privacysandbox.google.com/cookies"
    class="devsite-tabs-content gc-analytics-event "
      track-metadata-eventdetail="https://privacysandbox.google.com/cookies"
    
       track-type="nav"
       track-metadata-position="nav - cookies"
       track-metadata-module="primary nav"
       
       
         
           data-category="Site-Wide Custom Events"
         
           data-label="Tab: Cookies"
         
           track-name="cookies"
         
       >
    Cookies
  
    </a>
    
  
          </tab>
        
      
        
          <tab  class="devsite-active">
            
    <a href="https://privacysandbox.google.com/private-advertising"
    class="devsite-tabs-content gc-analytics-event "
      track-metadata-eventdetail="https://privacysandbox.google.com/private-advertising"
    
       track-type="nav"
       track-metadata-position="nav - private advertising"
       track-metadata-module="primary nav"
       aria-label="Private advertising, selected" 
       
         
           data-category="Site-Wide Custom Events"
         
           data-label="Tab: Private advertising"
         
           track-name="private advertising"
         
       >
    Private advertising
  
    </a>
    
  
          </tab>
        
      
        
          <tab  >
            
    <a href="https://privacysandbox.google.com/protections"
    class="devsite-tabs-content gc-analytics-event "
      track-metadata-eventdetail="https://privacysandbox.google.com/protections"
    
       track-type="nav"
       track-metadata-position="nav - privacy protections"
       track-metadata-module="primary nav"
       
       
         
           data-category="Site-Wide Custom Events"
         
           data-label="Tab: Privacy protections"
         
           track-name="privacy protections"
         
       >
    Privacy protections
  
    </a>
    
  
          </tab>
        
      
        
          <tab  >
            
    <a href="https://privacysandbox.google.com/blog"
    class="devsite-tabs-content gc-analytics-event "
      track-metadata-eventdetail="https://privacysandbox.google.com/blog"
    
       track-type="nav"
       track-metadata-position="nav - blog"
       track-metadata-module="primary nav"
       
       
         
           data-category="Site-Wide Custom Events"
         
           data-label="Tab: Blog"
         
           track-name="blog"
         
       >
    Blog
  
    </a>
    
  
          </tab>
        
      
    </nav>

  </devsite-tabs>

            
           </div>
          
<devsite-search
    enable-signin
    enable-search
    enable-suggestions
      enable-query-completion
    
    enable-search-summaries
    project-name="Privacy Sandbox"
    tenant-name="Privacy Sandbox"
    
    
    
    
    
    >
  <form class="devsite-search-form" action="https://privacysandbox.google.com/s/results" method="GET">
    <div class="devsite-search-container">
      <button type="button"
              search-open
              class="devsite-search-button devsite-header-icon-button button-flat material-icons"
              
              aria-label="Open search"></button>
      <div class="devsite-searchbox">
        <input
          aria-activedescendant=""
          aria-autocomplete="list"
          
          aria-label="Search"
          aria-expanded="false"
          aria-haspopup="listbox"
          autocomplete="off"
          class="devsite-search-field devsite-search-query"
          name="q"
          
          placeholder="Search"
          role="combobox"
          type="text"
          value=""
          >
          <div class="devsite-search-image material-icons" aria-hidden="true">
            
              <svg class="devsite-search-ai-image" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <g clip-path="url(#clip0_6641_386)">
                    <path d="M19.6 21L13.3 14.7C12.8 15.1 12.225 15.4167 11.575 15.65C10.925 15.8833 10.2333 16 9.5 16C7.68333 16 6.14167 15.375 4.875 14.125C3.625 12.8583 3 11.3167 3 9.5C3 7.68333 3.625 6.15 4.875 4.9C6.14167 3.63333 7.68333 3 9.5 3C10.0167 3 10.5167 3.05833 11 3.175C11.4833 3.275 11.9417 3.43333 12.375 3.65L10.825 5.2C10.6083 5.13333 10.3917 5.08333 10.175 5.05C9.95833 5.01667 9.73333 5 9.5 5C8.25 5 7.18333 5.44167 6.3 6.325C5.43333 7.19167 5 8.25 5 9.5C5 10.75 5.43333 11.8167 6.3 12.7C7.18333 13.5667 8.25 14 9.5 14C10.6667 14 11.6667 13.625 12.5 12.875C13.35 12.1083 13.8417 11.15 13.975 10H15.975C15.925 10.6333 15.7833 11.2333 15.55 11.8C15.3333 12.3667 15.05 12.8667 14.7 13.3L21 19.6L19.6 21ZM17.5 12C17.5 10.4667 16.9667 9.16667 15.9 8.1C14.8333 7.03333 13.5333 6.5 12 6.5C13.5333 6.5 14.8333 5.96667 15.9 4.9C16.9667 3.83333 17.5 2.53333 17.5 0.999999C17.5 2.53333 18.0333 3.83333 19.1 4.9C20.1667 5.96667 21.4667 6.5 23 6.5C21.4667 6.5 20.1667 7.03333 19.1 8.1C18.0333 9.16667 17.5 10.4667 17.5 12Z" fill="#5F6368"/>
                  </g>
                <defs>
                <clipPath id="clip0_6641_386">
                <rect width="24" height="24" fill="white"/>
                </clipPath>
                </defs>
              </svg>
            
          </div>
          <div class="devsite-search-shortcut-icon-container" aria-hidden="true">
            <kbd class="devsite-search-shortcut-icon">/</kbd>
          </div>
      </div>
    </div>
  </form>
  <button type="button"
          search-close
          class="devsite-search-button devsite-header-icon-button button-flat material-icons"
          
          aria-label="Close search"></button>
</devsite-search>

        </div>

        

          

          

          <devsite-appearance-selector></devsite-appearance-selector>

          
<devsite-language-selector>
  <ul role="presentation">
    
    
    <li role="presentation">
      <a role="menuitem" lang="en"
        >English</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="de"
        >Deutsch</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="es_419"
        >Español – América Latina</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="fr"
        >Français</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="id"
        >Indonesia</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="it"
        >Italiano</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="pl"
        >Polski</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="pt_br"
        >Português – Brasil</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="vi"
        >Tiếng Việt</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="tr"
        >Türkçe</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="ru"
        >Русский</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="he"
        >עברית</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="ar"
        >العربيّة</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="fa"
        >فارسی</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="hi"
        >हिंदी</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="bn"
        >বাংলা</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="th"
        >ภาษาไทย</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="zh_cn"
        >中文 – 简体</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="zh_tw"
        >中文 – 繁體</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="ja"
        >日本語</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="ko"
        >한국어</a>
    </li>
    
  </ul>
</devsite-language-selector>


          
            <a class="devsite-header-link devsite-top-button button gc-analytics-event "
    href="//privacysandbox.com/"
    data-category="Site-Wide Custom Events"
    data-label="Site header link: Home"
    >
  Home
</a>
          

        

        
          <devsite-user 
                        
                        
                          enable-profiles
                        
                        
                          fp-auth
                        
                        id="devsite-user">
            
              
              <span class="button devsite-top-button" aria-hidden="true" visually-hidden>Sign in</span>
            
          </devsite-user>
        
        
        
      </div>
    </div>
  </div>



  <div class="devsite-collapsible-section
    
      devsite-header-no-lower-tabs
    ">
    <div class="devsite-header-background">
      
        
          <div class="devsite-product-id-row"
           >
            <div class="devsite-product-description-row">
              
                
                <div class="devsite-product-id">
                  
                  
                  
                    <ul class="devsite-breadcrumb-list"
  >
  
  <li class="devsite-breadcrumb-item
             ">
    
    
    
      
  <a href="https://privacysandbox.google.com/private-advertising"
      
        class="devsite-breadcrumb-link gc-analytics-event"
      
        data-category="Site-Wide Custom Events"
      
        data-label="Lower Header"
      
        data-value="1"
      
        track-type="globalNav"
      
        track-name="breadcrumb"
      
        track-metadata-position="1"
      
        track-metadata-eventdetail=""
      
    >
    
        Private advertising
      
  </a>
  
    
  </li>
  
</ul>
                </div>
                
              
              
            </div>
            
          </div>
          
        
      
      
    </div>
  </div>

</div>



  

  
</devsite-header>
      <devsite-book-nav scrollbars >
        
          





















<div class="devsite-book-nav-filter"
     >
  <span class="filter-list-icon material-icons" aria-hidden="true"></span>
  <input type="text"
         placeholder="Filter"
         
         aria-label="Type to filter"
         role="searchbox">
  
  <span class="filter-clear-button hidden"
        data-title="Clear filter"
        aria-label="Clear filter"
        role="button"
        tabindex="0"></span>
</div>

<nav class="devsite-book-nav devsite-nav nocontent"
     aria-label="Side menu">
  <div class="devsite-mobile-header">
    <button type="button"
            id="devsite-close-nav"
            class="devsite-header-icon-button button-flat material-icons gc-analytics-event"
            data-category="Site-Wide Custom Events"
            data-label="Close navigation"
            aria-label="Close navigation">
    </button>
    <div class="devsite-product-name-wrapper">

  <a href="/" class="devsite-site-logo-link gc-analytics-event"
   data-category="Site-Wide Custom Events" data-label="Site logo" track-type="globalNav"
   track-name="privacySandbox" track-metadata-position="nav"
   track-metadata-eventDetail="nav">
  
  <picture>
    
    <img src="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/privacysandbox/images/lockup.svg" class="devsite-site-logo" alt="Privacy Sandbox">
  </picture>
  
</a>


  
      <span class="devsite-product-name">
        
        
        <ul class="devsite-breadcrumb-list"
  >
  
  <li class="devsite-breadcrumb-item
             ">
    
    
    
      
      
    
  </li>
  
</ul>
      </span>
    

</div>
  </div>

  <div class="devsite-book-nav-wrapper">
    <div class="devsite-mobile-nav-top">
      
        <ul class="devsite-nav-list">
          
            <li class="devsite-nav-item">
              
  
  <a href="/"
    
       class="devsite-nav-title gc-analytics-event
              devsite-nav-has-children
              "
    

    
      
        data-category="Site-Wide Custom Events"
      
        data-label="Tab: Overview"
      
        track-name="overview"
      
    
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Overview"
     track-type="globalNav"
     track-metadata-eventDetail="globalMenu"
     track-metadata-position="nav">
  
    <span class="devsite-nav-text" tooltip >
      Overview
   </span>
    
    <span class="devsite-nav-icon material-icons" data-icon="forward"
          >
    </span>
    
  
  </a>
  

  
              
            </li>
          
            <li class="devsite-nav-item">
              
  
  <a href="/cookies"
    
       class="devsite-nav-title gc-analytics-event
              devsite-nav-has-children
              "
    

    
      
        data-category="Site-Wide Custom Events"
      
        data-label="Tab: Cookies"
      
        track-name="cookies"
      
    
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Cookies"
     track-type="globalNav"
     track-metadata-eventDetail="globalMenu"
     track-metadata-position="nav">
  
    <span class="devsite-nav-text" tooltip >
      Cookies
   </span>
    
    <span class="devsite-nav-icon material-icons" data-icon="forward"
          >
    </span>
    
  
  </a>
  

  
              
            </li>
          
            <li class="devsite-nav-item">
              
  
  <a href="/private-advertising"
    
       class="devsite-nav-title gc-analytics-event
              devsite-nav-has-children
              devsite-nav-active"
    

    
      
        data-category="Site-Wide Custom Events"
      
        data-label="Tab: Private advertising"
      
        track-name="private advertising"
      
    
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Private advertising"
     track-type="globalNav"
     track-metadata-eventDetail="globalMenu"
     track-metadata-position="nav">
  
    <span class="devsite-nav-text" tooltip >
      Private advertising
   </span>
    
    <span class="devsite-nav-icon material-icons" data-icon="forward"
          >
    </span>
    
  
  </a>
  

  
              
            </li>
          
            <li class="devsite-nav-item">
              
  
  <a href="/protections"
    
       class="devsite-nav-title gc-analytics-event
              devsite-nav-has-children
              "
    

    
      
        data-category="Site-Wide Custom Events"
      
        data-label="Tab: Privacy protections"
      
        track-name="privacy protections"
      
    
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Privacy protections"
     track-type="globalNav"
     track-metadata-eventDetail="globalMenu"
     track-metadata-position="nav">
  
    <span class="devsite-nav-text" tooltip >
      Privacy protections
   </span>
    
    <span class="devsite-nav-icon material-icons" data-icon="forward"
          >
    </span>
    
  
  </a>
  

  
              
            </li>
          
            <li class="devsite-nav-item">
              
  
  <a href="/blog"
    
       class="devsite-nav-title gc-analytics-event
              
              "
    

    
      
        data-category="Site-Wide Custom Events"
      
        data-label="Tab: Blog"
      
        track-name="blog"
      
    
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Blog"
     track-type="globalNav"
     track-metadata-eventDetail="globalMenu"
     track-metadata-position="nav">
  
    <span class="devsite-nav-text" tooltip >
      Blog
   </span>
    
  
  </a>
  

  
              
            </li>
          
          
    
    
<li class="devsite-nav-item">

  
  <a href="//privacysandbox.com/"
    
       class="devsite-nav-title gc-analytics-event "
    

    
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Home"
     track-type="navMenu"
     track-metadata-eventDetail="globalMenu"
     track-metadata-position="nav">
  
    <span class="devsite-nav-text" tooltip >
      Home
   </span>
    
  
  </a>
  

</li>

  
          
        </ul>
      
    </div>
    
      <div class="devsite-mobile-nav-bottom">
        
          
          <ul class="devsite-nav-list" menu="_book">
            <li class="devsite-nav-item
           devsite-nav-expandable
           devsite-nav-accordion"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Start your integration</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising"
      ><span class="devsite-nav-text" tooltip>Get started</span></a></li><li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Web</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/setup/web"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/setup/web"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/setup/web"
      ><span class="devsite-nav-text" tooltip>Overview</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/setup/web/chrome-facilitated-testing"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/setup/web/chrome-facilitated-testing"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/setup/web/chrome-facilitated-testing"
      ><span class="devsite-nav-text" tooltip>Chrome-facilitated testing</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/setup/web/relevance-testing"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/setup/web/relevance-testing"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/setup/web/relevance-testing"
      ><span class="devsite-nav-text" tooltip>Relevance APIs testing guidance</span></a></li></ul></div></li><li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Android</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/setup/android"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/setup/android"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/setup/android"
      ><span class="devsite-nav-text" tooltip>Overview</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/setup/android/setup"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/setup/android/setup"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/setup/android/setup"
      ><span class="devsite-nav-text" tooltip>Set up your development environment</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/setup/android/setup-api-access"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/setup/android/setup-api-access"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/setup/android/setup-api-access"
      ><span class="devsite-nav-text" tooltip>Configure AdServices</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/setup/android/download"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/setup/android/download"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/setup/android/download"
      ><span class="devsite-nav-text" tooltip>Set up a device or emulator image</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/setup/android/setup-device-access"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/setup/android/setup-device-access"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/setup/android/setup-device-access"
      ><span class="devsite-nav-text" tooltip>Configure devices to use Privacy Sandbox on Android</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/setup/android/troubleshooting"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/setup/android/troubleshooting"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/setup/android/troubleshooting"
      ><span class="devsite-nav-text" tooltip>Troubleshoot your setup</span></a></li></ul></div></li></ul></div></li>

  <li class="devsite-nav-item
           devsite-nav-expandable
           devsite-nav-accordion"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Console</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/console/create-your-account"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/console/create-your-account"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/console/create-your-account"
      ><span class="devsite-nav-text" tooltip>Create your account</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/console/add-users-to-account"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/console/add-users-to-account"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/console/add-users-to-account"
      ><span class="devsite-nav-text" tooltip>Add users to your organization’s account</span></a></li></ul></div></li>

  <li class="devsite-nav-item
           devsite-nav-expandable
           devsite-nav-accordion"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Enrollment</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/enrollment"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/enrollment"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/enrollment"
      ><span class="devsite-nav-text" tooltip>Enroll your platform with Privacy Sandbox</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/enrollment/faqs"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/enrollment/faqs"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/enrollment/faqs"
      ><span class="devsite-nav-text" tooltip>Frequently asked questions</span></a></li></ul></div></li>

  <li class="devsite-nav-item
           devsite-nav-expandable
           devsite-nav-accordion"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Ads lifecycle</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/manage-ad-audience"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/manage-ad-audience"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/manage-ad-audience"
      ><span class="devsite-nav-text" tooltip>Audiences</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/manage-ad-auctions"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/manage-ad-auctions"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/manage-ad-auctions"
      ><span class="devsite-nav-text" tooltip>Auctions</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/measure-ad-performance"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/measure-ad-performance"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/measure-ad-performance"
      ><span class="devsite-nav-text" tooltip>Performance</span></a></li></ul></div></li>

  <li class="devsite-nav-item
           devsite-nav-expandable
           devsite-nav-accordion"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Topics</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/topics"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/topics"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/topics"
      ><span class="devsite-nav-text" tooltip>Overview</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/topics/why-topics"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/topics/why-topics"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/topics/why-topics"
      ><span class="devsite-nav-text" tooltip>Why do we need Topics</span></a></li><li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Topics API for Web</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/topics/web"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/topics/web"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/topics/web"
      ><span class="devsite-nav-text" tooltip>Overview</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/topics/web/setup"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/topics/web/setup"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/topics/web/setup"
      ><span class="devsite-nav-text" tooltip>Setup</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/topics/web/implement"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/topics/web/implement"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/topics/web/implement"
      ><span class="devsite-nav-text" tooltip>Implement Topics</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/topics/web/test-and-go-live"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/topics/web/test-and-go-live"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/topics/web/test-and-go-live"
      ><span class="devsite-nav-text" tooltip>Test &amp; go live</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/topics/web/tooling"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/topics/web/tooling"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/topics/web/tooling"
      ><span class="devsite-nav-text" tooltip>Tooling</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/topics/web/controls"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/topics/web/controls"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/topics/web/controls"
      ><span class="devsite-nav-text" tooltip>Customization &amp; opt-out</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/topics/web/support"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/topics/web/support"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/topics/web/support"
      ><span class="devsite-nav-text" tooltip>Support</span></a></li></ul></div></li><li class="devsite-nav-item
           devsite-nav-expandable
           devsite-nav-experimental"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Topics API for Android</span><span class="devsite-nav-icon material-icons"
        data-icon="experimental"
        data-title="Experimental!"
        aria-hidden="true"></span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/topics/android"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/topics/android"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/topics/android"
      ><span class="devsite-nav-text" tooltip>Overview</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/topics/android/implement"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/topics/android/implement"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/topics/android/implement"
      ><span class="devsite-nav-text" tooltip>Implement Topics</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/topics/android/controls"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/topics/android/controls"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/topics/android/controls"
      ><span class="devsite-nav-text" tooltip>Customization &amp; opt-out</span></a></li></ul></div></li></ul></div></li>

  <li class="devsite-nav-item
           devsite-nav-expandable
           devsite-nav-accordion"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Protected Audience</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Web</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/protected-audience"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience"
      ><span class="devsite-nav-text" tooltip>Overview</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience-api/feature-status"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience-api/feature-status"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience-api/feature-status"
      ><span class="devsite-nav-text" tooltip>Status of pending API capabilities</span></a></li><li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Developer guide</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/protected-audience-api"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience-api"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience-api"
      ><span class="devsite-nav-text" tooltip>Overview</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience-api/protected-audience-experiment"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience-api/protected-audience-experiment"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience-api/protected-audience-experiment"
      ><span class="devsite-nav-text" tooltip>Experiment</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience-api/ad-auction"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience-api/ad-auction"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience-api/ad-auction"
      ><span class="devsite-nav-text" tooltip>Seller guide - Run ad auctions</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience-api/reporting"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience-api/reporting"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience-api/reporting"
      ><span class="devsite-nav-text" tooltip>Auction reporting</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience-api/guide/reporting-id"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience-api/guide/reporting-id"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience-api/guide/reporting-id"
      ><span class="devsite-nav-text" tooltip>Reporting IDs</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience-api/latency"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience-api/latency"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience-api/latency"
      ><span class="devsite-nav-text" tooltip>Improve auction latency</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience-api/reports"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience-api/reports"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience-api/reports"
      ><span class="devsite-nav-text" tooltip>Report on auction results</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/sequential-auction-setup"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/sequential-auction-setup"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/sequential-auction-setup"
      ><span class="devsite-nav-text" tooltip>Sequential auction setup with header bidding and multi-seller Protected Audience auction</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience-api/troubleshoot"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience-api/troubleshoot"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience-api/troubleshoot"
      ><span class="devsite-nav-text" tooltip>Troubleshoot</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience-api/opt-out"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience-api/opt-out"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience-api/opt-out"
      ><span class="devsite-nav-text" tooltip>Opt out</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience-api/k-anonymity"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience-api/k-anonymity"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience-api/k-anonymity"
      ><span class="devsite-nav-text" tooltip>K-anonymity</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience-api/publisher-guide"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience-api/publisher-guide"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience-api/publisher-guide"
      ><span class="devsite-nav-text" tooltip>Publisher guide</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/define-audience-data"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/define-audience-data"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/define-audience-data"
      ><span class="devsite-nav-text" tooltip>Define audience data</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/update-audience-data"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/update-audience-data"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/update-audience-data"
      ><span class="devsite-nav-text" tooltip>Update audience data and refresh ads</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/delegate-audience-management"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/delegate-audience-management"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/delegate-audience-management"
      ><span class="devsite-nav-text" tooltip>Delegate audience management to a third-party</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/auction/configure-auction"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/auction/configure-auction"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/auction/configure-auction"
      ><span class="devsite-nav-text" tooltip>Set up an ad auction on the publisher&#39;s page</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/auction/single-seller-auction"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/auction/single-seller-auction"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/auction/single-seller-auction"
      ><span class="devsite-nav-text" tooltip>Run a browser based auction with a single seller</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/auction/multi-seller-auction"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/auction/multi-seller-auction"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/auction/multi-seller-auction"
      ><span class="devsite-nav-text" tooltip>Run a browser based auction with multiple sellers</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/auction/sequential-auction"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/auction/sequential-auction"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/auction/sequential-auction"
      ><span class="devsite-nav-text" tooltip>Sequential auction setup with contextual ad auction</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/auction/render-ad"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/auction/render-ad"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/auction/render-ad"
      ><span class="devsite-nav-text" tooltip>Render an ad</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/auction/bid-in-auction-ad-slot"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/auction/bid-in-auction-ad-slot"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/auction/bid-in-auction-ad-slot"
      ><span class="devsite-nav-text" tooltip>Bid in an auction to buy an ad slot</span></a></li><li class="devsite-nav-item
           devsite-nav-external"><a href="https://docs.google.com/document/d/1b6YlL5CFVfCo6hHMqfOYp2WJNdsBTSvM4eayrmbm7e4/view"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: https://docs.google.com/document/d/1b6YlL5CFVfCo6hHMqfOYp2WJNdsBTSvM4eayrmbm7e4/view"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="https://docs.google.com/document/d/1b6YlL5CFVfCo6hHMqfOYp2WJNdsBTSvM4eayrmbm7e4/view"
      ><span class="devsite-nav-text" tooltip>API walkthrough</span><span class="devsite-nav-icon material-icons"
        data-icon="external"
        data-title="External"
        aria-hidden="true"></span></a></li><li class="devsite-nav-item"><a href="/private-advertising/topics-in-audiences"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/topics-in-audiences"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/topics-in-audiences"
      ><span class="devsite-nav-text" tooltip>Use Topics to target an audience</span></a></li></ul></div></li><li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Use cases</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/protected-audience-api/use-case/deals"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience-api/use-case/deals"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience-api/use-case/deals"
      ><span class="devsite-nav-text" tooltip>Deals</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/auction/pace-ad-delivery"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/auction/pace-ad-delivery"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/auction/pace-ad-delivery"
      ><span class="devsite-nav-text" tooltip>Pace ad delivery by frequency</span></a></li></ul></div></li></ul></div></li><li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Android</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/protected-audience/android"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience/android"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience/android"
      ><span class="devsite-nav-text" tooltip>Overview</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience/android/mediation"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience/android/mediation"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience/android/mediation"
      ><span class="devsite-nav-text" tooltip>Mediation</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience/android/frequency-capping"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience/android/frequency-capping"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience/android/frequency-capping"
      ><span class="devsite-nav-text" tooltip>Frequency capping</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience/android/appinstall-filtering"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience/android/appinstall-filtering"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience/android/appinstall-filtering"
      ><span class="devsite-nav-text" tooltip>App install ads filtering</span></a></li><li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Developer guide</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/protected-audience/android/developer-guide"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience/android/developer-guide"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience/android/developer-guide"
      ><span class="devsite-nav-text" tooltip>Protected Audience developer guide</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience/android/developer-guide/define-audience-data"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience/android/developer-guide/define-audience-data"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience/android/developer-guide/define-audience-data"
      ><span class="devsite-nav-text" tooltip>Define audience data</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience/android/developer-guide/update-audience-data"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience/android/developer-guide/update-audience-data"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience/android/developer-guide/update-audience-data"
      ><span class="devsite-nav-text" tooltip>Update audience data and refresh ads</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience/android/developer-guide/profiling"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience/android/developer-guide/profiling"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience/android/developer-guide/profiling"
      ><span class="devsite-nav-text" tooltip>Profile a Protected Audience auction</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience/android/developer-guide/debug-reporting"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience/android/developer-guide/debug-reporting"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience/android/developer-guide/debug-reporting"
      ><span class="devsite-nav-text" tooltip>Debug reporting</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience/android/developer-guide/inspect_audiences_cli"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience/android/developer-guide/inspect_audiences_cli"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience/android/developer-guide/inspect_audiences_cli"
      ><span class="devsite-nav-text" tooltip>Inspect custom audiences on the command line</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience/android/developer-guide/testing-setup"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience/android/developer-guide/testing-setup"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience/android/developer-guide/testing-setup"
      ><span class="devsite-nav-text" tooltip>Testing setup</span></a></li></ul></div></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience/android/integration-guide"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience/android/integration-guide"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience/android/integration-guide"
      ><span class="devsite-nav-text" tooltip>Integration guide</span></a></li><li class="devsite-nav-item"><a href="https://developer.android.com/design-for-safety/privacy-sandbox/reference/packages"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: https://developer.android.com/design-for-safety/privacy-sandbox/reference/packages"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="https://developer.android.com/design-for-safety/privacy-sandbox/reference/packages"
      ><span class="devsite-nav-text" tooltip>API reference</span></a></li></ul></div></li></ul></div></li>

  <li class="devsite-nav-item
           devsite-nav-expandable
           devsite-nav-accordion"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Protected App Signals</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/protected-audience/android/protected-app-signals"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience/android/protected-app-signals"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience/android/protected-app-signals"
      ><span class="devsite-nav-text" tooltip>Overview for Android</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience/android/protected-app-signals-developer-guide"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience/android/protected-app-signals-developer-guide"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience/android/protected-app-signals-developer-guide"
      ><span class="devsite-nav-text" tooltip>Developer guide</span></a></li></ul></div></li>

  <li class="devsite-nav-item
           devsite-nav-expandable
           devsite-nav-accordion"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Bidding and Auction Services</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Web</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/bidding-and-auction-services/web/architecture"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/bidding-and-auction-services/web/architecture"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/bidding-and-auction-services/web/architecture"
      ><span class="devsite-nav-text" tooltip>Architecture</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/bidding-and-auction-services/web/buyer-integration"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/bidding-and-auction-services/web/buyer-integration"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/bidding-and-auction-services/web/buyer-integration"
      ><span class="devsite-nav-text" tooltip>Integrate with B&amp;A as a buyer</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/bidding-and-auction-services/web/seller-integration"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/bidding-and-auction-services/web/seller-integration"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/bidding-and-auction-services/web/seller-integration"
      ><span class="devsite-nav-text" tooltip>Integrate with B&amp;A as a seller</span></a></li><li class="devsite-nav-item"><a href="/codelab/ba-services-local-testing"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /codelab/ba-services-local-testing"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/codelab/ba-services-local-testing"
      ><span class="devsite-nav-text" tooltip>Test B&amp;A for Web end-to-end locally</span></a></li></ul></div></li><li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Android</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/protected-audience/android/bidding-and-auction-services"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience/android/bidding-and-auction-services"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience/android/bidding-and-auction-services"
      ><span class="devsite-nav-text" tooltip>Overview</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience/android/bidding-and-auction-integration"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience/android/bidding-and-auction-integration"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience/android/bidding-and-auction-integration"
      ><span class="devsite-nav-text" tooltip>Integration and optimization</span></a></li></ul></div></li></ul></div></li>

  <li class="devsite-nav-item
           devsite-nav-expandable
           devsite-nav-accordion"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Fenced frames</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/fenced-frame"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/fenced-frame"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/fenced-frame"
      ><span class="devsite-nav-text" tooltip>Overview for Web</span></a></li></ul></div></li>

  <li class="devsite-nav-item
           devsite-nav-expandable
           devsite-nav-accordion"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Attribution Reporting</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting"
      ><span class="devsite-nav-text" tooltip>Overview</span></a></li><li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Web</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/web"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/web"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/web"
      ><span class="devsite-nav-text" tooltip>Overview</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/attribution-reporting-updates"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/attribution-reporting-updates"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/attribution-reporting-updates"
      ><span class="devsite-nav-text" tooltip>API updates</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/chrome-shipping"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/chrome-shipping"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/chrome-shipping"
      ><span class="devsite-nav-text" tooltip>Why Chrome shipped the Attribution Reporting API</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/system-overview"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/system-overview"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/system-overview"
      ><span class="devsite-nav-text" tooltip>System overview</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/summary-reports"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/summary-reports"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/summary-reports"
      ><span class="devsite-nav-text" tooltip>Generate summary reports</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/report-schedules"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/report-schedules"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/report-schedules"
      ><span class="devsite-nav-text" tooltip>Report schedules</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/constraints"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/constraints"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/constraints"
      ><span class="devsite-nav-text" tooltip>Constraints</span></a></li><li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Developer guide</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/dev-guide"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/dev-guide"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/dev-guide"
      ><span class="devsite-nav-text" tooltip>Overview</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/getting-started"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/getting-started"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/getting-started"
      ><span class="devsite-nav-text" tooltip>Get started</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/register-attribution-source"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/register-attribution-source"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/register-attribution-source"
      ><span class="devsite-nav-text" tooltip>Register an attribution source</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/register-attribution-trigger"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/register-attribution-trigger"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/register-attribution-trigger"
      ><span class="devsite-nav-text" tooltip>Register triggers</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/enable-conversion-measurement"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/enable-conversion-measurement"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/enable-conversion-measurement"
      ><span class="devsite-nav-text" tooltip>Enable conversion measurement</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/change-attribution-logic"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/change-attribution-logic"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/change-attribution-logic"
      ><span class="devsite-nav-text" tooltip>Change attribution logic</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/define-filters"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/define-filters"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/define-filters"
      ><span class="devsite-nav-text" tooltip>Define filters</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/define-attribution-scopes"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/define-attribution-scopes"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/define-attribution-scopes"
      ><span class="devsite-nav-text" tooltip>Define attribution scopes</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/prevent-duplication"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/prevent-duplication"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/prevent-duplication"
      ><span class="devsite-nav-text" tooltip>Prevent duplication</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/custom-report-windows"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/custom-report-windows"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/custom-report-windows"
      ><span class="devsite-nav-text" tooltip>Custom report windows</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/attribution-reporting-debugging"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/attribution-reporting-debugging"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/attribution-reporting-debugging"
      ><span class="devsite-nav-text" tooltip>Introduction to debug reports</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/attribution-reporting-debugging/part-2"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/attribution-reporting-debugging/part-2"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/attribution-reporting-debugging/part-2"
      ><span class="devsite-nav-text" tooltip>Set up debug reports</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/attribution-reporting-debugging/part-3"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/attribution-reporting-debugging/part-3"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/attribution-reporting-debugging/part-3"
      ><span class="devsite-nav-text" tooltip>Debugging cookbook</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/summary-reports-intro"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/summary-reports-intro"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/summary-reports-intro"
      ><span class="devsite-nav-text" tooltip>Introduction to summary reports</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/contribution-budget"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/contribution-budget"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/contribution-budget"
      ><span class="devsite-nav-text" tooltip>Contribution budget</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/aggregation-keys"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/aggregation-keys"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/aggregation-keys"
      ><span class="devsite-nav-text" tooltip>Aggregation keys</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/understanding-noise"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/understanding-noise"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/understanding-noise"
      ><span class="devsite-nav-text" tooltip>Understand noise</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/working-with-noise"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/working-with-noise"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/working-with-noise"
      ><span class="devsite-nav-text" tooltip>Work with noise</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/design-decisions"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/design-decisions"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/design-decisions"
      ><span class="devsite-nav-text" tooltip>Noiselab</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/measurement-implementation-guide"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/measurement-implementation-guide"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/measurement-implementation-guide"
      ><span class="devsite-nav-text" tooltip>Measurement implementation guide</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/measurement-testing-guide"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/measurement-testing-guide"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/measurement-testing-guide"
      ><span class="devsite-nav-text" tooltip>Measurement testing guide</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/attribution-reporting-data-clearing"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/attribution-reporting-data-clearing"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/attribution-reporting-data-clearing"
      ><span class="devsite-nav-text" tooltip>Data clearing</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/cross-web-app"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/cross-web-app"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/cross-web-app"
      ><span class="devsite-nav-text" tooltip>Cross app and web measurement</span></a></li></ul></div></li></ul></div></li><li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Android</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/android"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/android"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/android"
      ><span class="devsite-nav-text" tooltip>Overview</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/android/attribution-app-to-web"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/android/attribution-app-to-web"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/android/attribution-app-to-web"
      ><span class="devsite-nav-text" tooltip>Cross app and web measurement</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/android/simulation-library"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/android/simulation-library"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/android/simulation-library"
      ><span class="devsite-nav-text" tooltip>Measurement Simulation Library</span></a></li><li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Developer guide</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/android/developer-guide"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/android/developer-guide"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/android/developer-guide"
      ><span class="devsite-nav-text" tooltip>Overview</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/cross-web-app"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/cross-web-app"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/cross-web-app"
      ><span class="devsite-nav-text" tooltip>Cross app and web measurement</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/android/xna-examples"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/android/xna-examples"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/android/xna-examples"
      ><span class="devsite-nav-text" tooltip>Cross-network attribution examples</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/android/integration-guide"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/android/integration-guide"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/android/integration-guide"
      ><span class="devsite-nav-text" tooltip>Integration guide</span></a></li></ul></div></li><li class="devsite-nav-item"><a href="https://developer.android.com/design-for-safety/privacy-sandbox/reference/packages"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: https://developer.android.com/design-for-safety/privacy-sandbox/reference/packages"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="https://developer.android.com/design-for-safety/privacy-sandbox/reference/packages"
      ><span class="devsite-nav-text" tooltip>API reference</span></a></li></ul></div></li></ul></div></li>

  <li class="devsite-nav-item
           devsite-nav-expandable
           devsite-nav-accordion"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Private Aggregation</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/private-aggregation"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/private-aggregation"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/private-aggregation"
      ><span class="devsite-nav-text" tooltip>Overview</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/private-aggregation/overview"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/private-aggregation/overview"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/private-aggregation/overview"
      ><span class="devsite-nav-text" tooltip>API introduction</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/private-aggregation/fundamentals"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/private-aggregation/fundamentals"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/private-aggregation/fundamentals"
      ><span class="devsite-nav-text" tooltip>Fundamentals</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/private-aggregation/private-aggregation-experiment"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/private-aggregation/private-aggregation-experiment"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/private-aggregation/private-aggregation-experiment"
      ><span class="devsite-nav-text" tooltip>Experiment</span></a></li><li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Use cases</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/private-aggregation/unique-reach"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/private-aggregation/unique-reach"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/private-aggregation/unique-reach"
      ><span class="devsite-nav-text" tooltip>Measure unique reach</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/private-aggregation/k-freq-reach"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/private-aggregation/k-freq-reach"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/private-aggregation/k-freq-reach"
      ><span class="devsite-nav-text" tooltip>Measure K+ frequency reach</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/private-aggregation/user-demographics"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/private-aggregation/user-demographics"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/private-aggregation/user-demographics"
      ><span class="devsite-nav-text" tooltip>Measure user demographic</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/private-aggregation/multi-touch-attribution"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/private-aggregation/multi-touch-attribution"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/private-aggregation/multi-touch-attribution"
      ><span class="devsite-nav-text" tooltip>Multi-touch attribution</span></a></li></ul></div></li></ul></div></li>

  <li class="devsite-nav-item
           devsite-nav-expandable
           devsite-nav-accordion"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Aggregation Service</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/aggregation-service"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/aggregation-service"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/aggregation-service"
      ><span class="devsite-nav-text" tooltip>Overview</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/aggregation-service/why-ags"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/aggregation-service/why-ags"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/aggregation-service/why-ags"
      ><span class="devsite-nav-text" tooltip>Why Aggregation Service</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/aggregation-service/how-it-works"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/aggregation-service/how-it-works"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/aggregation-service/how-it-works"
      ><span class="devsite-nav-text" tooltip>How it works</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/aggregation-service/setup"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/aggregation-service/setup"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/aggregation-service/setup"
      ><span class="devsite-nav-text" tooltip>Setup</span></a></li><li class="devsite-nav-item"><a href="https://github.com/privacysandbox/aggregation-service/blob/main/docs/local-testing-tool.md"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: https://github.com/privacysandbox/aggregation-service/blob/main/docs/local-testing-tool.md"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="https://github.com/privacysandbox/aggregation-service/blob/main/docs/local-testing-tool.md"
      ><span class="devsite-nav-text" tooltip>Test locally</span></a></li><li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Implement</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/aggregation-service/privacy-protection-report-strategy"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/aggregation-service/privacy-protection-report-strategy"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/aggregation-service/privacy-protection-report-strategy"
      ><span class="devsite-nav-text" tooltip>Set privacy protections</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/aggregation-service/developer-guides/filtering-ids"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/aggregation-service/developer-guides/filtering-ids"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/aggregation-service/developer-guides/filtering-ids"
      ><span class="devsite-nav-text" tooltip>Filter your results</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/aggregation-service/batch-strategies"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/aggregation-service/batch-strategies"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/aggregation-service/batch-strategies"
      ><span class="devsite-nav-text" tooltip>Batch your reports</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/aggregation-service/understand-ags-api"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/aggregation-service/understand-ags-api"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/aggregation-service/understand-ags-api"
      ><span class="devsite-nav-text" tooltip>Deploy and manage requests</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/aggregation-service/load-testing-framework"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/aggregation-service/load-testing-framework"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/aggregation-service/load-testing-framework"
      ><span class="devsite-nav-text" tooltip>Run load testing</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/aggregation-service/receive-store-aggregatable-reports"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/aggregation-service/receive-store-aggregatable-reports"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/aggregation-service/receive-store-aggregatable-reports"
      ><span class="devsite-nav-text" tooltip>Receive &amp; store aggregatable reports</span></a></li></ul></div></li><li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Troubleshoot</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/aggregation-service/troubleshooting"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/aggregation-service/troubleshooting"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/aggregation-service/troubleshooting"
      ><span class="devsite-nav-text" tooltip>Overview</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/aggregation-service/troubleshooting/diagnose-environment"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/aggregation-service/troubleshooting/diagnose-environment"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/aggregation-service/troubleshooting/diagnose-environment"
      ><span class="devsite-nav-text" tooltip>Diagnose your new or upgraded environment</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/aggregation-service/troubleshooting/diagnose-infrastructure"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/aggregation-service/troubleshooting/diagnose-infrastructure"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/aggregation-service/troubleshooting/diagnose-infrastructure"
      ><span class="devsite-nav-text" tooltip>Diagnose your cloud infrastructure</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/aggregation-service/troubleshooting/diagnose-jobs"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/aggregation-service/troubleshooting/diagnose-jobs"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/aggregation-service/troubleshooting/diagnose-jobs"
      ><span class="devsite-nav-text" tooltip>Diagnose your aggregation jobs</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/aggregation-service/troubleshooting/debug-privacy-budget-exhausted"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/aggregation-service/troubleshooting/debug-privacy-budget-exhausted"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/aggregation-service/troubleshooting/debug-privacy-budget-exhausted"
      ><span class="devsite-nav-text" tooltip>Debug Privacy Exhausted Error</span></a></li></ul></div></li></ul></div></li>

  <li class="devsite-nav-item
           devsite-nav-expandable
           devsite-nav-accordion"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Select URL</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/select-url"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/select-url"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/select-url"
      ><span class="devsite-nav-text" tooltip>Overview for Web</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/select-url/creative-rotation"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/select-url/creative-rotation"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/select-url/creative-rotation"
      ><span class="devsite-nav-text" tooltip>Rotate ad creatives</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/select-url/creative-selection-by-frequency"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/select-url/creative-selection-by-frequency"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/select-url/creative-selection-by-frequency"
      ><span class="devsite-nav-text" tooltip>Select ad creative by frequency</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/select-url/ab-testing"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/select-url/ab-testing"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/select-url/ab-testing"
      ><span class="devsite-nav-text" tooltip>Run A/B testing</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/select-url/known-customer"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/select-url/known-customer"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/select-url/known-customer"
      ><span class="devsite-nav-text" tooltip>Customize experience for known customers</span></a></li></ul></div></li>

  <li class="devsite-nav-item
           devsite-nav-expandable
           devsite-nav-accordion"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Shared Storage</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/shared-storage"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/shared-storage"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/shared-storage"
      ><span class="devsite-nav-text" tooltip>Overview for Web</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/shared-storage/api-walkthrough"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/shared-storage/api-walkthrough"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/shared-storage/api-walkthrough"
      ><span class="devsite-nav-text" tooltip>API walkthrough</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/shared-storage/try-the-demo"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/shared-storage/try-the-demo"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/shared-storage/try-the-demo"
      ><span class="devsite-nav-text" tooltip>Try the demo</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/shared-storage/debugging"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/shared-storage/debugging"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/shared-storage/debugging"
      ><span class="devsite-nav-text" tooltip>Debugging</span></a></li></ul></div></li>

  <li class="devsite-nav-item
           devsite-nav-expandable
           devsite-nav-accordion"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>SDK Runtime</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/sdk-runtime"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/sdk-runtime"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/sdk-runtime"
      ><span class="devsite-nav-text" tooltip>Overview</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/sdk-runtime/architecture"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/sdk-runtime/architecture"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/sdk-runtime/architecture"
      ><span class="devsite-nav-text" tooltip>Architecture</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/sdk-runtime/ui-presentation"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/sdk-runtime/ui-presentation"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/sdk-runtime/ui-presentation"
      ><span class="devsite-nav-text" tooltip>UI presentation APIs</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/sdk-runtime/viewability"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/sdk-runtime/viewability"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/sdk-runtime/viewability"
      ><span class="devsite-nav-text" tooltip>Viewability</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/sdk-runtime/backward-compatibility"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/sdk-runtime/backward-compatibility"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/sdk-runtime/backward-compatibility"
      ><span class="devsite-nav-text" tooltip>Backward compatibility</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/sdk-runtime/full-screen-ads"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/sdk-runtime/full-screen-ads"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/sdk-runtime/full-screen-ads"
      ><span class="devsite-nav-text" tooltip>Full-screen ads</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/sdk-runtime/native-ads"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/sdk-runtime/native-ads"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/sdk-runtime/native-ads"
      ><span class="devsite-nav-text" tooltip>Native ads</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/sdk-runtime/mediation"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/sdk-runtime/mediation"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/sdk-runtime/mediation"
      ><span class="devsite-nav-text" tooltip>Mediation</span></a></li><li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Developer guide</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/sdk-runtime/developer-guide"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/sdk-runtime/developer-guide"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/sdk-runtime/developer-guide"
      ><span class="devsite-nav-text" tooltip>Overview</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/sdk-runtime/developer-guide/key-concepts"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/sdk-runtime/developer-guide/key-concepts"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/sdk-runtime/developer-guide/key-concepts"
      ><span class="devsite-nav-text" tooltip>Key concepts</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/sdk-runtime/developer-guide/dev-environment"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/sdk-runtime/developer-guide/dev-environment"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/sdk-runtime/developer-guide/dev-environment"
      ><span class="devsite-nav-text" tooltip>Set up your developer environment</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/sdk-runtime/developer-guide/build-re-sdk"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/sdk-runtime/developer-guide/build-re-sdk"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/sdk-runtime/developer-guide/build-re-sdk"
      ><span class="devsite-nav-text" tooltip>Build a Runtime-Enabled SDK</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/sdk-runtime/developer-guide/consume-re-sdk"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/sdk-runtime/developer-guide/consume-re-sdk"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/sdk-runtime/developer-guide/consume-re-sdk"
      ><span class="devsite-nav-text" tooltip>Consume the Runtime-Enabled SDK</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/sdk-runtime/developer-guide/build-test"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/sdk-runtime/developer-guide/build-test"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/sdk-runtime/developer-guide/build-test"
      ><span class="devsite-nav-text" tooltip>Build and test</span></a></li></ul></div></li></ul></div></li>
          </ul>
        
        
          
    
  
    
  
    
  
    
  
    
  
        
        
          
    
  
        
      </div>
    
  </div>
</nav>
        
      </devsite-book-nav>
      <section id="gc-wrapper">
        <main role="main" id="main-content" class="devsite-main-content"
            
              has-book-nav
              has-sidebar
            >
          <div class="devsite-sidebar">
            <div class="devsite-sidebar-content">
                
                <devsite-toc class="devsite-nav"
                            role="navigation"
                            aria-label="On this page"
                            depth="2"
                            scrollbars
                  ></devsite-toc>
                <devsite-recommendations-sidebar class="nocontent devsite-nav">
                </devsite-recommendations-sidebar>
            </div>
          </div>
          <devsite-content>
            
              












<article class="devsite-article">
  
  
  
  
  

  <div class="devsite-article-meta nocontent" role="navigation">
    
    
    <ul class="devsite-breadcrumb-list"
  
    aria-label="Breadcrumb">
  
  <li class="devsite-breadcrumb-item
             ">
    
    
    
      
  <a href="https://privacysandbox.google.com/"
      
        class="devsite-breadcrumb-link gc-analytics-event"
      
        data-category="Site-Wide Custom Events"
      
        data-label="Breadcrumbs"
      
        data-value="1"
      
        track-type="globalNav"
      
        track-name="breadcrumb"
      
        track-metadata-position="1"
      
        track-metadata-eventdetail="Privacy Sandbox"
      
    >
    
        Privacy Sandbox
      
  </a>
  
    
  </li>
  
  <li class="devsite-breadcrumb-item
             ">
    
      
      <div class="devsite-breadcrumb-guillemet material-icons" aria-hidden="true"></div>
    
    
    
      
  <a href="https://privacysandbox.google.com/private-advertising"
      
        class="devsite-breadcrumb-link gc-analytics-event"
      
        data-category="Site-Wide Custom Events"
      
        data-label="Breadcrumbs"
      
        data-value="2"
      
        track-type="globalNav"
      
        track-name="breadcrumb"
      
        track-metadata-position="2"
      
        track-metadata-eventdetail=""
      
    >
    
        Private advertising
      
  </a>
  
    
  </li>
  
</ul>
    
      
    <devsite-thumb-rating position="header">
    </devsite-thumb-rating>
  
    
  </div>
  
    <devsite-feedback
  position="header"
  project-name="Privacy Sandbox"
  product-id="5335444"
  bucket=""
  context=""
  version="t-devsite-webserver-20250918-r00-rc00.472063434118731697"
  data-label="Send Feedback Button"
  track-type="feedback"
  track-name="sendFeedbackLink"
  track-metadata-position="header"
  class="nocontent"
  
    disable-product-feedback
  
  
  
    
      project-icon="https://privacysandbox.google.com/static/privacy-sandbox-logo.svg"
    
  
  
  
  >

  <button>
  
    
    Send feedback
  
  </button>
</devsite-feedback>
  
    <h1 class="devsite-page-title" tabindex="-1">
      Attribution Reporting API Developer&#39;s Guide<div class="devsite-actions" hidden data-nosnippet><devsite-feature-tooltip
      ack-key="AckCollectionsBookmarkTooltipDismiss"
      analytics-category="Site-Wide Custom Events"
      analytics-action-show="Callout Profile displayed"
      analytics-action-close="Callout Profile dismissed"
      analytics-label="Create Collection Callout"
      class="devsite-page-bookmark-tooltip nocontent"
      dismiss-button="true"
      id="devsite-collections-dropdown"
      
      dismiss-button-text="Dismiss"

      
      close-button-text="Got it">

    
    
      <devsite-bookmark></devsite-bookmark>
    

    <span slot="popout-heading">
      
      Stay organized with collections
    </span>
    <span slot="popout-contents">
      
      Save and categorize content based on your preferences.
    </span>
  </devsite-feature-tooltip></div>
  
      
    </h1>
  <div class="devsite-page-title-meta"><devsite-view-release-notes></devsite-view-release-notes></div>
  

  <devsite-toc class="devsite-nav"
    depth="2"
    devsite-toc-embedded
    >
  </devsite-toc>
  
    
  <div class="devsite-article-body clearfix
  ">

  
    
    














<div>
<devsite-nav-buttons name="version">
  <button style="background-color:#3ADC83; color:black;"
    value="preview" default>Developer Preview</button>
  <button style="background-color:#3ADC83; color:black;"
    value="beta" >Beta</button>
</devsite-nav-buttons>
</div>

<p style="font-size:10pt;">As you read through the Privacy Sandbox on Android
documentation, use the <b>Developer Preview</b> or <b>Beta</b> button to select
the program version that you're working with, as instructions may vary.</p>

<hr class="full-width">



<p>The Attribution Reporting API is designed to provide improved user privacy by
removing reliance on cross-party user identifiers, and to support key use cases
for attribution and conversion measurement across apps. This Developer&#39;s Guide
describes how to configure and test the Attribution Reporting APIs to register
ad clicks, views, and conversions by calling methods that register the relevant
triggers and sources for such events.</p>

<p>This guide teaches you how to set up server endpoints and build a client app
that calls these services. Learn more about the overall design of Attribution
Reporting API in the <a href="/private-advertising/attribution-reporting/android#extended-debugging-reports">design proposal</a>.</p>

<h2 id="terms" data-text="Key Terms" tabindex="-1">Key Terms</h2>

<ul>
<li><em>Attribution sources</em> refer to clicks or views.</li>
<li><em>Triggers</em> are events that can be attributed to conversions.</li>
<li><em>Reports</em> contain data about a trigger and the corresponding attribution
source. These reports are sent in response to trigger events. The
Attribution Reporting API supports <a href="/private-advertising/attribution-reporting/android#event-level-reports">event-level reports</a> and
<a href="/private-advertising/attribution-reporting/android#aggregatable-reports">aggregatable reports</a>.</li>
</ul>

<h2 id="before-you-begin" data-text="Before you begin" tabindex="-1">Before you begin</h2>

<p>To use the Attribution Reporting API, complete the server-side and client-side
tasks listed in the following sections.</p>

<h3 id="set-attribution-endpoints" data-text="Set up Attribution Reporting API endpoints" tabindex="-1">Set up Attribution Reporting API endpoints</h3>

<p>The Attribution Reporting API requires a set of endpoints that you can access
from a test device or emulator. Create one endpoint for each of the following
server-side tasks:</p>

<ul>
<li>Register an <a href="#register-attribution">attribution source (view or click)</a></li>
<li>Register a <a href="#register-trigger">trigger (conversion)</a></li>
<li>Accept <a href="#accept-event-level-reports">event-level reports</a></li>
<li>Accept <a href="#accept-aggregatable-reports">aggregatable reports</a></li>
</ul>

<p>There are several methods of setting up the required endpoints:</p>

<ul>
<li>The fastest way to get up and running is deploy the
<a href="https://spec.openapis.org/oas/latest.html">OpenAPI v3</a> service definitions from our sample code
repository to a mock or microservices platform. You can use
<a href="https://learning.postman.com/docs/designing-and-developing-your-api/mocking-data/setting-up-mock/">Postman</a>, <a href="https://github.com/stoplightio/prism">Prism</a>, or any other mock server
platform that accepts this format. Deploy each endpoint and keep track of
the URIs for use in your app. To verify report delivery, refer to the calls
previously made to the mock or serverless platform.</li>
<li>Run your own standalone server using the <a href="https://spring.io/projects/spring-boot">Spring Boot</a>-based
<a href="https://github.com/android/privacy-sandbox-samples/tree/main/AttributionReporting">Kotlin sample</a>. Deploy this server on your cloud provider or internal
infrastructure.</li>
<li>Use the service definitions as examples to integrate the endpoints into your
existing system.</li>
</ul>
<aside class="note"><strong>Note:</strong><span> See the <a href="/setup/android">Enroll for a Privacy Sandbox account</a> for
more information about enrolling URIs. Example endpoint names appear in the
following sections.</span></aside>
<h3 id="accept-source-registration" data-text="Accept source registration" tabindex="-1">Accept source registration</h3>

<p>This endpoint should be addressable from a URI similar to the following:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded><code translate="no" dir="ltr">https://adtech.example/attribution_source
</code></pre></devsite-code>
<p>When a client app <a href="#register-attribution">registers an attribution source</a>, it provides the URI for
this server endpoint. The Attribution Reporting API then makes a request and
includes one of the following headers:</p>

<ul>
<li><p>For click events:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JSON"><code translate="no" dir="ltr"><span class="devsite-syntax-err">A</span><span class="devsite-syntax-kc">ttr</span><span class="devsite-syntax-err">ibu</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">io</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">Repor</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">i</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-err">g</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">Source</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">I</span><span class="devsite-syntax-kc">nf</span><span class="devsite-syntax-err">o</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kc">na</span><span class="devsite-syntax-err">viga</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">io</span><span class="devsite-syntax-kc">n</span>
</code></pre></devsite-code></li>
<li><p>For view events:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JSON"><code translate="no" dir="ltr"><span class="devsite-syntax-err">A</span><span class="devsite-syntax-kc">ttr</span><span class="devsite-syntax-err">ibu</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">io</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">Repor</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">i</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-err">g</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">Source</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">I</span><span class="devsite-syntax-kc">nf</span><span class="devsite-syntax-err">o</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">eve</span><span class="devsite-syntax-kc">nt</span>
</code></pre></devsite-code></li>
</ul>

<p>Configure your server endpoint to respond with the following:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JSON"><code translate="no" dir="ltr"><span class="devsite-syntax-c1">// Metadata associated with attribution source.</span>
<span class="devsite-syntax-err">A</span><span class="devsite-syntax-kc">ttr</span><span class="devsite-syntax-err">ibu</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">io</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">Repor</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">i</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-err">g</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">Regis</span><span class="devsite-syntax-kc">ter</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">Source</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"destination"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"[app package name]"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"web_destination"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"[eTLD+1]"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"source_event_id"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"[64 bit unsigned integer]"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"expiry"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"[64 bit signed integer]"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"event_report_window"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"[64-bit signed integer]"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"aggregatable_report_window"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"[64-bit signed integer]"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"priority"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"[64 bit signed integer]"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"filter_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"[key name 1]"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-s2">"key1 value 1"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"key1 value 2"</span><span class="devsite-syntax-p">],</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"[key name 2]"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-s2">"key2 value 1"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"key2 value 2"</span><span class="devsite-syntax-p">],</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// Note: "source_type" key will be automatically generated as</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// one of {"navigation", "event"}.</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">},</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// Attribution source metadata specifying histogram contributions in aggregate</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// report.</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"aggregation_keys"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"[key1 name]"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"[key1 value]"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"[key2 name]"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"[key2 value]"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">},</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"debug_key"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"[64-bit unsigned integer]"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"debug_reporting"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-err">boolea</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-p">]</span>
<span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-c1">// Specify additional ad tech URLs to register this source with.</span>
<span class="devsite-syntax-err">A</span><span class="devsite-syntax-kc">ttr</span><span class="devsite-syntax-err">ibu</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">io</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">Repor</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">i</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-err">g</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">Redirec</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span>&lt;<span class="devsite-syntax-err">Ad</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">Tech</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">Par</span><span class="devsite-syntax-kc">tner</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">URI</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">1</span>&gt;
<span class="devsite-syntax-err">A</span><span class="devsite-syntax-kc">ttr</span><span class="devsite-syntax-err">ibu</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">io</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">Repor</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">i</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-err">g</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">Redirec</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span>&lt;<span class="devsite-syntax-err">Ad</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">Tech</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">Par</span><span class="devsite-syntax-kc">tner</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">URI</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">2</span>&gt;
</code></pre></devsite-code>
<p>Here&#39;s an example with sample values added:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JSON"><code translate="no" dir="ltr"><span class="devsite-syntax-err">A</span><span class="devsite-syntax-kc">ttr</span><span class="devsite-syntax-err">ibu</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">io</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">Repor</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">i</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-err">g</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">Regis</span><span class="devsite-syntax-kc">ter</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">Source</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"destination"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"android-app://com.example.advertiser"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"source_event_id"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"234"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"expiry"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"259200"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"event_report_window"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"172800"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"aggregatable_report_window"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"172800"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"priority"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"5"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"filter_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"product_id"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-s2">"1234"</span><span class="devsite-syntax-p">]</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">},</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"aggregation_keys"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// Generates a "0x159" key piece named (low order bits of the key) for the key</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// named "campaignCounts".</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// User saw an ad from campaign 345 (out of 511).</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"campaignCounts"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"0x159"</span><span class="devsite-syntax-p">,</span>

<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// Generates a "0x5" key piece (low order bits of the key) for the key named</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// "geoValue".</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// Source-side geo region = 5 (US), out of a possible ~100 regions.</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"geoValue"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"0x5"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">},</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// Opts in to receiving verbose debug reports</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"debug_reporting"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kc">true</span>
<span class="devsite-syntax-p">}</span>

<span class="devsite-syntax-err">A</span><span class="devsite-syntax-kc">ttr</span><span class="devsite-syntax-err">ibu</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">io</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">Repor</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">i</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-err">g</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">Redirec</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-p">:</span>
<span class="devsite-syntax-err">h</span><span class="devsite-syntax-kc">tt</span><span class="devsite-syntax-err">ps</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-c1">//adtechpartner1.example?their_ad_click_id=567</span>
<span class="devsite-syntax-err">A</span><span class="devsite-syntax-kc">ttr</span><span class="devsite-syntax-err">ibu</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">io</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">Repor</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">i</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-err">g</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">Redirec</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-p">:</span>
<span class="devsite-syntax-err">h</span><span class="devsite-syntax-kc">tt</span><span class="devsite-syntax-err">ps</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-c1">//adtechpartner2.example?their_ad_click_id=890</span>
</code></pre></devsite-code><aside class="note"><strong>Note:</strong><span> For consistent results, properties that expect numeric values such as
  <code translate="no" dir="ltr">source_event_id</code> or <code translate="no" dir="ltr">expiry</code> should be sent in quotes as string values, as
  indicated in the examples.</span></aside>
<p>If <code translate="no" dir="ltr">Attribution-Reporting-Redirects</code> contains URIs of ad tech partners, the
Attribution Reporting API then makes a similar request to each URI. Each ad tech
partner must configure a server that responds with these headers:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JSON"><code translate="no" dir="ltr"><span class="devsite-syntax-err">A</span><span class="devsite-syntax-kc">ttr</span><span class="devsite-syntax-err">ibu</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">io</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">Repor</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">i</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-err">g</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">Regis</span><span class="devsite-syntax-kc">ter</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">Source</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"destination"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"[app package name]"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"web_destination"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"[eTLD+1]"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"source_event_id"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"[64 bit unsigned integer]"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"expiry"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"[64 bit signed integer]"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"event_report_window"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"[64-bit signed integer]"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"aggregatable_report_window"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"[64-bit signed integer]"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"priority"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"[64 bit signed integer]"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"filter_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"[key name 1]"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-s2">"key1 value 1"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"key1 value 2"</span><span class="devsite-syntax-p">],</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"[key name 2]"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-s2">"key2 value 1"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"key2 value 2"</span><span class="devsite-syntax-p">],</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// Note: "source_type" key will be automatically generated as</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// one of {"navigation", "event"}.</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">},</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"aggregation_keys"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"[key1 name]"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"[key1 value]"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"[key2 name]"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"[key2 value]"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-c1">// The Attribution-Reporting-Redirect header is ignored for ad tech partners.</span>
</code></pre></devsite-code><aside class="note"><strong>Note:</strong><span> Only the ad tech platform that initiates the API call can specify partners
in <code translate="no" dir="ltr">Attribution-Reporting-Redirect</code>.</span></aside>
<h3 id="accept-trigger-registration" data-text="Accept conversion trigger registration" tabindex="-1">Accept conversion trigger registration</h3>

<p>This endpoint should be addressable from a URI similar to the following:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="scdoc"><code translate="no" dir="ltr">https://adtech.example/attribution_trigger
</code></pre></devsite-code>
<p>When a client app <a href="#register-trigger">registers a trigger event</a>, it provides the URI for this
server endpoint. The Attribution Reporting API then makes a request and includes
one of the following headers:</p>

<p>Configure your server endpoint to respond with the following:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JSON"><code translate="no" dir="ltr"><span class="devsite-syntax-c1">// Metadata associated with trigger.</span>
<span class="devsite-syntax-err">A</span><span class="devsite-syntax-kc">ttr</span><span class="devsite-syntax-err">ibu</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">io</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">Repor</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">i</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-err">g</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">Regis</span><span class="devsite-syntax-kc">ter</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">Trigger</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"event_trigger_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// "trigger_data returned" in event reports is truncated to</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// the last 1 or 3 bits, based on conversion type.</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"trigger_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"[unsigned 64-bit integer]"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"priority"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"[signed 64-bit integer]"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"deduplication_key"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"[signed 64-bit integer]"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// "filter" and "not_filters" are optional fields which allow configuring</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// event trigger data based on source's filter_data. They consist of a</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// filter set, which is a list of filter maps. An event_trigger_data object</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// is ignored if none of the filter maps in the set match the source's</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// filter data.</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// Note: "source_type" can be used as a key in a filter map to filter based</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// on the source's "navigation" or "event" type. The first</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// Event-Trigger that matches (based on the filters/not_filters) will be</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// used for report generation. If none of the event-triggers match, no</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// event report will be generated.</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"filters"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[{</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"[key name 1]"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-s2">"key1 value 1"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"key1 value 2"</span><span class="devsite-syntax-p">],</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">// If a key is missing from filters or source's filter_data, it won't be</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">// used during matching.</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"[key name 2]"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-s2">"key2 value 1"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"key2 value 2"</span><span class="devsite-syntax-p">],</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}],</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"not_filters"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">[{</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"[key name 1]"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-s2">"key1 value 1"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"key1 value 2"</span><span class="devsite-syntax-p">],</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">// If a key is missing from not_filters or source's filter_data, it won't</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">// be used during matching.</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"[key name 2]"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-s2">"key2 value 1"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"key2 value 2"</span><span class="devsite-syntax-p">],</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}]</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">}],</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// Specify a list of dictionaries that generates aggregation keys.</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"aggregatable_trigger_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// Each dictionary entry independently adds pieces to multiple source keys.</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"key_piece"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"[key piece value]"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"source_keys"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-s2">"[key name the key piece value applies to]"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-s2">"list of IDs in source to match. Non-matching IDs are ignored"</span><span class="devsite-syntax-p">]]</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">// filters/not_filters are optional fields similar to event trigger data</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">// filter fields.</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"filters"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[{</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-nt">"[key name 1]"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-s2">"key1 value 1"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"key1 value 2"</span><span class="devsite-syntax-p">]</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-p">}],</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"not_filters"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">[{</span>
<span class="devsite-syntax-w">          </span><span class="devsite-syntax-nt">"[key name 1]"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-s2">"key1 value 1"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"key1 value 2"</span><span class="devsite-syntax-p">],</span>
<span class="devsite-syntax-w">          </span><span class="devsite-syntax-nt">"[key name 2]"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-s2">"key2 value 1"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"key2 value 2"</span><span class="devsite-syntax-p">],</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-p">}]</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">},</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-err">..</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">],</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// Specify an amount of an abstract value which can be integers in [1, 2^16]</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// to contribute to each key that is attached to aggregation keys in the</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// order they are generated.</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"aggregatable_values"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span>
<span class="devsite-syntax-w">     </span><span class="devsite-syntax-c1">// Each source event can contribute a maximum of L1 = 2^16 to the</span>
<span class="devsite-syntax-w">     </span><span class="devsite-syntax-c1">// aggregate histogram.</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">     </span><span class="devsite-syntax-nt">"[key_name]"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-err">value</span><span class="devsite-syntax-p">]</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">},</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-err">..</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">],</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-err">aggrega</span><span class="devsite-syntax-kc">ta</span><span class="devsite-syntax-err">ble_deduplica</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">io</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-err">_keys</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[{</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-err">deduplica</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">io</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-err">_key</span><span class="devsite-syntax-s2">": [unsigned 64-bit integer],</span>
<span class="devsite-syntax-s2">    "</span><span class="devsite-syntax-kc">f</span><span class="devsite-syntax-err">il</span><span class="devsite-syntax-kc">ters</span><span class="devsite-syntax-s2">": {</span>
<span class="devsite-syntax-s2">        "</span><span class="devsite-syntax-err">ca</span><span class="devsite-syntax-kc">te</span><span class="devsite-syntax-err">gory</span><span class="devsite-syntax-s2">": [filter_1, …, filter_H]</span>
<span class="devsite-syntax-s2">      },</span>
<span class="devsite-syntax-s2">    "</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-err">o</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">_</span><span class="devsite-syntax-kc">f</span><span class="devsite-syntax-err">il</span><span class="devsite-syntax-kc">ters</span><span class="devsite-syntax-s2">": {</span>
<span class="devsite-syntax-s2">        "</span><span class="devsite-syntax-err">ca</span><span class="devsite-syntax-kc">te</span><span class="devsite-syntax-err">gory</span><span class="devsite-syntax-s2">": [filter_1, …, filter_J]</span>
<span class="devsite-syntax-s2">      }</span>
<span class="devsite-syntax-s2">  },</span>
<span class="devsite-syntax-s2">  ...</span>
<span class="devsite-syntax-s2">  {</span>
<span class="devsite-syntax-s2">  "</span><span class="devsite-syntax-err">deduplica</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">io</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-err">_key</span><span class="devsite-syntax-s2">": [unsigned 64-bit integer],</span>
<span class="devsite-syntax-s2">    "</span><span class="devsite-syntax-kc">f</span><span class="devsite-syntax-err">il</span><span class="devsite-syntax-kc">ters</span><span class="devsite-syntax-s2">": {</span>
<span class="devsite-syntax-s2">        "</span><span class="devsite-syntax-err">ca</span><span class="devsite-syntax-kc">te</span><span class="devsite-syntax-err">gory</span><span class="devsite-syntax-s2">": [filter_1, …, filter_D]</span>
<span class="devsite-syntax-s2">      },</span>
<span class="devsite-syntax-s2">    "</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-err">o</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">_</span><span class="devsite-syntax-kc">f</span><span class="devsite-syntax-err">il</span><span class="devsite-syntax-kc">ters</span><span class="devsite-syntax-s2">": {</span>
<span class="devsite-syntax-s2">        "</span><span class="devsite-syntax-err">ca</span><span class="devsite-syntax-kc">te</span><span class="devsite-syntax-err">gory</span><span class="devsite-syntax-s2">": [filter_1, …, filter_J]</span>
<span class="devsite-syntax-s2">      }</span>
<span class="devsite-syntax-s2">    }</span>
<span class="devsite-syntax-s2">  ]</span>

<span class="devsite-syntax-s2">  "</span><span class="devsite-syntax-err">debug_key</span><span class="devsite-syntax-s2">": "</span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-mi">64-</span><span class="devsite-syntax-err">bi</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">u</span><span class="devsite-syntax-kc">ns</span><span class="devsite-syntax-err">ig</span><span class="devsite-syntax-kc">ne</span><span class="devsite-syntax-err">d</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">i</span><span class="devsite-syntax-kc">nte</span><span class="devsite-syntax-err">ger</span><span class="devsite-syntax-p">]</span><span class="devsite-syntax-s2">",</span>
<span class="devsite-syntax-s2">  "</span><span class="devsite-syntax-err">debug_repor</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">i</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-err">g</span><span class="devsite-syntax-s2">": [boolean]</span>

<span class="devsite-syntax-s2">}</span>
<span class="devsite-syntax-s2">// Specify additional ad tech URLs to register this trigger with.</span>
<span class="devsite-syntax-s2">// Repeated Header field "</span><span class="devsite-syntax-err">A</span><span class="devsite-syntax-kc">ttr</span><span class="devsite-syntax-err">ibu</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">io</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">Repor</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">i</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-err">g</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">Redirec</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">"</span>
<span class="devsite-syntax-err">Attribution-Reporting-Redirect: &lt;Ad Tech Partner URI 1&gt;</span>
<span class="devsite-syntax-err">Attribution-Reporting-Redirect: &lt;Ad Tech Partner URI 2&gt;</span>
</code></pre></devsite-code>
<p>Here&#39;s an example with sample values added:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JSON"><code translate="no" dir="ltr"><span class="devsite-syntax-err">A</span><span class="devsite-syntax-kc">ttr</span><span class="devsite-syntax-err">ibu</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">io</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">Repor</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">i</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-err">g</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">Regis</span><span class="devsite-syntax-kc">ter</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">Trigger</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"event_trigger_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"trigger_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"1122"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-c1">// Returns 010 for CTCs and 0 for VTCs in reports.</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"priority"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"3"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"deduplication_key"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nt">"3344"</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"filters"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[{</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-c1">// Filter strings can't exceed 25 characters</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"product_id"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-s2">"1234"</span><span class="devsite-syntax-p">],</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"source_type"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-s2">"event"</span><span class="devsite-syntax-p">]</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}]</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">},</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"trigger_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"4"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-c1">// Returns 100 for CTCs and 0 for VTCs in reports.</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"priority"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"3"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"deduplication_key"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nt">"3344"</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"filters"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[{</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-c1">// Filter strings can't exceed 25 characters</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"product_id"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-s2">"1234"</span><span class="devsite-syntax-p">],</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"source_type"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-s2">"navigation"</span><span class="devsite-syntax-p">]</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}]</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">}],</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"aggregatable_trigger_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// Each dictionary independently adds pieces to multiple source keys.</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">// Conversion type purchase = 2 at a 9-bit offset, i.e. 2 &lt;&lt; 9.</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">// A 9-bit offset is needed because there are 511 possible campaigns,</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">// which takes up 9 bits in the resulting key.</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"key_piece"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"0x400"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-c1">// Conversion type purchase = 2</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">// Apply this key piece to:</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"source_keys"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-s2">"campaignCounts"</span><span class="devsite-syntax-p">]</span>
<span class="devsite-syntax-w">       </span><span class="devsite-syntax-c1">// Filter strings can't exceed 25 characters</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">},</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">// Purchase category shirts = 21 at a 7-bit offset, i.e. 21 &lt;&lt; 7.</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">// A 7-bit offset is needed because there are ~100 regions for the geo</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">// key, which takes up 7 bits of space in the resulting key.</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"key_piece"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"0xA80"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">// Apply this key piece to:</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"source_keys"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-s2">"geoValue"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"nonMatchingIdsAreIgnored"</span><span class="devsite-syntax-p">]</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">// source_key values must not exceed the limit of 25 characters</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">],</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"aggregatable_values"</span><span class="devsite-syntax-p">:</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">// Privacy budget for each key is L1 / 2 = 2^15 (32768).</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">// Conversion count was 1.</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">// Scale the count to use the full budget allocated: 1 * 32768 = 32768.</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"campaignCounts"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">32768</span><span class="devsite-syntax-p">,</span>

<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">// Purchase price was $52.</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">// Purchase values for the app range from $1 to $1,024 (integers only).</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">// Scaling factor applied is 32768 / 1024 = 32.</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">// For $52 purchase, scale the value by 32 ($52 * 32 = $1,664).</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"geoValue"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">1664</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// aggregatable_deduplication_keys is an optional field. Up to 50 "keys"</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// can be included in the aggregatable_deduplication_keys list. Filters, not</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// filters, and deduplication_key are optional fields. If deduplication_key</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// is omitted, it will be treated as a null value. See</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// https://wicg.github.io/attribution-reporting-api/#triggering-aggregatable-attribution</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-err">aggrega</span><span class="devsite-syntax-kc">ta</span><span class="devsite-syntax-err">ble_deduplica</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">io</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-err">_keys</span><span class="devsite-syntax-p">:</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">[</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-err">deduplica</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">io</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-err">_key</span><span class="devsite-syntax-s2">": 3,</span>
<span class="devsite-syntax-s2">        "</span><span class="devsite-syntax-kc">f</span><span class="devsite-syntax-err">il</span><span class="devsite-syntax-kc">ters</span><span class="devsite-syntax-s2">": {</span>
<span class="devsite-syntax-s2">          "</span><span class="devsite-syntax-err">ca</span><span class="devsite-syntax-kc">te</span><span class="devsite-syntax-err">gory</span><span class="devsite-syntax-s2">": [A]</span>
<span class="devsite-syntax-s2">        }</span>
<span class="devsite-syntax-s2">    },</span>
<span class="devsite-syntax-s2">    {</span>
<span class="devsite-syntax-s2">    "</span><span class="devsite-syntax-err">deduplica</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">io</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-err">_key</span><span class="devsite-syntax-s2">": 4,</span>
<span class="devsite-syntax-s2">        "</span><span class="devsite-syntax-kc">f</span><span class="devsite-syntax-err">il</span><span class="devsite-syntax-kc">ters</span><span class="devsite-syntax-s2">": {</span>
<span class="devsite-syntax-s2">          "</span><span class="devsite-syntax-err">ca</span><span class="devsite-syntax-kc">te</span><span class="devsite-syntax-err">gory</span><span class="devsite-syntax-s2">": [C, D]</span>
<span class="devsite-syntax-s2">        },</span>
<span class="devsite-syntax-s2">        "</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-err">o</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">_</span><span class="devsite-syntax-kc">f</span><span class="devsite-syntax-err">il</span><span class="devsite-syntax-kc">ters</span><span class="devsite-syntax-s2">": {</span>
<span class="devsite-syntax-s2">          "</span><span class="devsite-syntax-err">ca</span><span class="devsite-syntax-kc">te</span><span class="devsite-syntax-err">gory</span><span class="devsite-syntax-s2">": [F]</span>
<span class="devsite-syntax-s2">        }</span>
<span class="devsite-syntax-s2">    }</span>
<span class="devsite-syntax-s2">  ]</span>
<span class="devsite-syntax-s2">  // Opts into receiving verbose debug reports</span>
<span class="devsite-syntax-s2">  "</span><span class="devsite-syntax-err">debug_repor</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">i</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-err">g": true</span>
<span class="devsite-syntax-err">}</span>
<span class="devsite-syntax-err">Attribution-Reporting-Redirect:https://adtechpartner.example?app_install=567</span>
</code></pre></devsite-code>
<p>There is a limit of 25 bytes per aggregation key ID and filter string. This
means that your aggregation key IDs and filter strings shouldn&#39;t exceed 25
characters. In this example, <code translate="no" dir="ltr">campaignCounts</code> is 14 characters, so it is a valid
aggregation key ID, and <code translate="no" dir="ltr">1234</code> is 4 characters, so it is a valid filter string.
If an aggregation key ID or filter string exceeds 25 characters, the trigger is
ignored.</p>

<p>If <code translate="no" dir="ltr">Attribution-Reporting-Redirect</code> contains URIs of ad tech partners, the
Attribution Reporting API then makes a similar request to each URI. Each ad tech
partner must configure a server that responds with these headers:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JSON"><code translate="no" dir="ltr"><span class="devsite-syntax-c1">// Metadata associated with trigger.</span>
<span class="devsite-syntax-err">A</span><span class="devsite-syntax-kc">ttr</span><span class="devsite-syntax-err">ibu</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">io</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">Repor</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">i</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-err">g</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">Regis</span><span class="devsite-syntax-kc">ter</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">Trigger</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"event_trigger_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// "trigger_data" returned in event reports is truncated to</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// the last 1 or 3 bits, based on conversion type.</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"trigger_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"[unsigned 64-bit integer]"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"priority"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"[signed 64-bit integer]"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"deduplication_key"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"[signed 64-bit integer]"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// filter and not_filters are optional fields which allow configuring</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// different event trigger data based on source's filter_data. They</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// consist of a filter set, which is a list of filter maps. An</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// event_trigger_data object is ignored if none of the filter maps in the</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// set match the source's filter data. Note: "source_type" can be used as</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// a key in a filter map to filter based on the source's "navigation" or</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// "event" type. The first Event-Trigger that matches (based on the</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// filters/not_filters) will be used for report generation. If none of the</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// event-triggers match, no report will be generated.</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"filters"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[{</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"[key name 1]"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-s2">"key1 value 1"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"key1 value 2"</span><span class="devsite-syntax-p">],</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">// If a key is missing from filters or source's filter_data, it won't be</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">// used during matching.</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"[key name 2]"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-s2">"key2 value 1"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"key2 value 2"</span><span class="devsite-syntax-p">],</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}],</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"not_filters"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">[{</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"[key name 1]"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-s2">"key1 value 1"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"key1 value 2"</span><span class="devsite-syntax-p">],</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">// If a key is missing from not_filters or source's filter_data, it won't</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">// be used during matching.</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"[key name 2]"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-s2">"key2 value 1"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"key2 value 2"</span><span class="devsite-syntax-p">],</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}]</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">}],</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"aggregatable_trigger_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// Each dictionary entry independently adds pieces to multiple source keys.</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"key_piece"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"[key piece value]"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"source_keys"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-s2">"[key name the key piece value applies to]"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-s2">"list of IDs in source to match. Non-matching IDs are ignored"</span><span class="devsite-syntax-p">]],</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">// filters/not_filters are optional fields similar to event trigger data</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">// filter fields.</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"filters"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[{</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-nt">"[key name 1]"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-s2">"key1 value 1"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"key1 value 2"</span><span class="devsite-syntax-p">]</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-p">}],</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"not_filters"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">[{</span>
<span class="devsite-syntax-w">          </span><span class="devsite-syntax-nt">"[key name 1]"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-s2">"key1 value 1"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"key1 value 2"</span><span class="devsite-syntax-p">],</span>
<span class="devsite-syntax-w">          </span><span class="devsite-syntax-nt">"[key name 2]"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-s2">"key2 value 1"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"key2 value 2"</span><span class="devsite-syntax-p">],</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-p">}]</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">},</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-err">..</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">],</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// Specify an amount of an abstract value which can be integers in [1, 2^16] to</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// contribute to each key that is attached to aggregation keys in the order they</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// are generated.</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"aggregatable_values"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// Each source event can contribute a maximum of L1 = 2^16 to the aggregate</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// histogram.</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">     </span><span class="devsite-syntax-nt">"[key_name]"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-err">value</span><span class="devsite-syntax-p">]</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">]</span>
<span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-c1">// The Attribution-Reporting-Redirect header is ignored for ad tech partners.</span>
</code></pre></devsite-code><aside class="note"><strong>Note:</strong><span> Only the ad tech platform that initiates the API call can specify partners
in <code translate="no" dir="ltr">Attribution-Reporting-Redirect</code>.</span></aside>
<h3 id="accept-event-level-reports" data-text="Accept event-level reports" tabindex="-1">Accept event-level reports</h3>

<p>This endpoint should be addressable from a URI. See <a href="/setup/android">Enroll for a Privacy
Sandbox account</a> for more information about enrolling URIs. (The URI is
inferred from the origin of servers used for accepting source registration and
trigger registration.) Using the example URIs for endpoints that <a href="#accept-source-registration">accept source
registration</a> and <a href="#accept-trigger-registration">accept trigger registration</a>, this endpoint&#39;s URI is:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Bash Session"><code translate="no" dir="ltr"><span class="devsite-syntax-go">https://adtech.example/.well-known/attribution-reporting/report-event-attribution</span>
</code></pre></devsite-code>
<p>Configure this server to accept JSON requests that use the following format:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JSON"><code translate="no" dir="ltr"><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"attribution_destination"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"android-app://com.advertiser.example"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"source_event_id"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"12345678"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"trigger_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"2"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"report_id"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"12324323"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"source_type"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"navigation"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"randomized_trigger_rate"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"0.02"</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-err">Op</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">io</span><span class="devsite-syntax-kc">nal</span><span class="devsite-syntax-p">]</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nt">"source_debug_key"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"[64-bit unsigned integer]"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-err">Op</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">io</span><span class="devsite-syntax-kc">nal</span><span class="devsite-syntax-p">]</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nt">"trigger_debug_key"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"[64-bit unsigned integer]"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<p>Debug keys allow for additional insights into your attribution reports;
<a href="/private-advertising/attribution-reporting/android#extended-debugging-reports">learn more</a> about configuring them.</p>

<h3 id="accept-aggregatable-reports" data-text="Accept aggregatable reports" tabindex="-1">Accept aggregatable reports</h3>

<p>This endpoint should be addressable from a URI. See <a href="/setup/android">Enroll for a Privacy
Sandbox account</a> for more information about enrolling URIs. (The URI is
inferred from the origin of servers used for accepting source registration and
trigger registration.) Using the example URIs for endpoints that <a href="#accept-source-registration">accept source
registration</a> and <a href="#accept-trigger-registration">accept trigger registration</a>, this endpoint&#39;s URI is:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Bash Session"><code translate="no" dir="ltr"><span class="devsite-syntax-go">https://adtech.example/.well-known/attribution-reporting/report-aggregate-attribution</span>
</code></pre></devsite-code><aside class="note"><strong>Note:</strong><span> The encrypted aggregatable report itself isn&#39;t designed for direct use by
ad tech platforms. Instead, it&#39;s used as input for the
<a href="/private-advertising/attribution-reporting/android#aggregation-services">aggregation services</a>, which process the report and generate a
<a href="https://github.com/WICG/attribution-reporting-api/blob/main/AGGREGATION_SERVICE_TEE.md#summary-report">summary report</a> for ad tech platforms to consume.</span></aside>
<p>Both the encrypted and unencrypted fields are populated for aggregatable
reports. The encrypted reports enable you to begin testing with the aggregation
service, while the unencrypted field provides insight on the way set key-value
pairs are structuring the data.</p>

<p>Configure this server to accept JSON requests that use the following format:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JSON"><code translate="no" dir="ltr"><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// Info that the aggregation services also need encoded in JSON</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// for use with AEAD. Line breaks added for readability.</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"shared_info"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"{</span>
<span class="devsite-syntax-s2">     \"api\":\"attribution-reporting\",</span>
<span class="devsite-syntax-s2">     \"attribution_destination\": \"android-app://com.advertiser.example.advertiser\",</span>
<span class="devsite-syntax-s2">     \"scheduled_report_time\":\"[timestamp in seconds]\",</span>
<span class="devsite-syntax-s2">     \"source_registration_time\": \"[timestamp in seconds]\",</span>
<span class="devsite-syntax-s2">     \"version\":\"[api version]\",</span>
<span class="devsite-syntax-s2">     \"report_id\":\"[UUID]\",</span>
<span class="devsite-syntax-s2">     \"reporting_origin\":\"https://reporter.example\" }"</span><span class="devsite-syntax-p">,</span>

<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// In the current Developer Preview release, The "payload" and "key_id" fields</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// are not used because the platform doesn't yet encrypt aggregate reports.</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// The "debug_cleartext_payload" field holds unencrypted reports.</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"aggregation_service_payloads"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"payload"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"[base64 HPKE encrypted data readable only by the aggregation service]"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"key_id"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"[string identifying public key used to encrypt payload]"</span><span class="devsite-syntax-p">,</span>

<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"debug_cleartext_payload"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"[unencrypted payload]"</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">},</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">],</span>

<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"source_debug_key"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"[64 bit unsigned integer]"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"trigger_debug_key"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"[64 bit unsigned integer]"</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<p>Debug keys allow for additional insights into your attribution reports;
<a href="/private-advertising/attribution-reporting/android#extended-debugging-reports">learn more</a> about configuring them.</p>

<h3 id="set-client" data-text="Set up Android client" tabindex="-1">Set up Android client</h3>

<p>The client app registers attribution sources and triggers, and enables
event-level and aggregatable report generation. To prepare an Android client
device or emulator for using the Attribution Reporting API, do the following:</p>

<ol>
<li><a href="/setup/android/setup">Set up your development environment</a> for the Privacy Sandbox on
Android.</li>
<li><a href="/setup/android/download#device">Install a system image onto a supported device</a> or
<a href="/setup/android/download#emulator">set up an emulator</a> that includes support for the Privacy Sandbox on
Android.</li>
<li><p><a href="/setup/android/setup-api-access#enable-access">Enable access</a> to the Attribution Reporting API by running the
following ADB command. (The API is disabled by default.)</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Bash"><code class="devsite-terminal" translate="no" dir="ltr">adb<span class="devsite-syntax-w"> </span>shell<span class="devsite-syntax-w"> </span>device_config<span class="devsite-syntax-w"> </span>put<span class="devsite-syntax-w"> </span>adservices<span class="devsite-syntax-w"> </span>ppapi_app_allow_list<span class="devsite-syntax-w"> </span><span class="devsite-syntax-se">\"\*\"</span></code></pre></devsite-code></li>
<li><p>If you are locally testing the Attribution Reporting API (such as testing on
a device you have access to physically), run this command to disable
enrollment:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Bash"><code class="devsite-terminal" translate="no" dir="ltr">adb<span class="devsite-syntax-w"> </span>shell<span class="devsite-syntax-w"> </span>device_config<span class="devsite-syntax-w"> </span>put<span class="devsite-syntax-w"> </span>adservices<span class="devsite-syntax-w"> </span>disable_measurement_enrollment_check<span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"true"</span></code></pre></devsite-code></li>
<li><p>Include the <code translate="no" dir="ltr">ACCESS_ADSERVICES_ATTRIBUTION</code> permission in your Android
Manifest file and <a href="/setup/android/setup-api-access?version=preview#configure-api-specific">create an ad services configuration</a> for your app to
use the Attribution Reporting APIs:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="XML"><code translate="no" dir="ltr">&lt;uses-permission<span class="devsite-syntax-w"> </span>android:name="android.permission.ACCESS_ADSERVICES_ATTRIBUTION"<span class="devsite-syntax-w"> </span>/&gt;
</code></pre></devsite-code></li>
<li><p>(Optional) If you plan to receive debug reports, include the
<code translate="no" dir="ltr">ACCESS_ADSERVICES_AD_ID</code> permission in your Android Manifest file:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="XML"><code translate="no" dir="ltr">&lt;uses-permission<span class="devsite-syntax-w"> </span>android:name="android.permission.ACCESS_ADSERVICES_AD_ID"<span class="devsite-syntax-w"> </span>/&gt;
</code></pre></devsite-code></li>
<li><p>Reference an ad services configuration in the <code translate="no" dir="ltr">&lt;application&gt;</code> element of
your manifest:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="XML"><code translate="no" dir="ltr">&lt;property<span class="devsite-syntax-w"> </span>android:name="android.adservices.AD_SERVICES_CONFIG"
<span class="devsite-syntax-w">          </span>android:resource="@xml/ad_services_config"<span class="devsite-syntax-w"> </span>/&gt;
</code></pre></devsite-code></li>
<li><p>Specify the ad services XML resource referenced in the manifest, such as
<code translate="no" dir="ltr">res/xml/ad_services_config.xml</code>. Learn more about
<a href="/setup/android/setup-api-access">ad services permissions and SDK access control</a>.</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="XML"><code translate="no" dir="ltr">&lt;ad-services-config&gt;
<span class="devsite-syntax-w">    </span>&lt;attribution<span class="devsite-syntax-w"> </span>allowAllToAccess="true"<span class="devsite-syntax-w"> </span>/&gt;
&lt;/ad-services-config&gt;
</code></pre></devsite-code></li>
</ol>

<h2 id="register-adevents" data-text="Register ad events" tabindex="-1">Register ad events</h2>

<p>Your app should register sources and conversions as they occur to verify
that they are properly reported. The <code translate="no" dir="ltr">MeasurementManager</code> class features methods
to help you register <a href="#register-attribution">attribution source events</a> and
<a href="#register-trigger">conversion triggers</a>.</p>

<h3 id="register-attribution" data-text="Register an attribution source event" tabindex="-1">Register an attribution source event</h3>

<p>When an ad is viewed or clicked, a publisher app calls <code translate="no" dir="ltr">registerSource()</code> to
register an attribution source as shown in the code snippet.</p>
<aside class="note"><strong>Note:</strong><span> <code translate="no" dir="ltr">registerSource()</code> must be called while the app is in the foreground.
Source registrations from an app that is not in the foreground will fail.</span></aside>
<p>The Attribution Reporting API supports the following types of attribution source
events:</p>
<ul>
<li>Clicks, which you typically register within a callback method similar to
<code translate="no" dir="ltr">onClick()</code>. The corresponding trigger event usually occurs soon after the
click event. This type of event provides more information about user
interaction and is therefore a good type of attribution source to give a
high priority.</li>
<li><p>Views, which you typically register within a callback method similar to
<code translate="no" dir="ltr">onAdShown()</code>. The corresponding trigger event might occur hours or days
after the view event.</p></li>
</ul>
<div class="ds-selector-tabs" data-ds-scope="code-sample">
<section><h3 id="kotlin" data-text="Kotlin" tabindex="-1">Kotlin</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">companion</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kd">object</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">private</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">CALLBACK_EXECUTOR</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Executors</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">newCachedThreadPool</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-p">}</span>

<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">measurementManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">context</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getSystemService</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">MeasurementManager</span><span class="devsite-syntax-o">::</span><span class="devsite-syntax-n">class</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">java</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-kd">var</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">exampleClickEvent</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">InputEvent? </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kc">null</span>

<span class="devsite-syntax-c1">// Use the URI of the server-side endpoint that accepts attribution source</span>
<span class="devsite-syntax-c1">// registration.</span>
<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">attributionSourceUri</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">parse</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"https://adtech.example/attribution_source?AD_TECH_PROVIDED_METADATA"</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">future</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">CompletableFuture&lt;Void&gt;</span><span class="devsite-syntax-p">()</span>

<span class="devsite-syntax-n">adView</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setOnTouchListener</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">_</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">View?,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">event</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">MotionEvent?)</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">-</span>&gt;
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">exampleClickEvent</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">event</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kc">true</span>
<span class="devsite-syntax-p">}</span>

<span class="devsite-syntax-c1">// Register Click Event</span>
<span class="devsite-syntax-n">measurementManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">registerSource</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">attributionSourceUri</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">exampleClickEvent</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">CALLBACK_EXECUTOR</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">future</span><span class="devsite-syntax-o">::</span><span class="devsite-syntax-n">complete</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-c1">// Register View Event</span>
<span class="devsite-syntax-n">measurementManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">registerSource</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">attributionSourceUri</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-kc">null</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">CALLBACK_EXECUTOR</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">future</span><span class="devsite-syntax-o">::</span><span class="devsite-syntax-n">complete</span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code></section>
<section><h3 id="java" data-text="Java" tabindex="-1">Java</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Java"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">private</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kd">static</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kd">final</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Executor</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">CALLBACK_EXECUTOR</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Executors</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">newCachedThreadPool</span><span class="devsite-syntax-p">();</span>
<span class="devsite-syntax-kd">private</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">InputEvent</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">exampleClickEvent</span><span class="devsite-syntax-p">;</span>

<span class="devsite-syntax-n">MeasurementManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">measurementManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">context</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getSystemService</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">MeasurementManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">class</span><span class="devsite-syntax-p">);</span>

<span class="devsite-syntax-c1">// Use the URI of the server-side endpoint that accepts attribution source</span>
<span class="devsite-syntax-c1">// registration.</span>
<span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">attributionSourceUri</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">parse</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"https://adtech.example/attribution_source?AD_TECH_PROVIDED_METADATA"</span><span class="devsite-syntax-p">);</span>

<span class="devsite-syntax-n">CompletableFuture&lt;Void&gt;</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">future</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">CompletableFuture</span>&lt;&gt;<span class="devsite-syntax-p">();</span>

<span class="devsite-syntax-n">adView</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setOnTouchListener</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">v</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">event</span><span class="devsite-syntax-p">))</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">-</span>&gt;<span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">exampleClickEvent</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">event</span><span class="devsite-syntax-p">;</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-k">return</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kc">true</span><span class="devsite-syntax-p">;</span>
<span class="devsite-syntax-p">}</span>

<span class="devsite-syntax-c1">// Register Click Event</span>
<span class="devsite-syntax-n">measurementManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">registerSource</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">attributionSourceUri</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">exampleClickEvent</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">CALLBACK_EXECUTOR</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">future</span><span class="devsite-syntax-p">::</span><span class="devsite-syntax-n">complete</span><span class="devsite-syntax-p">);</span>

<span class="devsite-syntax-c1">// Register View Event</span>
<span class="devsite-syntax-n">measurementManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">registerSource</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">attributionSourceUri</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kc">null</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">CALLBACK_EXECUTOR</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">future</span><span class="devsite-syntax-p">::</span><span class="devsite-syntax-n">complete</span><span class="devsite-syntax-p">);</span>
</code></pre></devsite-code></section>
</div>
<p>After registration, the API issues an HTTP POST request to the service endpoint
at the address specified by <code translate="no" dir="ltr">attributionSourceUri</code>. The <a href="#accept-source-registration">endpoint&#39;s
response</a> includes values for <code translate="no" dir="ltr">destination, source_event_id, expiry</code>, and
<code translate="no" dir="ltr">source_priority</code>.</p>

<p>If the originating ad tech wishes to share source registrations, the original
attribution source URI can include redirects to other ad tech endpoints. Limits
and rules applicable to the redirects are detailed in the
<a href="/private-advertising/attribution-reporting/android#allow-multiple-ad-tech-platforms-register-request">technical proposal</a>.</p>

<p>Support has been added for daisy-chain redirects for <code translate="no" dir="ltr">registerSource</code> and
<code translate="no" dir="ltr">registerTrigger</code>. In addition to the registration header, the API consumer can
now provide an HTTP redirect as the server response that includes a 302 status
code and a &quot;Location&quot; header with the next URL to visit for an additional
registration.</p>

<p>Only the &quot;destination&quot; field provided in the very first visit is used
across the daisy-chain. The number of visits has the same limit as the
&quot;Attribution-Reporting-Redirect&quot; headers. This redirect support is in addition
to the existing &quot;Attribution-Reporting-Redirect&quot; support, and if both are
present, &quot;Attribution-Reporting-Redirect&quot; gets preference.</p>

<h3 id="register-trigger" data-text="Register a conversion trigger event" tabindex="-1">Register a conversion trigger event</h3>

<p>To register a conversion trigger event, call <code translate="no" dir="ltr">registerTrigger()</code> in your app:</p>
<div class="ds-selector-tabs" data-ds-scope="code-sample">
<section><h3 id="kotlin_1" data-text="Kotlin" tabindex="-1">Kotlin</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">companion</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kd">object</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">private</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">CALLBACK_EXECUTOR</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Executors</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">newCachedThreadPool</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-p">}</span>

<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">measurementManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">context</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getSystemService</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">MeasurementManager</span><span class="devsite-syntax-o">::</span><span class="devsite-syntax-n">class</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">java</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-c1">// Use the URI of the server-side endpoint that accepts trigger registration.</span>
<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">attributionTriggerUri</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">parse</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"https://adtech.example/trigger?AD_TECH_PROVIDED_METADATA"</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">future</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">CompletableFuture&lt;Void&gt;</span><span class="devsite-syntax-p">()</span>

<span class="devsite-syntax-c1">// Register trigger (conversion)</span>
<span class="devsite-syntax-n">measurementManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">registerTrigger</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">attributionTriggerUri</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">CALLBACK_EXECUTOR</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">future</span><span class="devsite-syntax-o">::</span><span class="devsite-syntax-n">complete</span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code></section>
<section><h3 id="java_1" data-text="Java" tabindex="-1">Java</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Java"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">private</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kd">static</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kd">final</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Executor</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">CALLBACK_EXECUTOR</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Executors</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">newCachedThreadPool</span><span class="devsite-syntax-p">();</span>

<span class="devsite-syntax-n">MeasurementManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">measurementManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">context</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getSystemService</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">MeasurementManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">class</span><span class="devsite-syntax-p">);</span>

<span class="devsite-syntax-c1">// Use the URI of the server-side endpoint that accepts trigger registration.</span>
<span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">attributionTriggerUri</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">parse</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"https://adtech.example/trigger?AD_TECH_PROVIDED_METADATA"</span><span class="devsite-syntax-p">);</span>

<span class="devsite-syntax-n">CompletableFuture&lt;Void&gt;</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">future</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">CompletableFuture</span>&lt;&gt;<span class="devsite-syntax-p">();</span>

<span class="devsite-syntax-c1">// Register trigger (conversion)</span>
<span class="devsite-syntax-n">measurementManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">registerTrigger</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">attributionTriggerUri</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">CALLBACK_EXECUTOR</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">future</span><span class="devsite-syntax-p">::</span><span class="devsite-syntax-n">complete</span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code></section>
</div>
<p>After registration, the API issues an HTTP POST request to the service endpoint
at the address specified by <code translate="no" dir="ltr">attributionTriggerUri</code>. The
<a href="#accept-trigger-registration">endpoint&#39;s response</a> includes values for event and aggregate reports.</p>

<p>If the originating ad tech platform allows trigger registrations to be shared,
the URI can include redirects to URIs that belong to other ad tech platforms.
The limits and rules applicable to the redirects are detailed in the
<a href="/private-advertising/attribution-reporting/android#register-trigger">technical proposal</a>.</p>

<h3 id="register-cross-app-web" data-text="Register cross app and web measurement" tabindex="-1">Register cross app and web measurement</h3>

<p>In the case where <a href="/private-advertising/attribution-reporting/android/attribution-app-to-web">both an app and browser play a part</a> in the user&#39;s
journey from source to trigger, there are subtle differences in the
implementation of registering ad events. If a user sees an ad on an app and is
redirected to a browser for a conversion, the source is registered by the app,
and the conversion by the web browser. Similarly, if a user starts on a web
browser and is directed to an app for conversion, the browser registers the
source, and the app registers the conversion.</p>

<p>Since there are differences in the way ad techs are organized on the web and on
Android, we have added new APIs to register sources and triggers when they take
place on browsers. The key difference between these APIs and the corresponding
app-based APIs is that we expect the browser to follow the redirects, apply any
browser-specific filters, and pass on the valid registrations to the platform by
calling <code translate="no" dir="ltr">registerWebSource()</code> or <code translate="no" dir="ltr">registerWebTrigger()</code>.</p>

<p>The following code snippet shows an example of the API call that the browser
makes to register an attribution source before directing the user to an app:</p>
<div class="ds-selector-tabs" data-ds-scope="code-sample">
<section><h3 id="kotlin_2" data-text="Kotlin" tabindex="-1">Kotlin</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">companion</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kd">object</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">private</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">CALLBACK_EXECUTOR</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Executors</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">newCachedThreadPool</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-p">}</span>

<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">measurementManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">context</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getSystemService</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">MeasurementManager</span><span class="devsite-syntax-o">::</span><span class="devsite-syntax-n">class</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">java</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-kd">var</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">exampleClickEvent</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">InputEvent? </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kc">null</span>

<span class="devsite-syntax-c1">// Use the URIs of the server-side endpoints that accept attribution source</span>
<span class="devsite-syntax-c1">// registration.</span>
<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">sourceParam1</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">WebSourceParams</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">parse</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-s">"https://adtech1.example/attribution_source?AD_TECH_PROVIDED_METADATA"</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-c1">// True, if debugging is allowed for the ad tech.</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setDebugKeyAllowed</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-kc">true</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">()</span>

<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">sourceParam2</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">WebSourceParams</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">parse</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-s">"https://adtech2.example/attribution_source?AD_TECH_PROVIDED_METADATA"</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setDebugKeyAllowed</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-kc">false</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">()</span>

<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">sourceParam3</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">WebSourceParams</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">parse</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-s">"https://adtech3.example/attribution_source?AD_TECH_PROVIDED_METADATA"</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">()</span>

<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">sourceParams</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Arrays</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">asList</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">sourceParam1</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">sourceParam2</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">sourceParam3</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">publisherOrigin</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">parse</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"https://publisher.example"</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">appDestination</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">parse</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"android-app://com.example.store"</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">webDestination</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">parse</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"https://example.com"</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">future</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">CompletableFuture&lt;Void&gt;</span><span class="devsite-syntax-p">()</span>

<span class="devsite-syntax-n">adView</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setOnTouchListener</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span><span class="devsite-syntax-n">_</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">View?,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">event</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">MotionEvent? </span><span class="devsite-syntax-o">-</span>&gt;
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">exampleClickEvent</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">event</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kc">true</span>
<span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">clickRegistrationRequest</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">WebSourceRegistrationRequest</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">          </span><span class="devsite-syntax-n">sourceParams</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">          </span><span class="devsite-syntax-n">publisherOrigin</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setAppDestination</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">appDestination</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setWebDestination</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">webDestination</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setInputEvent</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">event</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">viewRegistrationRequest</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">WebSourceRegistrationRequest</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">          </span><span class="devsite-syntax-n">sourceParams</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">          </span><span class="devsite-syntax-n">publisherOrigin</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setAppDestination</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">appDestination</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setWebDestination</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">webDestination</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setInputEvent</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-kc">null</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">()</span>

<span class="devsite-syntax-c1">// Register a web source for a click event.</span>
<span class="devsite-syntax-n">measurementManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">registerWebSource</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">clickRegistrationRequest</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">CALLBACK_EXECUTOR</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">future</span><span class="devsite-syntax-o">::</span><span class="devsite-syntax-n">complete</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-c1">// Register a web source for a view event.</span>
<span class="devsite-syntax-n">measurementManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">registerWebSource</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">viewRegistrationRequest</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">CALLBACK_EXECUTOR</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">future</span><span class="devsite-syntax-o">::</span><span class="devsite-syntax-n">complete</span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code></section>
<section><h3 id="java_2" data-text="Java" tabindex="-1">Java</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Java"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">private</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kd">static</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kd">final</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Executor</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">CALLBACK_EXECUTOR</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">Executors</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">newCachedThreadPool</span><span class="devsite-syntax-p">();</span>
<span class="devsite-syntax-kd">private</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">InputEvent</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">exampleClickEvent</span><span class="devsite-syntax-p">;</span>

<span class="devsite-syntax-n">MeasurementManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">measurementManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">context</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getSystemService</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">MeasurementManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">class</span><span class="devsite-syntax-p">);</span>

<span class="devsite-syntax-c1">// Use the URIs of the server-side endpoints that accept attribution source</span>
<span class="devsite-syntax-c1">// registration.</span>
<span class="devsite-syntax-n">WebSourceParams</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">sourceParam1</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">WebSourceParams</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">parse</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-s">"https://adtech1.example/attribution_source?AD_TECH_PROVIDED_METADATA"</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// True, if debugging is allowed for the ad tech.</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setDebugKeyAllowed</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-kc">true</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">();</span>

<span class="devsite-syntax-n">WebSourceParams</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">sourceParam2</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">WebSourceParams</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">parse</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-s">"https://adtech2.example/attribution_source?AD_TECH_PROVIDED_METADATA"</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setDebugKeyAllowed</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-kc">false</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">();</span>

<span class="devsite-syntax-n">WebSourceParams</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">sourceParam3</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">WebSourceParams</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">parse</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-s">"https://adtech3.example/attribution_source?AD_TECH_PROVIDED_METADATA"</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">();</span>

<span class="devsite-syntax-n">List&lt;WebSourceParams&gt;</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">sourceParams</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">Arrays</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">asList</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">sourceParam1</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">sourceParam2</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">sourceParam3</span><span class="devsite-syntax-p">);</span>
<span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">publisherOrigin</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">parse</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"https://publisher.example"</span><span class="devsite-syntax-p">);</span>
<span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">appDestination</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">parse</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"android-app://com.example.store"</span><span class="devsite-syntax-p">);</span>
<span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">webDestination</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">parse</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"https://example.com"</span><span class="devsite-syntax-p">);</span>

<span class="devsite-syntax-n">CompletableFuture&lt;Void&gt;</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">future</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">CompletableFuture</span>&lt;&gt;<span class="devsite-syntax-p">();</span>

<span class="devsite-syntax-n">adView</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setOnTouchListener</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">v</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">event</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">-</span>&gt;<span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">exampleClickEvent</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">event</span><span class="devsite-syntax-p">;</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-k">return</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kc">true</span><span class="devsite-syntax-p">;</span>
<span class="devsite-syntax-p">}</span>

<span class="devsite-syntax-n">WebSourceRegistrationRequest</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">clickRegistrationRequest</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">WebSourceRegistrationRequest</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">sourceParams</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">publisherOrigin</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setAppDestination</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">appDestination</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setWebDestination</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">webDestination</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setInputEvent</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">event</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">();</span>
<span class="devsite-syntax-n">WebSourceRegistrationRequest</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">viewRegistrationRequest</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">WebSourceRegistrationRequest</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">sourceParams</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">publisherOrigin</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setAppDestination</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">appDestination</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setWebDestination</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">webDestination</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setInputEvent</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-kc">null</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">();</span>

<span class="devsite-syntax-c1">// Register a web source for a click event.</span>
<span class="devsite-syntax-n">measurementManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">registerWebSource</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">clickRegistrationRequest</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">CALLBACK_EXECUTOR</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">future</span><span class="devsite-syntax-p">::</span><span class="devsite-syntax-n">complete</span><span class="devsite-syntax-p">);</span>

<span class="devsite-syntax-c1">// Register a web source for a view event.</span>
<span class="devsite-syntax-n">measurementManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">registerWebSource</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">viewRegistrationRequest</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">CALLBACK_EXECUTOR</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">future</span><span class="devsite-syntax-p">::</span><span class="devsite-syntax-n">complete</span><span class="devsite-syntax-p">);</span>
</code></pre></devsite-code></section>
</div>
<p>The following code snippet shows an example of the API call that the browser
makes to register a conversion after the user has been directed from the app:</p>
<div class="ds-selector-tabs" data-ds-scope="code-sample">
<section><h3 id="kotlin_3" data-text="Kotlin" tabindex="-1">Kotlin</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">companion</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kd">object</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">private</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">CALLBACK_EXECUTOR</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Executors</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">newCachedThreadPool</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-p">}</span>

<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">measurementManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">context</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getSystemService</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">MeasurementManager</span><span class="devsite-syntax-o">::</span><span class="devsite-syntax-n">class</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">java</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-c1">// Use the URIs of the server-side endpoints that accept trigger registration.</span>
<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">triggerParam1</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">WebTriggerParams</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">parse</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-s">"https://adtech1.example/trigger?AD_TECH_PROVIDED_METADATA"</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// True, if debugging is allowed for the ad tech.</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setDebugKeyAllowed</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-kc">true</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">()</span>

<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">triggerParam2</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">WebTriggerParams</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">parse</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-s">"https://adtech2.example/trigger?AD_TECH_PROVIDED_METADATA"</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setDebugKeyAllowed</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-kc">false</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">()</span>

<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">triggerParams</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Arrays</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">asList</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">triggerParam1</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">triggerParam2</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">advertiserOrigin</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">parse</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"https://advertiser.example"</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">future</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">CompletableFuture&lt;Void&gt;</span><span class="devsite-syntax-p">()</span>

<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">triggerRegistrationRequest</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">WebTriggerRegistrationRequest</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">triggerParams</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">advertiserOrigin</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">()</span>

<span class="devsite-syntax-c1">// Register the web trigger (conversion).</span>
<span class="devsite-syntax-n">measurementManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">registerWebTrigger</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">triggerRegistrationRequest</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">CALLBACK_EXECUTOR</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">future</span><span class="devsite-syntax-o">::</span><span class="devsite-syntax-n">complete</span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code></section>
<section><h3 id="java_3" data-text="Java" tabindex="-1">Java</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Java"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">private</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kd">static</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kd">final</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Executor</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">CALLBACK_EXECUTOR</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">Executors</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">newCachedThreadPool</span><span class="devsite-syntax-p">();</span>

<span class="devsite-syntax-n">MeasurementManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">measurementManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">context</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getSystemService</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">MeasurementManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">class</span><span class="devsite-syntax-p">);</span>

<span class="devsite-syntax-c1">// Use the URIs of the server-side endpoints that accept trigger registration.</span>
<span class="devsite-syntax-n">WebTriggerParams</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">triggerParam1</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">WebTriggerParams</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">parse</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-s">"https://adtech1.example/trigger?AD_TECH_PROVIDED_METADATA"</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// True, if debugging is allowed for the ad tech.</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setDebugKeyAllowed</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-kc">true</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">();</span>

<span class="devsite-syntax-n">WebTriggerParams</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">triggerParam2</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">WebTriggerParams</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">parse</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-s">"https://adtech2.example/trigger?AD_TECH_PROVIDED_METADATA"</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setDebugKeyAllowed</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-kc">false</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">();</span>

<span class="devsite-syntax-n">List&lt;WebTriggerParams&gt;</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">triggerParams</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">Arrays</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">asList</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">triggerParam1</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">triggerParam2</span><span class="devsite-syntax-p">);</span>
<span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">advertiserOrigin</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">parse</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"https://advertiser.example"</span><span class="devsite-syntax-p">);</span>

<span class="devsite-syntax-n">CompletableFuture&lt;Void&gt;</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">future</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">CompletableFuture</span>&lt;&gt;<span class="devsite-syntax-p">();</span>

<span class="devsite-syntax-n">WebTriggerRegistrationRequest</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">triggerRegistrationRequest</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">WebTriggerRegistrationRequest</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-n">triggerParams</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">advertiserOrigin</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">();</span>

<span class="devsite-syntax-c1">// Register the web trigger (conversion).</span>
<span class="devsite-syntax-n">measurementManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">registerWebTrigger</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">triggerRegistrationRequest</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">CALLBACK_EXECUTOR</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">future</span><span class="devsite-syntax-p">::</span><span class="devsite-syntax-n">complete</span><span class="devsite-syntax-p">);</span>
</code></pre></devsite-code></section>
</div>
<h2 id="adding-noising" data-text="Adding noising for privacy" tabindex="-1">Adding noising for privacy</h2>

<p><a href="/private-advertising/attribution-reporting/android#event-level-reports">Event-level reports</a> contain destination, attribution source ID and trigger
data. They are sent in the original (unencrypted) format to the reporting
origin. To protect user&#39;s privacy, noise can be added to make it more difficult
to identify an individual user. Noised event-level reports are generated and
sent in accordance with the <a href="https://github.com/WICG/attribution-reporting-api/blob/main/EVENT.md#differential-privacy">differential-privacy</a> framework.
These are the default noise percentage values for different scenarios:</p>

<table>
  <tr>
    <td><p><strong>Source type</strong></p></td>
    <td><p><strong>Source destination value</strong></p></td>
    <td><p><strong>Noised report probability per source registration</strong></p></td>
  </tr>
  <tr>
    <td><p>View</p></td>
    <td><p>Either app or web</p></td>
    <td><p>0.0000025</p></td>
  </tr>
  <tr>
    <td><p>View</p></td>
    <td><p>App and web</p></td>
    <td><p>0.0000042</p></td>
  </tr>
  <tr>
    <td><p>Click</p></td>
    <td><p>Either app or web</p></td>
    <td><p>0.0024263</p></td>
  </tr>
  <tr>
    <td><p>Click</p></td>
    <td><p>App and web</p></td>
    <td><p>0.0170218</p></td>
  </tr>
</table>

<p>In app-to-web attribution measurement, where sources can drive conversion to
both app and web destinations, event-level reports can specify whether the
trigger occurred on app or web. To compensate for this additional detail, the
noised reports generated are up to ~7x for clicks and ~1.7x for views.</p>

<p>Some ad techs don&#39;t require event-level reports to specify whether the trigger
occurred on either the app or web destination. Ad techs can use the
<code translate="no" dir="ltr">coarse_event_report_destinations</code> field under the
<code translate="no" dir="ltr">Attribution-Reporting-Register-Source</code> header to reduce noise. If a source with
the <code translate="no" dir="ltr">coarse_event_report_destinations</code> field specified wins attribution, the
resulting report includes both app and web destinations without distinction as
to where the actual trigger occurred.</p>

<p>In the following examples, a user clicks on an ad, and that source is registered
with the API. The user then converts on both the advertiser app and the
advertiser&#39;s website. Both of these conversions are registered as triggers and
attributed to the initial click.</p>

<p>A click-based source registration HTTP header:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JSON"><code translate="no" dir="ltr"><span class="devsite-syntax-err">A</span><span class="devsite-syntax-kc">ttr</span><span class="devsite-syntax-err">ibu</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">io</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">Repor</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">i</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-err">g</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">Regis</span><span class="devsite-syntax-kc">ter</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">Source</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"destination"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"android-app://com.advertiser.example"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"web_destination"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"https://advertiser.com"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"source_event_id"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"234"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"expiry"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"60000"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"priority"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"5"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// Ad tech opts out of receiving app-web destination distinction</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// in event report, avoids additional noise</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"coarse_event_report_destinations"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"true"</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<p>A trigger is registered from the app with the package name
<code translate="no" dir="ltr">com.advertiser.example</code>:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JSON"><code translate="no" dir="ltr"><span class="devsite-syntax-err">A</span><span class="devsite-syntax-kc">ttr</span><span class="devsite-syntax-err">ibu</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">io</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">Repor</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">i</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-err">g</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">Regis</span><span class="devsite-syntax-kc">ter</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">Trigger</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"event_trigger_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"trigger_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"1"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"priority"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"1"</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}],</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<p>A trigger is registered from a browser from the website with the eTLD+1 domain
<code translate="no" dir="ltr">https://advertiser.com</code>:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JSON"><code translate="no" dir="ltr"><span class="devsite-syntax-err">A</span><span class="devsite-syntax-kc">ttr</span><span class="devsite-syntax-err">ibu</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">io</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">Repor</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">i</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-err">g</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">Regis</span><span class="devsite-syntax-kc">ter</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">Trigger</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"event_trigger_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"trigger_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"2"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"priority"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"2"</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}],</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<p>The resulting event-level reports are generated. Assuming both triggers get
attributed to the source, the following event-level reports are generated:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JSON"><code translate="no" dir="ltr"><span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"attribution_destination"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-s2">"android-app://com.advertiser.example,https://advertiser.com"</span><span class="devsite-syntax-p">],</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"scheduled_report_time"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"800176400"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"source_event_id"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"53234"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"trigger_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"1"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// Can be "event" if source were registered by user viewing the ad</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"source_type"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"navigation"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// Would be 0.0170218 without coarse_event_report_destinations as true in the source</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"randomized_trigger_rate"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mf">0.0024263</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<h2 id="generate-reports" data-text="Generate and deliver reports" tabindex="-1">Generate and deliver reports</h2>

<p>The Attribution Reporting API sends reports to the endpoints on your server that
<a href="#accept-event-level-reports">accept event-level reports</a> and <a href="#accept-aggregatable-reports">aggregatable reports</a>.</p>

<h3 id="force-reporting-jobs" data-text="Force reporting jobs to run" tabindex="-1">Force reporting jobs to run</h3>

<p>After you register an attribution source event or register a trigger event, the
system schedules the reporting job to run. By default, this job runs every 4
hours. For testing purposes, you can force the reporting jobs to run or shorten
the intervals between jobs.</p>

<p>Force attribution job to run:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Bash"><code translate="no" dir="ltr">adb<span class="devsite-syntax-w"> </span>shell<span class="devsite-syntax-w"> </span>cmd<span class="devsite-syntax-w"> </span>jobscheduler<span class="devsite-syntax-w"> </span>run<span class="devsite-syntax-w"> </span>-f<span class="devsite-syntax-w"> </span>com.google.android.adservices.api<span class="devsite-syntax-w"> </span><span class="devsite-syntax-m">5</span>
</code></pre></devsite-code>
<p>Force event-level reporting job to run:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Bash"><code translate="no" dir="ltr">adb<span class="devsite-syntax-w"> </span>shell<span class="devsite-syntax-w"> </span>cmd<span class="devsite-syntax-w"> </span>jobscheduler<span class="devsite-syntax-w"> </span>run<span class="devsite-syntax-w"> </span>-f<span class="devsite-syntax-w"> </span>com.google.android.adservices.api<span class="devsite-syntax-w"> </span><span class="devsite-syntax-m">3</span>
</code></pre></devsite-code>
<p>Force aggregatable reporting job to run:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Bash"><code translate="no" dir="ltr">adb<span class="devsite-syntax-w"> </span>shell<span class="devsite-syntax-w"> </span>cmd<span class="devsite-syntax-w"> </span>jobscheduler<span class="devsite-syntax-w"> </span>run<span class="devsite-syntax-w"> </span>-f<span class="devsite-syntax-w"> </span>com.google.android.adservices.api<span class="devsite-syntax-w"> </span><span class="devsite-syntax-m">7</span>
</code></pre></devsite-code>
<p>Check the output in logcat to see when the jobs have run. It should look
something like the following:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="ActionScript 3"><code translate="no" dir="ltr"><span class="devsite-syntax-n">JobScheduler</span><span class="devsite-syntax-o">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">executeRunCommand</span><span class="devsite-syntax-o">():</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">com</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-na">google</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-na">android</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-na">adservices</span><span class="devsite-syntax-o">.</span><span class="devsite-syntax-na">api</span><span class="devsite-syntax-o">/</span><span class="devsite-syntax-mi">0</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">5</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">s</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-kc">false</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">f</span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-kc">true</span>
</code></pre></devsite-code>
<h3 id="force-delivery" data-text="Force delivery of reports" tabindex="-1">Force delivery of reports</h3>

<p>Even if the reporting job is forced to run, the system still sends out reports
according to their <a href="/private-advertising/attribution-reporting/android#specific-time-windows-sending-reports">scheduled delivery times</a>, which range from a couple of
hours to several days. For testing purposes, you can advance the device system
time to be after the scheduled delays to initiate the report delivery.</p>

<h3 id="verify-reports" data-text="Verify reports on your server" tabindex="-1">Verify reports on your server</h3>

<p>Once reports are sent, verify delivery by checking received reports, applicable
server logs such as the mock server history or your custom system.</p>

<h3 id="decode-aggregate" data-text="Decode your aggregate report" tabindex="-1">Decode your aggregate report</h3>

<p>When receiving an aggregate report, the <code translate="no" dir="ltr">debug_cleartext_payload</code> field holds
an unencrypted version of your aggregate report. While this version of your
report is unencrypted, it still needs to be decoded.</p>

<p>The following is an example of decoding the contents of the <code translate="no" dir="ltr">debug_cleartext_payload</code>
field in two steps: the first using Base 64 decoding, and the second using CBOR
decoding.</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Java"><code translate="no" dir="ltr"><span class="devsite-syntax-n">String</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">base64DebugPayload</span><span class="devsite-syntax-w">  </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s">"omRkYXRhgqJldmFsdWVEAAAGgGZidWNrZXRQAAAAAAAAAAAAAAAAAAAKhaJldmFsdWVEAACAAGZidWNrZXRQAAAAAAAAAAAAAAAAAAAFWWlvcGVyYXRpb25paGlzdG9ncmFt"</span><span class="devsite-syntax-p">;</span>
<span class="devsite-syntax-kt">byte</span><span class="devsite-syntax-o">[]</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">cborEncoded</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Base64</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getDecoder</span><span class="devsite-syntax-p">().</span><span class="devsite-syntax-na">decode</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">base64DebugPayload</span><span class="devsite-syntax-p">);</span>

<span class="devsite-syntax-c1">// CbodDecoder comes from this library https://github.com/c-rack/cbor-java</span>
<span class="devsite-syntax-kd">final</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">List&lt;DataItem&gt;</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">dataItems</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">CborDecoder</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">ByteArrayInputStream</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">cborEncoded</span><span class="devsite-syntax-p">)).</span><span class="devsite-syntax-na">decode</span><span class="devsite-syntax-p">();</span>

<span class="devsite-syntax-c1">// In here you can see the contents, but the value will be something like:</span>
<span class="devsite-syntax-c1">// Data items: [{ data: [{ value: co.nstant.in.cbor.model.ByteString@a8b5c07a,</span>
<span class="devsite-syntax-c1">//   bucket: co.nstant.in.cbor.model.ByteString@f812097d },</span>
<span class="devsite-syntax-c1">//   { value: co.nstant.in.cbor.model.ByteString@a8b5dfc0,</span>
<span class="devsite-syntax-c1">//   bucket: co.nstant.in.cbor.model.ByteString@f8120934 }], operation: histogram }]</span>
<span class="devsite-syntax-n">Log</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">d</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"Data items : "</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">+</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">dataItems</span><span class="devsite-syntax-p">);</span>

<span class="devsite-syntax-c1">// In order to see the value for bucket and value, you can traverse the data</span>
<span class="devsite-syntax-c1">// and get their values, something like this:</span>
<span class="devsite-syntax-kd">final</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Map</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">payload</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">Map</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">dataItems</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">get</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-mi">0</span><span class="devsite-syntax-p">);</span>
<span class="devsite-syntax-kd">final</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Array</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">payloadArray</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">Array</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">payload</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">get</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">UnicodeString</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"data"</span><span class="devsite-syntax-p">));</span>

<span class="devsite-syntax-n">payloadArray</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getDataItems</span><span class="devsite-syntax-p">().</span><span class="devsite-syntax-na">forEach</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">i</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">-</span>&gt;<span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">BigInteger</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">value</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">BigInteger</span><span class="devsite-syntax-p">(((</span><span class="devsite-syntax-n">ByteString</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">((</span><span class="devsite-syntax-n">Map</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-n">i</span><span class="devsite-syntax-p">).</span><span class="devsite-syntax-na">get</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">UnicodeString</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"value"</span><span class="devsite-syntax-p">))).</span><span class="devsite-syntax-na">getBytes</span><span class="devsite-syntax-p">());</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">BigInteger</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">bucket</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">BigInteger</span><span class="devsite-syntax-p">(((</span><span class="devsite-syntax-n">ByteString</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">((</span><span class="devsite-syntax-n">Map</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-n">i</span><span class="devsite-syntax-p">).</span><span class="devsite-syntax-na">get</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">UnicodeString</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"bucket"</span><span class="devsite-syntax-p">))).</span><span class="devsite-syntax-na">getBytes</span><span class="devsite-syntax-p">());</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">Log</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">d</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"value : "</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">+</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">value</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">+</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s">" ;bucket : "</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">+</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">bucket</span><span class="devsite-syntax-p">);</span>
<span class="devsite-syntax-p">});</span>
</code></pre></devsite-code>


<h2 id="testing" data-text="Testing" tabindex="-1">Testing</h2>

<p>To help you get started with the Attribution Reporting API, you can use the
<a href="https://github.com/android/privacy-sandbox-samples/tree/dev-preview-main/AttributionReporting/MeasurementSampleApp/">MeasurementSampleApp</a> project on GitHub. This sample app demonstrates
attribution source registration and trigger registration.</p>

<p>For server endpoints, consider the following reference resources or your custom
solution:</p>

<ul>
<li><a href="https://github.com/android/privacy-sandbox-samples/tree/dev-preview-main/AttributionReporting/MeasurementAdTechServerSpec">MeasurementAdTechServerSpec</a> includes OpenAPI service definitions,
which can be deployed to a supported mock or microservices platforms.</li>
<li><a href="https://github.com/android/privacy-sandbox-samples/tree/dev-preview-main/AttributionReporting/MeasurementAdTechServer">MeasurementAdTechServer</a> includes a reference implementation of a mock
server based on Spring Boot app for Google App Engine.</li>
</ul>

<h3 id="prerequisites" data-text="Prerequisites" tabindex="-1">Prerequisites</h3>

<p>Deploy mock APIs on remote endpoints accessible from your test device or
emulator. For ease of testing, refer to the <a href="https://github.com/android/privacy-sandbox-samples/tree/dev-preview-main/AttributionReporting/MeasurementAdTechServerSpec">MeasurementAdTechServerSpec</a>
and <a href="https://github.com/android/privacy-sandbox-samples/tree/dev-preview-main/AttributionReporting/MeasurementAdTechServer">MeasurementAdTechServer</a> sample projects.


<h3 id="functionality-test" data-text="Functionality to test" tabindex="-1">Functionality to test</h3>

<ul>
<li>Exercise attribution source and conversion trigger registrations. Check that
server-side endpoints respond with the correct format.</li>
<li>Execute <a href="#force-reporting-jobs">reporting jobs</a>.</li>
<li><a href="#verify-reports">Verify delivery of reports</a> on your test server&#39;s backend or console.</li>
</ul>

<h2 id="upcoming-features" data-text="Upcoming features" tabindex="-1">Upcoming features</h2>

<h3 id="flexible-event-level" data-text="Flexible event-level configuration" tabindex="-1">Flexible event-level configuration</h3>

<p>The default configuration for event level reporting is advised for starting
utility testing, but may not be ideal for all use cases. The Attribution
Reporting API will support optional, more flexible configurations so that ad
techs have increased control over the structure of their event level reports and
are able to maximize the utility of the data. This additional flexibility will
be introduced into the Attribution Reporting API in two phases:</p>

<ul>
<li><a href="#lite-flexible"><strong>Phase 1</strong></a>: Lite flexible event level configuration; a subset of Phase
2.</li>
<li><a href="#full-flexible"><strong>Phase 2</strong></a>: Full version of flexible event level configuration.</li>
</ul>

<h4 id="lite-flexible" data-text="Phase 1: Lite flexible event level" tabindex="-1">Phase 1: Lite flexible event level</h4>

<p>We will add the following two optional parameters to the JSON in
<code translate="no" dir="ltr">Attribution-Reporting-Register-Source</code>:</p>

<ul>
<li><code translate="no" dir="ltr">max_event_level_reports</code></li>
<li><code translate="no" dir="ltr">event_report_windows</code></li>
</ul>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JSON"><code translate="no" dir="ltr"><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-err">...</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// Optional. This is a parameter that acts across all trigger types for the</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// lifetime of this source. It restricts the total number of event-level</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// reports that this source can generate. After this maximum is hit, the</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// source is no longer capable of producing any new data. The use of</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// priority in the trigger attribution algorithm in the case of multiple</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// attributable triggers remains unchanged. Defaults to 3 for navigation</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// sources and 1 for event sources</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"max_event_level_reports"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span>&lt;<span class="devsite-syntax-err">i</span><span class="devsite-syntax-kc">nt</span>&gt;<span class="devsite-syntax-p">,</span>

<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// Optional. Represents a series of time windows, starting at 0. Reports</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// for this source will be delivered an hour after the end of each window.</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// Time is encoded as seconds after source registration. If</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// event_report_windows is omitted, will use the default windows. This</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// field is mutually exclusive with the existing `event_report_window` field.</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// // End time is exclusive.</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"event_report_windows"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"start_time"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span>&lt;<span class="devsite-syntax-err">i</span><span class="devsite-syntax-kc">nt</span>&gt;<span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"end_times"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span>&lt;<span class="devsite-syntax-err">i</span><span class="devsite-syntax-kc">nt</span>&gt;<span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">...</span><span class="devsite-syntax-p">]</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code><aside class="note"><strong>Note:</strong><span> If both <code translate="no" dir="ltr">event_report_window</code> and <code translate="no" dir="ltr">event_report_windows</code> are present then
the source is ignored. Only one of these can be present in the source
registration.</span></aside>
<h4 id="custom_configuration_example" data-text="Custom configuration example" tabindex="-1">Custom configuration example</h4>

<p>This example configuration supports a developer who wants to optimize for
receiving reports at earlier reporting windows.</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JSON"><code translate="no" dir="ltr"><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-err">...</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"max_event_level_reports"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">2</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"event_report_windows"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"end_times"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-mi">7200</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">43200</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">86400</span><span class="devsite-syntax-p">]</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-c1">// 2 hours, 12 hours, 1 day in seconds</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<h4 id="full-flexible" data-text="Phase 2: Full flexible event level" tabindex="-1">Phase 2: Full flexible event level</h4>

<p>In addition to the parameters that were added in Phase 1, we will add an
additional optional parameter <code translate="no" dir="ltr">trigger_specs</code> to the JSON in
<code translate="no" dir="ltr">Attribution-Reporting-Register-Source</code>.</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JSON"><code translate="no" dir="ltr"><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// A trigger spec is a set of matching criteria, along with a scheme to</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// generate bucketized output based on accumulated values across multiple</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// triggers within the specified event_report_window. There will be a limit on</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// the number of specs possible to define for a source.</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"trigger_specs"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// This spec will only apply to registrations that set one of the given</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// trigger data values (non-negative integers) in the list.</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// trigger_data will still appear in the event-level report.</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"trigger_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span>&lt;<span class="devsite-syntax-err">i</span><span class="devsite-syntax-kc">nt</span>&gt;<span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">...</span><span class="devsite-syntax-p">]</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// Represents a series of time windows, starting at the source registration</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// time. Reports for this spec will be delivered an hour after the end of</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// each window. Time is encoded as seconds after source registration.</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// end_times must consist of strictly increasing positive integers.</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">//</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// Note: specs with identical trigger_data cannot have overlapping windows;</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// this makes sure that triggers match at most one spec. If</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// event_report_windows is omitted, will use the "event_report_window" or</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// "event_report_windows" field specified at the global level for the source</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// (or the default windows if none are specified). End time is exclusive.</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"event_report_windows"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"start_time"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span>&lt;<span class="devsite-syntax-err">i</span><span class="devsite-syntax-kc">nt</span>&gt;<span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"end_times"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span>&lt;<span class="devsite-syntax-err">i</span><span class="devsite-syntax-kc">nt</span>&gt;<span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">...</span><span class="devsite-syntax-p">],</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// Represents an operator that summarizes the triggers within a window</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// count: number of triggers attributed within a window</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// value_sum: sum of the value of triggers within a window</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// The summary is reported as an index into a bucketization scheme. Defaults</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// to "count"</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"summary_window_operator"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span>&lt;<span class="devsite-syntax-err">o</span><span class="devsite-syntax-kc">ne</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">o</span><span class="devsite-syntax-kc">f</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"count"</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">or</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"value_sum"</span>&gt;<span class="devsite-syntax-p">,</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// Represents a bucketization of the integers from [0, MAX_INT], encoded as</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// a list of integers where new buckets begin (excluding 0 which is</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// implicitly included).</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// It must consist of strictly increasing positive integers.</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">//</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// e.g. [5, 10, 100] encodes the following ranges:</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// [[0, 4], [5, 9], [10, 99], [100, MAX_INT]]</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">//</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// At the end of each reporting window, triggers will be summarized into an</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// integer which slots into one of these ranges. Reports will be sent for</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// every new range boundary that is crossed. Reports will never be sent for</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// the range that includes 0, as every source is initialized in this range.</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">//</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// If omitted, then represents a trivial mapping</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// [1, 2, ... , MAX_INT]</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// With MAX_INT being the maximum int value defined by the browser.</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"summary_buckets"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span>&lt;<span class="devsite-syntax-err">bucke</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">s</span><span class="devsite-syntax-kc">tart</span>&gt;<span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">...</span><span class="devsite-syntax-p">]</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">},</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// Next trigger_spec</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">}</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">...</span><span class="devsite-syntax-p">],</span>

<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// See description in phase 1.</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"max_event_level_reports"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span>&lt;<span class="devsite-syntax-err">i</span><span class="devsite-syntax-kc">nt</span>&gt;
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// See description in phase 1.</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"event_report_windows"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"start_time"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span>&lt;<span class="devsite-syntax-err">i</span><span class="devsite-syntax-kc">nt</span>&gt;<span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"end_times"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span>&lt;<span class="devsite-syntax-err">i</span><span class="devsite-syntax-kc">nt</span>&gt;<span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">...</span><span class="devsite-syntax-p">]</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<p>This configuration fully specifies the output space of the event-level reports,
per source registration. For every trigger spec, we fully specify:</p>

<ul>
<li>A set of matching criteria:
<ul>
<li>Which specific trigger data this spec applies to. This source is
eligible to be matched only with triggers that have one of the specified
<code translate="no" dir="ltr">trigger_data</code> values in the <code translate="no" dir="ltr">trigger_specs</code>. In other words, if the
trigger would have matched this source but its <code translate="no" dir="ltr">trigger_data</code> is not one
of the values in the source&#39;s configuration, the trigger is ignored.</li>
<li>When a specific trigger matches this spec (using
<code translate="no" dir="ltr">event_report_windows</code>). Note that the trigger could still be matched
with a source for aggregatable reports despite failing the two match
criteria mentioned earlier.</li>
</ul></li>
<li>A specific algorithm for summarizing and bucketizing all the triggers within
an attribution window. This allows triggers to specify a <code translate="no" dir="ltr">value</code> parameter
that gets summed up for a particular spec, but reported as a bucketed value.</li>
</ul>
<aside class="note"><strong>Note:</strong><span> These matching criteria take place <em>after</em> attributing a trigger to a
particular source. If <code translate="no" dir="ltr">trigger_specs</code> are specified for a source and no matching
spec is found after attribution, the trigger is ignored.</span></aside>
<p>Triggers will also support adding an optional value parameter in the
dictionaries within <code translate="no" dir="ltr">event_trigger_data</code>.</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JSON"><code translate="no" dir="ltr"><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"event_trigger_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"trigger_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"2"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"value"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">100</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// Defaults to 1</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"filters"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">...</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">},</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-err">...</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">]</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<p>Every trigger registration will match with at most one trigger spec and update
its associated summary value. At a high level, at trigger time we will:</p>

<ul>
<li>Apply global attribution filters.</li>
<li>For every trigger spec, evaluate the <code translate="no" dir="ltr">event_trigger_data</code> on the spec to find a
match, using the spec&#39;s <code translate="no" dir="ltr">event_reporting_window</code>. The top level
<code translate="no" dir="ltr">event_reporting_windows</code> acts as a default value in case any trigger spec is
the missing <code translate="no" dir="ltr">event_report_windows</code> sub-field.</li>
<li>The first matched spec is chosen for attribution, and the summary value is
incremented by <code translate="no" dir="ltr">value</code>.</li>
</ul>

<p>When the <code translate="no" dir="ltr">event_report_window</code> for a spec completes, we will map its summary
value to a bucket, and send an event-level report for every increment in the
summary bucket caused by attributed trigger values. Reports will come with one
extra field, <code translate="no" dir="ltr">trigger_summary_bucket</code>.</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JSON"><code translate="no" dir="ltr"><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-err">...</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"trigger_summary_bucket"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span>&lt;<span class="devsite-syntax-err">bucke</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">s</span><span class="devsite-syntax-kc">tart</span>&gt;<span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span>&lt;<span class="devsite-syntax-err">bucke</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">e</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-err">d</span>&gt;<span class="devsite-syntax-p">],</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<h4 id="configurations_that_are_equivalent_to_the_current_version" data-text="Configurations that are equivalent to the current version" tabindex="-1">Configurations that are equivalent to the current version</h4>

<p>The following are equivalent configurations for the APIs current event and
navigation sources, respectively. Especially for navigation sources, this
illustrates why the noise levels are so high relative to event sources to
maintain the same epsilon values: navigation sources have a much larger output
space.</p>

<p>It is possible that there are multiple configurations that are equivalent, given
that some parameters can be set as default or pruned.</p>

<h5 id="equivalent_event_sources" data-text="Equivalent event sources" tabindex="-1">Equivalent event sources</h5>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JSON"><code translate="no" dir="ltr"><span class="devsite-syntax-c1">// Note: most of the fields here are not required to be explicitly listed.</span>
<span class="devsite-syntax-c1">// Here we list them explicitly just for clarity.</span>
<span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"trigger_specs"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"trigger_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-mi">0</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">1</span><span class="devsite-syntax-p">],</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"event_report_windows"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"end_times"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span>&lt;<span class="devsite-syntax-mi">30</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">days</span>&gt;<span class="devsite-syntax-p">]</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">},</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"summary_window_operator"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"count"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"summary_buckets"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-mi">1</span><span class="devsite-syntax-p">],</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">}],</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"max_event_level_reports"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">1</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-err">...</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// expiry must be greater than or equal to the last element of the end_times</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"expiry"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span>&lt;<span class="devsite-syntax-mi">30</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">days</span>&gt;<span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<h5 id="equivalent_navigation_sources" data-text="Equivalent navigation sources" tabindex="-1">Equivalent navigation sources</h5>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JSON"><code translate="no" dir="ltr"><span class="devsite-syntax-c1">// Note: most of the fields here are not required to be explicitly listed.</span>
<span class="devsite-syntax-c1">// Here we list them explicitly just for clarity.</span>
<span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"trigger_specs"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"trigger_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-mi">0</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">1</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">2</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">3</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">4</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">5</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">6</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">7</span><span class="devsite-syntax-p">],</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"event_report_windows"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"end_times"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span>&lt;<span class="devsite-syntax-mi">2</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">days</span>&gt;<span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span>&lt;<span class="devsite-syntax-mi">7</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">days</span>&gt;<span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span>&lt;<span class="devsite-syntax-mi">30</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">days</span>&gt;<span class="devsite-syntax-p">]</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">},</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"summary_window_operator"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"count"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"summary_buckets"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-mi">1</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">2</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">3</span><span class="devsite-syntax-p">],</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">}],</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"max_event_level_reports"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">3</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-err">...</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// expiry must be greater than or equal to the last element of the end_times</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"expiry"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span>&lt;<span class="devsite-syntax-mi">30</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">days</span>&gt;<span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<h4 id="example_custom_configurations" data-text="Example custom configurations" tabindex="-1">Example custom configurations</h4>

<p>Following are some additional configurations outside the defaults. In all of these
examples, the developer trade-offs include:</p>

<ul>
<li>reducing some dimension of the default configuration (#triggers, trigger data
cardinality, #windows) for increasing another one to preserve the noise level</li>
<li>reducing some dimension of the default configuration (#triggers, trigger data
cardinality, #windows) for reduced noise level</li>
</ul>

<h4 id="report_trigger_value_buckets" data-text="Report trigger value buckets" tabindex="-1">Report trigger value buckets</h4>

<p>This example configuration supports a developer who wants to optimize for value
data for only one reporting window (e.g. 7 days), trading fewer reporting
windows for less noise. In this example any trigger that sets <code translate="no" dir="ltr">trigger_data</code> to
a value other than 0 is ineligible for attribution.</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JSON"><code translate="no" dir="ltr"><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"trigger_specs"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"trigger_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-mi">0</span><span class="devsite-syntax-p">],</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"event_report_windows"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"end_times"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-mi">604800</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">1209600</span><span class="devsite-syntax-p">]</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-c1">// 7 days, 14 days represented in seconds</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">},</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"summary_window_operator"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"value_sum"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"summary_buckets"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-mi">5</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">10</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">100</span><span class="devsite-syntax-p">]</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">}],</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<p>Triggers could be registered with the <code translate="no" dir="ltr">value</code> field set, which are summed up and
bucketed. For example if there are three triggers within 7 days of source
registrations with values 1, 3 and 4.</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JSON"><code translate="no" dir="ltr"><span class="devsite-syntax-p">{</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nt">"event_trigger_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[{</span><span class="devsite-syntax-nt">"trigger_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"0"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nt">"value"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">1</span><span class="devsite-syntax-p">}]</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-p">{</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nt">"event_trigger_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[{</span><span class="devsite-syntax-nt">"trigger_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"0"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nt">"value"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">3</span><span class="devsite-syntax-p">}]</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-p">{</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nt">"event_trigger_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[{</span><span class="devsite-syntax-nt">"trigger_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"0"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nt">"value"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">4</span><span class="devsite-syntax-p">}]</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<p>The values are summed to 8 and reported in the following reports after 7 days +
1 hour:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JSON"><code translate="no" dir="ltr"><span class="devsite-syntax-c1">// Report 1</span>
<span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-err">...</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"trigger_summary_bucket"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-mi">5</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">9</span><span class="devsite-syntax-p">]</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<p>In the subsequent 7 days, the following triggers are registered:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JSON"><code translate="no" dir="ltr"><span class="devsite-syntax-p">{</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nt">"event_trigger_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[{</span><span class="devsite-syntax-nt">"trigger_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"0"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nt">"value"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">50</span><span class="devsite-syntax-p">}]</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-p">{</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nt">"event_trigger_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[{</span><span class="devsite-syntax-nt">"trigger_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"0"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nt">"value"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">45</span><span class="devsite-syntax-p">}]</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<p>The values are summed to 8 + 50 + 45 = 103. This yields the following reports at
14 days + 1 hour:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JSON"><code translate="no" dir="ltr"><span class="devsite-syntax-c1">// Report 2</span>
<span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-err">...</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"trigger_summary_bucket"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-mi">10</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">99</span><span class="devsite-syntax-p">]</span>
<span class="devsite-syntax-p">},</span>

<span class="devsite-syntax-c1">// Report 3</span>
<span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-err">...</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"trigger_summary_bucket"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-mi">100</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">MAX_INT</span><span class="devsite-syntax-p">]</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<h5 id="report_trigger_counts" data-text="Report trigger counts" tabindex="-1">Report trigger counts</h5>

<p>This example shows how a developer can configure a source to get a count of
triggers up to 10.</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JSON"><code translate="no" dir="ltr"><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"trigger_specs"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"trigger_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-mi">0</span><span class="devsite-syntax-p">],</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"event_report_windows"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"end_times"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-mi">604800</span><span class="devsite-syntax-p">]</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-c1">// 7 days represented in seconds</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">},</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// This field could be omitted to save bandwidth since the default is "count"</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"summary_window_operator"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"count"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"summary_buckets"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-mi">1</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">2</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">3</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">4</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">5</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">6</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">7</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">8</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">9</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">10</span><span class="devsite-syntax-p">]</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">}],</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<p>Attributed triggers with <code translate="no" dir="ltr">trigger_data</code> set to 0 are counted and capped at 10.
The trigger value is ignored since <code translate="no" dir="ltr">summary_window_operator</code> is set to count. If
4 triggers are registered and attributed to the source, the report would look
like this:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JSON"><code translate="no" dir="ltr"><span class="devsite-syntax-c1">// Report 1</span>
<span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-err">...</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"trigger_summary_bucket"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-mi">1</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">1</span><span class="devsite-syntax-p">]</span>
<span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-c1">// Report 2</span>
<span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-err">...</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"trigger_summary_bucket"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-mi">2</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">2</span><span class="devsite-syntax-p">]</span>
<span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-c1">// Report 3</span>
<span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-err">...</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"trigger_summary_bucket"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-mi">3</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">3</span><span class="devsite-syntax-p">]</span>
<span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-c1">// Report 4</span>
<span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-err">...</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"trigger_summary_bucket"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-mi">4</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">4</span><span class="devsite-syntax-p">]</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<h5 id="binary_with_more_frequent_reporting" data-text="Binary with more frequent reporting" tabindex="-1">Binary with more frequent reporting</h5>

<p>This example configuration supports a developer who wants to learn whether at
least one conversion occurred in the first 10 days (regardless of value), but
wants to receive reports at more frequent intervals than the default. Again, in
this example any trigger that sets <code translate="no" dir="ltr">trigger_data</code> to a value other than 0 is
ineligible for attribution. This is why this use case is referred to as
<em>binary</em>.</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JSON"><code translate="no" dir="ltr"><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"trigger_specs"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"trigger_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-mi">0</span><span class="devsite-syntax-p">],</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"event_report_windows"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">// 1 day, 2 days, 3 days, 5 days, 7 days, 10 days represented in seconds</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"end_times"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-mi">86400</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">172800</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">259200</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">432000</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">604800</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">864000</span><span class="devsite-syntax-p">]</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">},</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// This field could be omitted to save bandwidth since the default is "count"</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"summary_window_operator"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"count"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"summary_buckets"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-mi">1</span><span class="devsite-syntax-p">]</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">}],</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<h5 id="vary_trigger_specs_from_source_to_source" data-text="Vary trigger specs from source to source" tabindex="-1">Vary trigger specs from source to source</h5>
<aside class="note"><strong>Note:</strong><span> The <code translate="no" dir="ltr">trigger_specs</code> registration can differ from source to source.
This example has two configurations, one that specifies that only triggers with
<code translate="no" dir="ltr">trigger_data</code> values from 0 to 3 are eligible for attribution and another that
specifies that only triggers with <code translate="no" dir="ltr">trigger_data</code> values from 4 to 7 are
eligible. The user can configure half their sources with the former and half
their sources with the later. Doing so results in the noise added to the
report being approximately 15% of the noise of the default configuration for
navigation sources.</span></aside><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JSON"><code translate="no" dir="ltr"><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"trigger_specs"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"trigger_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-mi">0</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">1</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">2</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">3</span><span class="devsite-syntax-p">],</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"event_report_windows"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"end_times"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-mi">172800</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">604800</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">2592000</span><span class="devsite-syntax-p">]</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-c1">// 2 days, 7 days, 30 days represented in seconds</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">}],</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"max_event_level_reports"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">3</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JSON"><code translate="no" dir="ltr"><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"trigger_specs"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"trigger_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-mi">4</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">5</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">6</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">7</span><span class="devsite-syntax-p">],</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"event_report_windows"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"end_times"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-mi">172800</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">604800</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">2592000</span><span class="devsite-syntax-p">]</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-c1">// 2 days, 7 days, 30 days represented in seconds</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">}],</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"max_event_level_reports"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">3</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<p>We encourage developers to suggest different use cases they may have for this
API extension, and we will update this explainer with sample configurations for
those use cases.</p>

<h3 id="x-network-attribution" data-text="Cross network attribution without redirects" tabindex="-1">Cross network attribution without redirects</h3>

<p>Ad techs should use redirects to register multiple attribution source triggers
and to perform cross-network attribution. This feature helps support
cross-network attribution where redirects aren&#39;t feasible across networks.
<a href="/private-advertising/attribution-reporting/android#cross-network-attrib-without-redirects">Learn more</a>.</p>

<p>Ad techs can send configuration in the trigger registration response based on
which sources registered by other ad techs are selected to generate derived
sources; these derived sources are then used for attribution. Aggregate reports
are generated if the trigger gets attributed to a derived source. Event report
generation for derived sources is not supported.</p>

<p>Ad techs can choose from the <code translate="no" dir="ltr">aggregation_keys</code> in their registered sources that
they intend to share with partner ad techs. These keys can be declared in the
optional <code translate="no" dir="ltr">shared_aggregation_keys</code> field, located under the source registration
header <code translate="no" dir="ltr">Attribution-Reporting-Register-Source</code>:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JSON"><code translate="no" dir="ltr"><span class="devsite-syntax-nt">"shared_aggregation_keys"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-s2">"[key name1]"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"[key name2]"</span><span class="devsite-syntax-p">]</span>
</code></pre></devsite-code>
<p>Derived sources are generated based on the configuration under the trigger
registration header <code translate="no" dir="ltr">Attribution-Reporting-Register-Trigger</code>:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JSON"><code translate="no" dir="ltr"><span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// Specifies the configuration based on which derived sources should be</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// generated. Those derived sources will be included for source matching at the</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// time of attribution. For example, if adtech2 is registering a trigger with an</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// attribution_config with source_network as adtech1, available sources</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// registered by adtech1 will be considered with additional filtering criteria</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// applied to that set as mentioned in the attribution_config. Derived</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// sources can have different values to priority, post_install_exclusivity_window</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// etc.</span>

<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"attribution_config"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">// Derived sources are created from this adtech's registered sources</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"source_network"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"[original source's adtech enrollment ID]"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">//(optional) Filter sources whose priority falls in this range</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"source_priority_range"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-nt">"start"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-err">priori</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">y</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kc">f</span><span class="devsite-syntax-err">il</span><span class="devsite-syntax-kc">ter</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">lower</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">bou</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-err">d</span><span class="devsite-syntax-p">],</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-nt">"end"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-err">priori</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">y</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kc">f</span><span class="devsite-syntax-err">il</span><span class="devsite-syntax-kc">ter</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">upper</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">bou</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-err">d</span><span class="devsite-syntax-p">]</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-p">},</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">// (optional) Filter sources whose at least one of filter maps matches these</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">// filters</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"source_filters"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-nt">"key name 1"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-s2">"key1 value 1"</span><span class="devsite-syntax-p">]</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-p">},</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">// (optional) Filter sources whose none of filter map matches these</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">// filters</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-nt">"source_not_filters"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">          </span><span class="devsite-syntax-nt">"key name 1"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-s2">"key1 value 1"</span><span class="devsite-syntax-p">]</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">},</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">// (optional) Apply this priority to the generated derived sources</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"priority"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"[64 bit signed integer]"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">// (optional) The derived source will have expiry set as this or parent</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">// source's, whichever is earlier</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"expiry"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"[64 bit signed integer]"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">// (optional) set on the derived source</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"filter_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-nt">"key name 1"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-s2">"key1 value 1"</span><span class="devsite-syntax-p">]</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-p">},</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">// (optional) set on the derived source</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"post_install_exclusivity_window"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"[64-bit unsigned integer]"</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">]</span>
</code></pre></devsite-code>
<p>Here&#39;s a version with example values added:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JSON"><code translate="no" dir="ltr"><span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"attribution_config"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"source_network"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"adtech1-enrollment-id"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"source_priority_range"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-nt">"start"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">50</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-nt">"end"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">100</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-p">},</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"source_filters"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-nt">"source_type"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-s2">"NAVIGATION"</span><span class="devsite-syntax-p">]</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-p">},</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"source_not_filters"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-nt">"product_id"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-s2">"789"</span><span class="devsite-syntax-p">]</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-p">},</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"priority"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"30"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"expiry"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"78901"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">// (optional) set on the derived source</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"filter_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-nt">"product_id"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-s2">"1234"</span><span class="devsite-syntax-p">]</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">},</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-c1">// (optional) set on the derived source</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"post_install_exclusivity_window"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"7890"</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">]</span>
</code></pre></devsite-code>
<p>Two new optional fields are added to trigger registration header. These fields
enable the winning ad tech&#39;s identifier in aggregatable report keys:</p>

<ul>
<li><code translate="no" dir="ltr">x_network_bit_mapping</code>: Enrollment ID to ad tech identifier bit mapping</li>
<li><code translate="no" dir="ltr">x_network_data</code>: Offset (left shift) for the winning ad tech&#39;s
<code translate="no" dir="ltr">x_network_bit_mapping</code> OR operation with the trigger key piece</li>
</ul>

<h5 id="example" data-text="Example:" tabindex="-1">Example:</h5>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JSON"><code translate="no" dir="ltr"><span class="devsite-syntax-nt">"Attribution-Reporting-Register-Trigger"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"attribution_config"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-err">...</span><span class="devsite-syntax-p">],</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"aggregatable_trigger_data"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">     </span><span class="devsite-syntax-nt">"key_piece"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"0x400"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">     </span><span class="devsite-syntax-nt">"source_keys"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-s2">"campaignCounts"</span><span class="devsite-syntax-p">]</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-nt">"x_network_data"</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-nt">"key_offset"</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">12</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-c1">// [64 bit unsigned integer]</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-err">…</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">]</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-err">…</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nt">"x_network_bit_mapping"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-c1">// This mapping is used to generate trigger key pieces with ad tech identifier</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-c1">// bits. eg. If Ad Tech-A's sources wins the attribution then 0x1 here will be</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-c1">// OR'd with the trigger key pieces to generate the final key piece.</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"Ad-Tech-A-enrollment_id"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"0x1"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-c1">// Identifier bits in hex for A</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"Ad-Tech-B-enrollment_id"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"0x2"</span><span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// Identifier bits in hex for B</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-err">…</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<p>Here&#39;s the resulting trigger key piece calculation when generating a report for
AdTechB&#39;s source:</p>

<ul>
<li><code translate="no" dir="ltr">key_piece</code>: <code translate="no" dir="ltr">0x400 (010000000000)</code></li>
<li><code translate="no" dir="ltr">key_offset</code>: <code translate="no" dir="ltr">12</code></li>
<li>AdtechB&#39;s <code translate="no" dir="ltr">enrollment_id</code> value: <code translate="no" dir="ltr">2 (010)</code> (from <code translate="no" dir="ltr">x_network_bit_mapping</code>)</li>
<li>Resultant Trigger Key piece: <code translate="no" dir="ltr">0x400 | 0x2 &lt;&lt; 12 = 0x2400</code></li>
</ul>

<h2 id="limitations" data-text="Limitations" tabindex="-1">Limitations</h2>

<p>For a list of in-progress capabilities for the SDK Runtime, view the
<a href="/overview/android-release-notes">release notes</a>.</p>

<h2 id="report-bugs" data-text="Report bugs and issues" tabindex="-1">Report bugs and issues</h2>

<p>Your feedback is a crucial part of the Privacy Sandbox on Android! Let us know
of any <a href="https://issuetracker.google.com/issues/new?component=1116743&amp;template=1642601">issues</a> you find or ideas for improving Privacy Sandbox
on Android.</p>
  

  
    <devsite-hats-survey class="nocontent"
      hats-id="m3gEAgE90JYWReCDCni90QnmR6N2"
      listnr-id="Ph3Z2hnd9ArPaNcf6mtxnV"></devsite-hats-survey>
  
</div>

  
    
    
      
    <devsite-thumb-rating position="footer">
    </devsite-thumb-rating>
  
       
         <devsite-feedback
  position="footer"
  project-name="Privacy Sandbox"
  product-id="5335444"
  bucket=""
  context=""
  version="t-devsite-webserver-20250918-r00-rc00.472063434118731697"
  data-label="Send Feedback Button"
  track-type="feedback"
  track-name="sendFeedbackLink"
  track-metadata-position="footer"
  class="nocontent"
  
    disable-product-feedback
  
  
  
    
      project-icon="https://privacysandbox.google.com/static/privacy-sandbox-logo.svg"
    
  
  
  
  >

  <button>
  
    
    Send feedback
  
  </button>
</devsite-feedback>
       
    
    
  

  <div class="devsite-floating-action-buttons"></div></article>


<devsite-content-footer class="nocontent">
  <p>Except as otherwise noted, the content of this page is licensed under the <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 License</a>, and code samples are licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 License</a>. For details, see the <a href="https://developers.google.com/site-policies">Google Developers Site Policies</a>. Java is a registered trademark of Oracle and/or its affiliates.</p>
  <p>Last updated 2025-07-03 UTC.</p>
</devsite-content-footer>


<devsite-notification
>
</devsite-notification>


  
<div class="devsite-content-data">
  
    
    
    <template class="devsite-thumb-rating-feedback">
      <devsite-feedback
  position="thumb-rating"
  project-name="Privacy Sandbox"
  product-id="5335444"
  bucket=""
  context=""
  version="t-devsite-webserver-20250918-r00-rc00.472063434118731697"
  data-label="Send Feedback Button"
  track-type="feedback"
  track-name="sendFeedbackLink"
  track-metadata-position="thumb-rating"
  class="nocontent"
  
    disable-product-feedback
  
  
  
    
      project-icon="https://privacysandbox.google.com/static/privacy-sandbox-logo.svg"
    
  
  
  
  >

  <button>
  
    Need to tell us more?
  
  </button>
</devsite-feedback>
    </template>
  
  
    <template class="devsite-content-data-template">
      [[["Easy to understand","easyToUnderstand","thumb-up"],["Solved my problem","solvedMyProblem","thumb-up"],["Other","otherUp","thumb-up"]],[["Missing the information I need","missingTheInformationINeed","thumb-down"],["Too complicated / too many steps","tooComplicatedTooManySteps","thumb-down"],["Out of date","outOfDate","thumb-down"],["Samples / code issue","samplesCodeIssue","thumb-down"],["Other","otherDown","thumb-down"]],["Last updated 2025-07-03 UTC."],[],[],null,[]]
    </template>
  
</div>
            
          </devsite-content>
        </main>
        <devsite-footer-promos class="devsite-footer">
          
            
          
        </devsite-footer-promos>
        <devsite-footer-linkboxes class="devsite-footer">
          
            
<nav class="devsite-footer-linkboxes nocontent" aria-label="Footer links">
  
  <ul class="devsite-footer-linkboxes-list">
    
    <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading no-link">Get support</h3>
      <ul class="devsite-footer-linkbox-list">
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="https://github.com/privacysandbox/privacy-sandbox-dev-support"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 1)"
            >
            
          
            Ask a question on our GitHub support repo
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="https://goo.gle/privacy-sandbox-feedback"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 2)"
            >
            
              
              
            
          
            Submit project feedback
          
          </a>
          
          
        </li>
        
      </ul>
    </li>
    
    <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading no-link">Get updates</h3>
      <ul class="devsite-footer-linkbox-list">
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/blog"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 1)"
            >
            
          
            Developer blog
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="https://privacysandbox.com/news/"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 2)"
            >
            
              
              
            
          
            Project news
          
          </a>
          
          
        </li>
        
      </ul>
    </li>
    
    <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading no-link">Resources</h3>
      <ul class="devsite-footer-linkbox-list">
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="https://privacysandbox.com/"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 1)"
            >
            
          
            Project site
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="https://privacysandbox.com/open-web/#the-privacy-sandbox-timeline"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 2)"
            >
            
              
              
            
          
            Privacy Sandbox timeline
          
          </a>
          
          
        </li>
        
      </ul>
    </li>
    
    <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading no-link">Tools</h3>
      <ul class="devsite-footer-linkbox-list">
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="https://goo.gle/psat"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 1)"
            >
            
          
            Privacy Sandbox Analysis Tool
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="https://privacy-sandbox-demos.dev/"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 2)"
            >
            
              
              
            
          
            Privacy Sandbox demos
          
          </a>
          
          
        </li>
        
      </ul>
    </li>
    
  </ul>
  
</nav>
          
        </devsite-footer-linkboxes>
        <devsite-footer-utility class="devsite-footer">
          
            

<div class="devsite-footer-utility nocontent">
  

  
  <nav class="devsite-footer-utility-links" aria-label="Utility links">
    
    <ul class="devsite-footer-utility-list">
      
      <li class="devsite-footer-utility-item
                 ">
        
        
        <a class="devsite-footer-utility-link gc-analytics-event"
           href="//policies.google.com/terms"
           data-category="Site-Wide Custom Events"
           data-label="Footer Terms link"
         >
          Terms
        </a>
        
      </li>
      
      <li class="devsite-footer-utility-item
                 ">
        
        
        <a class="devsite-footer-utility-link gc-analytics-event"
           href="//policies.google.com/privacy"
           data-category="Site-Wide Custom Events"
           data-label="Footer Privacy link"
         >
          Privacy
        </a>
        
      </li>
      
      <li class="devsite-footer-utility-item
                 glue-cookie-notification-bar-control">
        
        
        <a class="devsite-footer-utility-link gc-analytics-event"
           href="#"
           data-category="Site-Wide Custom Events"
           data-label="Footer Manage cookies link"
         
           aria-hidden="true"
         >
          Manage cookies
        </a>
        
      </li>
      
    </ul>
    
    
<devsite-language-selector>
  <ul role="presentation">
    
    
    <li role="presentation">
      <a role="menuitem" lang="en"
        >English</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="de"
        >Deutsch</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="es_419"
        >Español – América Latina</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="fr"
        >Français</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="id"
        >Indonesia</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="it"
        >Italiano</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="pl"
        >Polski</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="pt_br"
        >Português – Brasil</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="vi"
        >Tiếng Việt</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="tr"
        >Türkçe</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="ru"
        >Русский</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="he"
        >עברית</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="ar"
        >العربيّة</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="fa"
        >فارسی</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="hi"
        >हिंदी</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="bn"
        >বাংলা</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="th"
        >ภาษาไทย</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="zh_cn"
        >中文 – 简体</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="zh_tw"
        >中文 – 繁體</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="ja"
        >日本語</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="ko"
        >한국어</a>
    </li>
    
  </ul>
</devsite-language-selector>

  </nav>
</div>
          
        </devsite-footer-utility>
        <devsite-panel>
          
        </devsite-panel>
        
      </section></section>
    <devsite-sitemask></devsite-sitemask>
    <devsite-snackbar></devsite-snackbar>
    <devsite-tooltip ></devsite-tooltip>
    <devsite-heading-link></devsite-heading-link>
    <devsite-analytics>
      
        <script type="application/json" analytics>[]</script>
<script type="application/json" tag-management>{&#34;at&#34;: &#34;False&#34;, &#34;ga4&#34;: [{&#34;id&#34;: &#34;G-4GR80KWYRS&#34;, &#34;purpose&#34;: 0}], &#34;ga4p&#34;: [{&#34;id&#34;: &#34;G-4GR80KWYRS&#34;, &#34;purpose&#34;: 0}], &#34;gtm&#34;: [{&#34;id&#34;: &#34;GTM-WPJH8HP6&#34;, &#34;purpose&#34;: 0}], &#34;parameters&#34;: {&#34;internalUser&#34;: &#34;False&#34;, &#34;language&#34;: {&#34;machineTranslated&#34;: &#34;False&#34;, &#34;requested&#34;: &#34;en&#34;, &#34;served&#34;: &#34;en&#34;}, &#34;pageType&#34;: &#34;article&#34;, &#34;projectName&#34;: &#34;Privacy Sandbox&#34;, &#34;signedIn&#34;: &#34;False&#34;, &#34;tenant&#34;: &#34;privacysandbox&#34;, &#34;recommendations&#34;: {&#34;sourcePage&#34;: &#34;&#34;, &#34;sourceType&#34;: 0, &#34;sourceRank&#34;: 0, &#34;sourceIdenticalDescriptions&#34;: 0, &#34;sourceTitleWords&#34;: 0, &#34;sourceDescriptionWords&#34;: 0, &#34;experiment&#34;: &#34;&#34;}, &#34;experiment&#34;: {&#34;ids&#34;: &#34;&#34;}}}</script>
      
    </devsite-analytics>
    
      <devsite-badger></devsite-badger>
    
    
    
    
<script nonce="chLzJ8bh44BD7r5HDBoKxUMPHf6CTX">
  
  (function(d,e,v,s,i,t,E){d['GoogleDevelopersObject']=i;
    t=e.createElement(v);t.async=1;t.src=s;E=e.getElementsByTagName(v)[0];
    E.parentNode.insertBefore(t,E);})(window, document, 'script',
    'https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/privacysandbox/js/app_loader.js', '[64,"en",null,"/js/devsite_app_module.js","https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9","https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/privacysandbox","https://privacysandbox-dot-devsite-v2-prod.appspot.com",null,null,["/_pwa/privacysandbox/manifest.json","https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/images/video-placeholder.svg","https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/privacysandbox/images/favicon.png","https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/privacysandbox/images/lockup.svg","https://fonts.googleapis.com/css?family=Roboto:300,400,400italic,500,500italic,700,700italic|Roboto+Mono:400,500,700&display=swap"],1,null,[1,6,8,12,14,17,21,25,50,52,63,70,75,76,80,87,91,92,93,97,98,100,101,102,103,104,105,107,108,109,110,112,113,116,117,118,120,122,124,125,126,127,129,130,131,132,133,134,135,136,138,140,141,147,148,149,151,152,156,157,158,159,161,163,164,168,169,170,179,180,182,183,186,191,193,196],"AIzaSyAP-jjEJBzmIyKR4F-3XITp8yM9T1gEEI8","AIzaSyB6xiKGDR5O3Ak2okS4rLkauxGUG7XP0hg","privacysandbox.google.com","AIzaSyAQk0fBONSGUqCNznf6Krs82Ap1-NV6J4o","AIzaSyCCxcqdrZ_7QMeLCRY20bh_SXdAYqy70KY",null,null,null,["DevPro__enable_developer_subscriptions","Profiles__enable_purchase_prompts","MiscFeatureFlags__developers_footer_dark_image","Concierge__enable_actions_menu","Profiles__enable_join_program_group_endpoint","DevPro__enable_google_one_card","Profiles__require_profile_eligibility_for_signin","Search__enable_ai_search_summaries_for_all","CloudShell__cloud_shell_button","Profiles__enable_developer_profile_benefits_ui_redesign","MiscFeatureFlags__enable_framebox_badge_methods","CloudShell__cloud_code_overflow_menu","TpcFeatures__proxy_prod_host","EngEduTelemetry__enable_engedu_telemetry","Profiles__enable_release_notes_notifications","DevPro__enable_free_benefits","Profiles__enable_user_type","Cloud__cache_serialized_dynamic_content","DevPro__enable_firebase_workspaces_card","DevPro__enable_embed_profile_creation","Profiles__enable_page_saving","MiscFeatureFlags__gdp_dashboard_reskin_enabled","DevPro__enable_devpro_offers","Profiles__enable_recognition_badges","Cloud__enable_cloud_shell","Analytics__enable_clearcut_logging","Cloud__enable_free_trial_server_call","Profiles__enable_dashboard_curated_recommendations","Profiles__enable_completequiz_endpoint","OnSwitch__enable","BookNav__enable_tenant_cache_key","DevPro__enable_cloud_innovators_plus","Cloud__fast_free_trial","Search__enable_suggestions_from_borg","MiscFeatureFlags__enable_appearance_cookies","DevPro__remove_eu_tax_intake_form","Concierge__enable_remove_info_panel_tags","DevPro__enable_enterprise","MiscFeatureFlags__enable_variable_operator","MiscFeatureFlags__enable_variable_operator_index_yaml","MiscFeatureFlags__enable_explicit_template_dependencies","Concierge__enable_pushui","DevPro__enable_vertex_credit_card","DevPro__enable_google_payments_buyflow","Cloud__enable_cloudx_experiment_ids","Search__enable_ai_eligibility_checks","Profiles__enable_stripe_subscription_management","Profiles__enable_public_developer_profiles","Profiles__enable_profile_collections","Experiments__reqs_query_experiments","Search__enable_page_map","TpcFeatures__enable_unmirrored_page_left_nav","Cloud__enable_cloud_dlp_service","Profiles__enable_awarding_url","Profiles__enable_callout_notifications","MiscFeatureFlags__enable_firebase_utm","Cloud__enable_llm_concierge_chat","MiscFeatureFlags__enable_view_transitions","Cloud__enable_cloud_shell_fte_user_flow","MiscFeatureFlags__emergency_css","MiscFeatureFlags__enable_project_body_class","Profiles__enable_complete_playlist_endpoint","MiscFeatureFlags__enable_project_variables","Cloud__enable_legacy_calculator_redirect","DevPro__enable_nvidia_credits_card","Search__enable_dynamic_content_confidential_banner","Profiles__enable_completecodelab_endpoint","MiscFeatureFlags__developers_footer_image","Profiles__enable_playlist_community_acl","Profiles__enable_developer_profiles_callout","DevPro__enable_code_assist"],null,null,"AIzaSyBLEMok-5suZ67qRPzx0qUtbnLmyT_kCVE","https://developerscontentserving-pa.clients6.google.com","AIzaSyCM4QpTRSqP5qI4Dvjt4OAScIN8sOUlO-k","https://developerscontentsearch-pa.clients6.google.com",1,null,null,"https://developerprofiles-pa.clients6.google.com",[64,"privacysandbox","Privacy Sandbox","privacysandbox.google.com",null,"privacysandbox-dot-devsite-v2-prod.appspot.com",null,null,[null,1,null,null,null,null,null,null,null,null,null,[1],null,null,null,null,null,null,[1],null,null,null,null,[1,null,1]],null,[77,null,null,null,null,null,"/images/lockup.svg","/images/privacy-sandbox-logo.svg",null,null,null,1,null,null,null,null,null,null,null,null,null,2],[],null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,[[],[1,1]],[[null,null,null,null,null,null,null,[["G-4GR80KWYRS"],null,null,[["G-4GR80KWYRS",1]]]]]],null,"pk_live_5170syrHvgGVmSx9sBrnWtA5luvk9BwnVcvIi7HizpwauFG96WedXsuXh790rtij9AmGllqPtMLfhe2RSwD6Pn38V00uBCydV4m",1,null,"https://developerscontentinsights-pa.clients6.google.com","AIzaSyCg-ZUslalsEbXMfIo9ZP8qufZgo3LSBDU","AIzaSyDxT0vkxnY_KeINtA4LSePJO-4MAZPMRsE","https://developers.clients6.google.com",null,null,"AIzaSyBQom12tzI-rybN7Sf-KfeL4nwm-Rf7PmI\n",null,"https://developerslogging.clients6.google.com"]')
  
</script>

    <devsite-a11y-announce></devsite-a11y-announce>
  </body>
</html>