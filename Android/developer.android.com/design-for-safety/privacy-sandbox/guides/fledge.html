








<!doctype html>
<html 
      lang="en"
      dir="ltr">
  <head>
    <meta name="google-signin-client-id" content="721724668570-nbkv1cfusk7kk4eni4pjvepaus73b13t.apps.googleusercontent.com">
    <meta name="google-signin-scope"
          content="profile email https://www.googleapis.com/auth/developerprofiles https://www.googleapis.com/auth/developerprofiles.award">
    <meta property="og:site_name" content="Privacy Sandbox">
    <meta property="og:type" content="website"><meta name="theme-color" content="#fff"><meta charset="utf-8">
    <meta content="IE=Edge" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    

    <link rel="manifest" href="/_pwa/privacysandbox/manifest.json"
          crossorigin="use-credentials">
    <link rel="preconnect" href="//www.gstatic.com" crossorigin>
    <link rel="preconnect" href="//fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="//fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="//apis.google.com" crossorigin>
    <link rel="preconnect" href="//www.google-analytics.com" crossorigin><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:300,400,400italic,500,500italic,700,700italic|Roboto+Mono:400,500,700&display=swap">
      <link rel="stylesheet"
            href="//fonts.googleapis.com/css2?family=Material+Icons&family=Material+Symbols+Outlined&display=block"><link rel="stylesheet" href="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/privacysandbox/css/app.css">
      
        <link rel="stylesheet" href="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/privacysandbox/css/dark-theme.css" disabled>
      <link rel="shortcut icon" href="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/privacysandbox/images/favicon.png">
    <link rel="apple-touch-icon" href="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/privacysandbox/images/touch-icon.png"><link rel="canonical" href="https://privacysandbox.google.com/private-advertising/protected-audience/android/developer-guide"><link rel="search" type="application/opensearchdescription+xml"
            title="Privacy Sandbox" href="https://privacysandbox.google.com/s/opensearch.xml">
      <link rel="alternate" hreflang="en"
          href="https://privacysandbox.google.com/private-advertising/protected-audience/android/developer-guide" /><link rel="alternate" hreflang="x-default" href="https://privacysandbox.google.com/private-advertising/protected-audience/android/developer-guide" /><link rel="alternate" hreflang="ar"
          href="https://privacysandbox.google.com/private-advertising/protected-audience/android/developer-guide?hl=ar" /><link rel="alternate" hreflang="bn"
          href="https://privacysandbox.google.com/private-advertising/protected-audience/android/developer-guide?hl=bn" /><link rel="alternate" hreflang="zh-Hans"
          href="https://privacysandbox.google.com/private-advertising/protected-audience/android/developer-guide?hl=zh-cn" /><link rel="alternate" hreflang="zh-Hant"
          href="https://privacysandbox.google.com/private-advertising/protected-audience/android/developer-guide?hl=zh-tw" /><link rel="alternate" hreflang="fa"
          href="https://privacysandbox.google.com/private-advertising/protected-audience/android/developer-guide?hl=fa" /><link rel="alternate" hreflang="fr"
          href="https://privacysandbox.google.com/private-advertising/protected-audience/android/developer-guide?hl=fr" /><link rel="alternate" hreflang="de"
          href="https://privacysandbox.google.com/private-advertising/protected-audience/android/developer-guide?hl=de" /><link rel="alternate" hreflang="he"
          href="https://privacysandbox.google.com/private-advertising/protected-audience/android/developer-guide?hl=he" /><link rel="alternate" hreflang="hi"
          href="https://privacysandbox.google.com/private-advertising/protected-audience/android/developer-guide?hl=hi" /><link rel="alternate" hreflang="id"
          href="https://privacysandbox.google.com/private-advertising/protected-audience/android/developer-guide?hl=id" /><link rel="alternate" hreflang="it"
          href="https://privacysandbox.google.com/private-advertising/protected-audience/android/developer-guide?hl=it" /><link rel="alternate" hreflang="ja"
          href="https://privacysandbox.google.com/private-advertising/protected-audience/android/developer-guide?hl=ja" /><link rel="alternate" hreflang="ko"
          href="https://privacysandbox.google.com/private-advertising/protected-audience/android/developer-guide?hl=ko" /><link rel="alternate" hreflang="pl"
          href="https://privacysandbox.google.com/private-advertising/protected-audience/android/developer-guide?hl=pl" /><link rel="alternate" hreflang="pt-BR"
          href="https://privacysandbox.google.com/private-advertising/protected-audience/android/developer-guide?hl=pt-br" /><link rel="alternate" hreflang="ru"
          href="https://privacysandbox.google.com/private-advertising/protected-audience/android/developer-guide?hl=ru" /><link rel="alternate" hreflang="es-419"
          href="https://privacysandbox.google.com/private-advertising/protected-audience/android/developer-guide?hl=es-419" /><link rel="alternate" hreflang="th"
          href="https://privacysandbox.google.com/private-advertising/protected-audience/android/developer-guide?hl=th" /><link rel="alternate" hreflang="tr"
          href="https://privacysandbox.google.com/private-advertising/protected-audience/android/developer-guide?hl=tr" /><link rel="alternate" hreflang="vi"
          href="https://privacysandbox.google.com/private-advertising/protected-audience/android/developer-guide?hl=vi" /><title>Protected Audience API Developer&#39;s Guide &nbsp;|&nbsp; Privacy Sandbox</title>

<meta property="og:title" content="Protected Audience API Developer&#39;s Guide &nbsp;|&nbsp; Privacy Sandbox"><meta property="og:url" content="https://privacysandbox.google.com/private-advertising/protected-audience/android/developer-guide"><meta property="og:image" content="https://privacysandbox.google.com/static/privacy-sandbox-for-developers.png">
  <meta property="og:image:width" content="1600">
  <meta property="og:image:height" content="900"><meta property="og:locale" content="en"><meta name="twitter:card" content="summary_large_image"><script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Article",
    
    "headline": "Protected Audience API Developer&#39;s Guide"
  }
</script>
  

  

  

  


    
      <link rel="stylesheet" href="/extras.css"></head>
  <body class=""
        template="page"
        theme="white"
        type="article"
        
        
        appearance
        
        layout="docs"
        
        
        
        
        display-toc
        pending>
  
    <devsite-progress type="indeterminate" id="app-progress"></devsite-progress>
  
  
    <a href="#main-content" class="skip-link button">
      
      Skip to main content
    </a>
    <section class="devsite-wrapper">
      <devsite-cookie-notification-bar></devsite-cookie-notification-bar><devsite-header role="banner">
  
    





















<div class="devsite-header--inner" data-nosnippet>
  <div class="devsite-top-logo-row-wrapper-wrapper">
    <div class="devsite-top-logo-row-wrapper">
      <div class="devsite-top-logo-row">
        <button type="button" id="devsite-hamburger-menu"
          class="devsite-header-icon-button button-flat material-icons gc-analytics-event"
          data-category="Site-Wide Custom Events"
          data-label="Navigation menu button"
          visually-hidden
          aria-label="Open menu">
        </button>
        
<div class="devsite-product-name-wrapper">

  <a href="/" class="devsite-site-logo-link gc-analytics-event"
   data-category="Site-Wide Custom Events" data-label="Site logo" track-type="globalNav"
   track-name="privacySandbox" track-metadata-position="nav"
   track-metadata-eventDetail="nav">
  
  <picture>
    
    <img src="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/privacysandbox/images/lockup.svg" class="devsite-site-logo" alt="Privacy Sandbox">
  </picture>
  
</a>



  
  
  <span class="devsite-product-name">
    <ul class="devsite-breadcrumb-list"
  >
  
  <li class="devsite-breadcrumb-item
             ">
    
    
    
      
      
    
  </li>
  
</ul>
  </span>

</div>
        <div class="devsite-top-logo-row-middle">
          <div class="devsite-header-upper-tabs">
            
              
              
  <devsite-tabs class="upper-tabs">

    <nav class="devsite-tabs-wrapper" aria-label="Upper tabs">
      
        
          <tab  >
            
    <a href="https://privacysandbox.google.com/"
    class="devsite-tabs-content gc-analytics-event "
      track-metadata-eventdetail="https://privacysandbox.google.com/"
    
       track-type="nav"
       track-metadata-position="nav - overview"
       track-metadata-module="primary nav"
       
       
         
           data-category="Site-Wide Custom Events"
         
           data-label="Tab: Overview"
         
           track-name="overview"
         
       >
    Overview
  
    </a>
    
  
          </tab>
        
      
        
          <tab  >
            
    <a href="https://privacysandbox.google.com/cookies"
    class="devsite-tabs-content gc-analytics-event "
      track-metadata-eventdetail="https://privacysandbox.google.com/cookies"
    
       track-type="nav"
       track-metadata-position="nav - cookies"
       track-metadata-module="primary nav"
       
       
         
           data-category="Site-Wide Custom Events"
         
           data-label="Tab: Cookies"
         
           track-name="cookies"
         
       >
    Cookies
  
    </a>
    
  
          </tab>
        
      
        
          <tab  class="devsite-active">
            
    <a href="https://privacysandbox.google.com/private-advertising"
    class="devsite-tabs-content gc-analytics-event "
      track-metadata-eventdetail="https://privacysandbox.google.com/private-advertising"
    
       track-type="nav"
       track-metadata-position="nav - private advertising"
       track-metadata-module="primary nav"
       aria-label="Private advertising, selected" 
       
         
           data-category="Site-Wide Custom Events"
         
           data-label="Tab: Private advertising"
         
           track-name="private advertising"
         
       >
    Private advertising
  
    </a>
    
  
          </tab>
        
      
        
          <tab  >
            
    <a href="https://privacysandbox.google.com/protections"
    class="devsite-tabs-content gc-analytics-event "
      track-metadata-eventdetail="https://privacysandbox.google.com/protections"
    
       track-type="nav"
       track-metadata-position="nav - privacy protections"
       track-metadata-module="primary nav"
       
       
         
           data-category="Site-Wide Custom Events"
         
           data-label="Tab: Privacy protections"
         
           track-name="privacy protections"
         
       >
    Privacy protections
  
    </a>
    
  
          </tab>
        
      
        
          <tab  >
            
    <a href="https://privacysandbox.google.com/blog"
    class="devsite-tabs-content gc-analytics-event "
      track-metadata-eventdetail="https://privacysandbox.google.com/blog"
    
       track-type="nav"
       track-metadata-position="nav - blog"
       track-metadata-module="primary nav"
       
       
         
           data-category="Site-Wide Custom Events"
         
           data-label="Tab: Blog"
         
           track-name="blog"
         
       >
    Blog
  
    </a>
    
  
          </tab>
        
      
    </nav>

  </devsite-tabs>

            
           </div>
          
<devsite-search
    enable-signin
    enable-search
    enable-suggestions
      enable-query-completion
    
    enable-search-summaries
    project-name="Privacy Sandbox"
    tenant-name="Privacy Sandbox"
    
    
    
    
    
    >
  <form class="devsite-search-form" action="https://privacysandbox.google.com/s/results" method="GET">
    <div class="devsite-search-container">
      <button type="button"
              search-open
              class="devsite-search-button devsite-header-icon-button button-flat material-icons"
              
              aria-label="Open search"></button>
      <div class="devsite-searchbox">
        <input
          aria-activedescendant=""
          aria-autocomplete="list"
          
          aria-label="Search"
          aria-expanded="false"
          aria-haspopup="listbox"
          autocomplete="off"
          class="devsite-search-field devsite-search-query"
          name="q"
          
          placeholder="Search"
          role="combobox"
          type="text"
          value=""
          >
          <div class="devsite-search-image material-icons" aria-hidden="true">
            
              <svg class="devsite-search-ai-image" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <g clip-path="url(#clip0_6641_386)">
                    <path d="M19.6 21L13.3 14.7C12.8 15.1 12.225 15.4167 11.575 15.65C10.925 15.8833 10.2333 16 9.5 16C7.68333 16 6.14167 15.375 4.875 14.125C3.625 12.8583 3 11.3167 3 9.5C3 7.68333 3.625 6.15 4.875 4.9C6.14167 3.63333 7.68333 3 9.5 3C10.0167 3 10.5167 3.05833 11 3.175C11.4833 3.275 11.9417 3.43333 12.375 3.65L10.825 5.2C10.6083 5.13333 10.3917 5.08333 10.175 5.05C9.95833 5.01667 9.73333 5 9.5 5C8.25 5 7.18333 5.44167 6.3 6.325C5.43333 7.19167 5 8.25 5 9.5C5 10.75 5.43333 11.8167 6.3 12.7C7.18333 13.5667 8.25 14 9.5 14C10.6667 14 11.6667 13.625 12.5 12.875C13.35 12.1083 13.8417 11.15 13.975 10H15.975C15.925 10.6333 15.7833 11.2333 15.55 11.8C15.3333 12.3667 15.05 12.8667 14.7 13.3L21 19.6L19.6 21ZM17.5 12C17.5 10.4667 16.9667 9.16667 15.9 8.1C14.8333 7.03333 13.5333 6.5 12 6.5C13.5333 6.5 14.8333 5.96667 15.9 4.9C16.9667 3.83333 17.5 2.53333 17.5 0.999999C17.5 2.53333 18.0333 3.83333 19.1 4.9C20.1667 5.96667 21.4667 6.5 23 6.5C21.4667 6.5 20.1667 7.03333 19.1 8.1C18.0333 9.16667 17.5 10.4667 17.5 12Z" fill="#5F6368"/>
                  </g>
                <defs>
                <clipPath id="clip0_6641_386">
                <rect width="24" height="24" fill="white"/>
                </clipPath>
                </defs>
              </svg>
            
          </div>
          <div class="devsite-search-shortcut-icon-container" aria-hidden="true">
            <kbd class="devsite-search-shortcut-icon">/</kbd>
          </div>
      </div>
    </div>
  </form>
  <button type="button"
          search-close
          class="devsite-search-button devsite-header-icon-button button-flat material-icons"
          
          aria-label="Close search"></button>
</devsite-search>

        </div>

        

          

          

          <devsite-appearance-selector></devsite-appearance-selector>

          
<devsite-language-selector>
  <ul role="presentation">
    
    
    <li role="presentation">
      <a role="menuitem" lang="en"
        >English</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="de"
        >Deutsch</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="es_419"
        >Español – América Latina</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="fr"
        >Français</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="id"
        >Indonesia</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="it"
        >Italiano</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="pl"
        >Polski</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="pt_br"
        >Português – Brasil</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="vi"
        >Tiếng Việt</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="tr"
        >Türkçe</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="ru"
        >Русский</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="he"
        >עברית</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="ar"
        >العربيّة</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="fa"
        >فارسی</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="hi"
        >हिंदी</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="bn"
        >বাংলা</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="th"
        >ภาษาไทย</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="zh_cn"
        >中文 – 简体</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="zh_tw"
        >中文 – 繁體</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="ja"
        >日本語</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="ko"
        >한국어</a>
    </li>
    
  </ul>
</devsite-language-selector>


          
            <a class="devsite-header-link devsite-top-button button gc-analytics-event "
    href="//privacysandbox.com/"
    data-category="Site-Wide Custom Events"
    data-label="Site header link: Home"
    >
  Home
</a>
          

        

        
          <devsite-user 
                        
                        
                          enable-profiles
                        
                        
                          fp-auth
                        
                        id="devsite-user">
            
              
              <span class="button devsite-top-button" aria-hidden="true" visually-hidden>Sign in</span>
            
          </devsite-user>
        
        
        
      </div>
    </div>
  </div>



  <div class="devsite-collapsible-section
    
      devsite-header-no-lower-tabs
    ">
    <div class="devsite-header-background">
      
        
          <div class="devsite-product-id-row"
           >
            <div class="devsite-product-description-row">
              
                
                <div class="devsite-product-id">
                  
                  
                  
                    <ul class="devsite-breadcrumb-list"
  >
  
  <li class="devsite-breadcrumb-item
             ">
    
    
    
      
  <a href="https://privacysandbox.google.com/private-advertising"
      
        class="devsite-breadcrumb-link gc-analytics-event"
      
        data-category="Site-Wide Custom Events"
      
        data-label="Lower Header"
      
        data-value="1"
      
        track-type="globalNav"
      
        track-name="breadcrumb"
      
        track-metadata-position="1"
      
        track-metadata-eventdetail=""
      
    >
    
        Private advertising
      
  </a>
  
    
  </li>
  
</ul>
                </div>
                
              
              
            </div>
            
          </div>
          
        
      
      
    </div>
  </div>

</div>



  

  
</devsite-header>
      <devsite-book-nav scrollbars >
        
          





















<div class="devsite-book-nav-filter"
     >
  <span class="filter-list-icon material-icons" aria-hidden="true"></span>
  <input type="text"
         placeholder="Filter"
         
         aria-label="Type to filter"
         role="searchbox">
  
  <span class="filter-clear-button hidden"
        data-title="Clear filter"
        aria-label="Clear filter"
        role="button"
        tabindex="0"></span>
</div>

<nav class="devsite-book-nav devsite-nav nocontent"
     aria-label="Side menu">
  <div class="devsite-mobile-header">
    <button type="button"
            id="devsite-close-nav"
            class="devsite-header-icon-button button-flat material-icons gc-analytics-event"
            data-category="Site-Wide Custom Events"
            data-label="Close navigation"
            aria-label="Close navigation">
    </button>
    <div class="devsite-product-name-wrapper">

  <a href="/" class="devsite-site-logo-link gc-analytics-event"
   data-category="Site-Wide Custom Events" data-label="Site logo" track-type="globalNav"
   track-name="privacySandbox" track-metadata-position="nav"
   track-metadata-eventDetail="nav">
  
  <picture>
    
    <img src="https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/privacysandbox/images/lockup.svg" class="devsite-site-logo" alt="Privacy Sandbox">
  </picture>
  
</a>


  
      <span class="devsite-product-name">
        
        
        <ul class="devsite-breadcrumb-list"
  >
  
  <li class="devsite-breadcrumb-item
             ">
    
    
    
      
      
    
  </li>
  
</ul>
      </span>
    

</div>
  </div>

  <div class="devsite-book-nav-wrapper">
    <div class="devsite-mobile-nav-top">
      
        <ul class="devsite-nav-list">
          
            <li class="devsite-nav-item">
              
  
  <a href="/"
    
       class="devsite-nav-title gc-analytics-event
              devsite-nav-has-children
              "
    

    
      
        data-category="Site-Wide Custom Events"
      
        data-label="Tab: Overview"
      
        track-name="overview"
      
    
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Overview"
     track-type="globalNav"
     track-metadata-eventDetail="globalMenu"
     track-metadata-position="nav">
  
    <span class="devsite-nav-text" tooltip >
      Overview
   </span>
    
    <span class="devsite-nav-icon material-icons" data-icon="forward"
          >
    </span>
    
  
  </a>
  

  
              
            </li>
          
            <li class="devsite-nav-item">
              
  
  <a href="/cookies"
    
       class="devsite-nav-title gc-analytics-event
              devsite-nav-has-children
              "
    

    
      
        data-category="Site-Wide Custom Events"
      
        data-label="Tab: Cookies"
      
        track-name="cookies"
      
    
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Cookies"
     track-type="globalNav"
     track-metadata-eventDetail="globalMenu"
     track-metadata-position="nav">
  
    <span class="devsite-nav-text" tooltip >
      Cookies
   </span>
    
    <span class="devsite-nav-icon material-icons" data-icon="forward"
          >
    </span>
    
  
  </a>
  

  
              
            </li>
          
            <li class="devsite-nav-item">
              
  
  <a href="/private-advertising"
    
       class="devsite-nav-title gc-analytics-event
              devsite-nav-has-children
              devsite-nav-active"
    

    
      
        data-category="Site-Wide Custom Events"
      
        data-label="Tab: Private advertising"
      
        track-name="private advertising"
      
    
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Private advertising"
     track-type="globalNav"
     track-metadata-eventDetail="globalMenu"
     track-metadata-position="nav">
  
    <span class="devsite-nav-text" tooltip >
      Private advertising
   </span>
    
    <span class="devsite-nav-icon material-icons" data-icon="forward"
          >
    </span>
    
  
  </a>
  

  
              
            </li>
          
            <li class="devsite-nav-item">
              
  
  <a href="/protections"
    
       class="devsite-nav-title gc-analytics-event
              devsite-nav-has-children
              "
    

    
      
        data-category="Site-Wide Custom Events"
      
        data-label="Tab: Privacy protections"
      
        track-name="privacy protections"
      
    
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Privacy protections"
     track-type="globalNav"
     track-metadata-eventDetail="globalMenu"
     track-metadata-position="nav">
  
    <span class="devsite-nav-text" tooltip >
      Privacy protections
   </span>
    
    <span class="devsite-nav-icon material-icons" data-icon="forward"
          >
    </span>
    
  
  </a>
  

  
              
            </li>
          
            <li class="devsite-nav-item">
              
  
  <a href="/blog"
    
       class="devsite-nav-title gc-analytics-event
              
              "
    

    
      
        data-category="Site-Wide Custom Events"
      
        data-label="Tab: Blog"
      
        track-name="blog"
      
    
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Blog"
     track-type="globalNav"
     track-metadata-eventDetail="globalMenu"
     track-metadata-position="nav">
  
    <span class="devsite-nav-text" tooltip >
      Blog
   </span>
    
  
  </a>
  

  
              
            </li>
          
          
    
    
<li class="devsite-nav-item">

  
  <a href="//privacysandbox.com/"
    
       class="devsite-nav-title gc-analytics-event "
    

    
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Home"
     track-type="navMenu"
     track-metadata-eventDetail="globalMenu"
     track-metadata-position="nav">
  
    <span class="devsite-nav-text" tooltip >
      Home
   </span>
    
  
  </a>
  

</li>

  
          
        </ul>
      
    </div>
    
      <div class="devsite-mobile-nav-bottom">
        
          
          <ul class="devsite-nav-list" menu="_book">
            <li class="devsite-nav-item
           devsite-nav-expandable
           devsite-nav-accordion"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Start your integration</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising"
      ><span class="devsite-nav-text" tooltip>Get started</span></a></li><li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Web</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/setup/web"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/setup/web"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/setup/web"
      ><span class="devsite-nav-text" tooltip>Overview</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/setup/web/chrome-facilitated-testing"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/setup/web/chrome-facilitated-testing"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/setup/web/chrome-facilitated-testing"
      ><span class="devsite-nav-text" tooltip>Chrome-facilitated testing</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/setup/web/relevance-testing"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/setup/web/relevance-testing"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/setup/web/relevance-testing"
      ><span class="devsite-nav-text" tooltip>Relevance APIs testing guidance</span></a></li></ul></div></li><li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Android</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/setup/android"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/setup/android"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/setup/android"
      ><span class="devsite-nav-text" tooltip>Overview</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/setup/android/setup"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/setup/android/setup"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/setup/android/setup"
      ><span class="devsite-nav-text" tooltip>Set up your development environment</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/setup/android/setup-api-access"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/setup/android/setup-api-access"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/setup/android/setup-api-access"
      ><span class="devsite-nav-text" tooltip>Configure AdServices</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/setup/android/download"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/setup/android/download"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/setup/android/download"
      ><span class="devsite-nav-text" tooltip>Set up a device or emulator image</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/setup/android/setup-device-access"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/setup/android/setup-device-access"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/setup/android/setup-device-access"
      ><span class="devsite-nav-text" tooltip>Configure devices to use Privacy Sandbox on Android</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/setup/android/troubleshooting"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/setup/android/troubleshooting"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/setup/android/troubleshooting"
      ><span class="devsite-nav-text" tooltip>Troubleshoot your setup</span></a></li></ul></div></li></ul></div></li>

  <li class="devsite-nav-item
           devsite-nav-expandable
           devsite-nav-accordion"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Console</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/console/create-your-account"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/console/create-your-account"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/console/create-your-account"
      ><span class="devsite-nav-text" tooltip>Create your account</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/console/add-users-to-account"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/console/add-users-to-account"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/console/add-users-to-account"
      ><span class="devsite-nav-text" tooltip>Add users to your organization’s account</span></a></li></ul></div></li>

  <li class="devsite-nav-item
           devsite-nav-expandable
           devsite-nav-accordion"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Enrollment</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/enrollment"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/enrollment"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/enrollment"
      ><span class="devsite-nav-text" tooltip>Enroll your platform with Privacy Sandbox</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/enrollment/faqs"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/enrollment/faqs"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/enrollment/faqs"
      ><span class="devsite-nav-text" tooltip>Frequently asked questions</span></a></li></ul></div></li>

  <li class="devsite-nav-item
           devsite-nav-expandable
           devsite-nav-accordion"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Ads lifecycle</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/manage-ad-audience"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/manage-ad-audience"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/manage-ad-audience"
      ><span class="devsite-nav-text" tooltip>Audiences</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/manage-ad-auctions"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/manage-ad-auctions"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/manage-ad-auctions"
      ><span class="devsite-nav-text" tooltip>Auctions</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/measure-ad-performance"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/measure-ad-performance"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/measure-ad-performance"
      ><span class="devsite-nav-text" tooltip>Performance</span></a></li></ul></div></li>

  <li class="devsite-nav-item
           devsite-nav-expandable
           devsite-nav-accordion"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Topics</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/topics"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/topics"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/topics"
      ><span class="devsite-nav-text" tooltip>Overview</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/topics/why-topics"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/topics/why-topics"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/topics/why-topics"
      ><span class="devsite-nav-text" tooltip>Why do we need Topics</span></a></li><li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Topics API for Web</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/topics/web"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/topics/web"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/topics/web"
      ><span class="devsite-nav-text" tooltip>Overview</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/topics/web/setup"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/topics/web/setup"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/topics/web/setup"
      ><span class="devsite-nav-text" tooltip>Setup</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/topics/web/implement"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/topics/web/implement"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/topics/web/implement"
      ><span class="devsite-nav-text" tooltip>Implement Topics</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/topics/web/test-and-go-live"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/topics/web/test-and-go-live"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/topics/web/test-and-go-live"
      ><span class="devsite-nav-text" tooltip>Test &amp; go live</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/topics/web/tooling"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/topics/web/tooling"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/topics/web/tooling"
      ><span class="devsite-nav-text" tooltip>Tooling</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/topics/web/controls"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/topics/web/controls"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/topics/web/controls"
      ><span class="devsite-nav-text" tooltip>Customization &amp; opt-out</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/topics/web/support"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/topics/web/support"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/topics/web/support"
      ><span class="devsite-nav-text" tooltip>Support</span></a></li></ul></div></li><li class="devsite-nav-item
           devsite-nav-expandable
           devsite-nav-experimental"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Topics API for Android</span><span class="devsite-nav-icon material-icons"
        data-icon="experimental"
        data-title="Experimental!"
        aria-hidden="true"></span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/topics/android"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/topics/android"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/topics/android"
      ><span class="devsite-nav-text" tooltip>Overview</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/topics/android/implement"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/topics/android/implement"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/topics/android/implement"
      ><span class="devsite-nav-text" tooltip>Implement Topics</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/topics/android/controls"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/topics/android/controls"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/topics/android/controls"
      ><span class="devsite-nav-text" tooltip>Customization &amp; opt-out</span></a></li></ul></div></li></ul></div></li>

  <li class="devsite-nav-item
           devsite-nav-expandable
           devsite-nav-accordion"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Protected Audience</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Web</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/protected-audience"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience"
      ><span class="devsite-nav-text" tooltip>Overview</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience-api/feature-status"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience-api/feature-status"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience-api/feature-status"
      ><span class="devsite-nav-text" tooltip>Status of pending API capabilities</span></a></li><li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Developer guide</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/protected-audience-api"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience-api"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience-api"
      ><span class="devsite-nav-text" tooltip>Overview</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience-api/protected-audience-experiment"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience-api/protected-audience-experiment"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience-api/protected-audience-experiment"
      ><span class="devsite-nav-text" tooltip>Experiment</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience-api/ad-auction"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience-api/ad-auction"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience-api/ad-auction"
      ><span class="devsite-nav-text" tooltip>Seller guide - Run ad auctions</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience-api/reporting"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience-api/reporting"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience-api/reporting"
      ><span class="devsite-nav-text" tooltip>Auction reporting</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience-api/guide/reporting-id"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience-api/guide/reporting-id"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience-api/guide/reporting-id"
      ><span class="devsite-nav-text" tooltip>Reporting IDs</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience-api/latency"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience-api/latency"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience-api/latency"
      ><span class="devsite-nav-text" tooltip>Improve auction latency</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience-api/reports"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience-api/reports"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience-api/reports"
      ><span class="devsite-nav-text" tooltip>Report on auction results</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/sequential-auction-setup"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/sequential-auction-setup"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/sequential-auction-setup"
      ><span class="devsite-nav-text" tooltip>Sequential auction setup with header bidding and multi-seller Protected Audience auction</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience-api/troubleshoot"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience-api/troubleshoot"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience-api/troubleshoot"
      ><span class="devsite-nav-text" tooltip>Troubleshoot</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience-api/opt-out"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience-api/opt-out"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience-api/opt-out"
      ><span class="devsite-nav-text" tooltip>Opt out</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience-api/k-anonymity"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience-api/k-anonymity"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience-api/k-anonymity"
      ><span class="devsite-nav-text" tooltip>K-anonymity</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience-api/publisher-guide"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience-api/publisher-guide"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience-api/publisher-guide"
      ><span class="devsite-nav-text" tooltip>Publisher guide</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/define-audience-data"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/define-audience-data"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/define-audience-data"
      ><span class="devsite-nav-text" tooltip>Define audience data</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/update-audience-data"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/update-audience-data"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/update-audience-data"
      ><span class="devsite-nav-text" tooltip>Update audience data and refresh ads</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/delegate-audience-management"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/delegate-audience-management"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/delegate-audience-management"
      ><span class="devsite-nav-text" tooltip>Delegate audience management to a third-party</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/auction/configure-auction"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/auction/configure-auction"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/auction/configure-auction"
      ><span class="devsite-nav-text" tooltip>Set up an ad auction on the publisher&#39;s page</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/auction/single-seller-auction"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/auction/single-seller-auction"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/auction/single-seller-auction"
      ><span class="devsite-nav-text" tooltip>Run a browser based auction with a single seller</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/auction/multi-seller-auction"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/auction/multi-seller-auction"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/auction/multi-seller-auction"
      ><span class="devsite-nav-text" tooltip>Run a browser based auction with multiple sellers</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/auction/sequential-auction"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/auction/sequential-auction"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/auction/sequential-auction"
      ><span class="devsite-nav-text" tooltip>Sequential auction setup with contextual ad auction</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/auction/render-ad"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/auction/render-ad"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/auction/render-ad"
      ><span class="devsite-nav-text" tooltip>Render an ad</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/auction/bid-in-auction-ad-slot"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/auction/bid-in-auction-ad-slot"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/auction/bid-in-auction-ad-slot"
      ><span class="devsite-nav-text" tooltip>Bid in an auction to buy an ad slot</span></a></li><li class="devsite-nav-item
           devsite-nav-external"><a href="https://docs.google.com/document/d/1b6YlL5CFVfCo6hHMqfOYp2WJNdsBTSvM4eayrmbm7e4/view"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: https://docs.google.com/document/d/1b6YlL5CFVfCo6hHMqfOYp2WJNdsBTSvM4eayrmbm7e4/view"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="https://docs.google.com/document/d/1b6YlL5CFVfCo6hHMqfOYp2WJNdsBTSvM4eayrmbm7e4/view"
      ><span class="devsite-nav-text" tooltip>API walkthrough</span><span class="devsite-nav-icon material-icons"
        data-icon="external"
        data-title="External"
        aria-hidden="true"></span></a></li><li class="devsite-nav-item"><a href="/private-advertising/topics-in-audiences"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/topics-in-audiences"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/topics-in-audiences"
      ><span class="devsite-nav-text" tooltip>Use Topics to target an audience</span></a></li></ul></div></li><li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Use cases</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/protected-audience-api/use-case/deals"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience-api/use-case/deals"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience-api/use-case/deals"
      ><span class="devsite-nav-text" tooltip>Deals</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/auction/pace-ad-delivery"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/auction/pace-ad-delivery"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/auction/pace-ad-delivery"
      ><span class="devsite-nav-text" tooltip>Pace ad delivery by frequency</span></a></li></ul></div></li></ul></div></li><li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Android</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/protected-audience/android"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience/android"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience/android"
      ><span class="devsite-nav-text" tooltip>Overview</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience/android/mediation"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience/android/mediation"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience/android/mediation"
      ><span class="devsite-nav-text" tooltip>Mediation</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience/android/frequency-capping"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience/android/frequency-capping"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience/android/frequency-capping"
      ><span class="devsite-nav-text" tooltip>Frequency capping</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience/android/appinstall-filtering"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience/android/appinstall-filtering"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience/android/appinstall-filtering"
      ><span class="devsite-nav-text" tooltip>App install ads filtering</span></a></li><li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Developer guide</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/protected-audience/android/developer-guide"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience/android/developer-guide"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience/android/developer-guide"
      ><span class="devsite-nav-text" tooltip>Protected Audience developer guide</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience/android/developer-guide/define-audience-data"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience/android/developer-guide/define-audience-data"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience/android/developer-guide/define-audience-data"
      ><span class="devsite-nav-text" tooltip>Define audience data</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience/android/developer-guide/update-audience-data"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience/android/developer-guide/update-audience-data"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience/android/developer-guide/update-audience-data"
      ><span class="devsite-nav-text" tooltip>Update audience data and refresh ads</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience/android/developer-guide/profiling"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience/android/developer-guide/profiling"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience/android/developer-guide/profiling"
      ><span class="devsite-nav-text" tooltip>Profile a Protected Audience auction</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience/android/developer-guide/debug-reporting"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience/android/developer-guide/debug-reporting"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience/android/developer-guide/debug-reporting"
      ><span class="devsite-nav-text" tooltip>Debug reporting</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience/android/developer-guide/inspect_audiences_cli"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience/android/developer-guide/inspect_audiences_cli"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience/android/developer-guide/inspect_audiences_cli"
      ><span class="devsite-nav-text" tooltip>Inspect custom audiences on the command line</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience/android/developer-guide/testing-setup"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience/android/developer-guide/testing-setup"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience/android/developer-guide/testing-setup"
      ><span class="devsite-nav-text" tooltip>Testing setup</span></a></li></ul></div></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience/android/integration-guide"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience/android/integration-guide"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience/android/integration-guide"
      ><span class="devsite-nav-text" tooltip>Integration guide</span></a></li><li class="devsite-nav-item"><a href="https://developer.android.com/design-for-safety/privacy-sandbox/reference/packages"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: https://developer.android.com/design-for-safety/privacy-sandbox/reference/packages"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="https://developer.android.com/design-for-safety/privacy-sandbox/reference/packages"
      ><span class="devsite-nav-text" tooltip>API reference</span></a></li></ul></div></li></ul></div></li>

  <li class="devsite-nav-item
           devsite-nav-expandable
           devsite-nav-accordion"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Protected App Signals</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/protected-audience/android/protected-app-signals"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience/android/protected-app-signals"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience/android/protected-app-signals"
      ><span class="devsite-nav-text" tooltip>Overview for Android</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience/android/protected-app-signals-developer-guide"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience/android/protected-app-signals-developer-guide"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience/android/protected-app-signals-developer-guide"
      ><span class="devsite-nav-text" tooltip>Developer guide</span></a></li></ul></div></li>

  <li class="devsite-nav-item
           devsite-nav-expandable
           devsite-nav-accordion"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Bidding and Auction Services</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Web</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/bidding-and-auction-services/web/architecture"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/bidding-and-auction-services/web/architecture"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/bidding-and-auction-services/web/architecture"
      ><span class="devsite-nav-text" tooltip>Architecture</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/bidding-and-auction-services/web/buyer-integration"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/bidding-and-auction-services/web/buyer-integration"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/bidding-and-auction-services/web/buyer-integration"
      ><span class="devsite-nav-text" tooltip>Integrate with B&amp;A as a buyer</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/bidding-and-auction-services/web/seller-integration"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/bidding-and-auction-services/web/seller-integration"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/bidding-and-auction-services/web/seller-integration"
      ><span class="devsite-nav-text" tooltip>Integrate with B&amp;A as a seller</span></a></li><li class="devsite-nav-item"><a href="/codelab/ba-services-local-testing"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /codelab/ba-services-local-testing"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/codelab/ba-services-local-testing"
      ><span class="devsite-nav-text" tooltip>Test B&amp;A for Web end-to-end locally</span></a></li></ul></div></li><li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Android</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/protected-audience/android/bidding-and-auction-services"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience/android/bidding-and-auction-services"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience/android/bidding-and-auction-services"
      ><span class="devsite-nav-text" tooltip>Overview</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/protected-audience/android/bidding-and-auction-integration"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/protected-audience/android/bidding-and-auction-integration"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/protected-audience/android/bidding-and-auction-integration"
      ><span class="devsite-nav-text" tooltip>Integration and optimization</span></a></li></ul></div></li></ul></div></li>

  <li class="devsite-nav-item
           devsite-nav-expandable
           devsite-nav-accordion"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Fenced frames</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/fenced-frame"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/fenced-frame"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/fenced-frame"
      ><span class="devsite-nav-text" tooltip>Overview for Web</span></a></li></ul></div></li>

  <li class="devsite-nav-item
           devsite-nav-expandable
           devsite-nav-accordion"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Attribution Reporting</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting"
      ><span class="devsite-nav-text" tooltip>Overview</span></a></li><li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Web</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/web"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/web"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/web"
      ><span class="devsite-nav-text" tooltip>Overview</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/attribution-reporting-updates"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/attribution-reporting-updates"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/attribution-reporting-updates"
      ><span class="devsite-nav-text" tooltip>API updates</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/chrome-shipping"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/chrome-shipping"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/chrome-shipping"
      ><span class="devsite-nav-text" tooltip>Why Chrome shipped the Attribution Reporting API</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/system-overview"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/system-overview"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/system-overview"
      ><span class="devsite-nav-text" tooltip>System overview</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/summary-reports"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/summary-reports"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/summary-reports"
      ><span class="devsite-nav-text" tooltip>Generate summary reports</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/report-schedules"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/report-schedules"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/report-schedules"
      ><span class="devsite-nav-text" tooltip>Report schedules</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/constraints"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/constraints"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/constraints"
      ><span class="devsite-nav-text" tooltip>Constraints</span></a></li><li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Developer guide</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/dev-guide"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/dev-guide"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/dev-guide"
      ><span class="devsite-nav-text" tooltip>Overview</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/getting-started"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/getting-started"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/getting-started"
      ><span class="devsite-nav-text" tooltip>Get started</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/register-attribution-source"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/register-attribution-source"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/register-attribution-source"
      ><span class="devsite-nav-text" tooltip>Register an attribution source</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/register-attribution-trigger"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/register-attribution-trigger"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/register-attribution-trigger"
      ><span class="devsite-nav-text" tooltip>Register triggers</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/enable-conversion-measurement"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/enable-conversion-measurement"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/enable-conversion-measurement"
      ><span class="devsite-nav-text" tooltip>Enable conversion measurement</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/change-attribution-logic"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/change-attribution-logic"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/change-attribution-logic"
      ><span class="devsite-nav-text" tooltip>Change attribution logic</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/define-filters"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/define-filters"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/define-filters"
      ><span class="devsite-nav-text" tooltip>Define filters</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/define-attribution-scopes"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/define-attribution-scopes"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/define-attribution-scopes"
      ><span class="devsite-nav-text" tooltip>Define attribution scopes</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/prevent-duplication"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/prevent-duplication"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/prevent-duplication"
      ><span class="devsite-nav-text" tooltip>Prevent duplication</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/custom-report-windows"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/custom-report-windows"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/custom-report-windows"
      ><span class="devsite-nav-text" tooltip>Custom report windows</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/attribution-reporting-debugging"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/attribution-reporting-debugging"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/attribution-reporting-debugging"
      ><span class="devsite-nav-text" tooltip>Introduction to debug reports</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/attribution-reporting-debugging/part-2"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/attribution-reporting-debugging/part-2"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/attribution-reporting-debugging/part-2"
      ><span class="devsite-nav-text" tooltip>Set up debug reports</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/attribution-reporting-debugging/part-3"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/attribution-reporting-debugging/part-3"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/attribution-reporting-debugging/part-3"
      ><span class="devsite-nav-text" tooltip>Debugging cookbook</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/summary-reports-intro"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/summary-reports-intro"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/summary-reports-intro"
      ><span class="devsite-nav-text" tooltip>Introduction to summary reports</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/contribution-budget"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/contribution-budget"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/contribution-budget"
      ><span class="devsite-nav-text" tooltip>Contribution budget</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/aggregation-keys"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/aggregation-keys"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/aggregation-keys"
      ><span class="devsite-nav-text" tooltip>Aggregation keys</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/understanding-noise"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/understanding-noise"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/understanding-noise"
      ><span class="devsite-nav-text" tooltip>Understand noise</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/working-with-noise"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/working-with-noise"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/working-with-noise"
      ><span class="devsite-nav-text" tooltip>Work with noise</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/design-decisions"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/design-decisions"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/design-decisions"
      ><span class="devsite-nav-text" tooltip>Noiselab</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/measurement-implementation-guide"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/measurement-implementation-guide"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/measurement-implementation-guide"
      ><span class="devsite-nav-text" tooltip>Measurement implementation guide</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/measurement-testing-guide"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/measurement-testing-guide"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/measurement-testing-guide"
      ><span class="devsite-nav-text" tooltip>Measurement testing guide</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/attribution-reporting-data-clearing"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/attribution-reporting-data-clearing"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/attribution-reporting-data-clearing"
      ><span class="devsite-nav-text" tooltip>Data clearing</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/cross-web-app"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/cross-web-app"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/cross-web-app"
      ><span class="devsite-nav-text" tooltip>Cross app and web measurement</span></a></li></ul></div></li></ul></div></li><li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Android</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/android"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/android"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/android"
      ><span class="devsite-nav-text" tooltip>Overview</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/android/attribution-app-to-web"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/android/attribution-app-to-web"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/android/attribution-app-to-web"
      ><span class="devsite-nav-text" tooltip>Cross app and web measurement</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/android/simulation-library"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/android/simulation-library"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/android/simulation-library"
      ><span class="devsite-nav-text" tooltip>Measurement Simulation Library</span></a></li><li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Developer guide</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/android/developer-guide"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/android/developer-guide"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/android/developer-guide"
      ><span class="devsite-nav-text" tooltip>Overview</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/cross-web-app"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/cross-web-app"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/cross-web-app"
      ><span class="devsite-nav-text" tooltip>Cross app and web measurement</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/android/xna-examples"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/android/xna-examples"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/android/xna-examples"
      ><span class="devsite-nav-text" tooltip>Cross-network attribution examples</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/attribution-reporting/android/integration-guide"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/attribution-reporting/android/integration-guide"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/attribution-reporting/android/integration-guide"
      ><span class="devsite-nav-text" tooltip>Integration guide</span></a></li></ul></div></li><li class="devsite-nav-item"><a href="https://developer.android.com/design-for-safety/privacy-sandbox/reference/packages"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: https://developer.android.com/design-for-safety/privacy-sandbox/reference/packages"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="https://developer.android.com/design-for-safety/privacy-sandbox/reference/packages"
      ><span class="devsite-nav-text" tooltip>API reference</span></a></li></ul></div></li></ul></div></li>

  <li class="devsite-nav-item
           devsite-nav-expandable
           devsite-nav-accordion"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Private Aggregation</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/private-aggregation"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/private-aggregation"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/private-aggregation"
      ><span class="devsite-nav-text" tooltip>Overview</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/private-aggregation/overview"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/private-aggregation/overview"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/private-aggregation/overview"
      ><span class="devsite-nav-text" tooltip>API introduction</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/private-aggregation/fundamentals"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/private-aggregation/fundamentals"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/private-aggregation/fundamentals"
      ><span class="devsite-nav-text" tooltip>Fundamentals</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/private-aggregation/private-aggregation-experiment"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/private-aggregation/private-aggregation-experiment"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/private-aggregation/private-aggregation-experiment"
      ><span class="devsite-nav-text" tooltip>Experiment</span></a></li><li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Use cases</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/private-aggregation/unique-reach"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/private-aggregation/unique-reach"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/private-aggregation/unique-reach"
      ><span class="devsite-nav-text" tooltip>Measure unique reach</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/private-aggregation/k-freq-reach"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/private-aggregation/k-freq-reach"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/private-aggregation/k-freq-reach"
      ><span class="devsite-nav-text" tooltip>Measure K+ frequency reach</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/private-aggregation/user-demographics"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/private-aggregation/user-demographics"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/private-aggregation/user-demographics"
      ><span class="devsite-nav-text" tooltip>Measure user demographic</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/private-aggregation/multi-touch-attribution"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/private-aggregation/multi-touch-attribution"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/private-aggregation/multi-touch-attribution"
      ><span class="devsite-nav-text" tooltip>Multi-touch attribution</span></a></li></ul></div></li></ul></div></li>

  <li class="devsite-nav-item
           devsite-nav-expandable
           devsite-nav-accordion"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Aggregation Service</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/aggregation-service"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/aggregation-service"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/aggregation-service"
      ><span class="devsite-nav-text" tooltip>Overview</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/aggregation-service/why-ags"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/aggregation-service/why-ags"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/aggregation-service/why-ags"
      ><span class="devsite-nav-text" tooltip>Why Aggregation Service</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/aggregation-service/how-it-works"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/aggregation-service/how-it-works"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/aggregation-service/how-it-works"
      ><span class="devsite-nav-text" tooltip>How it works</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/aggregation-service/setup"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/aggregation-service/setup"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/aggregation-service/setup"
      ><span class="devsite-nav-text" tooltip>Setup</span></a></li><li class="devsite-nav-item"><a href="https://github.com/privacysandbox/aggregation-service/blob/main/docs/local-testing-tool.md"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: https://github.com/privacysandbox/aggregation-service/blob/main/docs/local-testing-tool.md"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="https://github.com/privacysandbox/aggregation-service/blob/main/docs/local-testing-tool.md"
      ><span class="devsite-nav-text" tooltip>Test locally</span></a></li><li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Implement</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/aggregation-service/privacy-protection-report-strategy"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/aggregation-service/privacy-protection-report-strategy"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/aggregation-service/privacy-protection-report-strategy"
      ><span class="devsite-nav-text" tooltip>Set privacy protections</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/aggregation-service/developer-guides/filtering-ids"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/aggregation-service/developer-guides/filtering-ids"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/aggregation-service/developer-guides/filtering-ids"
      ><span class="devsite-nav-text" tooltip>Filter your results</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/aggregation-service/batch-strategies"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/aggregation-service/batch-strategies"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/aggregation-service/batch-strategies"
      ><span class="devsite-nav-text" tooltip>Batch your reports</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/aggregation-service/understand-ags-api"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/aggregation-service/understand-ags-api"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/aggregation-service/understand-ags-api"
      ><span class="devsite-nav-text" tooltip>Deploy and manage requests</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/aggregation-service/load-testing-framework"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/aggregation-service/load-testing-framework"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/aggregation-service/load-testing-framework"
      ><span class="devsite-nav-text" tooltip>Run load testing</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/aggregation-service/receive-store-aggregatable-reports"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/aggregation-service/receive-store-aggregatable-reports"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/aggregation-service/receive-store-aggregatable-reports"
      ><span class="devsite-nav-text" tooltip>Receive &amp; store aggregatable reports</span></a></li></ul></div></li><li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Troubleshoot</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/aggregation-service/troubleshooting"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/aggregation-service/troubleshooting"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/aggregation-service/troubleshooting"
      ><span class="devsite-nav-text" tooltip>Overview</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/aggregation-service/troubleshooting/diagnose-environment"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/aggregation-service/troubleshooting/diagnose-environment"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/aggregation-service/troubleshooting/diagnose-environment"
      ><span class="devsite-nav-text" tooltip>Diagnose your new or upgraded environment</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/aggregation-service/troubleshooting/diagnose-infrastructure"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/aggregation-service/troubleshooting/diagnose-infrastructure"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/aggregation-service/troubleshooting/diagnose-infrastructure"
      ><span class="devsite-nav-text" tooltip>Diagnose your cloud infrastructure</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/aggregation-service/troubleshooting/diagnose-jobs"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/aggregation-service/troubleshooting/diagnose-jobs"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/aggregation-service/troubleshooting/diagnose-jobs"
      ><span class="devsite-nav-text" tooltip>Diagnose your aggregation jobs</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/aggregation-service/troubleshooting/debug-privacy-budget-exhausted"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/aggregation-service/troubleshooting/debug-privacy-budget-exhausted"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/aggregation-service/troubleshooting/debug-privacy-budget-exhausted"
      ><span class="devsite-nav-text" tooltip>Debug Privacy Exhausted Error</span></a></li></ul></div></li></ul></div></li>

  <li class="devsite-nav-item
           devsite-nav-expandable
           devsite-nav-accordion"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Select URL</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/select-url"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/select-url"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/select-url"
      ><span class="devsite-nav-text" tooltip>Overview for Web</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/select-url/creative-rotation"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/select-url/creative-rotation"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/select-url/creative-rotation"
      ><span class="devsite-nav-text" tooltip>Rotate ad creatives</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/select-url/creative-selection-by-frequency"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/select-url/creative-selection-by-frequency"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/select-url/creative-selection-by-frequency"
      ><span class="devsite-nav-text" tooltip>Select ad creative by frequency</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/select-url/ab-testing"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/select-url/ab-testing"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/select-url/ab-testing"
      ><span class="devsite-nav-text" tooltip>Run A/B testing</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/select-url/known-customer"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/select-url/known-customer"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/select-url/known-customer"
      ><span class="devsite-nav-text" tooltip>Customize experience for known customers</span></a></li></ul></div></li>

  <li class="devsite-nav-item
           devsite-nav-expandable
           devsite-nav-accordion"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Shared Storage</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/shared-storage"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/shared-storage"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/shared-storage"
      ><span class="devsite-nav-text" tooltip>Overview for Web</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/shared-storage/api-walkthrough"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/shared-storage/api-walkthrough"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/shared-storage/api-walkthrough"
      ><span class="devsite-nav-text" tooltip>API walkthrough</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/shared-storage/try-the-demo"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/shared-storage/try-the-demo"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/shared-storage/try-the-demo"
      ><span class="devsite-nav-text" tooltip>Try the demo</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/shared-storage/debugging"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/shared-storage/debugging"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/shared-storage/debugging"
      ><span class="devsite-nav-text" tooltip>Debugging</span></a></li></ul></div></li>

  <li class="devsite-nav-item
           devsite-nav-expandable
           devsite-nav-accordion"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>SDK Runtime</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/sdk-runtime"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/sdk-runtime"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/sdk-runtime"
      ><span class="devsite-nav-text" tooltip>Overview</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/sdk-runtime/architecture"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/sdk-runtime/architecture"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/sdk-runtime/architecture"
      ><span class="devsite-nav-text" tooltip>Architecture</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/sdk-runtime/ui-presentation"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/sdk-runtime/ui-presentation"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/sdk-runtime/ui-presentation"
      ><span class="devsite-nav-text" tooltip>UI presentation APIs</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/sdk-runtime/viewability"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/sdk-runtime/viewability"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/sdk-runtime/viewability"
      ><span class="devsite-nav-text" tooltip>Viewability</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/sdk-runtime/backward-compatibility"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/sdk-runtime/backward-compatibility"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/sdk-runtime/backward-compatibility"
      ><span class="devsite-nav-text" tooltip>Backward compatibility</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/sdk-runtime/full-screen-ads"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/sdk-runtime/full-screen-ads"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/sdk-runtime/full-screen-ads"
      ><span class="devsite-nav-text" tooltip>Full-screen ads</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/sdk-runtime/native-ads"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/sdk-runtime/native-ads"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/sdk-runtime/native-ads"
      ><span class="devsite-nav-text" tooltip>Native ads</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/sdk-runtime/mediation"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/sdk-runtime/mediation"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/sdk-runtime/mediation"
      ><span class="devsite-nav-text" tooltip>Mediation</span></a></li><li class="devsite-nav-item
           devsite-nav-expandable"><div class="devsite-expandable-nav">
      <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0" role="button">
        <span class="devsite-nav-text" tooltip>Developer guide</span>
      </div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="/private-advertising/sdk-runtime/developer-guide"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/sdk-runtime/developer-guide"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/sdk-runtime/developer-guide"
      ><span class="devsite-nav-text" tooltip>Overview</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/sdk-runtime/developer-guide/key-concepts"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/sdk-runtime/developer-guide/key-concepts"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/sdk-runtime/developer-guide/key-concepts"
      ><span class="devsite-nav-text" tooltip>Key concepts</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/sdk-runtime/developer-guide/dev-environment"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/sdk-runtime/developer-guide/dev-environment"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/sdk-runtime/developer-guide/dev-environment"
      ><span class="devsite-nav-text" tooltip>Set up your developer environment</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/sdk-runtime/developer-guide/build-re-sdk"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/sdk-runtime/developer-guide/build-re-sdk"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/sdk-runtime/developer-guide/build-re-sdk"
      ><span class="devsite-nav-text" tooltip>Build a Runtime-Enabled SDK</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/sdk-runtime/developer-guide/consume-re-sdk"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/sdk-runtime/developer-guide/consume-re-sdk"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/sdk-runtime/developer-guide/consume-re-sdk"
      ><span class="devsite-nav-text" tooltip>Consume the Runtime-Enabled SDK</span></a></li><li class="devsite-nav-item"><a href="/private-advertising/sdk-runtime/developer-guide/build-test"
        class="devsite-nav-title gc-analytics-event"
        data-category="Site-Wide Custom Events"
        data-label="Book nav link, pathname: /private-advertising/sdk-runtime/developer-guide/build-test"
        track-type="bookNav"
        track-name="click"
        track-metadata-eventdetail="/private-advertising/sdk-runtime/developer-guide/build-test"
      ><span class="devsite-nav-text" tooltip>Build and test</span></a></li></ul></div></li></ul></div></li>
          </ul>
        
        
          
    
  
    
  
    
  
    
  
    
  
        
        
          
    
  
        
      </div>
    
  </div>
</nav>
        
      </devsite-book-nav>
      <section id="gc-wrapper">
        <main role="main" id="main-content" class="devsite-main-content"
            
              has-book-nav
              has-sidebar
            >
          <div class="devsite-sidebar">
            <div class="devsite-sidebar-content">
                
                <devsite-toc class="devsite-nav"
                            role="navigation"
                            aria-label="On this page"
                            depth="2"
                            scrollbars
                  ></devsite-toc>
                <devsite-recommendations-sidebar class="nocontent devsite-nav">
                </devsite-recommendations-sidebar>
            </div>
          </div>
          <devsite-content>
            
              












<article class="devsite-article">
  
  
  
  
  

  <div class="devsite-article-meta nocontent" role="navigation">
    
    
    <ul class="devsite-breadcrumb-list"
  
    aria-label="Breadcrumb">
  
  <li class="devsite-breadcrumb-item
             ">
    
    
    
      
  <a href="https://privacysandbox.google.com/"
      
        class="devsite-breadcrumb-link gc-analytics-event"
      
        data-category="Site-Wide Custom Events"
      
        data-label="Breadcrumbs"
      
        data-value="1"
      
        track-type="globalNav"
      
        track-name="breadcrumb"
      
        track-metadata-position="1"
      
        track-metadata-eventdetail="Privacy Sandbox"
      
    >
    
        Privacy Sandbox
      
  </a>
  
    
  </li>
  
  <li class="devsite-breadcrumb-item
             ">
    
      
      <div class="devsite-breadcrumb-guillemet material-icons" aria-hidden="true"></div>
    
    
    
      
  <a href="https://privacysandbox.google.com/private-advertising"
      
        class="devsite-breadcrumb-link gc-analytics-event"
      
        data-category="Site-Wide Custom Events"
      
        data-label="Breadcrumbs"
      
        data-value="2"
      
        track-type="globalNav"
      
        track-name="breadcrumb"
      
        track-metadata-position="2"
      
        track-metadata-eventdetail=""
      
    >
    
        Private advertising
      
  </a>
  
    
  </li>
  
</ul>
    
      
    <devsite-thumb-rating position="header">
    </devsite-thumb-rating>
  
    
  </div>
  
    <devsite-feedback
  position="header"
  project-name="Privacy Sandbox"
  product-id="5335444"
  bucket=""
  context=""
  version="t-devsite-webserver-20250918-r00-rc00.472063434118731697"
  data-label="Send Feedback Button"
  track-type="feedback"
  track-name="sendFeedbackLink"
  track-metadata-position="header"
  class="nocontent"
  
    disable-product-feedback
  
  
  
    
      project-icon="https://privacysandbox.google.com/static/privacy-sandbox-logo.svg"
    
  
  
  
  >

  <button>
  
    
    Send feedback
  
  </button>
</devsite-feedback>
  
    <h1 class="devsite-page-title" tabindex="-1">
      Protected Audience API Developer&#39;s Guide<div class="devsite-actions" hidden data-nosnippet><devsite-feature-tooltip
      ack-key="AckCollectionsBookmarkTooltipDismiss"
      analytics-category="Site-Wide Custom Events"
      analytics-action-show="Callout Profile displayed"
      analytics-action-close="Callout Profile dismissed"
      analytics-label="Create Collection Callout"
      class="devsite-page-bookmark-tooltip nocontent"
      dismiss-button="true"
      id="devsite-collections-dropdown"
      
      dismiss-button-text="Dismiss"

      
      close-button-text="Got it">

    
    
      <devsite-bookmark></devsite-bookmark>
    

    <span slot="popout-heading">
      
      Stay organized with collections
    </span>
    <span slot="popout-contents">
      
      Save and categorize content based on your preferences.
    </span>
  </devsite-feature-tooltip></div>
  
      
    </h1>
  <div class="devsite-page-title-meta"><devsite-view-release-notes></devsite-view-release-notes></div>
  

  <devsite-toc class="devsite-nav"
    depth="2"
    devsite-toc-embedded
    >
  </devsite-toc>
  
    
  <div class="devsite-article-body clearfix
  ">

  
    
    














<div>
<devsite-nav-buttons name="version">
  <button style="background-color:#3ADC83; color:black;"
    value="preview" default>Developer Preview</button>
  <button style="background-color:#3ADC83; color:black;"
    value="beta" >Beta</button>
</devsite-nav-buttons>
</div>

<p style="font-size:10pt;">As you read through the Privacy Sandbox on Android
documentation, use the <b>Developer Preview</b> or <b>Beta</b> button to select
the program version that you're working with, as instructions may vary.</p>

<hr class="full-width">



<p>The Protected Audience API on Android (formerly known as FLEDGE) includes the
Custom Audience API and the Ad Selection API. Ad tech platforms and advertisers
can use these APIs to serve customized ads based on previous app engagement that
limits the sharing of identifiers across apps and limits sharing a user&#39;s app
interaction information with third-parties.</p>

<p>The <strong>Custom Audience API</strong> is centered around the &quot;custom audience&quot;
abstraction, which represents a group of users with common intentions. An
advertiser can register a user with a custom audience and associate relevant ads
with it. This information is stored locally and can be used to inform advertiser
bids, ad filtering, and ad rendering.</p>

<p>The <strong>Ad Selection API</strong> provides a framework that allows multiple developers to
run an auction locally for a custom audience. To achieve this, the system
considers relevant ads associated with the custom audience and performs
additional processing on ads that an ad tech platform returns to the device.</p>

<p>Ad tech platforms can integrate these APIs to implement remarketing that
preserves user privacy. Support for additional use cases, including app install
ads, are planned for future releases. Learn more about the Protected Audience
API on Android in the <a href="/private-advertising/protected-audience/android">design proposal</a>.</p>

<p>This guide describes how to work with the Protected Audience API on Android to
do the following:</p>

<ol>
<li><a href="#join-custom">Manage custom audiences</a></li>
<li><a href="#run-ad">Set up and run ad selection on a device</a></li>
<li><a href="#report-ad">Report ad impressions</a></li>
</ol>

<h2 id="you-begin" data-text="Before you begin" tabindex="-1">Before you begin</h2>

<p>Before you get started, complete the following:</p>

<ol>
<li><a href="/setup/android/setup">Set up your development environment</a> for the Privacy Sandbox on Android.</li>
<li>Either <a href="/setup/android/download#device">install a system image onto a supported device</a> or <a href="/setup/android/download#emulator">set up an
emulator</a> that includes support for the Privacy Sandbox on Android.</li>
<li><p>In a terminal, <a href="/setup/android/setup-api-access">enable access</a> to the Protected Audience API (disabled
by default) with the following adb command.</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Bash"><code translate="no" dir="ltr"><span class="devsite-syntax-w">  </span>adb<span class="devsite-syntax-w"> </span>shell<span class="devsite-syntax-w"> </span>device_config<span class="devsite-syntax-w"> </span>put<span class="devsite-syntax-w"> </span>adservices<span class="devsite-syntax-w"> </span>ppapi_app_allow_list<span class="devsite-syntax-w"> </span><span class="devsite-syntax-se">\"</span>*<span class="devsite-syntax-se">\"</span>
</code></pre></devsite-code></li>
<li><p>In a terminal, enable beacon reporting with the following adb commands.</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Bash"><code translate="no" dir="ltr"><span class="devsite-syntax-w"> </span>adb<span class="devsite-syntax-w"> </span>shell<span class="devsite-syntax-w"> </span>device_config<span class="devsite-syntax-w"> </span>put<span class="devsite-syntax-w"> </span>adservices<span class="devsite-syntax-w"> </span>fledge_beacon_reporting_metrics_enabled<span class="devsite-syntax-w"> </span><span class="devsite-syntax-nb">true</span>
<span class="devsite-syntax-w"> </span>adb<span class="devsite-syntax-w"> </span>shell<span class="devsite-syntax-w"> </span>device_config<span class="devsite-syntax-w"> </span>put<span class="devsite-syntax-w"> </span>adservices<span class="devsite-syntax-w"> </span>fledge_register_ad_beacon_enabled<span class="devsite-syntax-w"> </span><span class="devsite-syntax-nb">true</span>
</code></pre></devsite-code></li>
<li><p>Include an <code translate="no" dir="ltr">ACCESS_ADSERVICES_CUSTOM_AUDIENCE</code> permission in your app
manifest:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="XML"><code translate="no" dir="ltr"><span class="devsite-syntax-w">  </span>&lt;uses-permission<span class="devsite-syntax-w"> </span>android:name="android.permission.ACCESS_ADSERVICES_CUSTOM_AUDIENCE"<span class="devsite-syntax-w"> </span>/&gt;
</code></pre></devsite-code></li>
<li><p>Reference an ad services configuration in the <code translate="no" dir="ltr">&lt;application&gt;</code> element of
your manifest:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="XML"><code translate="no" dir="ltr"><span class="devsite-syntax-w">  </span>&lt;property<span class="devsite-syntax-w"> </span>android:name="android.adservices.AD_SERVICES_CONFIG"
<span class="devsite-syntax-w">            </span>android:resource="@xml/ad_services_config"<span class="devsite-syntax-w"> </span>/&gt;
</code></pre></devsite-code></li>
<li><p>Specify the ad services XML resource referenced in your manifest, such as
<code translate="no" dir="ltr">res/xml/ad_services_config.xml</code>. <a href="/setup/android/setup-api-access">Learn more about ad services permissions
and SDK access control</a>.</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="XML"><code translate="no" dir="ltr"><span class="devsite-syntax-w">  </span>&lt;ad-services-config&gt;
<span class="devsite-syntax-w">    </span>&lt;custom-audiences<span class="devsite-syntax-w"> </span>allowAllToAccess="true"<span class="devsite-syntax-w"> </span>/&gt;
<span class="devsite-syntax-w">  </span>&lt;/ad-services-config&gt;
</code></pre></devsite-code></li>
<li><p><a name="memorylimits"></a>By default, the Ad Selection API enforces limits
on the maximum amount of memory that an auction or impression reporting
script can allocate. The memory limitation feature requires WebView version
105.0.5195.58 or higher. The platform enforces a version check and calls to
the <a href="#run-ad"><code translate="no" dir="ltr">selectAds</code></a> and <a href="#report-ad"><code translate="no" dir="ltr">reportImpression</code></a> APIs fail if this
isn&#39;t satisfied. There are two options to set this up:</p>

<ul>
<li><p>Option 1: Run the following adb command to deactivate this check:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Bash"><code translate="no" dir="ltr">adb<span class="devsite-syntax-w"> </span>device_config<span class="devsite-syntax-w"> </span>put<span class="devsite-syntax-w"> </span>fledge_js_isolate_enforce_max_heap_size<span class="devsite-syntax-w"> </span><span class="devsite-syntax-nb">false</span>
</code></pre></devsite-code></li>
<li><p>Option 2: Install <a href="https://play.google.com/store/apps/details?id=com.google.android.webview.beta">WebView Beta</a> from the Google Play store. This must
be equal to or higher than the version stated earlier.</p></li>
</ul></li>
</ol>

<h2 id="join-custom" data-text="Join a custom audience" tabindex="-1">Join a custom audience</h2>

<p>A <em>custom audience</em> represents a group of users with common intentions or
interests as decided by an advertiser app. An app or SDK may use a custom
audience to indicate a particular audience, such as someone who has left items
in a shopping cart. To create or join a custom audience asynchronously, do the
following:</p>

<ol>
<li>Initialize the <a href="https://developer.android.com/reference/android/adservices/customaudience/CustomAudienceManager"><code translate="no" dir="ltr">CustomAudienceManager</code></a> object.</li>
<li>Create a <a href="https://developer.android.com/reference/android/adservices/customaudience/CustomAudience"><code translate="no" dir="ltr">CustomAudience</code></a> object by specifying key parameters such as
the buyer&#39;s package and a relevant name. Then, initialize the
<a href="https://developer.android.com/reference/android/adservices/customaudience/JoinCustomAudienceRequest"><code translate="no" dir="ltr">JoinCustomAudienceRequest</code></a> object with the <a href="https://developer.android.com/reference/android/adservices/customaudience/CustomAudience"><code translate="no" dir="ltr">CustomAudience</code></a>
object.</li>
<li>Call the asynchronous <code translate="no" dir="ltr">joinCustomAudience()</code> with the
<a href="https://developer.android.com/reference/android/adservices/customaudience/JoinCustomAudienceRequest"><code translate="no" dir="ltr">JoinCustomAudienceRequest</code></a> object and relevant <a href="https://developer.android.com/reference/java/util/concurrent/Executor"><code translate="no" dir="ltr">Executor</code></a> and
<a href="https://developer.android.com/reference/android/os/OutcomeReceiver"><code translate="no" dir="ltr">OutcomeReceiver</code></a> objects.</li>
</ol>
<div class="ds-selector-tabs" data-ds-scope="code-sample">
<section><h3 id="kotlin" data-text="Kotlin" tabindex="-1">Kotlin</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">customAudienceManager</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">CustomAudienceManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">context</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getSystemService</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">CustomAudienceManager</span><span class="devsite-syntax-o">::</span><span class="devsite-syntax-n">class</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">java</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-c1">// Initialize a custom audience.</span>
<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">audience</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">CustomAudience</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setBuyer</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">buyer</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setName</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">name</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">...</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">()</span>

<span class="devsite-syntax-c1">// Initialize a custom audience request.</span>
<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">joinCustomAudienceRequest</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">JoinCustomAudienceRequest</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">JoinCustomAudienceRequest</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">().</span><span class="devsite-syntax-na">setCustomAudience</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">audience</span><span class="devsite-syntax-p">).</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">()</span>

<span class="devsite-syntax-c1">// Request to join a custom audience.</span>
<span class="devsite-syntax-n">customAudienceManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">joinCustomAudience</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">joinCustomAudienceRequest</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">executor</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">outcomeReceiver</span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code></section>
<section><h3 id="java" data-text="Java" tabindex="-1">Java</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Java"><code translate="no" dir="ltr"><span class="devsite-syntax-n">CustomAudienceManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">customAudienceManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">context</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getSystemService</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">CustomAudienceManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">class</span><span class="devsite-syntax-p">);</span>

<span class="devsite-syntax-c1">// Initialize a custom audience.</span>
<span class="devsite-syntax-n">CustomAudience</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">audience</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">CustomAudience</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setBuyer</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">buyer</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setName</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">name</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">...</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">();</span>

<span class="devsite-syntax-c1">// Initialize a custom audience request.</span>
<span class="devsite-syntax-n">JoinCustomAudienceRequest</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">joinCustomAudienceRequest</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">JoinCustomAudienceRequest</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">().</span><span class="devsite-syntax-na">setCustomAudience</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">audience</span><span class="devsite-syntax-p">).</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">();</span>

<span class="devsite-syntax-c1">// Request to join a custom audience.</span>
<span class="devsite-syntax-n">customAudienceManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">joinCustomAudience</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">joinCustomAudienceRequest</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">executor</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">outcomeReceiver</span><span class="devsite-syntax-p">);</span>
</code></pre></devsite-code></section>
</div>
<p>The combination of the following parameters uniquely identifies each
<a href="https://developer.android.com/reference/android/adservices/customaudience/CustomAudience"><code translate="no" dir="ltr">CustomAudience</code></a> object on a device:</p>

<ul>
<li><code translate="no" dir="ltr">owner</code>: Package name of the owner app. This is implicitly set to the
package name of the caller app.</li>
<li><code translate="no" dir="ltr">buyer</code>: Identifier for the buyer ad network which manages ads for this custom
audience.</li>
<li><code translate="no" dir="ltr">name</code>: An arbitrary name or identifier for the custom audience.</li>
</ul>

<p>Calling <code translate="no" dir="ltr">joinCustomAudience()</code> repeatedly with a different instance of
<a href="https://developer.android.com/reference/android/adservices/customaudience/CustomAudience"><code translate="no" dir="ltr">CustomAudience</code></a> updates any existing <a href="https://developer.android.com/reference/android/adservices/customaudience/CustomAudience"><code translate="no" dir="ltr">CustomAudience</code></a> with
matching <code translate="no" dir="ltr">owner, buyer</code>, and <code translate="no" dir="ltr">name</code> parameters. To help preserve privacy, the
result of the API does not distinguish between &quot;creation&quot; and &quot;update.&quot;</p>

<p>Additionally, the <a href="https://developer.android.com/reference/android/adservices/customaudience/CustomAudience"><code translate="no" dir="ltr">CustomAudience</code></a> must be created with these required
parameters:</p>

<ul>
<li><strong>Daily update URL</strong>: An HTTPS URL <a href="#daily-background-update">queried daily in the background</a> to
update a custom audience&#39;s user bidding signals, trusted bidding data, and
render URLs and metadata for ads.</li>
<li><strong>Bidding logic URL</strong>: An HTTPS URL queried during ad selection to fetch a
buyer&#39;s JavaScript bidding logic. See the required <a href="#javascript-ad">function signatures</a>
in this JavaScript.</li>
<li><strong>Ad Render IDs</strong>: An arbitrary ID set by the buyer ad tech. This is an
<a href="https://github.com/privacysandbox/protected-auction-services-docs/blob/main/bidding-auction-services-payload-optimization.md#optimizing-size-of-ads-using-ad-render-ids">optimization for generating the payload for B&amp;A</a>.</li>
</ul>

<p>Optional parameters for a <a href="https://developer.android.com/reference/android/adservices/customaudience/CustomAudience"><code translate="no" dir="ltr">CustomAudience</code></a> object may include:</p>

<ul>
<li><strong>Activation time</strong>: A custom audience can only participate in ad selection
and daily updates after its activation time. This can be useful to engage
lapsed users of an app, for example.</li>
<li><strong>Expiration time</strong>: A future time after which the custom audience is
removed from the device.</li>
<li><strong>User bidding signals</strong>: A JSON string containing user signals, such as the
user&#39;s preferred locale, that a buyer&#39;s bidding logic JavaScript consumes
to generate bids during the ad selection process. This format helps ad tech
platforms reuse code across platforms and eases the consumption in JavaScript
functions.</li>
<li><strong>Trusted bidding data</strong>: An HTTPS URL and a list of strings used during the
ad selection process that fetch bidding signals from a trusted Key/Value
service.</li>
<li><strong>Ads</strong>: A list of <a href="https://developer.android.com/reference/android/adservices/common/AdData"><code translate="no" dir="ltr">AdData</code></a> objects corresponding to the ads that
participate in ad selection. Each <a href="https://developer.android.com/reference/android/adservices/common/AdData"><code translate="no" dir="ltr">AdData</code></a> object consists of:
<ul>
<li><strong>Render URL</strong>: An HTTPS URL that is queried to render the final ad.</li>
<li><strong>Metadata</strong>: A JSON object serialized as a string containing information to
be consumed by buyer bidding logic during the ad selection process.</li>
<li><strong>Ad Filters</strong>: A class that contains all necessary information for app
install ad filtering and frequency capping during ad selection.</li>
</ul></li>
</ul>
<aside class="note"><strong>Note:</strong><span> The values for &quot;User bidding signals&quot;, &quot;Trusted bidding data&quot;, and &quot;Ads&quot;
  attributes shouldn&#39;t exceed 10 KB in total. These 3 fields must be populated
  for a custom audience to participate in ad selection.</span></aside>
<p>Here&#39;s an example of a <a href="https://developer.android.com/reference/android/adservices/customaudience/CustomAudience"><code translate="no" dir="ltr">CustomAudience</code></a> object instantiation:</p>
<div class="ds-selector-tabs" data-ds-scope="code-sample">
<section><h3 id="kotlin_1" data-text="Kotlin" tabindex="-1">Kotlin</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-c1">// Minimal initialization of a CustomAudience object</span>
<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">customAudience</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">CustomAudience</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">CustomAudience</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setBuyer</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">AdTechIdentifier</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">fromString</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"my.buyer.domain.name"</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setName</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"example-custom-audience-name"</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setDailyUpdateUrl</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">parse</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"https://DAILY_UPDATE_URL"</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setBiddingLogicUrl</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">parse</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"https://BIDDING_LOGIC_URL"</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">()</span>
</code></pre></devsite-code></section>
<section><h3 id="java_1" data-text="Java" tabindex="-1">Java</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Java"><code translate="no" dir="ltr"><span class="devsite-syntax-c1">// Minimal initialization of a CustomAudience object</span>
<span class="devsite-syntax-n">CustomAudience</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">customAudience</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">CustomAudience</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setBuyer</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">AdTechIdentifier</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">fromString</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"my.buyer.domain.name"</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setName</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"example-custom-audience-name"</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setDailyUpdateUrl</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">parse</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"https://DAILY_UPDATE_URL"</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setBiddingLogicUrl</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">parse</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"https://BIDDING_LOGIC_URL"</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">();</span>
</code></pre></devsite-code></section>
</div>
<h3 id="handle-joincustomaudience()" data-text="Handle joinCustomAudience() outcomes" tabindex="-1">Handle joinCustomAudience() outcomes</h3>

<p>The asynchronous <code translate="no" dir="ltr">joinCustomAudience()</code> method uses the <a href="https://developer.android.com/reference/android/os/OutcomeReceiver"><code translate="no" dir="ltr">OutcomeReceiver</code></a>
object to signal the result of the API call.</p>

<ul>
<li>The <code translate="no" dir="ltr">onResult()</code> callback signifies the custom audience is successfully
created or updated.</li>
<li>The <code translate="no" dir="ltr">onError()</code> callback signifies two possible conditions.
<ul>
<li>If the <a href="https://developer.android.com/reference/android/adservices/customaudience/JoinCustomAudienceRequest"><code translate="no" dir="ltr">JoinCustomAudienceRequest</code></a> is initialized with invalid
arguments, the <a href="https://developer.android.com/reference/android/adservices/exceptions/AdServicesException"><code translate="no" dir="ltr">AdServicesException</code></a> indicates an
<code translate="no" dir="ltr">IllegalArgumentException</code> as the cause.</li>
<li>All other errors receive an <a href="https://developer.android.com/reference/android/adservices/exceptions/AdServicesException"><code translate="no" dir="ltr">AdServicesException</code></a> with an
<code translate="no" dir="ltr">IllegalStateException</code> as the cause.</li>
</ul></li>
</ul>

<p>Here&#39;s an example of handling the outcome of <code translate="no" dir="ltr">joinCustomAudience()</code>:</p>
<div class="ds-selector-tabs" data-ds-scope="code-sample">
<section><h3 id="kotlin_2" data-text="Kotlin" tabindex="-1">Kotlin</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">var</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">callback</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">OutcomeReceiver&lt;Void</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">AdServicesException</span>&gt;<span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-k">object</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nc">OutcomeReceiver&lt;Void</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">AdServicesException</span>&gt;<span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">override</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kd">fun</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">onResult</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">result</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Void</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">Log</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">i</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"CustomAudience"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s">"Completed joinCustomAudience"</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">override</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kd">fun</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">onError</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">error</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">AdServicesException</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// Handle error</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">Log</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">e</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"CustomAudience"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s">"Error executing joinCustomAudience"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">error</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-p">};</span>
</code></pre></devsite-code></section>
<section><h3 id="java_2" data-text="Java" tabindex="-1">Java</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Java"><code translate="no" dir="ltr"><span class="devsite-syntax-n">OutcomeReceiver</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">callback</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">OutcomeReceiver&lt;Void</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">AdServicesException</span>&gt;<span class="devsite-syntax-p">()</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nd">@Override</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">public</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kt">void</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">onResult</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nd">@NonNull</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Void</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">result</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">Log</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">i</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"CustomAudience"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s">"Completed joinCustomAudience"</span><span class="devsite-syntax-p">);</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nd">@Override</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">public</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kt">void</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">onError</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nd">@NonNull</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">AdServicesException</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">error</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-c1">// Handle error</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">Log</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">e</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"CustomAudience"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s">"Error executing joinCustomAudience"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">error</span><span class="devsite-syntax-p">);</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-p">};</span>
</code></pre></devsite-code></section>
</div>
<h2 id="leave-custom" data-text="Leave a custom audience" tabindex="-1">Leave a custom audience</h2>

<p>If the user no longer satisfies the business criteria for a given custom
audience, an app or SDK can call <code translate="no" dir="ltr">leaveCustomAudience()</code> to remove the custom
audience from the device. To remove a <a href="https://developer.android.com/reference/android/adservices/customaudience/CustomAudience"><code translate="no" dir="ltr">CustomAudience</code></a> based on its unique
parameters, do the following:</p>

<ol>
<li>Initialize the <a href="https://developer.android.com/reference/android/adservices/customaudience/CustomAudienceManager"><code translate="no" dir="ltr">CustomAudienceManager</code></a> object.</li>
<li>Initialize the <a href="https://developer.android.com/reference/android/adservices/customaudience/LeaveCustomAudienceRequest"><code translate="no" dir="ltr">LeaveCustomAudienceRequest</code></a> with the custom audience&#39;s
<code translate="no" dir="ltr">buyer</code> and <code translate="no" dir="ltr">name</code>. To learn more about these input fields, read
&quot;<a href="#join-custom">Join a custom audience</a>.&quot;</li>
<li>Call the asynchronous <code translate="no" dir="ltr">leaveCustomAudience()</code> method with the
<a href="https://developer.android.com/reference/android/adservices/customaudience/LeaveCustomAudienceRequest"><code translate="no" dir="ltr">LeaveCustomAudienceRequest</code></a> object and relevant <a href="https://developer.android.com/reference/java/util/concurrent/Executor"><code translate="no" dir="ltr">Executor</code></a> and
<a href="https://developer.android.com/reference/android/os/OutcomeReceiver"><code translate="no" dir="ltr">OutcomeReceiver</code></a> objects.</li>
</ol>
<div class="ds-selector-tabs" data-ds-scope="code-sample">
<section><h3 id="kotlin_3" data-text="Kotlin" tabindex="-1">Kotlin</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">customAudienceManager</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">CustomAudienceManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">context</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getSystemService</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">CustomAudienceManager</span><span class="devsite-syntax-o">::</span><span class="devsite-syntax-n">class</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">java</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-c1">// Initialize a LeaveCustomAudienceRequest</span>
<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">leaveCustomAudienceRequest</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">LeaveCustomAudienceRequest</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">LeaveCustomAudienceRequest</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setBuyer</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">buyer</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setName</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">name</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">()</span>

<span class="devsite-syntax-c1">// Request to leave a custom audience</span>
<span class="devsite-syntax-n">customAudienceManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">leaveCustomAudience</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">leaveCustomAudienceRequest</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">executor</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">outcomeReceiver</span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code></section>
<section><h3 id="java_3" data-text="Java" tabindex="-1">Java</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Java"><code translate="no" dir="ltr"><span class="devsite-syntax-n">CustomAudienceManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">customAudienceManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">context</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getSystemService</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">CustomAudienceManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">class</span><span class="devsite-syntax-p">);</span>

<span class="devsite-syntax-c1">// Initialize a LeaveCustomAudienceRequest</span>
<span class="devsite-syntax-n">LeaveCustomAudienceRequest</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">leaveCustomAudienceRequest</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">LeaveCustomAudienceRequest</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setBuyer</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">buyer</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setName</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">name</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">();</span>

<span class="devsite-syntax-c1">// Request to leave a custom audience</span>
<span class="devsite-syntax-n">customAudienceManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">leaveCustomAudience</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">leaveCustomAudienceRequest</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">executor</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">outcomeReceiver</span><span class="devsite-syntax-p">);</span>
</code></pre></devsite-code></section>
</div>
<p>Similar to calling <code translate="no" dir="ltr">joinCustomAudience()</code>, the <a href="https://developer.android.com/reference/android/os/OutcomeReceiver"><code translate="no" dir="ltr">OutcomeReceiver</code></a> signals
the end of an API call. To help protect privacy, an error outcome doesn&#39;t
distinguish between internal errors and invalid arguments. The <code translate="no" dir="ltr">onResult()</code>
callback is called when the API call has completed, whether or not a matching
custom audience is removed successfully.</p>

<h2 id="run-ad" data-text="Run ad selection" tabindex="-1">Run ad selection</h2>

<p>To use the Protected Audience API to select ads, call the <code translate="no" dir="ltr">selectAds()</code> method:</p>

<ol>
<li>Initialize an <a href="https://developer.android.com/reference/android/adservices/adselection/AdSelectionManager"><code translate="no" dir="ltr">AdSelectionManager</code></a> object.</li>
<li>Build an <a href="https://developer.android.com/reference/android/adservices/adselection/AdSelectionConfig"><code translate="no" dir="ltr">AdSelectionConfig</code></a> object.</li>
<li>Call the asynchronous <code translate="no" dir="ltr">selectAds()</code> method with the
<a href="https://developer.android.com/reference/android/adservices/adselection/AdSelectionConfig"><code translate="no" dir="ltr">AdSelectionConfig</code></a> object and relevant <a href="https://developer.android.com/reference/java/util/concurrent/Executor"><code translate="no" dir="ltr">Executor</code></a> and
<a href="https://developer.android.com/reference/android/os/OutcomeReceiver"><code translate="no" dir="ltr">OutcomeReceiver</code></a> objects.</li>
</ol>
<div class="ds-selector-tabs" data-ds-scope="code-sample">
<section><h3 id="kotlin_4" data-text="Kotlin" tabindex="-1">Kotlin</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">adSelectionManager</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">AdSelectionManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-n">context</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getSystemService</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">AdSelectionManager</span><span class="devsite-syntax-o">::</span><span class="devsite-syntax-n">class</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">java</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-c1">// Initialize AdSelectionConfig</span>
<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">adSelectionConfig</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">AdSelectionConfig</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-n">AdSelectionConfig</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">().</span><span class="devsite-syntax-na">setSeller</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">seller</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setDecisionLogicUrl</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">decisionLogicUrl</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setCustomAudienceBuyers</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">customAudienceBuyers</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setAdSelectionSignals</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">adSelectionSignals</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setSellerSignals</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">sellerSignals</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setPerBuyerSignals</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">perBuyerSignals</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setBuyerContextualAds</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-n">Collections</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">singletonMap</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">contextualAds</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getBuyer</span><span class="devsite-syntax-p">(),</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">contextualAds</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">).</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">()</span>

<span class="devsite-syntax-c1">// Run ad selection with AdSelectionConfig</span>
<span class="devsite-syntax-n">adSelectionManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">selectAds</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-n">adSelectionConfig</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">executor</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">outcomeReceiver</span>
<span class="devsite-syntax-p">)</span>
</code></pre></devsite-code></section>
<section><h3 id="java_4" data-text="Java" tabindex="-1">Java</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Java"><code translate="no" dir="ltr"><span class="devsite-syntax-n">AdSelectionManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">adSelectionManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">context</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getSystemService</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">AdSelectionManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">class</span><span class="devsite-syntax-p">);</span>

<span class="devsite-syntax-c1">// Initialize AdSelectionConfig</span>
<span class="devsite-syntax-n">AdSelectionConfig</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">adSelectionConfig</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">AdSelectionConfig</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setSeller</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">seller</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setDecisionLogicUrl</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">decisionLogicUrl</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setCustomAudienceBuyers</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">customAudienceBuyers</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setAdSelectionSignals</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">adSelectionSignals</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setSellerSignals</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">sellerSignals</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setPerBuyerSignals</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">perBuyerSignals</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setBuyerContextualAds</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-n">Collections</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">singletonMap</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">contextualAds</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getBuyer</span><span class="devsite-syntax-p">(),</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">contextualAds</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">();</span>

<span class="devsite-syntax-c1">// Run ad selection with AdSelectionConfig</span>
<span class="devsite-syntax-n">adSelectionManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">selectAds</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">adSelectionConfig</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">executor</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">outcomeReceiver</span><span class="devsite-syntax-p">);</span>
</code></pre></devsite-code></section>
</div>
<p>The <code translate="no" dir="ltr">selectAds()</code> method requires an <a href="https://developer.android.com/reference/android/adservices/adselection/AdSelectionConfig"><code translate="no" dir="ltr">AdSelectionConfig</code></a> input, where
you must specify the following required parameters:</p>

<ul>
<li><strong>Seller</strong>: Identifier for the seller ad network initiating the ad selection.</li>
<li><strong>Decision logic URL</strong>: An HTTPS URL queried to obtain the seller ad network&#39;s
JavaScript logic.
<ul>
<li><strong>HTTPS URL</strong>: queried to obtain the seller ad network&#39;s JavaScript logic.
See the required <a href="#javascript-ad">function signatures</a>.</li>
<li><strong>Prebuilt URI</strong>: that follows FLEDGE&#39;s ad selection format.
<code translate="no" dir="ltr">IllegalArgumentException</code> is thrown, if an unsupported or malformed
prebuilt uri is passed.</li>
</ul></li>
<li><strong>Custom audience buyers</strong>: A full list of identifiers for buyer ad networks
that are allowed by the seller to participate in the ad selection process.
These buyer identifiers correspond to <code translate="no" dir="ltr">CustomAudience.getBuyer()</code> of
participating custom audiences.</li>
</ul>

<p>The following parameters can be optionally specified for more customized ad
selection:</p>

<ul>
<li><strong>Ad selection signals</strong>: A JSON object, serialized as a string, containing
signals to be consumed by buyer bidding logic JavaScript fetched from
<code translate="no" dir="ltr">CustomAudience.getBiddingLogicUrl()</code>.</li>
<li><strong>Seller signals</strong>: A JSON object, serialized as a string, containing signals
consumed by the seller&#39;s fetched JavaScript decision logic from
<code translate="no" dir="ltr">AdSelectionConfig.getDecisionLogicUrl()</code>.</li>
<li><strong>Per buyer signals</strong>: A map of JSON objects, serialized as strings,
containing signals to be consumed by specific buyers&#39; bidding logic JavaScript
fetched from <code translate="no" dir="ltr">CustomAudience.getBiddingLogicUrl()</code>, which are identified by
the buyer fields of participating custom audiences.</li>
<li><strong>Contextual ads:</strong> A collection of ad candidates that are collected directly
from buyers during an auction that happens outside of a Protected Audience
auction.</li>
</ul>

<p>Once an ad is selected, the results, bids, and signals are persisted internally
for reporting. The <code translate="no" dir="ltr">OutcomeReceiver.onResult()</code> callback returns an
<code translate="no" dir="ltr">AdSelectionOutcome</code> that contains:</p>

<ul>
<li>A render URL for the winning ad, obtained from <code translate="no" dir="ltr">AdData.getRenderUrl()</code>.</li>
<li>An ad selection ID unique to the device user. This ID is used for reporting
the ad impression.</li>
</ul>

<p>If the ad selection can&#39;t be completed successfully due to reasons such as
invalid arguments, timeouts, or excessive resource consumption, the
<code translate="no" dir="ltr">OutcomeReceiver.onError()</code> callback provides an <a href="https://developer.android.com/reference/android/adservices/exceptions/AdServicesException"><code translate="no" dir="ltr">AdServicesException</code></a>
with the following behaviors:</p>

<ul>
<li>If the ad selection is initiated with invalid arguments, the
<a href="https://developer.android.com/reference/android/adservices/exceptions/AdServicesException"><code translate="no" dir="ltr">AdServicesException</code></a> indicates an <code translate="no" dir="ltr">IllegalArgumentException</code> as the
cause.</li>
<li>All other errors receive an <a href="https://developer.android.com/reference/android/adservices/exceptions/AdServicesException"><code translate="no" dir="ltr">AdServicesException</code></a> with an
<code translate="no" dir="ltr">IllegalStateException</code> as the cause.</li>
</ul>

<h3 id="contextual-ads" data-text="Contextual ads" tabindex="-1">Contextual ads</h3>

<p>Protected Audience can incorporate contextual ads into a Protected Auction.
Contextual ads need to be selected on the ad tech server and returned to the
device outside of Protected Audience APIs. Contextual ads can then be included
in the auction using the <code translate="no" dir="ltr">AdSelectionConfig</code> at which point they function the
same as on device ads, including eligibility for negative ad filtering. Once the
Protected Audience auction has completed, you need to invoke
<code translate="no" dir="ltr">reportImpression()</code>. This calls <code translate="no" dir="ltr">reportWin()</code> in the winning contextual ad, in
the same pattern as <a href="#report-ad">impression reporting</a>, to receive the winning ad on a
device. Each contextual ad needs a buyer, a bid, a link to reporting logic, a
render URL, and ad metadata.</p>

<p>To deploy contextual ads in app, the target app needs to create a
<code translate="no" dir="ltr">ContextualAds</code> object:</p>
<div class="ds-selector-tabs" data-ds-scope="code-sample">
<section><h3 id="kotlin_5" data-text="Kotlin" tabindex="-1">Kotlin</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">contextualAds</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">ContextualAds</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-n">Builder</span><span class="devsite-syntax-p">().</span><span class="devsite-syntax-na">setBuyer</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">AdTechIdentifier</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">fromString</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">mBiddingLogicUri</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getHost</span><span class="devsite-syntax-p">()))</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">//Pass in your valid app install ads</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setDecisionLogicUri</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">mContextualLogicUri</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setAdsWithBid</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">appInstallAd</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">()</span>
</code></pre></devsite-code></section>
<section><h3 id="java_5" data-text="Java" tabindex="-1">Java</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Java"><code translate="no" dir="ltr"><span class="devsite-syntax-n">ContextualAds</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">contextualAds</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">ContextualAds</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setBuyer</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">AdTechIdentifier</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">fromString</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">mBiddingLogicUri</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getHost</span><span class="devsite-syntax-p">()))</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setDecisionLogicUri</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">mContextualLogicUri</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">//Pass in your valid app install ads</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setAdsWithBid</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">appInstallAd</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">();</span>
</code></pre></devsite-code></section>
</div>
<p>The resulting <code translate="no" dir="ltr">ContextualAds</code> object can then be passed along when creating your
<a href="#run-ad"><code translate="no" dir="ltr">AdSelectionConfig</code></a>:</p>
<div class="ds-selector-tabs" data-ds-scope="code-sample">
<section><h3 id="kotlin_6" data-text="Kotlin" tabindex="-1">Kotlin</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-c1">// Create a new ad</span>
<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">noFilterAd</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">AdData</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Builder</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setMetadata</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">JSONObject</span><span class="devsite-syntax-p">().</span><span class="devsite-syntax-na">toString</span><span class="devsite-syntax-p">())</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setRenderUri</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">parse</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">baseUri</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">+</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">NO_FILTER_RENDER_SUFFIX</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">noFilterAdWithBid</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">AdWithBid</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">noFilterAd</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">NO_FILTER_BID</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-n">contextualAds</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getAdsWithBid</span><span class="devsite-syntax-p">().</span><span class="devsite-syntax-na">add</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">noFilterAdWithBid</span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code></section>
<section><h3 id="java_6" data-text="Java" tabindex="-1">Java</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Java"><code translate="no" dir="ltr"><span class="devsite-syntax-c1">// Create a new ad</span>
<span class="devsite-syntax-n">AdData</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">noFilterAd</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">AdData</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setMetadata</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">JSONObject</span><span class="devsite-syntax-p">().</span><span class="devsite-syntax-na">toString</span><span class="devsite-syntax-p">())</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setRenderUri</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">parse</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">baseUri</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">+</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">NO_FILTER_RENDER_SUFFIX</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">();</span>
<span class="devsite-syntax-n">AdWithBid</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">noFilterAdWithBid</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">AdWithBid</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">noFilterAd</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">NO_FILTER_BID</span><span class="devsite-syntax-p">);</span>
<span class="devsite-syntax-n">contextualAds</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getAdsWithBid</span><span class="devsite-syntax-p">().</span><span class="devsite-syntax-na">add</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">noFilterAdWithBid</span><span class="devsite-syntax-p">);</span>
</code></pre></devsite-code></section>
</div>
<h3 id="app-install-ad-filter" data-text="App install ad filtering" tabindex="-1">App install ad filtering</h3>

<p><a href="/private-advertising/protected-audience/android/appinstall-filtering">App install ads filtering</a> helps you to filter installation ads for apps
that are already installed on a device.</p>

<p>The first step in this process is to define which advertisers have the ability
to filter on the installed package. This needs to happen in the app you want
to target with an ad.</p>
<div class="ds-selector-tabs" data-ds-scope="code-sample">
<section><h3 id="kotlin_7" data-text="Kotlin" tabindex="-1">Kotlin</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-c1">//Create a request for setting the app install advertisers</span>
<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">adtech</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">AdTechIdentifier</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">fromString</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"your.enrolled.uri"</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">adtechSet</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">setOf</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">adtech</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">request</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">SetAppInstallAdvertisersRequest</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">adtechSet</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-c1">//Set the app install advertisers in the ad selection manager</span>
<span class="devsite-syntax-n">mAdSelectionManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setAppInstallAdvertisers</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-n">request</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-n">mExecutor</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-k">object</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nc">OutcomeReceiver&lt;Any</span><span class="devsite-syntax-o">?</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Exception?&gt;(</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">fun</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">onResult</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nd">@NonNull</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">ignoredResult</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kt">Any?</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-n">Log</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">v</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"[your tag]"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s">"Updated app install advertisers"</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">fun</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">onError</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nd">@NonNull</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">error</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Exception?)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-n">Log</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">e</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"[your tag]"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s">"Failed to update app install advertisers"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">error</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">})</span>
</code></pre></devsite-code></section>
<section><h3 id="java_7" data-text="Java" tabindex="-1">Java</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Java"><code translate="no" dir="ltr"><span class="devsite-syntax-c1">//Create a request for setting the app install advertisers</span>
<span class="devsite-syntax-n">AdTechIdentifier</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">adtech</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">AdTechIdentifier</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">fromString</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"your.enrolled.uri"</span><span class="devsite-syntax-p">);</span>
<span class="devsite-syntax-n">Set&lt;AdTechIdentifier&gt;</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">adtechSet</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Collections</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">singleton</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">adtech</span><span class="devsite-syntax-p">);</span>
<span class="devsite-syntax-n">SetAppInstallAdvertisersRequest</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">request</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">SetAppInstallAdvertisersRequest</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">adtechSet</span><span class="devsite-syntax-p">);</span>

<span class="devsite-syntax-c1">//Set the app install advertisers in the ad selection manager</span>
<span class="devsite-syntax-n">mAdSelectionManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setAppInstallAdvertisers</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-n">request</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-n">mExecutor</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">OutcomeReceiver&lt;Object</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Exception</span>&gt;<span class="devsite-syntax-p">()</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nd">@Override</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">public</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kt">void</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">onResult</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nd">@NonNull</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Object</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">ignoredResult</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-n">Log</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">v</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"[your tag]"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s">"Updated app install advertisers"</span><span class="devsite-syntax-p">);</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nd">@Override</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">public</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kt">void</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">onError</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nd">@NonNull</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Exception</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">error</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-n">Log</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">e</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"[your tag]"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s">"Failed to update app install advertisers"</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">error</span><span class="devsite-syntax-p">);</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">});</span>
</code></pre></devsite-code></section>
</div>
<p>When the preceding code executes, the advertisers passed in are then able to
filter out the installed apps that you specify during their bid generation. If
you need to remove an advertiser from having access to this app&#39;s install
status, run this code again with the advertiser&#39;s information removed.</p>

<p>The next step is to set up ad filtering inside the publisher app. The party that
serves the ad inside of the publisher app (most likely to be a supply-side SDK)
must initialize their <code translate="no" dir="ltr">AdFilters</code> object with information about which ads
related to apps they&#39;d like to filter out:</p>
<div class="ds-selector-tabs" data-ds-scope="code-sample">
<section><h3 id="kotlin_8" data-text="Kotlin" tabindex="-1">Kotlin</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-c1">// Instantiate AdFilters object with package names.</span>
<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">filters</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">AdFilters</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Builder</span><span class="devsite-syntax-p">().</span><span class="devsite-syntax-na">setAppInstallFilters</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">Builder</span><span class="devsite-syntax-p">().</span><span class="devsite-syntax-na">setPackageNames</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">setOf</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"example.target.app"</span><span class="devsite-syntax-p">)).</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">).</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">()</span>
</code></pre></devsite-code></section>
<section><h3 id="java_8" data-text="Java" tabindex="-1">Java</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Java"><code translate="no" dir="ltr"><span class="devsite-syntax-c1">// Instantiate AdFilters object with package names.</span>
<span class="devsite-syntax-n">AdFilters</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">filters</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">AdFilters</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setAppInstallFilters</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">AppInstallFilters</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setPackageNames</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">Collections</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">singleton</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"example.target.app"</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">())</span>
<span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">();</span>
</code></pre></devsite-code></section>
</div>
<p>Demand-side publishers may also set an <code translate="no" dir="ltr">AdFilter</code> for ads that exist inside of
their custom audiences.</p>

<p><code translate="no" dir="ltr">AdFilters</code> can also be passed in at the point of instantiating a new <code translate="no" dir="ltr">AdData</code>
object:</p>
<div class="ds-selector-tabs" data-ds-scope="code-sample">
<section><h3 id="kotlin_9" data-text="Kotlin" tabindex="-1">Kotlin</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-c1">// Instantiate an AdData object with the AdFilters created in the</span>
<span class="devsite-syntax-c1">// previous example.</span>
<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">appInstallAd</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">AdData</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-n">Builder</span><span class="devsite-syntax-p">().</span><span class="devsite-syntax-na">setMetadata</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"{ ... }"</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-c1">// Valid JSON string</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setRenderUri</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">parse</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"www.example-dsp1.com/.../campaign123.html"</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setAdFilters</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">filters</span><span class="devsite-syntax-p">).</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">()</span>
</code></pre></devsite-code></section>
<section><h3 id="java_9" data-text="Java" tabindex="-1">Java</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Java"><code translate="no" dir="ltr"><span class="devsite-syntax-c1">// Instantiate an AdData object with the AdFilters created in the</span>
<span class="devsite-syntax-c1">// previous example.</span>
<span class="devsite-syntax-n">AdData</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">appInstallAd</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">AdData</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setMetadata</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"{ ... }"</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-c1">// Valid JSON string</span>
<span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setRenderUri</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">parse</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"www.example-dsp1.com/.../campaign123.html"</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setAdFilters</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">filters</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">();</span>
</code></pre></devsite-code></section>
</div>
<h3 id="f-cap-filtering" data-text="Frequency cap filtering" tabindex="-1">Frequency cap filtering</h3>

<p>Frequency cap filtering enables ad techs to limit the number of times an ad is
shown. Frequency cap filtering reduces ad overexposure and optimizes alternate
ad selection for a given ad campaign.</p>

<p>There are two main components of a frequency cap filter: the ad event type, and
the ad counter key. The available ad event types that can be used are:</p>

<ul>
<li><strong>Win</strong>: A win event indicates that the ad has won an auction.
Win events are automatically updated by the Protected Audience API and cannot
be called directly by the developer. Win data is only visible to ads within a
given custom audience.</li>
<li><strong>Impression</strong>: Separate from <code translate="no" dir="ltr">reportImpression</code>, an on-device caller (SSP or
MMP) uses <code translate="no" dir="ltr">updateAdCounterHistogram()</code> to invoke impression events at the
point in code they choose. Impression events are visible to all ads belonging
to a given DSP, and are not limited to ads in the same custom audience.</li>
<li><strong>View</strong>: Event is invoked by the on-device caller (SSP or MMP) at a point in
code they choose using a call to <code translate="no" dir="ltr">updateAdCounterHistogram()</code>. View events are
visible to all ads belonging to a given DSP and not limited to ads in the same
Custom Audience.</li>
<li><strong>Click</strong>: Event is invoked by the on-device caller (SSP or MMP) at a point in
code they choose using a call to <code translate="no" dir="ltr">updateAdCounterHistogram()</code>. Click events
are visible to all ads belonging to a given DSP and not limited to ads in the
same Custom Audience.</li>
</ul>

<p>In the publisher app, an SSP or MMP that has a presence on the device invokes ad
events. When <code translate="no" dir="ltr">updateAdCounterHistogram()</code> is called, the counter of a frequency
cap filter is incremented so that future auctions will have up to date
information about a user&#39;s exposure to a given ad. The ad event types are not
forcibly tied to the corresponding user action and are guidelines given to help
callers to structure their event system. To increment ad counters at the time of
an event, the on-device actor provides the winning ad auction&#39;s ad selection ID.</p>

<p>Ad counter keys are arbitrary 32-bit signed integers assigned by a buyer ad
tech, and they correspond to a given set of ads as defined by the DSP. Since ad
counter keys are limited only to ads that belong to a given DSP, these keys can
be selected without overlapping with histograms from another ad tech. Ad counter
keys are used to increment DSP-specific identifiers across a DSP&#39;s ads or within
a given custom audience to filter out ads from future auctions.</p>

<p>Counter keys can be leveraged to prioritize ads that are more likely to be
interesting to a given user based on their interactions with other ads from a
given buyer ad tech. For example, an ad that has received a high level of
engagement from winning ad auctions, views, and clicks, represents an inferred
data point. To further illustrate this point: an ad for left handed golf clubs
might indicate that the user wouldn&#39;t be interested in right handed ones. A
frequency cap filter set for a counter key assigned to left-handed ads could
filter out ads for right handed clubs.</p>

<p>To use frequency capping in your auction, you must first create
<code translate="no" dir="ltr">KeyedFrequencyCap</code> objects:</p>
<div class="ds-selector-tabs" data-ds-scope="code-sample">
<section><h3 id="kotlin_10" data-text="Kotlin" tabindex="-1">Kotlin</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-c1">// Value used when incrementing frequency counter</span>
<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">adCounterKey</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-m">123</span>

<span class="devsite-syntax-c1">// Frequency cap exceeded after 2 counts</span>
<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">keyedFrequencyCapForImpression</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">KeyedFrequencyCap</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Builder</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-n">adCounterKey</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-m">2</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Duration</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">ofSeconds</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-m">10</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-p">).</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">()</span>

<span class="devsite-syntax-c1">// Frequency cap exceeded after 1 counts</span>
<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">keyedFrequencyCapForImpression</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">KeyedFrequencyCap</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Builder</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-n">adCounterKey</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-m">1</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Duration</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">ofSeconds</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-m">10</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-p">).</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">()</span>
</code></pre></devsite-code></section>
<section><h3 id="java_10" data-text="Java" tabindex="-1">Java</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Java"><code translate="no" dir="ltr"><span class="devsite-syntax-c1">// Value used when incrementing frequency counter</span>
<span class="devsite-syntax-kt">int</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">adCounterKey</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">123</span><span class="devsite-syntax-p">;</span>

<span class="devsite-syntax-c1">// Frequency cap exceeded after 2 counts</span>
<span class="devsite-syntax-n">KeyedFrequencyCap</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">keyedFrequencyCapForImpression</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">KeyedFrequencyCap</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">adCounterKey</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">2</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Duration</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">ofSeconds</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-mi">10</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">).</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">();</span>

<span class="devsite-syntax-c1">// Frequency Cap exceeded after 1 counts</span>
<span class="devsite-syntax-n">KeyedFrequencyCap</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">keyedFrequencyCapForClick</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">KeyedFrequencyCap</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">adCounterKey</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mi">1</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Duration</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">ofSeconds</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-mi">10</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">).</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">();</span>
</code></pre></devsite-code></section>
</div>
<p>Once the <code translate="no" dir="ltr">KeyedFrequencyCap</code> objects are created, you can pass them into an
<code translate="no" dir="ltr">AdFilters</code> object.</p>
<div class="ds-selector-tabs" data-ds-scope="code-sample">
<section><h3 id="kotlin_11" data-text="Kotlin" tabindex="-1">Kotlin</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">filters</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">AdFilters</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Builder</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setFrequencyCapFilters</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">Builder</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setKeyedFrequencyCapsForImpressionEvents</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">ImmutableObject</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">of</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">keyedFrequencyCapForImpression</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setKeyedFrequencyCapsForClickEvents</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">ImmutableObject</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">of</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">keyedFrequencyCapForClick</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">).</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">()</span>
</code></pre></devsite-code></section>
<section><h3 id="java_11" data-text="Java" tabindex="-1">Java</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Java"><code translate="no" dir="ltr"><span class="devsite-syntax-n">AdFilters</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">filters</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">AdFilters</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setFrequencyCapFilters</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">FrequencyCapFilters</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setKeyedFrequencyCapsForImpressionEvents</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-n">ImmutableObject</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">of</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">keyedFrequencyCapForImpression</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setKeyedFrequencyCapsForClickEvents</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-n">ImmutableObject</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">of</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">keyedFrequencyCapForClick</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">).</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">();</span>
</code></pre></devsite-code></section>
</div>
<p>When the <code translate="no" dir="ltr">AdFilters</code> object is populated with frequency cap filters, it can be
passed along when the custom audience is created:</p>
<div class="ds-selector-tabs" data-ds-scope="code-sample">
<section><h3 id="kotlin_12" data-text="Kotlin" tabindex="-1">Kotlin</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-c1">// Initialize a custom audience.</span>
<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">audience</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">CustomAudience</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Builder</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setBuyer</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">buyer</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setName</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">name</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setAds</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">listOf</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-n">Builder</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setRenderUri</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">renderUri</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setMetadata</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">JSONObject</span><span class="devsite-syntax-p">().</span><span class="devsite-syntax-na">toString</span><span class="devsite-syntax-p">())</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setAdFilters</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">filters</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setAdCounterKeys</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">adCounterKeys</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">).</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">()</span>
</code></pre></devsite-code></section>
<section><h3 id="java_12" data-text="Java" tabindex="-1">Java</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Java"><code translate="no" dir="ltr"><span class="devsite-syntax-c1">// Initialize a custom audience.</span>
<span class="devsite-syntax-n">CustomAudience</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">audience</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">CustomAudience</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setBuyer</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">buyer</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setName</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">name</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setAds</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">Collections</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">singletonList</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">AdData</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setRenderUri</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">renderUri</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setMetadata</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">JSONObject</span><span class="devsite-syntax-p">().</span><span class="devsite-syntax-na">toString</span><span class="devsite-syntax-p">())</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setAdFilters</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">filters</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setAdCounterKeys</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">adCounterKeys</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">()))</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">();</span>
</code></pre></devsite-code></section>
</div>
<p>When frequency cap filters are implemented into a custom audience, the SSP can
then invoke the necessary click, view, or impression events.</p>
<div class="ds-selector-tabs" data-ds-scope="code-sample">
<section><h3 id="kotlin_13" data-text="Kotlin" tabindex="-1">Kotlin</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">callerAdTech</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">AdTechIdentifier</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">mAdSelectionConfig</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getSeller</span><span class="devsite-syntax-p">()</span>

<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">request</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">UpdateAdCounterHistogramRequest</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Builder</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-n">adSelectionId</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-n">FrequencyCapFilters</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">AD_EVENT_TYPE_CLICK</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">//CLICK, VIEW, or IMPRESSION</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-n">callerAdTech</span>
<span class="devsite-syntax-p">).</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">()</span>
</code></pre></devsite-code></section>
<section><h3 id="java_13" data-text="Java" tabindex="-1">Java</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Java"><code translate="no" dir="ltr"><span class="devsite-syntax-n">AdTechIdentifier</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">callerAdTech</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">mAdSelectionConfig</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getSeller</span><span class="devsite-syntax-p">();</span>

<span class="devsite-syntax-n">UpdateAdCounterHistogramRequest</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">request</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">UpdateAdCounterHistogramRequest</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-n">adSelectionId</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-n">FrequencyCapFilters</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">AD_EVENT_TYPE_CLICK</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-c1">//CLICK, VIEW, or IMPRESSION</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-n">callerAdTech</span>
<span class="devsite-syntax-p">).</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">();</span>
</code></pre></devsite-code></section>
</div>
<p>Ads that have hit their pre-set frequency cap filter limits are filtered out
of the auction. Filtering happens before the bidding logic is executed for
on-device auctions, and as the payload is generating for Bidding &amp; Auction
services auctions.This toolkit gives ad techs the flexibility to use the
interactions between users and the ads within their custom audiences to focus ad
targeting while minimizing ad overexposure.</p>

<h2 id="contextual-ad" data-text="Contextual ad filtering without network calls" tabindex="-1">Contextual ad filtering without network calls</h2>

<p>If there is no remarketing demand on the device, you can run ad selection for
contextual ads without network calls. With prebuilt URIs and a list of
contextual ads with bids, the platform can skip retrieving bidding logic,
bidding signals, and scoring signals. The platform uses a prebuilt URI to select
the contextual ad with the highest bid.</p>

<p>To improve latency, ad techs can run an ad selection flow that includes only
contextual ads with ad filtering functionality without network calls. This is
achieved by using prebuilt URIs for scoring signals. Refer to the <a href="#supported-prebuilt">Supported
prebuilt URI use cases and names section</a> for a list of <code translate="no" dir="ltr">scoreAds</code>
implementations.</p>

<p>To run ad selection without network calls:</p>

<ol>
<li><a href="/private-advertising/protected-audience/android/developer-guide?version=preview#app-install-ad-filter">Set up ad filtering</a></li>
<li><a href="/private-advertising/protected-audience/android/developer-guide?version=preview#contextual-ads">Create your contextual ads</a></li>
<li><p>Create a <code translate="no" dir="ltr">AdSelectionConfig</code> object with the following:</p>

<ol>
<li>An empty list of buyers</li>
<li>A prebuilt URI to select the highest bid</li>
<li>Contextual ads</li>
<li>An empty URI for the scoring signals. The empty URI is allowed to indicate
that you don&#39;t want to use the fetching of trusted signals for scoring:</li>
</ol>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Java"><code translate="no" dir="ltr"><span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">prebuiltURIScoringUri</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">parse</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"ad-selection-prebuilt://ad-selection/highest-bid-wins/?reportingUrl=your.registered.uri/reporting"</span><span class="devsite-syntax-p">);</span>
<span class="devsite-syntax-c1">// Initialize AdSelectionConfig</span>
<span class="devsite-syntax-n">AdSelectionConfig</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">adSelectionConfig</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">AdSelectionConfig</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setSeller</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">seller</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setDecisionLogicUri</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">prebuiltURIScoringUri</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setCustomAudienceBuyers</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">Collections</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">emptyList</span><span class="devsite-syntax-p">())</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setAdSelectionSignals</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">adSelectionSignals</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setSellerSignals</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">sellerSignals</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setPerBuyerSignals</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">perBuyerSignals</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setBuyerContextualAds</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">buyerContextualAds</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setTrustedScoringSignalsUri</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">EMPTY</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">();</span>
</code></pre></devsite-code></li>
<li><p>Run ad selection:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Text only"><code translate="no" dir="ltr">adSelectionManager.selectAds(
    adSelectionConfig,
    executor,
    outcomeReceiver);
</code></pre></devsite-code></li>
</ol>

<h3 id="run-own" data-text="Run your own reporting JavaScript while using prebuilt URIs" tabindex="-1">Run your own reporting JavaScript while using prebuilt URIs</h3>

<p>Today, the Privacy Sandbox platform only has a basic reporting JavaScript
implementation available for prebuilt URIs. If you want to run your own
reporting JavaScript while still using prebuilt URIs for a low latency ad
selection, you can override the <code translate="no" dir="ltr">DecisionLogicUri</code> between ad selection and
reporting runs.</p>

<ol>
<li>Run steps <a href="#contextual-ad">to run ad selection for contextual ads using prebuilt URIs</a></li>
<li><p>Create a copy of your <code translate="no" dir="ltr">AdSelectionConfig</code> before running reporting</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Java"><code translate="no" dir="ltr"><span class="devsite-syntax-n">adSelectionConfigWithYourReportingJS</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">adSelectionConfig</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">cloneToBuilder</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// Replace &lt;urlToFetchYourReportingJS&gt; with your own URL:</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setDecisionLogicUri</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">Uri</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">parse</span><span class="devsite-syntax-p">(</span>&lt;<span class="devsite-syntax-n">urlToFetchYourReportingJS</span>&gt;<span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">();</span>
</code></pre></devsite-code></li>
<li><p>Run impression reporting</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Java"><code translate="no" dir="ltr"><span class="devsite-syntax-c1">// adSelectionId is from the result of the previous selectAds run</span>
<span class="devsite-syntax-n">ReportImpressionRequest</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">request</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">ReportImpressionRequest</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-n">adSelectionId</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-n">adSelectionConfigWithYourReportingJS</span><span class="devsite-syntax-p">);</span>
<span class="devsite-syntax-n">adSelectionManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">reportImpression</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-n">request</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-n">executor</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-n">outcomeReceiver</span><span class="devsite-syntax-p">);</span>
</code></pre></devsite-code></li>
</ol>

<h2 id="run-waterfall" data-text="Run waterfall mediation" tabindex="-1">Run waterfall mediation</h2>

<p>Waterfall mediation requires multiple third party SDKs (3P networks) to be
orchestrated by a first party SDK mediation network. Waterfall mediation is
done the same way regardless if the auction took place on device or ran on
Bidding &amp; Auction services (B&amp;A).</p>

<h3 id="3p-networks" data-text="3P networks" tabindex="-1">3P networks</h3>

<p>3P networks need to provide an adapter that allows the mediation network to
invoke the necessary methods for running an auction:</p>

<ul>
<li>Run ad selection</li>
<li>Report impressions</li>
</ul>

<p>Here&#39;s an example of a mediation network adapter:</p>
<div class="ds-selector-tabs" data-ds-scope="code-sample">
<section><h3 id="kotlin_14" data-text="Kotlin" tabindex="-1">Kotlin</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">class</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nc">NetworkAdaptor</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">private</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">adSelectionManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">AdSelectionManager</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-k">init</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">adSelectionManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">context</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getSystemService</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">AdSelectionManager</span><span class="devsite-syntax-o">::</span><span class="devsite-syntax-n">class</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">java</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">fun</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">selectAds</span><span class="devsite-syntax-p">()</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{...}</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">fun</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">reportImpressions</span><span class="devsite-syntax-p">()</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{...}</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code></section>
<section><h3 id="java_14" data-text="Java" tabindex="-1">Java</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Java"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">class</span> <span class="devsite-syntax-nc">NetworkAdaptor</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">AdSelectionManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">adSelectionManager</span><span class="devsite-syntax-p">;</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">public</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">NetworkAdaptor</span><span class="devsite-syntax-p">()</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">AdSelectionManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">adSelectionManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-n">context</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getSystemService</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">AdSelectionManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">class</span><span class="devsite-syntax-p">);</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">public</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kt">void</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">selectAds</span><span class="devsite-syntax-p">()</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{...}</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">public</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kt">void</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">reportImpressions</span><span class="devsite-syntax-p">()</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{...}</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code></section>
</div>
<p>Each SDK has their own ad selection service managers and clients, and their own
<code translate="no" dir="ltr">selectAds</code> and <code translate="no" dir="ltr">reportImpressions</code> implementation. SDK providers can refer to
the sections on how to <a href="#run-ad">run ad selection</a> for on-device auctions <a href="/private-advertising/protected-audience/android/bidding-and-auction-integration#run_server_auctions_using_protected_audience_apis">or the B&amp;A
explainer</a> for B&amp;A auctions. Follow how to <a href="#report-ad">report ad
impressions</a> (following the <a href="#single-ssp">single SSP impression reporting</a> for
reporting.</p>

<h3 id="mediation-network" data-text="Mediation network" tabindex="-1">Mediation network</h3>

<p>Similar to 3P networks, mediation networks need <code translate="no" dir="ltr">selectAds</code> and
<code translate="no" dir="ltr">reportImpression</code> implementations. Refer to the sections on how to <a href="#run-ad">run ad
selection</a> and how to <a href="#report-ad">report ad impressions</a> for more information.</p>

<p>Mediation networks are responsible for running the mediation chain and placing
themselves in the mediation chain. The next section covers how to set up and
execute this process.</p>

<h3 id="retrieve-mediation" data-text="Retrieve mediation chain and bid floors" tabindex="-1">Retrieve mediation chain and bid floors</h3>

<p>The mediation network is responsible for retrieving the first party (1P)
contextual ads, mediation chain, and third party networks&#39; bid floors (3P). This
can happen in a request to retrieve contextual ads executed by the mediation
network. The mediation chain determines how to iterate through the 3P Networks,
and the bid floors can be passed to the auction process as <code translate="no" dir="ltr">adSelectionSignals</code>.</p>

<h3 id="network-placement" data-text="Network placement in the mediation chain" tabindex="-1">Network placement in the mediation chain</h3>

<p>A mediation SDK can place itself in the mediation chain based on their live eCPM
of 1P ad bids. In the Protected Audience API, ad bids are opaque. A mediation
SDK should use <code translate="no" dir="ltr">AdSelectionFromOutcomesConfig</code> to be able to compare a given 1P
ad&#39;s bid to the bid floor of the next 3P network in the chain. If the 1P bid is
higher than the bid floor then that means the mediation SDK is placed in front
of that 3P network.</p>

<h3 id="run-ad-selection" data-text="Run ad selection" tabindex="-1">Run ad selection</h3>

<p>To retrieve a 1P ad candidate, the mediation network can execute an on-device
auction following the steps in the <a href="#run-ad">run ad selection</a> section. This generates
a 1P ad candidate, a bid, and an <code translate="no" dir="ltr">AdSelectionId</code> that is used in the mediation
process.</p>

<h3 id="adselectionfromoutcomesconfig" data-text="Create an AdSelectionFromOutcomesConfig" tabindex="-1">Create an AdSelectionFromOutcomesConfig</h3>

<p>An <code translate="no" dir="ltr">AdSelectionFromOutcomesConfig</code> allows the mediation network to pass a list
of <code translate="no" dir="ltr">AdSelectionIds</code> (results from previous auctions), ad selection signals, and
a URI to fetch JavaScript that selects an ad from multiple candidates. The list
of AdSelectionIds along with their bids and the signals are passed to the
JavaScript which can return one of the <code translate="no" dir="ltr">AdSelectionIds</code> if it beats the bid
floor, or none if the mediation chain should continued.</p>

<p>Mediation Networks create an <code translate="no" dir="ltr">AdSelectionFromOutcomesConfig</code> using the 1P
<code translate="no" dir="ltr">AdSelectionId</code> from the previous section, and the bid floor for the 3P Network
being considered. A new <code translate="no" dir="ltr">AdSelectionFromOutcomesConfig</code> should be created
for each step in the mediation chain.</p>
<div class="ds-selector-tabs" data-ds-scope="code-sample">
<section><h3 id="kotlin_15" data-text="Kotlin" tabindex="-1">Kotlin</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">fun</span><span class="devsite-syntax-w">  </span><span class="devsite-syntax-nf">runSelectOutcome</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">adSelectionClient</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">AdSelectionClient</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">outcome1p</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">AdSelectionOutcome</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">network3p</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">NetworkAdapter</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">ListenableFuture&lt;AdSelectionOutcome?&gt; </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">config</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">AdSelectionFromOutcomesConfig</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setSeller</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">seller</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setAdSelectionIds</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">listOf</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">outcome1p</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setSelectionSignals</span><span class="devsite-syntax-p">({</span><span class="devsite-syntax-s">"bid_floor"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">bid_floor</span><span class="devsite-syntax-p">})</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setSelectionLogicUri</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">selectionLogicUri</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-k">return</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">adSelectionClient</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">selectAds</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">config</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code></section>
<section><h3 id="java_15" data-text="Java" tabindex="-1">Java</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Java"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">public</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">ListenableFuture&lt;AdSelectionOutcome&gt;</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">runSelectOutcome</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">AdSelectionOutcome</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">outcome1p</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">                                              </span><span class="devsite-syntax-n">NetworkAdapter</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">network3p</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">AdSelectionFromOutcomesConfig</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">config</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">AdSelectionFromOutcomesConfig</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setSeller</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">seller</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setAdSelectionIds</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">Collection</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">singletonList</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">outcome1p</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setSelectionSignals</span><span class="devsite-syntax-p">({</span><span class="devsite-syntax-s">"bid_floor"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">bid_floor</span><span class="devsite-syntax-p">})</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setSelectionLogicUri</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">selectionLogicUri</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">();</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-k">return</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">adSelectionClient</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">selectAds</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">config</span><span class="devsite-syntax-p">){}</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code></section>
</div>
<p>The <code translate="no" dir="ltr">selectAds()</code> method override for waterfall mediation requires an
<code translate="no" dir="ltr">AdSelectionFromOutcomesConfig</code> input, where you must specify the following
required parameters:</p>

<ul>
<li><strong>Seller</strong>: Identifier for the seller ad network initiating the ad selection.</li>
<li><strong>AdSelectionIds</strong>: A singleton list of a previous <code translate="no" dir="ltr">selectAds()</code> run for a 1P
ad.</li>
<li><strong>Ad selection signals</strong>: A JSON object, serialized as a string, containing
signals to be used by buyer bidding logic. In this case, include the bid floor
retrieved for the given 3P network.</li>
<li><strong>Selection Logic URI</strong>: An HTTPS URL queried during ad selection to fetch the
mediation network&#39;s JavaScript for selecting a winning ad. See the required
<a href="#javascript-ad">function signatures</a> in this JavaScript. The JavaScript should return the
3P ad if the bid is higher than the bid floor, or otherwise return <code translate="no" dir="ltr">null</code>.
This allows the mediation SDK to truncate the mediation chain when a winner is
found.</li>
</ul>

<p>With the <code translate="no" dir="ltr">AdSelectionOutcomesConfig</code> created, call the <code translate="no" dir="ltr">selectAds()</code> method of
the 3P network that is first in the chain.</p>
<div class="ds-selector-tabs" data-ds-scope="code-sample">
<section><h3 id="kotlin_16" data-text="Kotlin" tabindex="-1">Kotlin</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">adSelectionManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">context</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getSystemService</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">AdSelectionManager</span><span class="devsite-syntax-o">::</span><span class="devsite-syntax-n">class</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">java</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-c1">// Initialize AdSelectionFromOutcomesConfig</span>
<span class="devsite-syntax-n">AdSelectionFromOutcomesConfig</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">adSelectionFromOutcomesConfig</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-n">AdSelectionFromOutcomesConfig</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setSeller</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">seller</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setAdSelectionIds</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">listof</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">outcome1p</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setSelectionSignals</span><span class="devsite-syntax-p">({</span><span class="devsite-syntax-s">"bid_floor"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">bid_floor</span><span class="devsite-syntax-p">})</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setSelectionLogicUri</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">selectionLogicUri</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setAdSelectionIds</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">outcomeIds</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">()</span>

<span class="devsite-syntax-c1">// Run ad selection with AdSelectionConfig</span>
<span class="devsite-syntax-n">adSelectionManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">selectAds</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">adSelectionFromOutcomesConfig</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">executor</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">outcomeReceiver</span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code></section>
<section><h3 id="java_16" data-text="Java" tabindex="-1">Java</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Java"><code translate="no" dir="ltr"><span class="devsite-syntax-n">AdSelectionManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">adSelectionManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">context</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getSystemService</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">AdSelectionManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">class</span><span class="devsite-syntax-p">);</span>

<span class="devsite-syntax-c1">// Initialize AdSelectionFromOutcomesConfig</span>
<span class="devsite-syntax-n">AdSelectionFromOutcomesConfig</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">adSelectionFromOutcomesConfig</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">AdSelectionFromOutcomesConfig</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setSeller</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">seller</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setAdSelectionIds</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">Collection</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">singletonList</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">outcome1p</span><span class="devsite-syntax-p">))</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setSelectionSignals</span><span class="devsite-syntax-p">({</span><span class="devsite-syntax-s">"bid_floor"</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">bid_floor</span><span class="devsite-syntax-p">})</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setSelectionLogicUri</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">selectionLogicUri</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setAdSelectionIds</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">outcomeIds</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">();</span>

<span class="devsite-syntax-c1">// Run ad selection with AdSelectionConfig</span>
<span class="devsite-syntax-n">adSelectionManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">selectAds</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">adSelectionFromOutcomesConfig</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">executor</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">outcomeReceiver</span><span class="devsite-syntax-p">);</span>
</code></pre></devsite-code></section>
</div>
<h3 id="orchestrate-waterfall" data-text="Orchestrate waterfall mediation" tabindex="-1">Orchestrate waterfall mediation</h3>

<p>The following is the order of operations for running through the mediation
process.</p>

<ol>
<li>Run 1P ad selection.</li>
<li>Iterate over the mediation chain. For each 3P network, do the following:
<ol>
<li>Build <code translate="no" dir="ltr">AdSelectionFromOutcomeConfig</code> including the 1P <code translate="no" dir="ltr">outcomeId</code> and the
3P SDK&#39;s bid floor.</li>
<li>Call <code translate="no" dir="ltr">selectAds()</code> with the config from the previous step.</li>
<li>If the result is not empty, return the ad.</li>
<li>Call the current SDK network adapter&#39;s <code translate="no" dir="ltr">selectAds()</code> method. If the result
is not empty, return the ad.</li>
</ol></li>
<li>If no winner is found from the chain, return the 1P ad.</li>
</ol>
<div class="ds-selector-tabs" data-ds-scope="code-sample">
<section><h3 id="kotlin_17" data-text="Kotlin" tabindex="-1">Kotlin</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">fun</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">runWaterfallMediation</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">mediationChain</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">List&lt;NetworkAdapter&gt;</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Pair&lt;AdSelectionOutcome</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">NetworkAdapter</span>&gt;<span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">outcome1p</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">runAdSelection</span><span class="devsite-syntax-p">()</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">var</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">outcome</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">AdSelectionOutcome</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-k">for</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">network3p</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-k">in</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">mediationChain</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-n">outcome</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">runSelectOutcome</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">outcome1p</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">network3p</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-k">if</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">outcome1p</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">hasOutcome</span><span class="devsite-syntax-p">()</span><span class="devsite-syntax-w"> &amp;&amp; </span><span class="devsite-syntax-n">outcome</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">hasOutcome</span><span class="devsite-syntax-p">())</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">          </span><span class="devsite-syntax-k">return</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Pair</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">outcome</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-k">this</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-p">}</span>

<span class="devsite-syntax-w">      </span><span class="devsite-syntax-n">outcome</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">network3p</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">runAdSelection</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-k">if</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">outcome</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">hasOutcome</span><span class="devsite-syntax-p">())</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">          </span><span class="devsite-syntax-k">return</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Pair</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">outcome</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">network3p</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-k">return</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Pair</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">outcome1p</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-k">this</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code></section>
<section><h3 id="java_17" data-text="Java" tabindex="-1">Java</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Java"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">class</span> <span class="devsite-syntax-nc">MediationNetwork</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">AdSelectionManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">adSelectionManager</span><span class="devsite-syntax-p">;</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">public</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">MediationNetwork</span><span class="devsite-syntax-p">()</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">AdSelectionManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">adSelectionManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-n">context</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getSystemService</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">AdSelectionManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">class</span><span class="devsite-syntax-p">);</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">public</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kt">void</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">runAdSelection</span><span class="devsite-syntax-p">()</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{...}</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">public</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kt">void</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">reportImpressions</span><span class="devsite-syntax-p">()</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{...}</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">public</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Pair&lt;AdSelectionOutcome</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">NetworkAdapter</span>&gt;<span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">runWaterfallMediation</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-n">List&lt;NetworkAdapter&gt;</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">mediationChain</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">AdSelectionOutcome</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">outcome1p</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">runAdSelection</span><span class="devsite-syntax-p">();</span>

<span class="devsite-syntax-w">        </span><span class="devsite-syntax-n">AdSelectionOutcome</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">outcome</span><span class="devsite-syntax-p">;</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-k">for</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">NetworkAdapter</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">network3p</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">mediationChain</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-k">if</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">outcome1p</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">hasOutcome</span><span class="devsite-syntax-p">()</span><span class="devsite-syntax-w"> </span>&amp;&amp;
<span class="devsite-syntax-w">              </span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">outcome</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">runSelectOutcome</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">outcome1p</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">network3p</span><span class="devsite-syntax-p">)).</span><span class="devsite-syntax-na">hasOutcome</span><span class="devsite-syntax-p">())</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">                </span><span class="devsite-syntax-k">return</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Pair</span>&lt;&gt;<span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">outcome</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-k">this</span><span class="devsite-syntax-p">);</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-p">}</span>

<span class="devsite-syntax-w">            </span><span class="devsite-syntax-k">if</span><span class="devsite-syntax-p">((</span><span class="devsite-syntax-n">outcome</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">network3p</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">runAdSelection</span><span class="devsite-syntax-p">()).</span><span class="devsite-syntax-na">hasOutcome</span><span class="devsite-syntax-p">())</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">                </span><span class="devsite-syntax-k">return</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Pair</span>&lt;&gt;<span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">outcome</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">network3p</span><span class="devsite-syntax-p">);</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-k">return</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">Pair</span>&lt;&gt;<span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">outcome1p</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-k">this</span><span class="devsite-syntax-p">);</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">}</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-cm">/* Runs comparison by creating an AdSelectionFromOutcomesConfig */</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-kd">public</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">AdSelectionOutcome</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nf">runSelectOutcome</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">AdSelectionOutcome</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">outcome1p</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">                                              </span><span class="devsite-syntax-n">NetworkAdapter</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">network3p</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">...</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code></section>
</div>
<h2 id="report-ad" data-text="Report ad impressions" tabindex="-1">Report ad impressions</h2>

<p>There are two flows for reporting an ad impression depending on how the auction
is run. If you are a single SSP running an auction, follow this section. If
you are going to implement waterfall mediation, follow the steps found in the
<a href="#waterfall-impression-reporting">waterfall mediation impression reporting section</a>.</p>

<h3 id="single-ssp" data-text="Single SSP impression reporting" tabindex="-1">Single SSP impression reporting</h3>

<p>After a winning ad has been chosen from the ad selection workflow, you can
report the impression back to participating buy-side and sell-side platforms
with the <code translate="no" dir="ltr">AdSelectionManager.reportImpression()</code> method. To report an ad
impression:</p>

<ol>
<li>Initialize an <a href="https://developer.android.com/reference/android/adservices/adselection/AdSelectionManager"><code translate="no" dir="ltr">AdSelectionManager</code></a> object.</li>
<li>Build a <a href="https://developer.android.com/reference/android/adservices/adselection/ReportImpressionRequest"><code translate="no" dir="ltr">ReportImpressionRequest</code></a> object with the ad selection ID.</li>
<li>Call the asynchronous <code translate="no" dir="ltr">reportImpression()</code> method with the
<a href="https://developer.android.com/reference/android/adservices/adselection/ReportImpressionRequest"><code translate="no" dir="ltr">ReportImpressionRequest</code></a> object and relevant <a href="https://developer.android.com/reference/java/util/concurrent/Executor"><code translate="no" dir="ltr">Executor</code></a> and
<a href="https://developer.android.com/reference/android/os/OutcomeReceiver"><code translate="no" dir="ltr">OutcomeReceiver</code></a> objects.</li>
</ol>
<div class="ds-selector-tabs" data-ds-scope="code-sample">
<section><h3 id="java_18" data-text="Java" tabindex="-1">Java</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Java"><code translate="no" dir="ltr"><span class="devsite-syntax-n">AdSelectionManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">adSelectionManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">context</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getSystemService</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">AdSelectionManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">class</span><span class="devsite-syntax-p">);</span>

<span class="devsite-syntax-c1">// Initialize a ReportImpressionRequest</span>
<span class="devsite-syntax-n">ReportImpressionRequest</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">reportImpressionRequest</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">ReportImpressionRequest</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">                </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setAdSelectionId</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">adSelectionId</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">                </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setAdSelectionConfig</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">adSelectionConfig</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">                </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">();</span>

<span class="devsite-syntax-c1">// Request to report the impression with the ReportImpressionRequest</span>
<span class="devsite-syntax-n">adSelectionManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">reportImpression</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">reportImpressionRequest</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">executor</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">outcomeReceiver</span><span class="devsite-syntax-p">);</span>
</code></pre></devsite-code></section>
<section><h3 id="kotlin_18" data-text="Kotlin" tabindex="-1">Kotlin</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">adSelectionManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">context</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getSystemService</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">AdSelectionManager</span><span class="devsite-syntax-o">::</span><span class="devsite-syntax-n">class</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">java</span><span class="devsite-syntax-p">)</span>

<span class="devsite-syntax-c1">// Initialize a ReportImpressionRequest</span>
<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">adSelectionConfig</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">ReportImpressionRequest</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">ReportImpressionRequest</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setAdSelectionId</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">adSelectionId</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setAdSelectionConfig</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">adSelectionConfig</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">()</span>

<span class="devsite-syntax-c1">// Request to report the impression with the ReportImpressionRequest</span>
<span class="devsite-syntax-n">adSelectionManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">reportImpression</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">reportImpressionRequest</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">executor</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">outcomeReceiver</span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code></section>
</div>
<p>Initialize the <a href="https://developer.android.com/reference/android/adservices/adselection/ReportImpressionRequest"><code translate="no" dir="ltr">ReportImpressionRequest</code></a> with the following required
parameters:</p>

<ul>
<li><strong>Ad selection ID</strong>: An ID unique only to a device user that identifies a
successful ad selection.</li>
<li><strong>Ad selection config</strong>: The same configuration used in the <code translate="no" dir="ltr">selectAds()</code>
call identified by the provided ad selection ID.</li>
</ul>

<p>The asynchronous <code translate="no" dir="ltr">reportImpression()</code> method uses the <a href="https://developer.android.com/reference/android/os/OutcomeReceiver"><code translate="no" dir="ltr">OutcomeReceiver</code></a>
object to signal the result of the API call.</p>

<ul>
<li>The <code translate="no" dir="ltr">onResult()</code> callback indicates if impression reporting URLs have been
created and the request has been scheduled.</li>
<li>The <code translate="no" dir="ltr">onError()</code> callback indicates the following possible conditions:
<ul>
<li>If the call is initialized with an invalid input argument, the
<a href="https://developer.android.com/reference/android/adservices/exceptions/AdServicesException"><code translate="no" dir="ltr">AdServicesException</code></a> indicates an <code translate="no" dir="ltr">IllegalArgumentException</code> as
the cause.</li>
<li>All other errors receive an <a href="https://developer.android.com/reference/android/adservices/exceptions/AdServicesException"><code translate="no" dir="ltr">AdServicesException</code></a> with an
<code translate="no" dir="ltr">IllegalStateException</code> as the cause.</li>
</ul></li>
</ul>

<h3 id="waterfall-impression-reporting" data-text="Waterfall mediation impression reporting" tabindex="-1">Waterfall mediation impression reporting</h3>

<p>A mediation SDK needs to keep track of the winning SDK to trigger their
reporting flows. The SDKs participating in a mediation chain should provide a
method for the mediator to invoke to trigger their own reporting flow. An SDK
participating in a mediated auction can follow the <a href="#run-ad">steps above</a> to implement
their own reporting.</p>

<p>SSPs can use this 3P SDK code example as a prototype for how to join in
mediation flows:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Java"><code translate="no" dir="ltr"><span class="devsite-syntax-n">Pair&lt;AdSelectionOutcome</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">NetworkAdapter</span>&gt;<span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">winnerOutcomeAndNetwork</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">         </span><span class="devsite-syntax-n">mediationSdk</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">orchestrateMediation</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">mediationChain</span><span class="devsite-syntax-p">);</span>

<span class="devsite-syntax-k">if</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">winner</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">first</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">hasOutcome</span><span class="devsite-syntax-p">())</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-n">winner</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">second</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">reportImpressions</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">winner</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">first</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getAdSelectionId</span><span class="devsite-syntax-p">());</span>
</code></pre></devsite-code>
<h3 id="impression-reporting" data-text="Impression reporting endpoints" tabindex="-1">Impression reporting endpoints</h3>

<p>The report impression API issues HTTPS GET requests to endpoints provided by
the sell-side platform and the winning buy-side platform:</p>

<p>Buy-side platform endpoint:</p>

<ul>
<li>The API uses the <strong>Bidding logic URL</strong> specified in the custom audience to
fetch the buyer-provided JavaScript that includes logic to return an
impression reporting URL.</li>
<li>Invoke the <code translate="no" dir="ltr">reportWin()</code> JavaScript function, which is expected to return
the buyer&#39;s impression reporting URL.</li>
</ul>

<p>Sell-side platform endpoint:</p>

<ul>
<li>Use the <strong>Decision logic URL</strong> specified in the <a href="https://developer.android.com/reference/android/adservices/adselection/AdSelectionConfig"><code translate="no" dir="ltr">AdSelectionConfig</code></a>
object to fetch the seller&#39;s decision logic JavaScript.</li>
<li>Invoke the <code translate="no" dir="ltr">reportResult()</code> JavaScript function, which is expected to return the
seller&#39;s impression reporting URL.</li>
</ul>

<h3 id="services-reporting" data-text="Bidding &amp; Auction services reporting" tabindex="-1">Bidding &amp; Auction services reporting</h3>

<p>An auction executed on Bidding &amp; Auction services will have all the necessary
reporting information, including generated URLs for <a href="#report-interactions">ad interaction reporting</a>,
included in the encrypted response from the server-side auction. When the
response is decrypted, the appropriate URLs are registered with the platform, so
ad and impression reporting follows the same steps.</p>

<h3 id="best-effort" data-text="Best effort Impression reporting" tabindex="-1">Best effort Impression reporting</h3>

<p>The <code translate="no" dir="ltr">reportImpression()</code> method is designed to offer a best-effort completion of
reporting.</p>

<aside class="note">
  <b>Note:</b>
  <ul>
    <li>If the API cannot determine the impression reporting URLs from the
      JavaScript functions, it will return an error.</li>
    <li>If the call to the URLs fail, the current Developer Preview release does
      not produce any errors. Retry logic for temporary failures is
      planned for future releases.</li>
    <li>Multiple calls to <code translate="no" dir="ltr">reportImpression()</code> with the same
      parameters may result in your ad selection results being reported multiple
      times.</li>
  </ul>
</aside>

<h2 id="report-interactions" data-text="Report Ad Interactions" tabindex="-1">Report Ad Interactions</h2>

<p>Protected Audience provides support to report on more granular interactions for
a rendered ad. This can include interactions such as view time, clicks, hovers,
or any other useful metric that can be collected. The process to receive these
reports requires two steps. First, buyers and sellers must register to receive
these reports in their reporting JavaScript. Then, the client will need to
report these events.</p>

<h3 id="registering-receive" data-text="Registering to receive interaction events" tabindex="-1">Registering to receive interaction events</h3>

<p>Registering for interaction events happens in the buyer&#39;s <code translate="no" dir="ltr">reportWin()</code> and
seller&#39;s <code translate="no" dir="ltr">reportResult()</code> JavaScript functions using a JavaScript function
provided by the platform: <a href="#registeradbeacon"><code translate="no" dir="ltr">registerAdBeacon</code></a>. To register to receive an
event report, call the platform JavaScript Function from your reporting
JavaScript. The following snippet is using a buyer&#39;s <code translate="no" dir="ltr">reportWin()</code>, but the same
approach applies to <code translate="no" dir="ltr">reportResult()</code>.</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JavaScript"><code translate="no" dir="ltr"><span class="devsite-syntax-nx">reportWin</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nx">adSelectionSignals</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nx">perBuyerSignals</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nx">signalsForBuyer</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nx">contextualSignals</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nx">customAudienceSignals</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">...</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-c1">// Calculate reportingUri, clickUri, viewUri, and hoverUri</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nx">registerAdBeacon</span><span class="devsite-syntax-p">({</span><span class="devsite-syntax-s2">"click"</span><span class="devsite-syntax-o">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">clickUri</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"view"</span><span class="devsite-syntax-o">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">viewUri</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s2">"hover"</span><span class="devsite-syntax-o">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">hoverUri</span><span class="devsite-syntax-p">});</span>

<span class="devsite-syntax-w">    </span><span class="devsite-syntax-k">return</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">reportingUri</span><span class="devsite-syntax-p">;</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code><aside class="note"><strong>Note:</strong><span> The interaction key strings need to match what the seller is reporting to
receive reports.</span></aside>
<h3 id="reporting-interaction" data-text="Reporting interaction events" tabindex="-1">Reporting interaction events</h3>

<p>After reporting an impression, clients can report the interactions back to
previously registered winning buy-side and sell-side platforms with the
<code translate="no" dir="ltr">AdSelectionManager.reportInteraction()</code> method. To report an ad event:</p>

<ol>
<li>Initialize an <a href="https://developer.android.com/reference/android/adservices/adselection/AdSelectionManager"><code translate="no" dir="ltr">AdSelectionManager</code></a> object.</li>
<li>Build a <a href="https://developer.android.com/design-for-safety/privacy-sandbox/reference/adservices/adselection/ReportInteractionRequest"><code translate="no" dir="ltr">ReportInteractionRequest</code></a> object with the ad selection ID,
interaction key, interaction data, and reporting destination.</li>
<li>Call the asynchronous <code translate="no" dir="ltr">reportInteraction()</code> method with the <code translate="no" dir="ltr">request</code> object
and relevant <a href="https://developer.android.com/reference/java/util/concurrent/Executor"><code translate="no" dir="ltr">Executor</code></a> and <a href="https://developer.android.com/reference/android/os/OutcomeReceiver"><code translate="no" dir="ltr">OutcomeReceiver</code></a> objects.</li>
</ol>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Java"><code translate="no" dir="ltr"><span class="devsite-syntax-n">AdSelectionManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">adSelectionManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">context</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getSystemService</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">AdSelectionManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">class</span><span class="devsite-syntax-p">);</span>

<span class="devsite-syntax-c1">// Initialize a ReportInteractionRequest</span>
<span class="devsite-syntax-n">ReportInteractionRequest</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">request</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">ReportInteractionRequest</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setAdSelectionId</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">adSelectionId</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setInteractionKey</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"view"</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setInteractionData</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-s">"{ viewTimeInSeconds : 1 }"</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-c1">// Can be any string</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setReportingDestinations</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-n">FLAG_REPORTING_DESTINATION_BUYER</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">|</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">FLAG_REPORTING_DESTINATION_SELLER</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">();</span>

<span class="devsite-syntax-c1">// Request to report the impression with the ReportImpressionRequest</span>
<span class="devsite-syntax-n">adSelectionManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">reportInteraction</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-n">reportImpressionRequest</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-n">executor</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-n">outcomeReceiver</span><span class="devsite-syntax-p">);</span>
</code></pre></devsite-code>
<p>Initialize the <a href="https://developer.android.com/design-for-safety/privacy-sandbox/reference/adservices/adselection/ReportInteractionRequest"><code translate="no" dir="ltr">ReportInteractionRequest</code></a> with the following required
parameters:</p>

<ul>
<li><strong>Ad selection ID</strong>: An ad selection ID retrieved from a previously returned
<code translate="no" dir="ltr">AdSelectionOutcome</code>.</li>
<li><strong>Interaction Key</strong>: A string key defined by the client describing the action
being reported. This must match the key that was registered by the seller or
buyer in the reporting JavaScript functions.</li>
<li><strong>Interaction Data</strong>: A string containing data to be included with the event
report, to be POSTed back to the reporting servers.</li>
<li><strong>Reporting Destinations</strong>: A bit mask specifying if the events should be
reported to the buyer, seller, or both. These flags are provided by the
platform and the final destination mask can be created using bitwise
operations. To report to one destination, you can use the flag provided by the
platform directly. To report to multiple destinations, you can use the bitwise
OR (<code translate="no" dir="ltr">|</code>) to combine flag values.</li>
</ul>

<p>The asynchronous <code translate="no" dir="ltr">reportInteraction()</code> method uses the <a href="https://developer.android.com/reference/android/os/OutcomeReceiver"><code translate="no" dir="ltr">OutcomeReceiver</code></a>
object to signal the result of the API call.</p>

<ul>
<li>The <code translate="no" dir="ltr">onResult()</code> callback indicates the report interaction call is valid.</li>
<li>The <code translate="no" dir="ltr">onError()</code> callback indicates the following possible conditions:
<ul>
<li>If the call is made when the app is running in the background, an
<code translate="no" dir="ltr">IllegalStateException</code> with a description of the failure is returned.</li>
<li>If the client is throttled from calling <code translate="no" dir="ltr">reportInteraction()</code>, a
<code translate="no" dir="ltr">LimitExceededException</code> is returned.</li>
<li>If the package is not enrolled to call the Privacy Preserving APIs, a
<code translate="no" dir="ltr">SecurityException()</code> is returned.</li>
<li>If the app reporting interactions is different from the app that called
<code translate="no" dir="ltr">selectAds()</code>, an <code translate="no" dir="ltr">IllegalStateException</code> is returned.</li>
</ul></li>
<li>If the user has not consented to enable the Privacy Sandbox APIs, the call
will fail silently.</li>
</ul>
<aside class="note"><strong>Note:</strong><span> The absence of errors does not mean that reporting has happened. Rather,
it is a guarantee that Protected Audience will attempt to report interactions at
some point.</span></aside>
<h3 id="interaction-reporting" data-text="Interaction reporting endpoints" tabindex="-1">Interaction reporting endpoints</h3>

<p>The report interaction API issues HTTPS POST requests to endpoints provided by
the sell-side platform and the winning buy-side platform. Protected Audience
will match the interaction keys with the URIs declared in reporting JavaScript
and issue a POST request to each endpoint for each interaction being reported.
The <code translate="no" dir="ltr">Content-Type</code> of the request is plain text with the body being the
Interaction Data.</p>

<h3 id="best_effort_interaction_reporting" data-text="Best effort Interaction reporting" tabindex="-1">Best effort Interaction reporting</h3>

<p>The <code translate="no" dir="ltr">reportInteraction()</code> is designed to offer a best-effort completion of
reporting through HTTP POST.</p>

<h2 id="daily-background-update" data-text="Daily background update" tabindex="-1">Daily background update</h2>

<p>When creating a custom audience, your app or SDK can initialize custom audience
metadata. Additionally, the platform can update the following pieces of custom
audience metadata with a daily background update process.</p>

<ul>
<li>User bidding signals</li>
<li>Trusted bidding data</li>
<li><code translate="no" dir="ltr">AdData</code> list</li>
</ul>

<p>This process queries against the Daily update URL defined in the custom audience
and the URL may return a JSON response.</p>

<ul>
<li>The JSON response may contain any of the supported metadata fields that needs
to be updated.</li>
<li>Each JSON field is validated independently. The client ignores any
malformed fields which results in no updates to that particular field in
the response.</li>
<li>An empty HTTP response or an empty JSON object &quot;<code translate="no" dir="ltr">{}</code>&quot; results in no
metadata updates.</li>
<li>The response message size must be limited to 10 KB.</li>
<li>All URIs are required to use HTTPS.</li>
<li><code translate="no" dir="ltr">trusted_bidding_uri</code> must share the same ETLD+1 as the buyer.</li>
</ul>

<p>Example: JSON response for background daily update</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JSON"><code translate="no" dir="ltr"><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"user_bidding_signals"</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">...</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">},</span><span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// Valid JSON object</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-nt">"trusted_bidding_data"</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-nt">"trusted_bidding_uri"</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">'example</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">dsp</span><span class="devsite-syntax-mi">1-</span><span class="devsite-syntax-err">key</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">value</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">service.com'</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-nt">"trusted_bidding_keys"</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">'campaig</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-mi">123</span><span class="devsite-syntax-err">'</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">'campaig</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-mi">456</span><span class="devsite-syntax-err">'</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">...</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">]</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">},</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-err">'ads'</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-nt">"render_uri"</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">'www.example</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">dsp</span><span class="devsite-syntax-mf">1.</span><span class="devsite-syntax-err">com/.../campaig</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-mf">123.</span><span class="devsite-syntax-err">h</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">ml'</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-err">'me</span><span class="devsite-syntax-kc">ta</span><span class="devsite-syntax-err">da</span><span class="devsite-syntax-kc">ta</span><span class="devsite-syntax-err">'</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">...</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">}</span><span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// Valid JSON object</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">},</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-nt">"render_uri"</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">'www.example</span><span class="devsite-syntax-mi">-</span><span class="devsite-syntax-err">dsp</span><span class="devsite-syntax-mf">1.</span><span class="devsite-syntax-err">com/.../campaig</span><span class="devsite-syntax-kc">n</span><span class="devsite-syntax-mf">456.</span><span class="devsite-syntax-err">h</span><span class="devsite-syntax-kc">t</span><span class="devsite-syntax-err">ml'</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">            </span><span class="devsite-syntax-err">'me</span><span class="devsite-syntax-kc">ta</span><span class="devsite-syntax-err">da</span><span class="devsite-syntax-kc">ta</span><span class="devsite-syntax-err">'</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-err">...</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">}</span><span class="devsite-syntax-w">  </span><span class="devsite-syntax-c1">// Valid JSON object</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">},</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-err">...</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">]</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<h2 id="javascript-ad" data-text="JavaScript for ad selection" tabindex="-1">JavaScript for ad selection</h2>

<p>The ad selection workflow orchestrates the execution of buyer-provided and
seller-provided JavaScript.</p>

<p>Buyer-provided JavaScript is fetched from the Bidding logic URL specified in the
custom audience. The returned JavaScript should include the following functions:</p>

<ul>
<li><a href="#generatebid"><code translate="no" dir="ltr">generateBid()</code></a></li>
<li><a href="#reportwin"><code translate="no" dir="ltr">reportWin()</code></a></li>
</ul>

<p>Seller-provided JavaScript is fetched from the decision logic URL specified in
the <a href="https://developer.android.com/reference/android/adservices/adselection/AdSelectionConfig"><code translate="no" dir="ltr">AdSelectionConfig</code></a> parameter for the ad selection API. The returned
JavaScript should include the following functions:</p>

<ul>
<li><a href="#reportresult"><code translate="no" dir="ltr">scoreAd()</code></a></li>
<li><a href="#scoread"><code translate="no" dir="ltr">reportResult()</code></a></li>
</ul>

<h3 id="generatebid" data-text="generateBid()" tabindex="-1">generateBid()</h3>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JavaScript"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">function</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">generateBid</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nx">ad</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nx">auction_signals</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nx">per_buyer_signals</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nx">trusted_bidding_signals</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nx">contextual_signals</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nx">user_signals</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nx">custom_audience_bidding_signals</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-k">return</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span><span class="devsite-syntax-s1">'status'</span><span class="devsite-syntax-o">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mf">0</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s1">'ad'</span><span class="devsite-syntax-o">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">ad</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s1">'bid'</span><span class="devsite-syntax-o">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">ad</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">metadata</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-nx">result</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">};</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<p>Input parameters:</p>

<ul>
<li><code translate="no" dir="ltr">ad</code>: a JSON object with the format
<code translate="no" dir="ltr">var ad = { &#39;render_url&#39;: url, &#39;metadata&#39;: json_metadata };</code></li>
<li><code translate="no" dir="ltr">auction_signals, per_buyer_signals</code>: JSON objects specified in the auction
configuration object</li>
<li><p><code translate="no" dir="ltr">custom_audience_bidding_signals</code>: JSON object generated by the platform. The
format for this JSON object is:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JavaScript"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">var</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">custom_audience_signals</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-s2">"owner"</span><span class="devsite-syntax-o">:</span><span class="devsite-syntax-s2">"ca_owner"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-s2">"buyer"</span><span class="devsite-syntax-o">:</span><span class="devsite-syntax-s2">"ca_buyer"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-s2">"name"</span><span class="devsite-syntax-o">:</span><span class="devsite-syntax-s2">"ca_name"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-s2">"activation_time"</span><span class="devsite-syntax-o">:</span><span class="devsite-syntax-s2">"ca_activation_time_epoch_ms"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-s2">"expiration_time"</span><span class="devsite-syntax-o">:</span><span class="devsite-syntax-s2">"ca_expiration_time_epoch_ms"</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-s2">"user_bidding_signals"</span><span class="devsite-syntax-o">:</span><span class="devsite-syntax-s2">"ca_user_bidding_signals"</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<p>where:</p>

<ul>
<li><code translate="no" dir="ltr">owner</code>, <code translate="no" dir="ltr">buyer</code>, and <code translate="no" dir="ltr">name</code> are string taken from the properties with the
same name of the Custom Audience participating to the ad selection</li>
<li><code translate="no" dir="ltr">activation_time</code> and <code translate="no" dir="ltr">expiration_time</code> are the time of activation and
expiration of the custom audience, expressed as seconds since the <a href="https://en.wikipedia.org/wiki/Unix_time">Unix
epoch</a></li>
<li><code translate="no" dir="ltr">ca_user_bidding_signals</code> is a JSON string specified in the
<code translate="no" dir="ltr">userBiddingSignals</code> field of the <a href="https://developer.android.com/reference/android/adservices/customaudience/CustomAudience"><code translate="no" dir="ltr">CustomAudience</code></a> at creation time</li>
<li><code translate="no" dir="ltr">trusted_bidding_signals, contextual_signals</code>, and <code translate="no" dir="ltr">user_signals</code> are JSON
objects. They are passed as empty objects and will be filled up in
future releases. Their format is not enforced by the platform and is managed
by the ad tech.</li>
</ul></li>
</ul>

<p>Result:</p>

<ul>
<li><code translate="no" dir="ltr">ad</code>: is the ad the bid refers to. The script is allowed to return a copy of
the ad it received with different metadata. The <code translate="no" dir="ltr">render_url</code> property of the
ad is expected to be unaltered.</li>
<li><code translate="no" dir="ltr">bid</code>: a float value representing the bid value for this ad</li>
<li><code translate="no" dir="ltr">status</code>: an integer value that can be:
<ul>
<li><code translate="no" dir="ltr">0</code>: for a successful execution</li>
<li><code translate="no" dir="ltr">1</code>: (or any non-zero value) in case any of the input signals is invalid. In
case a non-zero value is returned by generate-bid the bidding process is
invalidated for all the CA ads</li>
</ul></li>
</ul>

<h3 id="scoread" data-text="scoreAd()" tabindex="-1">scoreAd()</h3>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JavaScript"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">function</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">scoreAd</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nx">ad</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nx">bid</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nx">ad_selection_config</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nx">seller_signals</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nx">trusted_scoring_signals</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nx">contextual_signal</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nx">user_signal</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nx">custom_audience_signal</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-k">return</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span><span class="devsite-syntax-s1">'status'</span><span class="devsite-syntax-o">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mf">0</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s1">'score'</span><span class="devsite-syntax-o">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">score</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">};</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<p>Input parameters:</p>

<ul>
<li><code translate="no" dir="ltr">ad</code>: see the <code translate="no" dir="ltr">generateBid</code> documentation</li>
<li><code translate="no" dir="ltr">bid</code>: the bid value for the ad</li>
<li><p><code translate="no" dir="ltr">ad_selection_config</code>: a JSON object representing the
<a href="https://developer.android.com/reference/android/adservices/adselection/AdSelectionConfig"><code translate="no" dir="ltr">AdSelectionConfig</code></a> parameter of the <code translate="no" dir="ltr">selectAds</code> API. The format
is:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JavaScript"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">var</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">ad_selection_config</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-s1">'seller'</span><span class="devsite-syntax-o">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s1">'seller'</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-s1">'decision_logic_url'</span><span class="devsite-syntax-o">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s1">'url_of_decision_logic'</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-s1">'custom_audience_buyers'</span><span class="devsite-syntax-o">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-s1">'buyer1'</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s1">'buyer2'</span><span class="devsite-syntax-p">],</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-s1">'auction_signals'</span><span class="devsite-syntax-o">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">auction_signals</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-s1">'per_buyer_signals'</span><span class="devsite-syntax-o">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">per_buyer_signals</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-s1">'contextual_ads'</span><span class="devsite-syntax-o">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">[</span><span class="devsite-syntax-nx">ad1</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">ad2</span><span class="devsite-syntax-p">]</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code></li>
<li><p><code translate="no" dir="ltr">seller_signals</code>: JSON objects read from the <code translate="no" dir="ltr">sellerSignals</code>
<a href="https://developer.android.com/reference/android/adservices/adselection/AdSelectionConfig"><code translate="no" dir="ltr">AdSelectionConfig</code></a> API parameter</p></li>
<li><p><code translate="no" dir="ltr">trusted_scoring_signal</code>: read from the <code translate="no" dir="ltr">adSelectionSignals</code> field in the
<a href="https://developer.android.com/reference/android/adservices/adselection/AdSelectionConfig"><code translate="no" dir="ltr">AdSelectionConfig</code></a> API parameter</p></li>
<li><p><code translate="no" dir="ltr">contextual_signals, user_signals</code>: JSON objects. They are passed as
empty objects and will be filled up in future releases. Their format is not
enforced by the platform and is managed by the ad tech.</p></li>
<li><p><code translate="no" dir="ltr">per_buyer_signals</code>: JSON object read from the <code translate="no" dir="ltr">perBuyerSignal</code> map in the
<a href="https://developer.android.com/reference/android/adservices/adselection/AdSelectionConfig"><code translate="no" dir="ltr">AdSelectionConfig</code></a> API parameter using as key the current Custom
Audience buyer. Empty if the map doesn&#39;t contain any entry for the given
buyer.</p></li>
</ul>

<p>Output:</p>

<ul>
<li><code translate="no" dir="ltr">score</code>: a float value representing the score value for this ad</li>
<li><code translate="no" dir="ltr">status</code>: an integer value that can be:
<ul>
<li>0: for a successful execution</li>
<li>1: in case the <code translate="no" dir="ltr">customAudienceSignals</code> are invalid</li>
<li>2: in case the <a href="https://developer.android.com/reference/android/adservices/adselection/AdSelectionConfig"><code translate="no" dir="ltr">AdSelectionConfig</code></a> is invalid</li>
<li>3: in case any of the other signals is invalid</li>
<li>Any non-zero value causes the failure of the process, the value
determines the type of exception thrown</li>
</ul></li>
</ul>

<h3 id="selectoutcome" data-text="selectOutcome()" tabindex="-1">selectOutcome()</h3>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JavaScript"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">function</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">selectOutcome</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nx">outcomes</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nx">selection_signals</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-k">return</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span><span class="devsite-syntax-s1">'status'</span><span class="devsite-syntax-o">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mf">0</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s1">'result'</span><span class="devsite-syntax-o">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-kc">null</span><span class="devsite-syntax-p">};</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<p>Input parameters:</p>

<ul>
<li><code translate="no" dir="ltr">outcomes</code>: a JSON object <code translate="no" dir="ltr">{&quot;id&quot;: id_string, &quot;bid&quot;: bid_double}</code></li>
<li><code translate="no" dir="ltr">selection_signals</code>: JSON objects specified in the auction configuration
object</li>
</ul>

<p>Output:</p>

<ul>
<li><code translate="no" dir="ltr">status</code>: <code translate="no" dir="ltr">0</code> for success, non-zero for failure</li>
<li><code translate="no" dir="ltr">result</code>: one of the outcomes passed in or null</li>
</ul>

<h3 id="reportresult" data-text="reportResult()" tabindex="-1">reportResult()</h3>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JavaScript"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">function</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">reportResult</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-nx">ad_selection_config</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">render_url</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">bid</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">contextual_signals</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-k">return</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-s1">'status'</span><span class="devsite-syntax-o">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">status</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">      </span><span class="devsite-syntax-s1">'results'</span><span class="devsite-syntax-o">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span><span class="devsite-syntax-s1">'signals_for_buyer'</span><span class="devsite-syntax-o">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">signals_for_buyer</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s1">'reporting_url'</span><span class="devsite-syntax-o">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">reporting_url</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">}</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-p">};</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<p>Input parameters:</p>

<ul>
<li><code translate="no" dir="ltr">ad_selection_config</code>: see the documentation of <code translate="no" dir="ltr">scoreAds</code></li>
<li><code translate="no" dir="ltr">render_url</code>: the render URL of the winning ad</li>
<li><code translate="no" dir="ltr">bid</code>: the bid offered for the winning ad</li>
<li><code translate="no" dir="ltr">contextual_signals</code>: see the documentation of <code translate="no" dir="ltr">generateBid</code></li>
</ul>

<p>Output:</p>

<ul>
<li><code translate="no" dir="ltr">status: 0</code> for success and non-zero for failure</li>
<li><code translate="no" dir="ltr">results</code>: a JSON objects containing:
<ul>
<li><code translate="no" dir="ltr">signals_for_buyer</code>: a JSON object that is passed to the <code translate="no" dir="ltr">reportWin</code>
function</li>
<li><code translate="no" dir="ltr">reporting_url</code>: a URL that is used by the platform to notify the
impression to the buyer</li>
</ul></li>
</ul>

<h3 id="reportwin" data-text="reportWin()" tabindex="-1">reportWin()</h3>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JavaScript"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">function</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">reportWin</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-nx">ad_selection_signals</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-nx">per_buyer_signals</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-nx">signals_for_buyer</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-nx">contextual_signals</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-nx">custom_audience_signals</span><span class="devsite-syntax-p">)</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">   </span><span class="devsite-syntax-k">return</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span><span class="devsite-syntax-s1">'status'</span><span class="devsite-syntax-o">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-mf">0</span><span class="devsite-syntax-p">,</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s1">'results'</span><span class="devsite-syntax-o">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span><span class="devsite-syntax-s1">'reporting_url'</span><span class="devsite-syntax-o">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">reporting_url</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">}</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">};</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<p>Input parameters:</p>

<ul>
<li><code translate="no" dir="ltr">ad_selection_signals, per_buyer_signals</code>: see the documentation for
<a href="#reportresult"><code translate="no" dir="ltr">scoreAd</code></a></li>
<li><code translate="no" dir="ltr">signals_for_buyer</code>: a JSON object returned by <code translate="no" dir="ltr">reportResult</code></li>
<li><code translate="no" dir="ltr">contextual_signals, custom_audience_signals</code>: see the documentation for
<code translate="no" dir="ltr">generateBid</code></li>
</ul>

<p>Output:</p>

<ul>
<li><code translate="no" dir="ltr">status: 0</code> for success and non-zero for failure</li>
<li><code translate="no" dir="ltr">results</code>: a JSON object containing:
<ul>
<li><code translate="no" dir="ltr">reporting_url</code>: a URL that is used by the platform to notify the
impression to the seller</li>
</ul></li>
</ul>

<h4 id="registeradbeacon" data-text="registerAdBeacon()" tabindex="-1">registerAdBeacon()</h4>
<aside class="note"><strong>Note:</strong><span> This function is provided by the Android platform and shouldn&#39;t be
implemented by ad tech.</span></aside><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JavaScript"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">function</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">registerAdBeacon</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-nx">beacons</span>
<span class="devsite-syntax-p">)</span>
</code></pre></devsite-code>
<p><strong>Input Parameters</strong>:</p>

<ul>
<li><p><code translate="no" dir="ltr">beacons</code>: An object containing key-value pairs of interaction keys and
reporting URIs. The format is:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JavaScript"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">let</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">beacons</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-s1">'interaction_key'</span><span class="devsite-syntax-o">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s1">'reporting_uri'</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-s1">'interaction_key'</span><span class="devsite-syntax-o">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s1">'reporting_uri'</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">...</span>
<span class="devsite-syntax-p">}</span>
</code></pre></devsite-code>
<ul>
<li><code translate="no" dir="ltr">interaction_key</code>: A string representing the event. This is used by the
platform later when reporting event interactions to look up the
<code translate="no" dir="ltr">reporting_uri</code> that should be notified. This key needs to match between
what the buyer or seller is registering, and what the seller is reporting.</li>
<li><code translate="no" dir="ltr">reporting_uri</code>: A URI to receive event reports. This should be specific
to the event type being reported. It must accept a POST request to handle
any data reported along with the event.</li>
</ul>

<p>For example:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="JavaScript"><code translate="no" dir="ltr"><span class="devsite-syntax-w">  </span><span class="devsite-syntax-kd">let</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nx">beacons</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-p">{</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-s1">'click'</span><span class="devsite-syntax-o">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s1">'https://reporting.example.com/click_event'</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-s1">'view'</span><span class="devsite-syntax-o">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-s1">'https://reporting.example.com/view_event'</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-p">}</span>
</code></pre></devsite-code></li>
</ul>

<h2 id="ad-selection" data-text="Ad Selection prebuilt URIs" tabindex="-1">Ad Selection prebuilt URIs</h2>

<p>Prebuilt URIs give ad techs the ability to appoint JavaScript functions for ad
selection decision logic in the <code translate="no" dir="ltr">AdSelectionConfig</code> and
<code translate="no" dir="ltr">AdSelectionFromOutcomesConfig</code> classes. Prebuilt URIs don&#39;t require network
calls to download the corresponding JavaScript. Ad techs can use prebuilt URIs
without having to set up an enrolled domain to host the JavaScript.</p>

<p>A prebuilt URI is constructed using the following format:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Bash Session"><code translate="no" dir="ltr"><span class="devsite-syntax-go">ad-selection-prebuilt:&lt;use-case&gt;/&lt;name&gt;?&lt;required-script-generation-parameters&gt;</span>
</code></pre></devsite-code>
<p>The Privacy Sandbox platform provides JavaScript using the information from this
URI in the runtime.</p>

<p>An <code translate="no" dir="ltr">IllegalArgumentException</code> is thrown if:</p>

<ul>
<li>any of the required parameters are not present in the URI</li>
<li>there are unrecognized parameters in the URI</li>
</ul>

<h3 id="supported-prebuilt" data-text="Supported prebuilt URI use cases and names" tabindex="-1">Supported prebuilt URI use cases and names</h3>

<h3 id="use-case-1" data-text="Use case 1: ad-selection" tabindex="-1">Use case 1: ad-selection</h3>

<p>Prebuilt URIs under the <code translate="no" dir="ltr">ad-selection</code> use case are supported in the
<code translate="no" dir="ltr">selectAds(AdSelectionConfig)</code> flow.</p>

<p><strong>Prebuilt URI name: <code translate="no" dir="ltr">highest-bid-wins</code></strong></p>

<p>This prebuilt URI provides a JavaScript that picks the ad with the highest bid
after bidding. It also provides a basic reporting function to report the
winner&#39;s <code translate="no" dir="ltr">render_uri</code> and <code translate="no" dir="ltr">bid</code>.</p>

<p><strong>Required parameters</strong></p>

<p><code translate="no" dir="ltr">reportingUrl</code>: The base reporting URL that is parameterized with the
<code translate="no" dir="ltr">render_uri</code> and the <code translate="no" dir="ltr">bid</code> of the winning ad:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Bash Session"><code translate="no" dir="ltr">&lt;<span class="devsite-syntax-go">reportingUrl&gt;?render_uri=&lt;renderUriOfWinnigAd&gt;&amp;bid=&lt;bidOfWinningAd&gt;</span>
</code></pre></devsite-code>
<p><strong>Usage</strong></p>

<p>If your base reporting URL is <code translate="no" dir="ltr">https://www.ssp.com/reporting</code> then the prebuilt
URI would be:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Bash Session"><code translate="no" dir="ltr"><span class="devsite-syntax-go">`ad-selection-prebuilt://ad-selection/highest-bid-wins/?reportingUrl=https://www.ssp.com/reporting`</span>
</code></pre></devsite-code>
<h3 id="use-case-2" data-text="Use case 2: ad-selection-from-outcomes" tabindex="-1">Use case 2: ad-selection-from-outcomes</h3>

<p>Prebuilt URIs under the <code translate="no" dir="ltr">ad-selection-from-outcomes</code> use case support the
<code translate="no" dir="ltr">selectAds(AdSelectionFromOutcomesConfig)</code> workflow.</p>

<p><strong>Prebuilt URI name: <code translate="no" dir="ltr">waterfall-mediation-truncation</code></strong></p>

<p>The <code translate="no" dir="ltr">waterfall-mediation-truncation</code> prebuilt URI provides JavaScript that
implements waterfall mediation truncation logic where the JavaScript returns
a first-party ad if the <code translate="no" dir="ltr">bid</code> is higher then or equal to the <code translate="no" dir="ltr">bid floor</code>, and
otherwise returns <code translate="no" dir="ltr">null</code>.</p>

<p><strong>Required parameters</strong></p>

<p><code translate="no" dir="ltr">bidFloor</code>: The key of the bid floor value passed in the <code translate="no" dir="ltr">getSelectionSignals()</code>
that is compared against the mediation SDK&#39;s ad.</p>

<p><strong>Usage</strong></p>

<p>If your ad selection signals look like <code translate="no" dir="ltr">{&quot;bid_floor&quot;: 10}</code> then the resulting
prebuilt URI would be:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Bash Session"><code translate="no" dir="ltr"><span class="devsite-syntax-go">`ad-selection-prebuilt://ad-selection-from-outcomes/waterfall-mediation-truncation/?bidFloor=bid_floor`</span>
</code></pre></devsite-code>
<h2 id="testing" data-text="Testing" tabindex="-1">Testing</h2>



<p>To help you get started with the Protected Audience API, we&#39;ve created sample
apps in Kotlin and Java, which can be found on <a href="https://github.com/android/privacy-sandbox-samples/tree/main/Fledge">GitHub</a>.</p>



<h3 id="prerequisites" data-text="Prerequisites" tabindex="-1">Prerequisites</h3>

<p>The Protected Audience API requires some JavaScript during ad selection and
impression reporting. There are two methods of providing this JavaScript in a
testing environment:</p>

<ul>
<li>Run a server with the required HTTPS endpoints that returns the JavaScript</li>
<li>Override remote fetching by providing the necessary code from a local source</li>
</ul>

<p>Either approach requires setting up an HTTPS endpoint to handle impression
reporting.</p>

<h3 id="https-endpoints" data-text="HTTPS endpoints" tabindex="-1">HTTPS endpoints</h3>

<p>To test ad selection and impression reporting, you need to set up 7 HTTPS
endpoints that your test device or emulator can access:</p>

<ol>
<li>Buyer endpoint that serves the bidding logic JavaScript.</li>
<li>An endpoint that serves the bidding signals.</li>
<li>Seller endpoint that serves the decision logic JavaScript.</li>
<li>An endpoint that serves scoring signals.</li>
<li>Winning buyer impression reporting endpoint.</li>
<li>Seller impression reporting endpoint.</li>
<li>An endpoint to serve the daily updates for a custom audience.</li>
</ol>



<p>For convenience, the GitHub repository provides basic JavaScript code for testing
purposes. It also includes OpenAPI service definitions which can be deployed to
a supported mock or microservices platform. For more details, see the project
<a href="https://github.com/android/privacy-sandbox-samples/tree/main/Fledge">README</a>.</p>



<h3 id="override-remote" data-text="Override remote fetching of JavaScript" tabindex="-1">Override remote fetching of JavaScript</h3>

<p>This feature is intended to be used for end-to-end testing. To override remote
fetching, your app must run in debug mode with developer options enabled.</p>

<p>To enable debug mode for your application, add the following line to the
application attribute in your AndroidManifest.xml:</p>
<div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="XML"><code translate="no" dir="ltr">&lt;application
<span class="devsite-syntax-w">  </span>android:debuggable="true"&gt;
</code></pre></devsite-code><aside class="note"><strong>Note:</strong><span> Make sure to remove <code translate="no" dir="ltr">android:debuggable=&quot;true</code>&quot; before you ship your
application.</span></aside>


<p>For an example of how to use these overrides, see the <a href="https://github.com/android/privacy-sandbox-samples/tree/main/Fledge">the Protected
Audience API sample app</a> on GitHub.</p>

<p>You need to add your own custom JavaScript to handle ad selection routines such
as bidding, scoring decisions, and reporting. You can find basic JavaScript code
examples that handle all required requests in the <a href="https://github.com/android/privacy-sandbox-samples/tree/main/Fledge">GitHub repo</a>.
The Protected Audience API sample application demonstrates how to read code from
that file and prepare it for use as an override.</p>

<p>It is possible to override sell-side and buy-side JavaScript fetching
independently, though you need an HTTPS endpoint to serve any JavaScript
you aren&#39;t providing overrides for. See the <a href="https://github.com/android/privacy-sandbox-samples/tree/main/Fledge">README</a> for
information about how to set up a server that handles these cases.</p>



<p>It is only possible to override JavaScript fetching for custom audiences that
are owned by your package.</p>

<h3 id="override-sell-side" data-text="Override sell-side JavaScript" tabindex="-1">Override sell-side JavaScript</h3>

<p>To set up an override of sell-side JavaScript, do the following as demonstrated
in the following code example:</p>

<ol>
<li>Initialize an <a href="https://developer.android.com/reference/android/adservices/adselection/AdSelectionManager"><code translate="no" dir="ltr">AdSelectionManager</code></a> object.</li>
<li>Get a reference to <a href="https://developer.android.com/design-for-safety/privacy-sandbox/reference/adservices/customaudience/TestCustomAudienceManager"><code translate="no" dir="ltr">TestAdSelectionManager</code></a> from the
<code translate="no" dir="ltr">AdSelectionManager</code> object.</li>
<li>Build an <a href="https://developer.android.com/reference/android/adservices/adselection/AdSelectionConfig"><code translate="no" dir="ltr">AdSelectionConfig</code></a> object.</li>
<li>Build an <a href="https://developer.android.com/design-for-safety/privacy-sandbox/reference/adservices/adselection/AddAdSelectionOverrideRequest"><code translate="no" dir="ltr">AddAdSelectionOverrideRequest</code></a> with the
<a href="https://developer.android.com/reference/android/adservices/adselection/AdSelectionConfig"><code translate="no" dir="ltr">AdSelectionConfig</code></a> object and a <code translate="no" dir="ltr">String</code> representing the JavaScript
you intend to use as an override.</li>
<li>Call the asynchronous <code translate="no" dir="ltr">overrideAdSelectionConfigRemoteInfo()</code> method with the
<a href="https://developer.android.com/design-for-safety/privacy-sandbox/reference/adservices/adselection/AddAdSelectionOverrideRequest"><code translate="no" dir="ltr">AddAdSelectionOverrideRequest</code></a> object and relevant <a href="https://developer.android.com/reference/java/util/concurrent/Executor"><code translate="no" dir="ltr">Executor</code></a>
and <a href="https://developer.android.com/reference/android/os/OutcomeReceiver"><code translate="no" dir="ltr">OutcomeReceiver</code></a> objects.</li>
</ol>
<div class="ds-selector-tabs" data-ds-scope="code-sample">
<section><h3 id="kotlin_19" data-text="Kotlin" tabindex="-1">Kotlin</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">testAdSelectionManager</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">TestAdSelectionManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-n">context</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getSystemService</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">AdSelectionManager</span><span class="devsite-syntax-o">::</span><span class="devsite-syntax-n">class</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">java</span><span class="devsite-syntax-p">).</span><span class="devsite-syntax-na">getTestAdSelectionManager</span><span class="devsite-syntax-p">()</span>

<span class="devsite-syntax-c1">// Initialize AdSelectionConfig =</span>
<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">adSelectionConfig</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">AdSelectionConfig</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setSeller</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">seller</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setDecisionLogicUrl</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">decisionLogicUrl</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setCustomAudienceBuyers</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">customAudienceBuyers</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setAdSelectionSignals</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">adSelectionSignals</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setSellerSignals</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">sellerSignals</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setPerBuyerSignals</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">perBuyerSignals</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">()</span>

<span class="devsite-syntax-c1">// Initialize AddAddSelectionOverrideRequest</span>
<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">request</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">AddAdSelectionOverrideRequest</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setAdSelectionConfig</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">adSelectionConfig</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setDecisionLogicJs</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">decisionLogicJS</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">()</span>

<span class="devsite-syntax-c1">// Run the call to override the JavaScript for the given AdSelectionConfig</span>
<span class="devsite-syntax-c1">// Note that this only takes effect in apps marked as debuggable</span>
<span class="devsite-syntax-n">testAdSelectionManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">overrideAdSelectionConfigRemoteInfo</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">request</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">executor</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">outComeReceiver</span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code></section>
<section><h3 id="java_19" data-text="Java" tabindex="-1">Java</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Java"><code translate="no" dir="ltr"><span class="devsite-syntax-n">TestAdSelectionManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">testAdSelectionManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-n">context</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getSystemService</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">AdSelectionManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">class</span><span class="devsite-syntax-p">).</span><span class="devsite-syntax-na">getTestAdSelectionManager</span><span class="devsite-syntax-p">();</span>

<span class="devsite-syntax-c1">// Initialize AdSelectionConfig =</span>
<span class="devsite-syntax-n">AdSelectionConfig</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">adSelectionConfig</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-k">new</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">AdSelectionConfig</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setSeller</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">seller</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setDecisionLogicUrl</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">decisionLogicUrl</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setCustomAudienceBuyers</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">customAudienceBuyers</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setAdSelectionSignals</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">adSelectionSignals</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setSellerSignals</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">sellerSignals</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setPerBuyerSignals</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">perBuyerSignals</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">();</span>

<span class="devsite-syntax-c1">// Initialize AddAddSelectionOverrideRequest</span>
<span class="devsite-syntax-n">AddAdSelectionOverrideRequest</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">request</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">AddAdSelectionOverrideRequest</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setAdSelectionConfig</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">adSelectionConfig</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setDecisionLogicJs</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">decisionLogicJS</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">();</span>

<span class="devsite-syntax-c1">// Run the call to override the JavaScript for the given AdSelectionConfig</span>
<span class="devsite-syntax-c1">// Note that this only takes effect in apps marked as debuggable</span>
<span class="devsite-syntax-n">testAdSelectionManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">overrideAdSelectionConfigRemoteInfo</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">request</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">executor</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">outComeReceiver</span><span class="devsite-syntax-p">);</span>
</code></pre></devsite-code></section>
</div>
<p>See the <a href="#run-ad">Run ad selection</a> section for more information about what each of
the fields in the <a href="https://developer.android.com/reference/android/adservices/adselection/AdSelectionConfig"><code translate="no" dir="ltr">AdSelectionConfig</code></a> represent. The key difference is
that the <strong>decisionLogicUrl</strong> can be set to a placeholder value as it will be
ignored.</p>



<p>In order to override the JavaScript used during ad selection, the
<code translate="no" dir="ltr">decisionLogicJs</code> must contain the proper seller-side <a href="#javascript-ad">function signatures</a>.
For an example of how to read a JavaScript file as a string, see the
<a href="https://github.com/android/privacy-sandbox-samples/tree/main/Fledge">Protected Audience API sample app</a> on GitHub.</p>



<p>The asynchronous <code translate="no" dir="ltr">overrideAdSelectionConfigRemoteInfo()</code> method uses the
<code translate="no" dir="ltr">OutcomeReceiver</code> object to signal the result of the API call.</p>

<p>The <code translate="no" dir="ltr">onResult()</code> callback signifies the override was applied successfully.
Future calls to <code translate="no" dir="ltr">selectAds()</code> will use whatever decision and reporting
logic you have passed in as the override.</p>

<p>The <code translate="no" dir="ltr">onError()</code> callback signifies two possible conditions:</p>

<ul>
<li>If the override is attempted with invalid arguments, the
<a href="https://developer.android.com/reference/android/adservices/exceptions/AdServicesException"><code translate="no" dir="ltr">AdServiceException</code></a> indicates an <code translate="no" dir="ltr">IllegalArgumentException</code> as the
cause.</li>
<li>If the override is attempted with an app not running in debug mode with
developer options enabled, the <a href="https://developer.android.com/reference/android/adservices/exceptions/AdServicesException"><code translate="no" dir="ltr">AdServiceException</code></a> indicates
<code translate="no" dir="ltr">IllegalStateException</code> as the cause.</li>
</ul>

<h3 id="reset-sell-side" data-text="Reset sell-side overrides" tabindex="-1">Reset sell-side overrides</h3>

<p>This section assumes that you have overridden the sell-side JavaScript and that
you have a reference to the <a href="https://developer.android.com/design-for-safety/privacy-sandbox/reference/adservices/adselection/TestAdSelectionManager"><code translate="no" dir="ltr">TestAdSelectionManager</code></a> and
<a href="https://developer.android.com/reference/android/adservices/adselection/AdSelectionConfig"><code translate="no" dir="ltr">AdSelectionConfig</code></a> used in the previous section.</p>

<p>In order to reset the overrides for all <a href="https://developer.android.com/reference/android/adservices/adselection/AdSelectionConfig"><code translate="no" dir="ltr">AdSelectionConfigs</code></a>:</p>

<ol>
<li>Call the asynchronous <code translate="no" dir="ltr">resetAllAdSelectionConfigRemoteOverrides()</code> method
with the relevant <a href="https://developer.android.com/reference/android/os/OutcomeReceiver"><code translate="no" dir="ltr">OutcomeReceiver</code></a> object.</li>
</ol>
<div class="ds-selector-tabs" data-ds-scope="code-sample">
<section><h3 id="kotlin_20" data-text="Kotlin" tabindex="-1">Kotlin</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-c1">// Resets overrides for all AdSelectionConfigs</span>
<span class="devsite-syntax-n">testAadSelectionManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">resetAllAdSelectionConfigRemoteOverrides</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-n">outComeReceiver</span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code></section>
<section><h3 id="java_20" data-text="Java" tabindex="-1">Java</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Java"><code translate="no" dir="ltr"><span class="devsite-syntax-c1">// Resets overrides for all AdSelectionConfigs</span>
<span class="devsite-syntax-n">testAdSelectionManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">resetAllAdSelectionConfigRemoteOverrides</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">outComeReceiver</span><span class="devsite-syntax-p">);</span>
</code></pre></devsite-code></section>
</div>
<p>After you reset sell-side overrides, calls to <code translate="no" dir="ltr">selectAds()</code> use whatever
<strong>decisionLogicUrl</strong> is stored in the <a href="https://developer.android.com/reference/android/adservices/adselection/AdSelectionConfig"><code translate="no" dir="ltr">AdSelectionConfig</code></a> to attempt to
fetch the required JavaScript.</p>

<p>If the call to <code translate="no" dir="ltr">resetAllAdSelectionConfigRemoteOverrides()</code> fails, the
<code translate="no" dir="ltr">OutComeReceiver.onError()</code> callback provides an <a href="https://developer.android.com/reference/android/adservices/exceptions/AdServicesException"><code translate="no" dir="ltr">AdServiceException</code></a>.
If the removal of overrides is attempted with an app not running in debug mode
with developer options enabled, <a href="https://developer.android.com/reference/android/adservices/exceptions/AdServicesException"><code translate="no" dir="ltr">AdServiceException</code></a> indicates
<code translate="no" dir="ltr">IllegalStateException</code> as the cause.</p>

<h3 id="override-buy-side" data-text="Override buy-side JavaScript" tabindex="-1">Override buy-side JavaScript</h3>

<ol>
<li>Follow the steps to <a href="#join-custom">join a custom audience</a></li>
<li>Build an <a href="https://developer.android.com/reference/android/adservices/customaudience/AddCustomAudienceOverrideRequest"><code translate="no" dir="ltr">AddCustomAudienceOverrideRequest</code></a> with the <strong>buyer</strong>
and <strong>name</strong> of the custom audience you need to override, in addition to the
bidding logic and data you want to use as an override.</li>
<li>Call the asynchronous <code translate="no" dir="ltr">overrideCustomAudienceRemoteInfo()</code> method with the
<a href="https://developer.android.com/reference/android/adservices/customaudience/AddCustomAudienceOverrideRequest"><code translate="no" dir="ltr">AddCustomAudienceOverrideRequest</code></a> object and relevant
<a href="https://developer.android.com/reference/java/util/concurrent/Executor"><code translate="no" dir="ltr">Executor</code></a> and <a href="https://developer.android.com/reference/android/os/OutcomeReceiver"><code translate="no" dir="ltr">OutcomeReceiver</code></a> objects.</li>
</ol>
<div class="ds-selector-tabs" data-ds-scope="code-sample">
<section><h3 id="kotlin_21" data-text="Kotlin" tabindex="-1">Kotlin</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">testCustomAudienceManager</span><span class="devsite-syntax-p">:</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">TestCustomAudienceManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-n">context</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getSystemService</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">CustomAudienceManager</span><span class="devsite-syntax-o">::</span><span class="devsite-syntax-n">class</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">java</span><span class="devsite-syntax-p">).</span><span class="devsite-syntax-na">getTestCustomAudienceManager</span><span class="devsite-syntax-p">()</span>

<span class="devsite-syntax-c1">// Join custom audience</span>

<span class="devsite-syntax-c1">// Build the AddCustomAudienceOverrideRequest</span>
<span class="devsite-syntax-kd">val</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-nv">request</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">AddCustomAudienceOverrideRequest</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setBuyer</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">buyer</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setName</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">name</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setBiddingLogicJs</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">biddingLogicJS</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setTrustedBiddingSignals</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">trustedBiddingSignals</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">()</span>

<span class="devsite-syntax-c1">// Run the call to override JavaScript for the given custom audience</span>
<span class="devsite-syntax-n">testCustomAudienceManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">overrideCustomAudienceRemoteInfo</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">request</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">executor</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">outComeReceiver</span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code></section>
<section><h3 id="java_21" data-text="Java" tabindex="-1">Java</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Java"><code translate="no" dir="ltr"><span class="devsite-syntax-n">TestCustomAudienceManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">testCustomAudienceManager</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">  </span><span class="devsite-syntax-n">context</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">getSystemService</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">CustomAudienceManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">class</span><span class="devsite-syntax-p">).</span><span class="devsite-syntax-na">getTestCustomAudienceManager</span><span class="devsite-syntax-p">();</span>

<span class="devsite-syntax-c1">// Join custom audience</span>

<span class="devsite-syntax-c1">// Build the AddCustomAudienceOverrideRequest</span>
<span class="devsite-syntax-n">AddCustomAudienceOverrideRequest</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-n">request</span><span class="devsite-syntax-w"> </span><span class="devsite-syntax-o">=</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">AddCustomAudienceOverrideRequest</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">Builder</span><span class="devsite-syntax-p">()</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setBuyer</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">buyer</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setName</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">name</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setBiddingLogicJs</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">biddingLogicJS</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">setTrustedBiddingSignals</span><span class="devsite-syntax-p">(</span><span class="devsite-syntax-n">trustedBiddingSignals</span><span class="devsite-syntax-p">)</span>
<span class="devsite-syntax-w">        </span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">build</span><span class="devsite-syntax-p">();</span>

<span class="devsite-syntax-c1">// Run the call to override JavaScript for the given custom audience</span>
<span class="devsite-syntax-n">testCustomAudienceManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">overrideCustomAudienceRemoteInfo</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">request</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">executor</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">outComeReceiver</span><span class="devsite-syntax-p">);</span>
</code></pre></devsite-code></section>
</div>
<p>The values for <strong>buyer</strong> and <strong>name</strong> are the same ones used to create
the custom audience. <a href="#join-custom">Learn more about these fields</a>.</p>

<p>Additionally, you can specify two additional parameters:</p>

<ul>
<li><strong><code translate="no" dir="ltr">biddingLogicJs</code></strong>: JavaScript that holds the buyer&#39;s logic that is used
during ad selection. See the required <a href="#javascript-ad">function signatures</a> in this
JavaScript.</li>
<li><strong><code translate="no" dir="ltr">trustedBiddingSignals</code></strong>: Bidding signals to be used during ad selection.
For testing purposes this can be an empty string.</li>
</ul>

<p>The asynchronous <code translate="no" dir="ltr">overrideCustomAudienceRemoteInfo()</code> method uses the
<a href="https://developer.android.com/reference/android/os/OutcomeReceiver"><code translate="no" dir="ltr">OutcomeReceiver</code></a> object to signal the result of the API call.</p>

<p>The <code translate="no" dir="ltr">onResult()</code> callback signifies the override was applied successfully.
Subsequent calls to <code translate="no" dir="ltr">selectAds()</code> use whatever bidding and reporting logic
you have passed in as the override.</p>

<p>The <code translate="no" dir="ltr">onError()</code> callback signifies two possible conditions.</p>

<ul>
<li>If the override is attempted with invalid arguments, the
<a href="https://developer.android.com/reference/android/adservices/exceptions/AdServicesException"><code translate="no" dir="ltr">AdServiceException</code></a> indicates an <code translate="no" dir="ltr">IllegalArgumentException</code> as the
cause.</li>
<li>If the override is attempted with an app not running in debug mode with
developer options enabled, the <a href="https://developer.android.com/reference/android/adservices/exceptions/AdServicesException"><code translate="no" dir="ltr">AdServiceException</code></a> indicates
<code translate="no" dir="ltr">IllegalStateException</code> as the cause.</li>
</ul>

<h3 id="reset-buy-side" data-text="Reset buy-side overrides" tabindex="-1">Reset buy-side overrides</h3>

<p>This section assumes that you have overridden the buy-side JavaScript and that
you have a reference to the <a href="https://developer.android.com/design-for-safety/privacy-sandbox/reference/adservices/adselection/TestAdSelectionManager"><code translate="no" dir="ltr">TestCustomAudienceManager</code></a> used in the
previous section.</p>

<p>To reset overrides for all custom audiences:</p>

<ol>
<li>Call the asynchronous <code translate="no" dir="ltr">resetAllCustomAudienceOverrides()</code> method with
relevant <a href="https://developer.android.com/reference/java/util/concurrent/Executor"><code translate="no" dir="ltr">Executor</code></a> and <a href="https://developer.android.com/reference/android/os/OutcomeReceiver"><code translate="no" dir="ltr">OutcomeReceiver</code></a> objects.</li>
</ol>
<div class="ds-selector-tabs" data-ds-scope="code-sample">
<section><h3 id="kotlin_22" data-text="Kotlin" tabindex="-1">Kotlin</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Kotlin"><code translate="no" dir="ltr"><span class="devsite-syntax-c1">// Resets overrides for all custom audiences</span>
<span class="devsite-syntax-n">testCustomAudienceManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">resetCustomAudienceRemoteInfoOverride</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">executor</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">outComeReceiver</span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code></section>
<section><h3 id="java_22" data-text="Java" tabindex="-1">Java</h3><div></div><devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Java"><code translate="no" dir="ltr"><span class="devsite-syntax-c1">// Resets overrides for all custom audiences</span>
<span class="devsite-syntax-n">testCustomAudienceManager</span><span class="devsite-syntax-p">.</span><span class="devsite-syntax-na">resetCustomAudienceRemoteInfoOverride</span><span class="devsite-syntax-p">(</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">executor</span><span class="devsite-syntax-p">,</span>
<span class="devsite-syntax-w">    </span><span class="devsite-syntax-n">outComeReceiver</span><span class="devsite-syntax-p">)</span>
</code></pre></devsite-code></section>
</div>
<p>After you reset buy-side overrides, subsequent calls to <code translate="no" dir="ltr">selectAds()</code>
use whatever <a href="https://developer.android.com/reference/android/adservices/customaudience/CustomAudience#getBiddingLogicUrl()"><strong><code translate="no" dir="ltr">biddingLogicUrl</code></strong></a> and <a href="https://developer.android.com/reference/android/adservices/customaudience/CustomAudience#getTrustedBiddingData()"><strong><code translate="no" dir="ltr">trustedBiddingData</code></strong></a> is
stored in the <a href="https://developer.android.com/reference/android/adservices/customaudience/CustomAudience"><code translate="no" dir="ltr">CustomAudience</code></a> to attempt to fetch the required
JavaScript.</p>

<p>If the call to <code translate="no" dir="ltr">resetCustomAudienceRemoteInfoOverride()</code> fails, the
<code translate="no" dir="ltr">OutComeReceiver.onError()</code> callback provides an <a href="https://developer.android.com/reference/android/adservices/exceptions/AdServicesException"><code translate="no" dir="ltr">AdServiceException</code></a>.
If the removal of overrides is attempted with an app not running in debug mode
with developer options enabled, the <a href="https://developer.android.com/reference/android/adservices/exceptions/AdServicesException"><code translate="no" dir="ltr">AdServiceException</code></a> indicates
<code translate="no" dir="ltr">IllegalStateException</code> as the cause.</p>

<h3 id="set-reporting" data-text="Set Up a Reporting Server" tabindex="-1">Set Up a Reporting Server</h3>



<p>When you use remote fetching overrides, you&#39;ll still need to set up a server
that your device or emulator can reach to respond to reporting events. An
endpoint that returns 200 is sufficient for testing. The GitHub repository includes
OpenAPI service definitions which can be deployed to a supported mock or
microservices platform. For more details, see the project
<a href="https://github.com/android/privacy-sandbox-samples/tree/main/Fledge">README</a>.</p>



<p>When looking for the OpenAPI definitions, look for the reporting-server.json.
This file contains an endpoint that returns 200, representing an HTTP
response code. This endpoint is used during <code translate="no" dir="ltr">selectAds()</code> and signals to
the Protected Audience API that impression reporting completed successfully.</p>

<h3 id="functionality-test" data-text="Functionality to test" tabindex="-1">Functionality to test</h3>

<ul>
<li>Exercise joining or leaving and setting up a custom audience based on prior
user actions.</li>
<li>Exercise the initiation of on-device ad selection through JavaScripts hosted
remotely.</li>
<li>Observe how an app&#39;s association with custom audience settings may affect ad
selection outcomes.</li>
<li>Exercise impression reporting after ad selection.</li>
</ul>

<h2 id="limitations" data-text="Limitations" tabindex="-1">Limitations</h2>

<p>The following table lists limitations for the Protected Audience API processing.
The limits presented could be subject to change based on feedback. For
in-progress capabilities, read the <a href="/overview/android-release-notes">release notes</a>.</p>

<table>
  <tr>
    <th>Component</th>
    <th>Limit Description</th>
    <th>Limit Value</th>
  </tr>
  <tr>
    <td rowspan="13"><strong>Custom audience (CA)</strong></td>
    <td>Maximum number of ads per CA</td>
    <td>100</td>
  </tr>
  <tr>
    <td>Maximum number of CAs per application</td>
    <td>1000</td>
  </tr>
  <tr>
    <td>Maximum number of apps that can create a CA</td>
    <td>1000</td>
  </tr>
  <tr>
    <td>Maximum delay in the activation time of a CA from its creation time</td>
    <td>60 days</td>
  </tr>
  <tr>
    <td>Maximum expiration time of a CA from its activation time</td>
    <td>60 days</td>
  </tr>
  <tr>
    <td>Maximum number of CAs on device</td>
    <td>4000</td>
  </tr>
  <tr>
    <td>Maximum size of CA name</td>
    <td>200 bytes</td>
  </tr>
  <tr>
    <td>Maximum size of daily fetch URI</td>
    <td>400 bytes</td>
  </tr>
  <tr>
    <td>Maximum size of bidding logic URI</td>
    <td>400 bytes</td>
  </tr>
  <tr>
    <td>Maximum size of trusted bidding data</td>
    <td>10 KB</td>
  </tr>
  <tr>
    <td>Maximum size of user bidding signals</td>
    <td>10 KB</td>
  </tr>
  <tr>
    <td>Maximum call rate for <code translate="no" dir="ltr">leaveCustomAudience</code> per buyer</td>
    <td>1 per second</td>
  </tr>
  <tr>
    <td>Maximum call rate for <code translate="no" dir="ltr">joinCustomAudience</code> per buyer</td>
    <td>1 per second</td>
  </tr>
  <tr>
    <td rowspan="5"><strong>CA Background Fetch</strong></td>
    <td>Connect timeout</td>
    <td>5 seconds</td>
  </tr>
  <tr>
    <td>HTTP read timeout</td>
    <td>30 seconds</td>
  </tr>
  <tr>
    <td>Maximum total download size</td>
    <td>10 KB</td>
  </tr>
  <tr>
    <td>Max duration of a fetch iteration</td>
    <td>5 minutes</td>
  </tr>
  <tr>
    <td>Maximum number of CAs updated per job</td>
    <td>1000</td>
  </tr>
  <tr>
    <td rowspan="12"><strong>Ad Selection</strong></td>
    <td>Maximum number of buyers</td>
    <td>TBD</td>
  </tr>
  <tr>
    <td>Maximum number of CAs per buyer</td>
    <td>TBD</td>
  </tr>
  <tr>
    <td>Maximum number of ads in an auction</td>
    <td>TBD</td>
  </tr>
  <tr>
    <td>Initial connection timeout</td>
    <td>5 seconds</td>
  </tr>
  <tr>
    <td>Connection read timeout</td>
    <td>5 seconds</td>
  </tr>
  <tr>
    <td>Maximum execution time of overall <code translate="no" dir="ltr">AdSelection</code></td>
    <td>10 seconds</td>
  </tr>
  <tr>
    <td>Maximum execution time of bidding per CA in <code translate="no" dir="ltr">AdSelection</code></td>
    <td>5 second</td>
  </tr>
  <tr>
    <td>Maximum execution time of scoring in <code translate="no" dir="ltr">AdSelection</code></td>
    <td>5 second</td>
  </tr>
  <tr>
    <td>Maximum execution time for per buyer in <code translate="no" dir="ltr">AdSelection</code></td>
    <td>TBD</td>
  </tr>
  <tr>
    <td>Maximum size of ad selection/seller/per buyer signals</td>
    <td>TBD</td>
  </tr>
  <tr>
    <td>Maximum size of seller/buyer scripts</td>
    <td>TBD</td>
  </tr>
  <tr>
    <td>Maximum call rate for <code translate="no" dir="ltr">selectAds</code></td>
    <td>1 QPS</td>
  </tr>
  <tr>
    <td rowspan="8"><strong>Impression reporting</strong></td>
    <td>Minimum time before removing ad selection from persistence</td>
    <td>24 hrs</td>
  </tr>
  <tr>
    <td>Maximum number of storage ad selections</td>
    <td>TBD</td>
  </tr>
  <tr>
    <td>Maximum size of reporting output URL</td>
    <td>TBD</td>
  </tr>
  <tr>
    <td>Maximum time for impression reporting</td>
    <td>TBD</td>
  </tr>
  <tr>
    <td>Maximum number of retries for notification calls</td>
    <td>TBD</td>
  </tr>
  <tr>
    <td>Connection timeout</td>
    <td>5 seconds</td>
  </tr>
  <tr>
    <td>Maximum overall execution time for <code translate="no" dir="ltr">reportImpression</code></td>
    <td>2 seconds</td>
  </tr>
  <tr>
    <td>Maximum call rate for <code translate="no" dir="ltr">reportImpressions</code></td>
    <td>1 QPS</td>
  </tr>
  <tr>
    <td><strong>Event reporting</strong></td>
    <td>Maximum number of beacons per buyer per auction</td>
    <td>10</td>
  </tr>
  <tr>
    <td></td>
    <td><p>Maximum number of beacons per seller per auction</p></td>
    <td><p>10</p></td>
  </tr>
  <tr>
    <td></td>
    <td><p>Maximum size of event key</p></td>
    <td><p>40 bytes</p></td>
  </tr>
  <tr>
    <td></td>
    <td><p>Maximum size of event data</p></td>
    <td><p>64KB</p></td>
  </tr>
  <tr>
    <td><strong>Ads</strong></td>
    <td>Maximum size of ad list</td>
    <td>10 KB shared by all
    <code translate="no" dir="ltr"><a href="https://developer.android.com/reference/android/adservices/common/AdData">AdData</a></code>
    in a single CA for contextual</td>
  </tr>
  <tr>
    <td><strong>URLs</strong></td>
    <td>Maximum length of any URL string taken as input</td>
    <td>TBD</td>
  </tr>
  <tr>
    <td rowspan="3"><strong>Javascript</strong></td>
    <td>Maximum execution time</td>
    <td>1 second for bidding and scoring for impression reporting</td>
  </tr>
  <tr>
    <td>Maximum memory used</td>
    <td>10 MB</td>
  </tr>
</table>

<h2 id="report-bugs" data-text="Report bugs and issues" tabindex="-1">Report bugs and issues</h2>

<p>Your feedback is a crucial part of the Privacy Sandbox on Android! Let us know
of any <a href="https://issuetracker.google.com/issues/new?component=1116743&amp;template=1642575">issues</a> you find or ideas for improving Privacy Sandbox on Android.</p>

<devsite-recommendations>

<h2 id="recommended_for_you" data-text="Recommended for you" tabindex="-1">Recommended for you</h2>

<ul>
<li>Note: link text is displayed when JavaScript is off</li>
<li><a href="/private-advertising/protected-audience/android">Support custom audience targeting with the Protected Audience API</a></li>
<li><a href="/overview/android-release-notes">Release notes</a></li>
<li><a href="/private-advertising/protected-audience/android/integration-guide">Protected Audience: integration guide</a></li>
</ul>

</devsite-recommendations>
  

  
    <devsite-hats-survey class="nocontent"
      hats-id="m3gEAgE90JYWReCDCni90QnmR6N2"
      listnr-id="Ph3Z2hnd9ArPaNcf6mtxnV"></devsite-hats-survey>
  
</div>

  
    
    
      
    <devsite-thumb-rating position="footer">
    </devsite-thumb-rating>
  
       
         <devsite-feedback
  position="footer"
  project-name="Privacy Sandbox"
  product-id="5335444"
  bucket=""
  context=""
  version="t-devsite-webserver-20250918-r00-rc00.472063434118731697"
  data-label="Send Feedback Button"
  track-type="feedback"
  track-name="sendFeedbackLink"
  track-metadata-position="footer"
  class="nocontent"
  
    disable-product-feedback
  
  
  
    
      project-icon="https://privacysandbox.google.com/static/privacy-sandbox-logo.svg"
    
  
  
  
  >

  <button>
  
    
    Send feedback
  
  </button>
</devsite-feedback>
       
    
    
  

  <div class="devsite-floating-action-buttons"></div></article>


<devsite-content-footer class="nocontent">
  <p>Except as otherwise noted, the content of this page is licensed under the <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 License</a>, and code samples are licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 License</a>. For details, see the <a href="https://developers.google.com/site-policies">Google Developers Site Policies</a>. Java is a registered trademark of Oracle and/or its affiliates.</p>
  <p>Last updated 2025-06-17 UTC.</p>
</devsite-content-footer>


<devsite-notification
>
</devsite-notification>


  
<div class="devsite-content-data">
  
    
    
    <template class="devsite-thumb-rating-feedback">
      <devsite-feedback
  position="thumb-rating"
  project-name="Privacy Sandbox"
  product-id="5335444"
  bucket=""
  context=""
  version="t-devsite-webserver-20250918-r00-rc00.472063434118731697"
  data-label="Send Feedback Button"
  track-type="feedback"
  track-name="sendFeedbackLink"
  track-metadata-position="thumb-rating"
  class="nocontent"
  
    disable-product-feedback
  
  
  
    
      project-icon="https://privacysandbox.google.com/static/privacy-sandbox-logo.svg"
    
  
  
  
  >

  <button>
  
    Need to tell us more?
  
  </button>
</devsite-feedback>
    </template>
  
  
    <template class="devsite-content-data-template">
      [[["Easy to understand","easyToUnderstand","thumb-up"],["Solved my problem","solvedMyProblem","thumb-up"],["Other","otherUp","thumb-up"]],[["Missing the information I need","missingTheInformationINeed","thumb-down"],["Too complicated / too many steps","tooComplicatedTooManySteps","thumb-down"],["Out of date","outOfDate","thumb-down"],["Samples / code issue","samplesCodeIssue","thumb-down"],["Other","otherDown","thumb-down"]],["Last updated 2025-06-17 UTC."],[],[],null,[]]
    </template>
  
</div>
            
          </devsite-content>
        </main>
        <devsite-footer-promos class="devsite-footer">
          
            
          
        </devsite-footer-promos>
        <devsite-footer-linkboxes class="devsite-footer">
          
            
<nav class="devsite-footer-linkboxes nocontent" aria-label="Footer links">
  
  <ul class="devsite-footer-linkboxes-list">
    
    <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading no-link">Get support</h3>
      <ul class="devsite-footer-linkbox-list">
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="https://github.com/privacysandbox/privacy-sandbox-dev-support"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 1)"
            >
            
          
            Ask a question on our GitHub support repo
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="https://goo.gle/privacy-sandbox-feedback"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 2)"
            >
            
              
              
            
          
            Submit project feedback
          
          </a>
          
          
        </li>
        
      </ul>
    </li>
    
    <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading no-link">Get updates</h3>
      <ul class="devsite-footer-linkbox-list">
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/blog"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 1)"
            >
            
          
            Developer blog
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="https://privacysandbox.com/news/"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 2)"
            >
            
              
              
            
          
            Project news
          
          </a>
          
          
        </li>
        
      </ul>
    </li>
    
    <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading no-link">Resources</h3>
      <ul class="devsite-footer-linkbox-list">
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="https://privacysandbox.com/"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 1)"
            >
            
          
            Project site
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="https://privacysandbox.com/open-web/#the-privacy-sandbox-timeline"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 2)"
            >
            
              
              
            
          
            Privacy Sandbox timeline
          
          </a>
          
          
        </li>
        
      </ul>
    </li>
    
    <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading no-link">Tools</h3>
      <ul class="devsite-footer-linkbox-list">
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="https://goo.gle/psat"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 1)"
            >
            
          
            Privacy Sandbox Analysis Tool
          
          </a>
          
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="https://privacy-sandbox-demos.dev/"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 2)"
            >
            
              
              
            
          
            Privacy Sandbox demos
          
          </a>
          
          
        </li>
        
      </ul>
    </li>
    
  </ul>
  
</nav>
          
        </devsite-footer-linkboxes>
        <devsite-footer-utility class="devsite-footer">
          
            

<div class="devsite-footer-utility nocontent">
  

  
  <nav class="devsite-footer-utility-links" aria-label="Utility links">
    
    <ul class="devsite-footer-utility-list">
      
      <li class="devsite-footer-utility-item
                 ">
        
        
        <a class="devsite-footer-utility-link gc-analytics-event"
           href="//policies.google.com/terms"
           data-category="Site-Wide Custom Events"
           data-label="Footer Terms link"
         >
          Terms
        </a>
        
      </li>
      
      <li class="devsite-footer-utility-item
                 ">
        
        
        <a class="devsite-footer-utility-link gc-analytics-event"
           href="//policies.google.com/privacy"
           data-category="Site-Wide Custom Events"
           data-label="Footer Privacy link"
         >
          Privacy
        </a>
        
      </li>
      
      <li class="devsite-footer-utility-item
                 glue-cookie-notification-bar-control">
        
        
        <a class="devsite-footer-utility-link gc-analytics-event"
           href="#"
           data-category="Site-Wide Custom Events"
           data-label="Footer Manage cookies link"
         
           aria-hidden="true"
         >
          Manage cookies
        </a>
        
      </li>
      
    </ul>
    
    
<devsite-language-selector>
  <ul role="presentation">
    
    
    <li role="presentation">
      <a role="menuitem" lang="en"
        >English</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="de"
        >Deutsch</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="es_419"
        >Español – América Latina</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="fr"
        >Français</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="id"
        >Indonesia</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="it"
        >Italiano</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="pl"
        >Polski</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="pt_br"
        >Português – Brasil</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="vi"
        >Tiếng Việt</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="tr"
        >Türkçe</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="ru"
        >Русский</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="he"
        >עברית</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="ar"
        >العربيّة</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="fa"
        >فارسی</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="hi"
        >हिंदी</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="bn"
        >বাংলা</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="th"
        >ภาษาไทย</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="zh_cn"
        >中文 – 简体</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="zh_tw"
        >中文 – 繁體</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="ja"
        >日本語</a>
    </li>
    
    <li role="presentation">
      <a role="menuitem" lang="ko"
        >한국어</a>
    </li>
    
  </ul>
</devsite-language-selector>

  </nav>
</div>
          
        </devsite-footer-utility>
        <devsite-panel>
          
        </devsite-panel>
        
      </section></section>
    <devsite-sitemask></devsite-sitemask>
    <devsite-snackbar></devsite-snackbar>
    <devsite-tooltip ></devsite-tooltip>
    <devsite-heading-link></devsite-heading-link>
    <devsite-analytics>
      
        <script type="application/json" analytics>[]</script>
<script type="application/json" tag-management>{&#34;at&#34;: &#34;False&#34;, &#34;ga4&#34;: [{&#34;id&#34;: &#34;G-4GR80KWYRS&#34;, &#34;purpose&#34;: 0}], &#34;ga4p&#34;: [{&#34;id&#34;: &#34;G-4GR80KWYRS&#34;, &#34;purpose&#34;: 0}], &#34;gtm&#34;: [{&#34;id&#34;: &#34;GTM-WPJH8HP6&#34;, &#34;purpose&#34;: 0}], &#34;parameters&#34;: {&#34;internalUser&#34;: &#34;False&#34;, &#34;language&#34;: {&#34;machineTranslated&#34;: &#34;False&#34;, &#34;requested&#34;: &#34;en&#34;, &#34;served&#34;: &#34;en&#34;}, &#34;pageType&#34;: &#34;article&#34;, &#34;projectName&#34;: &#34;Privacy Sandbox&#34;, &#34;signedIn&#34;: &#34;False&#34;, &#34;tenant&#34;: &#34;privacysandbox&#34;, &#34;recommendations&#34;: {&#34;sourcePage&#34;: &#34;&#34;, &#34;sourceType&#34;: 0, &#34;sourceRank&#34;: 0, &#34;sourceIdenticalDescriptions&#34;: 0, &#34;sourceTitleWords&#34;: 0, &#34;sourceDescriptionWords&#34;: 0, &#34;experiment&#34;: &#34;&#34;}, &#34;experiment&#34;: {&#34;ids&#34;: &#34;&#34;}}}</script>
      
    </devsite-analytics>
    
      <devsite-badger></devsite-badger>
    
    
    
    
<script nonce="ErxNbm/GlohWAO7FqniinEKaHCIk2Y">
  
  (function(d,e,v,s,i,t,E){d['GoogleDevelopersObject']=i;
    t=e.createElement(v);t.async=1;t.src=s;E=e.getElementsByTagName(v)[0];
    E.parentNode.insertBefore(t,E);})(window, document, 'script',
    'https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/privacysandbox/js/app_loader.js', '[64,"en",null,"/js/devsite_app_module.js","https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9","https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/privacysandbox","https://privacysandbox-dot-devsite-v2-prod.appspot.com",1,null,["/_pwa/privacysandbox/manifest.json","https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/images/video-placeholder.svg","https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/privacysandbox/images/favicon.png","https://www.gstatic.com/devrel-devsite/prod/vc12d84b6edb3e25e1619b575cf813e1849a1c95098b711a6c56ab3968c9a4fa9/privacysandbox/images/lockup.svg","https://fonts.googleapis.com/css?family=Roboto:300,400,400italic,500,500italic,700,700italic|Roboto+Mono:400,500,700&display=swap"],1,null,[1,6,8,12,14,17,21,25,50,52,63,70,75,76,80,87,91,92,93,97,98,100,101,102,103,104,105,107,108,109,110,112,113,117,118,120,122,124,125,126,127,129,130,131,132,133,134,135,136,138,140,141,147,148,149,151,152,156,157,158,159,161,163,164,168,169,170,179,180,182,183,186,191,193,196],"AIzaSyAP-jjEJBzmIyKR4F-3XITp8yM9T1gEEI8","AIzaSyB6xiKGDR5O3Ak2okS4rLkauxGUG7XP0hg","privacysandbox.google.com","AIzaSyAQk0fBONSGUqCNznf6Krs82Ap1-NV6J4o","AIzaSyCCxcqdrZ_7QMeLCRY20bh_SXdAYqy70KY",null,null,null,["DevPro__enable_firebase_workspaces_card","Profiles__enable_profile_collections","MiscFeatureFlags__gdp_dashboard_reskin_enabled","MiscFeatureFlags__enable_project_variables","DevPro__enable_cloud_innovators_plus","Profiles__enable_complete_playlist_endpoint","Profiles__enable_public_developer_profiles","DevPro__remove_eu_tax_intake_form","Concierge__enable_actions_menu","Profiles__enable_completecodelab_endpoint","Profiles__enable_awarding_url","Profiles__enable_dashboard_curated_recommendations","Cloud__enable_free_trial_server_call","Profiles__enable_release_notes_notifications","MiscFeatureFlags__enable_project_body_class","Profiles__enable_playlist_community_acl","Profiles__enable_completequiz_endpoint","Search__enable_ai_search_summaries_for_all","DevPro__enable_google_payments_buyflow","MiscFeatureFlags__enable_firebase_utm","DevPro__enable_code_assist","Cloud__cache_serialized_dynamic_content","Search__enable_ai_eligibility_checks","DevPro__enable_developer_subscriptions","EngEduTelemetry__enable_engedu_telemetry","CloudShell__cloud_shell_button","MiscFeatureFlags__enable_explicit_template_dependencies","Search__enable_page_map","Cloud__enable_cloudx_experiment_ids","DevPro__enable_devpro_offers","Profiles__enable_developer_profile_benefits_ui_redesign","Profiles__enable_developer_profiles_callout","Profiles__enable_page_saving","TpcFeatures__enable_unmirrored_page_left_nav","Cloud__enable_llm_concierge_chat","DevPro__enable_vertex_credit_card","Profiles__enable_join_program_group_endpoint","Cloud__enable_legacy_calculator_redirect","Concierge__enable_pushui","Search__enable_dynamic_content_confidential_banner","BookNav__enable_tenant_cache_key","Profiles__enable_callout_notifications","MiscFeatureFlags__emergency_css","DevPro__enable_google_one_card","MiscFeatureFlags__enable_view_transitions","Concierge__enable_remove_info_panel_tags","Experiments__reqs_query_experiments","Profiles__enable_recognition_badges","Profiles__enable_user_type","MiscFeatureFlags__developers_footer_image","CloudShell__cloud_code_overflow_menu","MiscFeatureFlags__enable_variable_operator_index_yaml","Profiles__enable_purchase_prompts","Search__enable_suggestions_from_borg","Cloud__enable_cloud_shell","Profiles__require_profile_eligibility_for_signin","DevPro__enable_nvidia_credits_card","DevPro__enable_enterprise","Cloud__enable_cloud_dlp_service","MiscFeatureFlags__enable_variable_operator","Cloud__enable_cloud_shell_fte_user_flow","Analytics__enable_clearcut_logging","OnSwitch__enable","DevPro__enable_embed_profile_creation","MiscFeatureFlags__enable_appearance_cookies","MiscFeatureFlags__developers_footer_dark_image","Profiles__enable_stripe_subscription_management","DevPro__enable_free_benefits","MiscFeatureFlags__enable_framebox_badge_methods","TpcFeatures__proxy_prod_host","Cloud__fast_free_trial"],null,null,"AIzaSyBLEMok-5suZ67qRPzx0qUtbnLmyT_kCVE","https://developerscontentserving-pa.clients6.google.com","AIzaSyCM4QpTRSqP5qI4Dvjt4OAScIN8sOUlO-k","https://developerscontentsearch-pa.clients6.google.com",1,null,null,"https://developerprofiles-pa.clients6.google.com",[64,"privacysandbox","Privacy Sandbox","privacysandbox.google.com",null,"privacysandbox-dot-devsite-v2-prod.appspot.com",null,null,[null,1,null,null,null,null,null,null,null,null,null,[1],null,null,null,null,null,null,[1],null,null,null,null,[1,null,1]],null,[77,null,null,null,null,null,"/images/lockup.svg","/images/privacy-sandbox-logo.svg",null,null,null,1,null,null,null,null,null,null,null,null,null,2],[],null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,[[],[1,1]],[[null,null,null,null,null,null,null,[["G-4GR80KWYRS"],null,null,[["G-4GR80KWYRS",1]]]]]],null,"pk_live_5170syrHvgGVmSx9sBrnWtA5luvk9BwnVcvIi7HizpwauFG96WedXsuXh790rtij9AmGllqPtMLfhe2RSwD6Pn38V00uBCydV4m",1,null,"https://developerscontentinsights-pa.clients6.google.com","AIzaSyCg-ZUslalsEbXMfIo9ZP8qufZgo3LSBDU","AIzaSyDxT0vkxnY_KeINtA4LSePJO-4MAZPMRsE","https://developers.clients6.google.com",null,null,"AIzaSyBQom12tzI-rybN7Sf-KfeL4nwm-Rf7PmI\n",null,"https://developerslogging.clients6.google.com"]')
  
</script>

    <devsite-a11y-announce></devsite-a11y-announce>
  </body>
</html>